import{r as o,j as e,A as I,m as y}from"./animations-CCQynVHD.js";import{u as _}from"./redux-CHwIDTp6.js";import{H as de}from"./index-DUqnRfh4.js";import{F as Q,W as ge,X as me,Y as xe,a as T,c as U,Z as pe,z as Z,y as ue,d as O,H as ye,m as D,b as be,l as E}from"./icons-1ld_-Ybk.js";import{B as he}from"./index-BjS7IIHv.js";import{C as je,a as ve,L as fe,B as Ne,p as we,c as ke,d as Re}from"./charts-SeOzVKbO.js";import"./network-htDwveLI.js";import"./firebase-UuSzqDeJ.js";const X=o.memo(({setCalculatedPosition:t,setAnalysisData:r,isCalculating:c})=>{const l=_(d=>d.theme.theme)==="dark",[a,g]=o.useState(""),[i,x]=o.useState("1"),[m,p]=o.useState(""),[u,w]=o.useState(""),[j,R]=o.useState(""),[n,$]=o.useState("long"),[k,ae]=o.useState("1"),[M,te]=o.useState("0"),[P,se]=o.useState("medium"),[L,ie]=o.useState("intraday"),[z,re]=o.useState("0"),[A,le]=o.useState(!1),f=`w-full px-3 py-2 rounded-lg border text-sm transition-all focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 ${l?"bg-gray-700/50 border-gray-600 text-white placeholder-gray-400":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400"}`,b=`block text-xs font-medium mb-1.5 ${l?"text-gray-300":"text-gray-600"}`,oe=`w-full px-3 py-2 rounded-lg border text-sm transition-all cursor-pointer ${l?"bg-gray-700/50 border-gray-600 text-white":"bg-gray-50 border-gray-200 text-gray-900"}`,ne=o.useCallback(()=>{if(!a||!m||!u)return;const d=parseFloat(a)*parseFloat(i)/100,B=Math.abs(parseFloat(m)-parseFloat(u));let v=d/B;v*=parseFloat(k);const W={low:1.2,medium:1,high:.8}[P];v*=W;const H=B*v,q=j?Math.abs(parseFloat(j)-parseFloat(m))*v:0,S=H>0?q/H:0,G=(parseFloat(z)+parseFloat(i))/100,ce={positionSize:Math.floor(v*parseFloat(m)),quantity:Math.floor(v),totalValue:v*parseFloat(m),maxRisk:d,stopLoss:parseFloat(u),targetProfit:q,riskRewardRatio:S,leveragedValue:v*parseFloat(m)*parseFloat(k)},F={riskRewardRatio:S.toFixed(2),portfolioHeat:G.toFixed(2),potentialLoss:H.toFixed(2),potentialGain:q.toFixed(2),volatilityImpact:((1-W)*100).toFixed(1),correlationRisk:parseFloat(M)>30?"High":"Moderate",timeFrameRisk:L==="intraday"?"Lower":"Higher",suggestions:[]};S<2&&S>0&&F.suggestions.push("Consider a better entry point for improved R:R ratio"),G>.5&&F.suggestions.push("High portfolio heat - consider reducing position size"),parseFloat(k)>2&&F.suggestions.push("High leverage - monitor position closely"),t(ce),r(F)},[a,i,m,u,j,k,P,M,z,L,t,r]),V=a&&m&&u;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex rounded-lg overflow-hidden border ${isDark ? 'border-gray-600' : 'border-gray-200'}",children:[e.jsxs("button",{onClick:()=>$("long"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-sm font-medium transition-all ${n==="long"?"bg-green-500 text-white":l?"bg-gray-700 text-gray-400 hover:bg-gray-600":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[e.jsx(Q,{className:"w-4 h-4"}),"Long"]}),e.jsxs("button",{onClick:()=>$("short"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-sm font-medium transition-all ${n==="short"?"bg-red-500 text-white":l?"bg-gray-700 text-gray-400 hover:bg-gray-600":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[e.jsx(ge,{className:"w-4 h-4"}),"Short"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:b,children:"Account Size (₹)"}),e.jsx("input",{type:"number",value:a,onChange:d=>g(d.target.value),className:f,placeholder:"e.g. 100000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:b,children:"Risk Per Trade (%)"}),e.jsx("div",{className:"flex gap-2",children:["0.5","1","2","3"].map(d=>e.jsxs("button",{onClick:()=>x(d),className:`flex-1 py-1.5 text-xs font-medium rounded-lg transition-all ${i===d?"bg-blue-500 text-white":l?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[d,"%"]},d))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:b,children:"Entry (₹)"}),e.jsx("input",{type:"number",value:m,onChange:d=>p(d.target.value),className:f,placeholder:"Entry"})]}),e.jsxs("div",{children:[e.jsx("label",{className:b,children:"Stop Loss (₹)"}),e.jsx("input",{type:"number",value:u,onChange:d=>w(d.target.value),className:f,placeholder:"SL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:b,children:"Target (₹)"}),e.jsx("input",{type:"number",value:j,onChange:d=>R(d.target.value),className:f,placeholder:"Target price (optional)"})]})]}),e.jsxs("button",{onClick:()=>le(!A),className:`w-full flex items-center justify-between py-2 px-3 rounded-lg text-sm font-medium transition-all ${l?"bg-gray-700/50 text-gray-300 hover:bg-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx("span",{children:"Advanced Options"}),A?e.jsx(me,{className:"w-4 h-4"}):e.jsx(xe,{className:"w-4 h-4"})]}),e.jsx(I,{children:A&&e.jsx(y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:b,children:"Leverage"}),e.jsx("input",{type:"number",value:k,onChange:d=>ae(d.target.value),className:f,placeholder:"1x"})]}),e.jsxs("div",{children:[e.jsx("label",{className:b,children:"Volatility"}),e.jsxs("select",{value:P,onChange:d=>se(d.target.value),className:oe,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:b,children:"Time Frame"}),e.jsx("div",{className:"flex gap-2",children:["intraday","swing","positional"].map(d=>e.jsx("button",{onClick:()=>ie(d),className:`flex-1 py-1.5 text-xs font-medium rounded-lg capitalize transition-all ${L===d?"bg-blue-500 text-white":l?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:d},d))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:b,children:"Correlation %"}),e.jsx("input",{type:"number",value:M,onChange:d=>te(d.target.value),className:f,placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:b,children:"Portfolio Heat %"}),e.jsx("input",{type:"number",value:z,onChange:d=>re(d.target.value),className:f,placeholder:"0"})]})]})]})})}),e.jsx("button",{onClick:ne,disabled:!V||c,className:`w-full py-2.5 px-4 rounded-xl font-semibold text-sm transition-all ${V&&!c?"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg shadow-blue-500/25":l?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:c?"Calculating...":"Calculate Position"})]})});X.displayName="PositionCalculator";const $e=(t,r)=>{const{price:c,stopLoss:s,_target:l,volatility:a,volume:g}=r,i=a==="high"?2:a==="medium"?1.5:1,x=Math.abs(c-s)*i,m=g<1e5?"high":g<5e5?"medium":"low",p=t.quantity*c/g;return{volatilityRisk:x/c,liquidityRisk:m,positionImpact:p,slippageEstimate:Se(p,m)}},Se=(t,r)=>{const c=t*100,s={high:2,medium:1.5,low:1}[r];return c*s},Fe=(t,r,c=1e3)=>{const s=[],{price:l,volatility:a,target:g,stopLoss:i}=r,x=a==="high"?.02:a==="medium"?.015:.01;for(let m=0;m<c;m++){let p=l,u=0;for(;p>i&&p<g&&u<20;){const w=(g-l)/(l*100),j=(Math.random()-.5)*x;p*=1+j+w,u++}s.push({finalPrice:p,days:u,outcome:p>=g?"win":"loss"})}return Ce(s)},Ce=t=>{const c=t.filter(l=>l.outcome==="win").length/t.length*100,s=t.reduce((l,a)=>l+a.days,0)/t.length;return{winProbability:c.toFixed(2),averageDaysToOutcome:s.toFixed(1),confidenceScore:Me(c,s)}},Me=(t,r)=>{const c=t/100,s=Math.max(0,1-r/20);return(c*.7+s*.3)*100},Pe=(t,r,c)=>{const s=[],{riskRewardRatio:l,portfolioHeat:a,volatilityImpact:g}=r,{volatility:i,trend:x,volume:m}=c;return l<1.5&&s.push({type:"warning",message:"Risk:Reward ratio is below recommended minimum of 1.5:1",action:"Consider adjusting entry price or target to improve R:R ratio"}),a>.4&&s.push({type:"danger",message:"High portfolio heat detected",action:"Reduce position size or hedge existing positions"}),i==="high"&&g>15&&s.push({type:"info",message:"High market volatility detected",action:"Consider using options strategies or scaling in gradually"}),m<t.quantity*100&&s.push({type:"warning",message:"Position size may impact market liquidity",action:"Consider breaking up the order or using TWAP/VWAP"}),x==="weak"&&t.type==="long"&&s.push({type:"info",message:"Weak market trend for long position",action:"Consider waiting for trend confirmation or reducing size"}),s};je.register(ve,fe,Ne,we,ke,Re);const Y=o.memo(({calculatedPosition:t,analysisData:r={},theme:c})=>{var R;const[s,l]=o.useState("overview"),a=c==="dark",g=o.useMemo(()=>r||{},[r]),{simulationResults:i,riskMetrics:x,tradingSuggestions:m,marketData:p}=o.useMemo(()=>{const n={price:t.entryPrice,stopLoss:t.stopLoss,target:t.targetPrice,volatility:g.volatilityLevel||"medium",volume:5e5};return{marketData:n,simulationResults:Fe(t,n),riskMetrics:$e(t,n),tradingSuggestions:Pe(t,g,n)}},[t,g]),u=o.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:a?"#1f2937":"#ffffff",titleColor:a?"#fff":"#111",bodyColor:a?"#9ca3af":"#666",borderColor:a?"#374151":"#e5e7eb",borderWidth:1,callbacks:{label:n=>typeof n.raw=="number"?`₹${n.raw.toFixed(2)}`:`${n.raw}%`}}},scales:{y:{beginAtZero:!0,grid:{color:a?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"},ticks:{color:a?"#9ca3af":"#6b7280"}},x:{grid:{display:!1},ticks:{color:a?"#9ca3af":"#6b7280",font:{size:10}}}}}),[a]),w=o.useMemo(()=>({labels:["Position","Risk","Gain","Loss"],datasets:[{data:[t.totalValue||0,t.riskAmount||0,parseFloat(g.potentialGain)||0,parseFloat(g.potentialLoss)||0],backgroundColor:["rgba(59,130,246,0.7)","rgba(239,68,68,0.7)","rgba(34,197,94,0.7)","rgba(249,115,22,0.7)"],borderRadius:6}]}),[t,g]),j=[{id:"overview",label:"Overview",icon:T},{id:"simulation",label:"Monte Carlo",icon:U},{id:"suggestions",label:"Insights",icon:pe}];return e.jsxs("div",{className:`rounded-2xl border backdrop-blur-sm ${a?"bg-gray-800/50 border-gray-700":"bg-white/80 border-gray-200 shadow-lg"}`,children:[e.jsxs("div",{className:`px-5 py-3 border-b flex items-center gap-4 ${a?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(T,{className:`w-5 h-5 ${a?"text-blue-400":"text-blue-600"}`}),"Risk Analysis"]}),e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"flex rounded-lg overflow-hidden border ${isDark ? 'border-gray-600' : 'border-gray-200'}",children:j.map(n=>e.jsxs("button",{onClick:()=>l(n.id),className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium transition-all ${s===n.id?"bg-blue-500 text-white":a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(n.icon,{className:"w-3.5 h-3.5"}),n.label]},n.id))})]}),e.jsx("div",{className:"p-5",children:e.jsxs(I,{mode:"wait",children:[s==="overview"&&e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-5",children:[{label:"Position Size",value:`${t.quantity||0} units`},{label:"Risk:Reward",value:g.riskRewardRatio},{label:"Portfolio Heat",value:`${g.portfolioHeat}%`},{label:"Vol. Impact",value:`${g.volatilityImpact}%`}].map(n=>e.jsxs("div",{className:`p-3 rounded-xl ${a?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-xs ${a?"text-gray-400":"text-gray-500"}`,children:n.label}),e.jsx("p",{className:"text-lg font-bold",children:n.value})]},n.label))}),e.jsx("div",{className:"h-48 mb-5",children:e.jsx(he,{data:w,options:u})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl ${a?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Market Risk"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx(h,{label:"Volatility Risk",value:`${(x.volatilityRisk*100).toFixed(1)}%`,isDark:a}),e.jsx(h,{label:"Liquidity Risk",value:x.liquidityRisk,status:x.liquidityRisk,isDark:a}),e.jsx(h,{label:"Position Impact",value:`${(x.positionImpact*100).toFixed(2)}%`,isDark:a}),e.jsx(h,{label:"Est. Slippage",value:`${x.slippageEstimate.toFixed(2)}%`,isDark:a})]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${a?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Position Risk"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx(h,{label:"Correlation Risk",value:g.correlationRisk,isDark:a}),e.jsx(h,{label:"Time Frame Risk",value:g.timeFrameRisk,isDark:a}),e.jsx(h,{label:"Market Condition",value:p.volatility,isDark:a}),e.jsx(h,{label:"Risk Score",value:`${((R=i.confidenceScore)==null?void 0:R.toFixed(1))||0}%`,status:i.confidenceScore>70?"low":i.confidenceScore>50?"medium":"high",isDark:a})]})]})]})]},"overview"),s==="simulation"&&e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-5",children:[e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{label:"Win Probability",value:`${i.winProbability}%`,color:"green"},{label:"Avg Days",value:`${i.averageDaysToOutcome} days`,color:"blue"},{label:"Confidence",value:`${i.confidenceScore}%`,color:"purple"}].map(n=>e.jsxs("div",{className:`p-4 rounded-xl text-center ${a?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-xs mb-1 ${a?"text-gray-400":"text-gray-500"}`,children:n.label}),e.jsx("p",{className:`text-xl font-bold text-${n.color}-500`,children:n.value})]},n.label))}),e.jsxs("div",{className:`p-4 rounded-xl ${a?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Simulation Details"}),e.jsxs("ul",{className:`text-xs space-y-1 ${a?"text-gray-400":"text-gray-500"}`,children:[e.jsxs("li",{children:["• Based on ",p.volatility," market volatility"]}),e.jsx("li",{children:"• 1000 Monte Carlo iterations"}),e.jsx("li",{children:"• Maximum 20-day simulation period"}),e.jsx("li",{children:"• Includes market drift and random walk"})]})]})]},"simulation"),s==="suggestions"&&e.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-3",children:m.length>0?m.map((n,$)=>e.jsx("div",{className:`p-4 rounded-xl border-l-4 ${n.type==="danger"?"border-red-500":n.type==="warning"?"border-amber-500":"border-blue-500"} ${a?"bg-gray-700/50":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[n.type==="danger"?e.jsx(Z,{className:"w-5 h-5 text-red-500 flex-shrink-0"}):n.type==="warning"?e.jsx(ue,{className:"w-5 h-5 text-amber-500 flex-shrink-0"}):e.jsx(O,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:n.message}),e.jsx("p",{className:`text-xs mt-1 ${a?"text-gray-400":"text-gray-500"}`,children:n.action})]})]})},$)):e.jsxs("div",{className:`p-6 text-center rounded-xl ${a?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsx(O,{className:"w-10 h-10 mx-auto text-green-500 mb-2"}),e.jsx("p",{className:"font-medium",children:"Position looks good!"}),e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-500"}`,children:"No significant risk warnings"})]})},"suggestions")]})})]})});Y.displayName="RiskAnalysis";const h=o.memo(({label:t,value:r,status:c,isDark:s})=>{const l={high:"text-red-500",medium:"text-amber-500",low:"text-green-500"};return e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-500",children:t}),e.jsx("span",{className:c&&l[c]||"",children:r})]})});h.displayName="MetricRow";const J=o.memo(({calculatedPosition:t,analysisData:r={},theme:c})=>{const s=c==="dark",l=o.useMemo(()=>r||{},[r]),a=o.useMemo(()=>{const i=t.quantity||0,x=t.riskAmount||0,m=parseFloat(l.potentialGain)||0,p=parseFloat(l.volatilityImpact)||0;return{conservative:{quantity:Math.floor(i*.75),risk:(x*.75).toFixed(2),potential:(m*.75).toFixed(2)},calculated:{quantity:i,risk:x.toFixed(2),potential:m.toFixed(2)},aggressive:{quantity:Math.floor(i*1.25),risk:(x*1.25).toFixed(2),potential:(m*1.25).toFixed(2)},scaled:{quantity:Math.floor(i*(1-p/100)),risk:(x*(1-p/100)).toFixed(2),potential:(m*(1-p/100)).toFixed(2)}}},[t,l]),g=[{type:"conservative",label:"Conservative",icon:ye,color:"green",badge:"Lower Risk",...a.conservative},{type:"calculated",label:"Calculated",icon:D,color:"blue",badge:"Balanced",isMain:!0,...a.calculated},{type:"aggressive",label:"Aggressive",icon:be,color:"red",badge:"Higher Risk",...a.aggressive}];return e.jsxs("div",{className:`rounded-2xl border backdrop-blur-sm ${s?"bg-gray-800/50 border-gray-700":"bg-white/80 border-gray-200 shadow-lg"}`,children:[e.jsxs("div",{className:`px-5 py-3 border-b flex items-center gap-2 ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx(D,{className:`w-5 h-5 ${s?"text-purple-400":"text-purple-600"}`}),e.jsx("h3",{className:"font-semibold",children:"Alternative Positions"})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:g.map((i,x)=>e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1},className:`relative p-4 rounded-xl ${i.isMain?"ring-2 ring-blue-500 "+(s?"bg-blue-500/10":"bg-blue-50"):s?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i.icon,{className:`w-4 h-4 text-${i.color}-500`}),e.jsx("span",{className:"font-medium text-sm",children:i.label})]}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${i.color==="green"?"bg-green-500/20 text-green-500":i.color==="blue"?"bg-blue-500/20 text-blue-500":"bg-red-500/20 text-red-500"}`,children:i.badge})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{label:"Quantity",value:i.quantity,isDark:s}),e.jsx(N,{label:"Risk",value:`₹${i.risk}`,isDark:s}),e.jsx(N,{label:"Potential",value:`₹${i.potential}`,isDark:s,color:"green"})]})]},i.type))}),e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:`p-4 rounded-xl ${s?"bg-purple-500/10 border border-purple-500/30":"bg-purple-50 border border-purple-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"font-medium text-sm",children:"Volatility Adjusted"})]}),e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full font-medium bg-purple-500/20 text-purple-500",children:"Market Adapted"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(N,{label:"Quantity",value:a.scaled.quantity,isDark:s}),e.jsx(N,{label:"Risk",value:`₹${a.scaled.risk}`,isDark:s}),e.jsx(N,{label:"Potential",value:`₹${a.scaled.potential}`,isDark:s,color:"green"})]}),e.jsxs("p",{className:`text-xs mt-2 ${s?"text-gray-400":"text-gray-500"}`,children:["* Adjusted for current market volatility of ",l.volatilityImpact||0,"%"]})]})]})]})});J.displayName="SuggestedPositions";const N=o.memo(({label:t,value:r,isDark:c,color:s})=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:c?"text-gray-400":"text-gray-500",children:t}),e.jsx("span",{className:`font-semibold ${s==="green"?"text-green-500":""}`,children:r})]}));N.displayName="MetricLine";const Ie=()=>{const t=_(p=>p.theme.theme),[r,c]=o.useState(null),[s,l]=o.useState(null),[a,g]=o.useState(!1),i=t==="dark";o.useEffect(()=>{document.title="DeepStrike | Position Sizing Calculator"},[]);const x=o.useMemo(()=>r?{positionSize:r.positionSize||0,maxRisk:r.maxRisk||0,stopLoss:r.stopLoss||0,targetProfit:r.targetProfit||0,riskRewardRatio:r.riskRewardRatio||0}:null,[r]),m=o.useCallback((p,u)=>{g(!0),setTimeout(()=>{c(p),l(u),g(!1)},300)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx("title",{children:"Position Sizing | DeepStrike"}),e.jsx("meta",{name:"description",content:"Professional position sizing calculator with risk management tools"})]}),e.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${i?"text-white":"text-gray-900"}`,children:[e.jsx("div",{className:`sticky top-0 z-10 backdrop-blur-md border-b ${i?"bg-gray-900/90 border-gray-800":"bg-white/90 border-gray-200"}`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${i?"bg-blue-500/20":"bg-blue-100"}`,children:e.jsx(E,{className:`w-6 h-6 ${i?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Position Sizing"}),e.jsx("p",{className:`text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"Risk-based position calculator"})]})]}),x&&e.jsxs(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"hidden md:flex items-center gap-4",children:[e.jsx(C,{label:"Position",value:`₹${x.positionSize.toLocaleString()}`,icon:D,color:"blue",isDark:i}),e.jsx(C,{label:"Risk",value:`₹${x.maxRisk.toLocaleString()}`,icon:Z,color:"red",isDark:i}),e.jsx(C,{label:"R:R",value:`1:${x.riskRewardRatio.toFixed(1)}`,icon:Q,color:"green",isDark:i})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`p-5 rounded-2xl border backdrop-blur-sm ${i?"bg-gray-800/50 border-gray-700":"bg-white/80 border-gray-200 shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(E,{className:`w-5 h-5 ${i?"text-blue-400":"text-blue-600"}`}),e.jsx("h2",{className:"font-semibold",children:"Calculator"})]}),e.jsx(X,{setCalculatedPosition:p=>m(p,s),setAnalysisData:l,isCalculating:a})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(I,{mode:"wait",children:a?e.jsx(K,{isDark:i}):r?e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsx(Y,{calculatedPosition:r,analysisData:s,theme:t}),e.jsx(J,{calculatedPosition:r,analysisData:s,theme:t})]},"results"):e.jsx(ee,{isDark:i})})})]})})]})]})},C=o.memo(({label:t,value:r,icon:c,color:s,isDark:l})=>{const a={blue:l?"text-blue-400 bg-blue-500/10":"text-blue-600 bg-blue-50",red:l?"text-red-400 bg-red-500/10":"text-red-600 bg-red-50",green:l?"text-green-400 bg-green-500/10":"text-green-600 bg-green-50"};return e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg ${a[s]}`,children:[e.jsx(c,{className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase opacity-70",children:t}),e.jsx("div",{className:"text-sm font-bold",children:r})]})]})});C.displayName="MetricBadge";const K=o.memo(({isDark:t})=>e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`flex flex-col justify-center items-center h-80 rounded-2xl border backdrop-blur-sm ${t?"bg-gray-800/50 border-gray-700":"bg-white/80 border-gray-200"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-3 border-blue-200 border-t-blue-600"}),e.jsx(E,{className:"absolute inset-0 m-auto w-5 h-5 text-blue-600"})]}),e.jsx("p",{className:`mt-4 text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Calculating position..."})]},"loading"));K.displayName="LoadingState";const ee=o.memo(({isDark:t})=>e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`flex flex-col justify-center items-center h-80 rounded-2xl border backdrop-blur-sm ${t?"bg-gray-800/50 border-gray-700":"bg-white/80 border-gray-200"}`,children:[e.jsx("div",{className:`p-4 rounded-full mb-4 ${t?"bg-gray-700":"bg-gray-100"}`,children:e.jsx(T,{className:`w-8 h-8 ${t?"text-gray-400":"text-gray-500"}`})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ready to Calculate"}),e.jsx("p",{className:`text-sm text-center max-w-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Enter your account balance, risk percentage, and trade details to calculate optimal position size"})]},"empty"));ee.displayName="EmptyState";export{Ie as default};
//# sourceMappingURL=PositionSizing-CDJIJfrd.js.map
