var Ch=Object.defineProperty;var Th=(s,t,e)=>t in s?Ch(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var C=(s,t,e)=>Th(s,typeof t!="symbol"?t+"":t,e);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function He(s){return s+.5|0}const Pt=(s,t,e)=>Math.max(Math.min(s,e),t);function Se(s){return Pt(He(s*2.55),0,255)}function Dt(s){return Pt(He(s*255),0,255)}function vt(s){return Pt(He(s/2.55)/100,0,1)}function Ks(s){return Pt(He(s*100),0,100)}const st={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xs=[..."0123456789ABCDEF"],Oh=s=>xs[s&15],Dh=s=>xs[(s&240)>>4]+xs[s&15],Ue=s=>(s&240)>>4===(s&15),zh=s=>Ue(s.r)&&Ue(s.g)&&Ue(s.b)&&Ue(s.a);function Eh(s){var t=s.length,e;return s[0]==="#"&&(t===4||t===5?e={r:255&st[s[1]]*17,g:255&st[s[2]]*17,b:255&st[s[3]]*17,a:t===5?st[s[4]]*17:255}:(t===7||t===9)&&(e={r:st[s[1]]<<4|st[s[2]],g:st[s[3]]<<4|st[s[4]],b:st[s[5]]<<4|st[s[6]],a:t===9?st[s[7]]<<4|st[s[8]]:255})),e}const Rh=(s,t)=>s<255?t(s):"";function Lh(s){var t=zh(s)?Oh:Dh;return s?"#"+t(s.r)+t(s.g)+t(s.b)+Rh(s.a,t):void 0}const Fh=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gr(s,t,e){const i=t*Math.min(e,1-e),n=(o,r=(o+s/30)%12)=>e-i*Math.max(Math.min(r-3,9-r,1),-1);return[n(0),n(8),n(4)]}function Ih(s,t,e){const i=(n,o=(n+s/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function Vh(s,t,e){const i=gr(s,1,.5);let n;for(t+e>1&&(n=1/(t+e),t*=n,e*=n),n=0;n<3;n++)i[n]*=1-t-e,i[n]+=t;return i}function Ah(s,t,e,i,n){return s===n?(t-e)/i+(t<e?6:0):t===n?(e-s)/i+2:(s-t)/i+4}function Ls(s){const e=s.r/255,i=s.g/255,n=s.b/255,o=Math.max(e,i,n),r=Math.min(e,i,n),h=(o+r)/2;let a,l,c;return o!==r&&(c=o-r,l=h>.5?c/(2-o-r):c/(o+r),a=Ah(e,i,n,c,o),a=a*60+.5),[a|0,l||0,h]}function Fs(s,t,e,i){return(Array.isArray(t)?s(t[0],t[1],t[2]):s(t,e,i)).map(Dt)}function Is(s,t,e){return Fs(gr,s,t,e)}function Nh(s,t,e){return Fs(Vh,s,t,e)}function Bh(s,t,e){return Fs(Ih,s,t,e)}function pr(s){return(s%360+360)%360}function Wh(s){const t=Fh.exec(s);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Se(+t[5]):Dt(+t[5]));const n=pr(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?i=Nh(n,o,r):t[1]==="hsv"?i=Bh(n,o,r):i=Is(n,o,r),{r:i[0],g:i[1],b:i[2],a:e}}function Yh(s,t){var e=Ls(s);e[0]=pr(e[0]+t),e=Is(e),s.r=e[0],s.g=e[1],s.b=e[2]}function Hh(s){if(!s)return;const t=Ls(s),e=t[0],i=Ks(t[1]),n=Ks(t[2]);return s.a<255?`hsla(${e}, ${i}%, ${n}%, ${vt(s.a)})`:`hsl(${e}, ${i}%, ${n}%)`}const Zs={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},tn={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function jh(){const s={},t=Object.keys(tn),e=Object.keys(Zs);let i,n,o,r,h;for(i=0;i<t.length;i++){for(r=h=t[i],n=0;n<e.length;n++)o=e[n],h=h.replace(o,Zs[o]);o=parseInt(tn[r],16),s[h]=[o>>16&255,o>>8&255,o&255]}return s}let qe;function $h(s){qe||(qe=jh(),qe.transparent=[0,0,0,0]);const t=qe[s.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Uh=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function qh(s){const t=Uh.exec(s);let e=255,i,n,o;if(t){if(t[7]!==i){const r=+t[7];e=t[8]?Se(r):Pt(r*255,0,255)}return i=+t[1],n=+t[3],o=+t[5],i=255&(t[2]?Se(i):Pt(i,0,255)),n=255&(t[4]?Se(n):Pt(n,0,255)),o=255&(t[6]?Se(o):Pt(o,0,255)),{r:i,g:n,b:o,a:e}}}function Qh(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${vt(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const Wi=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,Kt=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function Gh(s,t,e){const i=Kt(vt(s.r)),n=Kt(vt(s.g)),o=Kt(vt(s.b));return{r:Dt(Wi(i+e*(Kt(vt(t.r))-i))),g:Dt(Wi(n+e*(Kt(vt(t.g))-n))),b:Dt(Wi(o+e*(Kt(vt(t.b))-o))),a:s.a+e*(t.a-s.a)}}function Qe(s,t,e){if(s){let i=Ls(s);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Is(i),s.r=i[0],s.g=i[1],s.b=i[2]}}function mr(s,t){return s&&Object.assign(t||{},s)}function en(s){var t={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(t={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(t.a=Dt(s[3]))):(t=mr(s,{r:0,g:0,b:0,a:1}),t.a=Dt(t.a)),t}function Jh(s){return s.charAt(0)==="r"?qh(s):Wh(s)}class Fe{constructor(t){if(t instanceof Fe)return t;const e=typeof t;let i;e==="object"?i=en(t):e==="string"&&(i=Eh(t)||$h(t)||Jh(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=mr(this._rgb);return t&&(t.a=vt(t.a)),t}set rgb(t){this._rgb=en(t)}rgbString(){return this._valid?Qh(this._rgb):void 0}hexString(){return this._valid?Lh(this._rgb):void 0}hslString(){return this._valid?Hh(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,n=t.rgb;let o;const r=e===o?.5:e,h=2*r-1,a=i.a-n.a,l=((h*a===-1?h:(h+a)/(1+h*a))+1)/2;o=1-l,i.r=255&l*i.r+o*n.r+.5,i.g=255&l*i.g+o*n.g+.5,i.b=255&l*i.b+o*n.b+.5,i.a=r*i.a+(1-r)*n.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=Gh(this._rgb,t._rgb,e)),this}clone(){return new Fe(this.rgb)}alpha(t){return this._rgb.a=Dt(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=He(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Qe(this._rgb,2,t),this}darken(t){return Qe(this._rgb,2,-t),this}saturate(t){return Qe(this._rgb,1,t),this}desaturate(t){return Qe(this._rgb,1,-t),this}rotate(t){return Yh(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function mt(){}const Xh=(()=>{let s=0;return()=>s++})();function R(s){return s==null}function W(s){if(Array.isArray&&Array.isArray(s))return!0;const t=Object.prototype.toString.call(s);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function D(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function G(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function lt(s,t){return G(s)?s:t}function O(s,t){return typeof s>"u"?t:s}const Kh=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*t:+s;function V(s,t,e){if(s&&typeof s.call=="function")return s.apply(e,t)}function L(s,t,e,i){let n,o,r;if(W(s))for(o=s.length,n=0;n<o;n++)t.call(e,s[n],n);else if(D(s))for(r=Object.keys(s),o=r.length,n=0;n<o;n++)t.call(e,s[r[n]],r[n])}function bi(s,t){let e,i,n,o;if(!s||!t||s.length!==t.length)return!1;for(e=0,i=s.length;e<i;++e)if(n=s[e],o=t[e],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function _i(s){if(W(s))return s.map(_i);if(D(s)){const t=Object.create(null),e=Object.keys(s),i=e.length;let n=0;for(;n<i;++n)t[e[n]]=_i(s[e[n]]);return t}return s}function br(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function Zh(s,t,e,i){if(!br(s))return;const n=t[s],o=e[s];D(n)&&D(o)?Ie(n,o,i):t[s]=_i(o)}function Ie(s,t,e){const i=W(t)?t:[t],n=i.length;if(!D(s))return s;e=e||{};const o=e.merger||Zh;let r;for(let h=0;h<n;++h){if(r=i[h],!D(r))continue;const a=Object.keys(r);for(let l=0,c=a.length;l<c;++l)o(a[l],s,r,e)}return s}function Ce(s,t){return Ie(s,t,{merger:ta})}function ta(s,t,e){if(!br(s))return;const i=t[s],n=e[s];D(i)&&D(n)?Ce(i,n):Object.prototype.hasOwnProperty.call(t,s)||(t[s]=_i(n))}const sn={"":s=>s,x:s=>s.x,y:s=>s.y};function ea(s){const t=s.split("."),e=[];let i="";for(const n of t)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function ia(s){const t=ea(s);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function re(s,t){return(sn[t]||(sn[t]=ia(t)))(s)}function Vs(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Ve=s=>typeof s<"u",zt=s=>typeof s=="function",nn=(s,t)=>{if(s.size!==t.size)return!1;for(const e of s)if(!t.has(e))return!1;return!0};function sa(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const j=Math.PI,ht=2*j,na=ht+j,vi=Number.POSITIVE_INFINITY,oa=j/180,rt=j/2,Lt=j/4,on=j*2/3,_r=Math.log10,gt=Math.sign;function Te(s,t,e){return Math.abs(s-t)<e}function rn(s){const t=Math.round(s);s=Te(s,t,s/1e3)?t:s;const e=Math.pow(10,Math.floor(_r(s))),i=s/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function ra(s){const t=[],e=Math.sqrt(s);let i;for(i=1;i<e;i++)s%i===0&&(t.push(i),t.push(s/i));return e===(e|0)&&t.push(e),t.sort((n,o)=>n-o).pop(),t}function ha(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function Ae(s){return!ha(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function aa(s,t){const e=Math.round(s);return e-t<=s&&e+t>=s}function la(s,t,e){let i,n,o;for(i=0,n=s.length;i<n;i++)o=s[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Wt(s){return s*(j/180)}function ca(s){return s*(180/j)}function hn(s){if(!G(s))return;let t=1,e=0;for(;Math.round(s*t)/t!==s;)t*=10,e++;return e}function ua(s,t){const e=t.x-s.x,i=t.y-s.y,n=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*j&&(o+=ht),{angle:o,distance:n}}function ys(s,t){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function da(s,t){return(s-t+na)%ht-j}function ft(s){return(s%ht+ht)%ht}function vr(s,t,e,i){const n=ft(s),o=ft(t),r=ft(e),h=ft(o-n),a=ft(r-n),l=ft(n-o),c=ft(n-r);return n===o||n===r||i&&o===r||h>a&&l<c}function et(s,t,e){return Math.max(t,Math.min(e,s))}function fa(s){return et(s,-32768,32767)}function kt(s,t,e,i=1e-6){return s>=Math.min(t,e)-i&&s<=Math.max(t,e)+i}function As(s,t,e){e=e||(r=>s[r]<t);let i=s.length-1,n=0,o;for(;i-n>1;)o=n+i>>1,e(o)?n=o:i=o;return{lo:n,hi:i}}const Yt=(s,t,e,i)=>As(s,e,i?n=>{const o=s[n][t];return o<e||o===e&&s[n+1][t]===e}:n=>s[n][t]<e),ga=(s,t,e)=>As(s,e,i=>s[i][t]>=e);function pa(s,t,e){let i=0,n=s.length;for(;i<n&&s[i]<t;)i++;for(;n>i&&s[n-1]>e;)n--;return i>0||n<s.length?s.slice(i,n):s}const xr=["push","pop","shift","splice","unshift"];function ma(s,t){if(s._chartjs){s._chartjs.listeners.push(t);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),xr.forEach(e=>{const i="_onData"+Vs(e),n=s[e];Object.defineProperty(s,e,{configurable:!0,enumerable:!1,value(...o){const r=n.apply(this,o);return s._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...o)}),r}})})}function an(s,t){const e=s._chartjs;if(!e)return;const i=e.listeners,n=i.indexOf(t);n!==-1&&i.splice(n,1),!(i.length>0)&&(xr.forEach(o=>{delete s[o]}),delete s._chartjs)}function yr(s){const t=new Set(s);return t.size===s.length?s:Array.from(t)}const wr=(function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame})();function Mr(s,t){let e=[],i=!1;return function(...n){e=n,i||(i=!0,wr.call(window,()=>{i=!1,s.apply(t,e)}))}}function ba(s,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(s,t,i)):s.apply(this,i),t}}const Ns=s=>s==="start"?"left":s==="end"?"right":"center",q=(s,t,e)=>s==="start"?t:s==="end"?e:(t+e)/2,_a=(s,t,e,i)=>s===(i?"left":"right")?e:s==="center"?(t+e)/2:t;function va(s,t,e){const i=t.length;let n=0,o=i;if(s._sorted){const{iScale:r,vScale:h,_parsed:a}=s,l=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,c=r.axis,{min:u,max:d,minDefined:f,maxDefined:g}=r.getUserBounds();if(f){if(n=Math.min(Yt(a,c,u).lo,e?i:Yt(t,c,r.getPixelForValue(u)).lo),l){const p=a.slice(0,n+1).reverse().findIndex(m=>!R(m[h.axis]));n-=Math.max(0,p)}n=et(n,0,i-1)}if(g){let p=Math.max(Yt(a,r.axis,d,!0).hi+1,e?0:Yt(t,c,r.getPixelForValue(d),!0).hi+1);if(l){const m=a.slice(p-1).findIndex(b=>!R(b[h.axis]));p+=Math.max(0,m)}o=et(p,n,i)-n}else o=i-n}return{start:n,count:o}}function xa(s){const{xScale:t,yScale:e,_scaleRanges:i}=s,n={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return s._scaleRanges=n,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,n),o}const Ge=s=>s===0||s===1,ln=(s,t,e)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-t)*ht/e)),cn=(s,t,e)=>Math.pow(2,-10*s)*Math.sin((s-t)*ht/e)+1,Oe={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*rt)+1,easeOutSine:s=>Math.sin(s*rt),easeInOutSine:s=>-.5*(Math.cos(j*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>Ge(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>Ge(s)?s:ln(s,.075,.3),easeOutElastic:s=>Ge(s)?s:cn(s,.075,.3),easeInOutElastic(s){return Ge(s)?s:s<.5?.5*ln(s*2,.1125,.45):.5+.5*cn(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let t=1.70158;return(s/=.5)<1?.5*(s*s*(((t*=1.525)+1)*s-t)):.5*((s-=2)*s*(((t*=1.525)+1)*s+t)+2)},easeInBounce:s=>1-Oe.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?Oe.easeInBounce(s*2)*.5:Oe.easeOutBounce(s*2-1)*.5+.5};function Bs(s){if(s&&typeof s=="object"){const t=s.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function un(s){return Bs(s)?s:new Fe(s)}function Yi(s){return Bs(s)?s:new Fe(s).saturate(.5).darken(.1).hexString()}const ya=["x","y","borderWidth","radius","tension"],wa=["color","borderColor","backgroundColor"];function Ma(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),s.set("animations",{colors:{type:"color",properties:wa},numbers:{type:"number",properties:ya}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Sa(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const dn=new Map;function Pa(s,t){t=t||{};const e=s+JSON.stringify(t);let i=dn.get(e);return i||(i=new Intl.NumberFormat(s,t),dn.set(e,i)),i}function Sr(s,t,e){return Pa(t,e).format(s)}const ka={values(s){return W(s)?s:""+s},numeric(s,t,e){if(s===0)return"0";const i=this.chart.options.locale;let n,o=s;if(e.length>1){const l=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(l<1e-4||l>1e15)&&(n="scientific"),o=Ca(s,e)}const r=_r(Math.abs(o)),h=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),a={notation:n,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(a,this.options.ticks.format),Sr(s,i,a)}};function Ca(s,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&s!==Math.floor(s)&&(e=s-Math.floor(s)),e}var Pr={formatters:ka};function Ta(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Pr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ut=Object.create(null),ws=Object.create(null);function De(s,t){if(!t)return s;const e=t.split(".");for(let i=0,n=e.length;i<n;++i){const o=e[i];s=s[o]||(s[o]=Object.create(null))}return s}function Hi(s,t,e){return typeof t=="string"?Ie(De(s,t),e):Ie(De(s,""),t)}class Oa{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>Yi(n.backgroundColor),this.hoverBorderColor=(i,n)=>Yi(n.borderColor),this.hoverColor=(i,n)=>Yi(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Hi(this,t,e)}get(t){return De(this,t)}describe(t,e){return Hi(ws,t,e)}override(t,e){return Hi(Ut,t,e)}route(t,e,i,n){const o=De(this,t),r=De(this,i),h="_"+e;Object.defineProperties(o,{[h]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const a=this[h],l=r[n];return D(a)?Object.assign({},l,a):O(a,l)},set(a){this[h]=a}}})}apply(t){t.forEach(e=>e(this))}}var A=new Oa({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ma,Sa,Ta]);function Da(s){return!s||R(s.size)||R(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function fn(s,t,e,i,n){let o=t[n];return o||(o=t[n]=s.measureText(n).width,e.push(n)),o>i&&(i=o),i}function Ft(s,t,e){const i=s.currentDevicePixelRatio,n=e!==0?Math.max(e/2,.5):0;return Math.round((t-n)*i)/i+n}function gn(s,t){!t&&!s||(t=t||s.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,s.width,s.height),t.restore())}function Ms(s,t,e,i){kr(s,t,e,i,null)}function kr(s,t,e,i,n){let o,r,h,a,l,c,u,d;const f=t.pointStyle,g=t.rotation,p=t.radius;let m=(g||0)*oa;if(f&&typeof f=="object"&&(o=f.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){s.save(),s.translate(e,i),s.rotate(m),s.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),s.restore();return}if(!(isNaN(p)||p<=0)){switch(s.beginPath(),f){default:n?s.ellipse(e,i,n/2,p,0,0,ht):s.arc(e,i,p,0,ht),s.closePath();break;case"triangle":c=n?n/2:p,s.moveTo(e+Math.sin(m)*c,i-Math.cos(m)*p),m+=on,s.lineTo(e+Math.sin(m)*c,i-Math.cos(m)*p),m+=on,s.lineTo(e+Math.sin(m)*c,i-Math.cos(m)*p),s.closePath();break;case"rectRounded":l=p*.516,a=p-l,r=Math.cos(m+Lt)*a,u=Math.cos(m+Lt)*(n?n/2-l:a),h=Math.sin(m+Lt)*a,d=Math.sin(m+Lt)*(n?n/2-l:a),s.arc(e-u,i-h,l,m-j,m-rt),s.arc(e+d,i-r,l,m-rt,m),s.arc(e+u,i+h,l,m,m+rt),s.arc(e-d,i+r,l,m+rt,m+j),s.closePath();break;case"rect":if(!g){a=Math.SQRT1_2*p,c=n?n/2:a,s.rect(e-c,i-a,2*c,2*a);break}m+=Lt;case"rectRot":u=Math.cos(m)*(n?n/2:p),r=Math.cos(m)*p,h=Math.sin(m)*p,d=Math.sin(m)*(n?n/2:p),s.moveTo(e-u,i-h),s.lineTo(e+d,i-r),s.lineTo(e+u,i+h),s.lineTo(e-d,i+r),s.closePath();break;case"crossRot":m+=Lt;case"cross":u=Math.cos(m)*(n?n/2:p),r=Math.cos(m)*p,h=Math.sin(m)*p,d=Math.sin(m)*(n?n/2:p),s.moveTo(e-u,i-h),s.lineTo(e+u,i+h),s.moveTo(e+d,i-r),s.lineTo(e-d,i+r);break;case"star":u=Math.cos(m)*(n?n/2:p),r=Math.cos(m)*p,h=Math.sin(m)*p,d=Math.sin(m)*(n?n/2:p),s.moveTo(e-u,i-h),s.lineTo(e+u,i+h),s.moveTo(e+d,i-r),s.lineTo(e-d,i+r),m+=Lt,u=Math.cos(m)*(n?n/2:p),r=Math.cos(m)*p,h=Math.sin(m)*p,d=Math.sin(m)*(n?n/2:p),s.moveTo(e-u,i-h),s.lineTo(e+u,i+h),s.moveTo(e+d,i-r),s.lineTo(e-d,i+r);break;case"line":r=n?n/2:Math.cos(m)*p,h=Math.sin(m)*p,s.moveTo(e-r,i-h),s.lineTo(e+r,i+h);break;case"dash":s.moveTo(e,i),s.lineTo(e+Math.cos(m)*(n?n/2:p),i+Math.sin(m)*p);break;case!1:s.closePath();break}s.fill(),t.borderWidth>0&&s.stroke()}}function Ne(s,t,e){return e=e||.5,!t||s&&s.x>t.left-e&&s.x<t.right+e&&s.y>t.top-e&&s.y<t.bottom+e}function Oi(s,t){s.save(),s.beginPath(),s.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),s.clip()}function Di(s){s.restore()}function za(s,t,e,i,n){if(!t)return s.lineTo(e.x,e.y);if(n==="middle"){const o=(t.x+e.x)/2;s.lineTo(o,t.y),s.lineTo(o,e.y)}else n==="after"!=!!i?s.lineTo(t.x,e.y):s.lineTo(e.x,t.y);s.lineTo(e.x,e.y)}function Ea(s,t,e,i){if(!t)return s.lineTo(e.x,e.y);s.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function Ra(s,t){t.translation&&s.translate(t.translation[0],t.translation[1]),R(t.rotation)||s.rotate(t.rotation),t.color&&(s.fillStyle=t.color),t.textAlign&&(s.textAlign=t.textAlign),t.textBaseline&&(s.textBaseline=t.textBaseline)}function La(s,t,e,i,n){if(n.strikethrough||n.underline){const o=s.measureText(i),r=t-o.actualBoundingBoxLeft,h=t+o.actualBoundingBoxRight,a=e-o.actualBoundingBoxAscent,l=e+o.actualBoundingBoxDescent,c=n.strikethrough?(a+l)/2:l;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=n.decorationWidth||2,s.moveTo(r,c),s.lineTo(h,c),s.stroke()}}function Fa(s,t){const e=s.fillStyle;s.fillStyle=t.color,s.fillRect(t.left,t.top,t.width,t.height),s.fillStyle=e}function Be(s,t,e,i,n,o={}){const r=W(t)?t:[t],h=o.strokeWidth>0&&o.strokeColor!=="";let a,l;for(s.save(),s.font=n.string,Ra(s,o),a=0;a<r.length;++a)l=r[a],o.backdrop&&Fa(s,o.backdrop),h&&(o.strokeColor&&(s.strokeStyle=o.strokeColor),R(o.strokeWidth)||(s.lineWidth=o.strokeWidth),s.strokeText(l,e,i,o.maxWidth)),s.fillText(l,e,i,o.maxWidth),La(s,e,i,l,o),i+=Number(n.lineHeight);s.restore()}function xi(s,t){const{x:e,y:i,w:n,h:o,radius:r}=t;s.arc(e+r.topLeft,i+r.topLeft,r.topLeft,1.5*j,j,!0),s.lineTo(e,i+o-r.bottomLeft),s.arc(e+r.bottomLeft,i+o-r.bottomLeft,r.bottomLeft,j,rt,!0),s.lineTo(e+n-r.bottomRight,i+o),s.arc(e+n-r.bottomRight,i+o-r.bottomRight,r.bottomRight,rt,0,!0),s.lineTo(e+n,i+r.topRight),s.arc(e+n-r.topRight,i+r.topRight,r.topRight,0,-rt,!0),s.lineTo(e+r.topLeft,i)}const Ia=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Va=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Aa(s,t){const e=(""+s).match(Ia);if(!e||e[1]==="normal")return t*1.2;switch(s=+e[2],e[3]){case"px":return s;case"%":s/=100;break}return t*s}const Na=s=>+s||0;function Cr(s,t){const e={},i=D(t),n=i?Object.keys(t):t,o=D(s)?i?r=>O(s[r],s[t[r]]):r=>s[r]:()=>s;for(const r of n)e[r]=Na(o(r));return e}function Tr(s){return Cr(s,{top:"y",right:"x",bottom:"y",left:"x"})}function ie(s){return Cr(s,["topLeft","topRight","bottomLeft","bottomRight"])}function ot(s){const t=Tr(s);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Q(s,t){s=s||{},t=t||A.font;let e=O(s.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=O(s.style,t.style);i&&!(""+i).match(Va)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:O(s.family,t.family),lineHeight:Aa(O(s.lineHeight,t.lineHeight),e),size:e,style:i,weight:O(s.weight,t.weight),string:""};return n.string=Da(n),n}function Je(s,t,e,i){let n,o,r;for(n=0,o=s.length;n<o;++n)if(r=s[n],r!==void 0&&r!==void 0)return r}function Ba(s,t,e){const{min:i,max:n}=s,o=Kh(t,(n-i)/2),r=(h,a)=>e&&h===0?0:h+a;return{min:r(i,-Math.abs(o)),max:r(n,o)}}function Jt(s,t){return Object.assign(Object.create(s),t)}function Ws(s,t=[""],e,i,n=()=>s[0]){const o=e||s;typeof i>"u"&&(i=Er("_fallback",s));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:o,_fallback:i,_getTarget:n,override:h=>Ws([h,...s],t,o,i)};return new Proxy(r,{deleteProperty(h,a){return delete h[a],delete h._keys,delete s[0][a],!0},get(h,a){return Dr(h,a,()=>Qa(a,t,s,h))},getOwnPropertyDescriptor(h,a){return Reflect.getOwnPropertyDescriptor(h._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(h,a){return mn(h).includes(a)},ownKeys(h){return mn(h)},set(h,a,l){const c=h._storage||(h._storage=n());return h[a]=c[a]=l,delete h._keys,!0}})}function he(s,t,e,i){const n={_cacheable:!1,_proxy:s,_context:t,_subProxy:e,_stack:new Set,_descriptors:Or(s,i),setContext:o=>he(s,o,e,i),override:o=>he(s.override(o),t,e,i)};return new Proxy(n,{deleteProperty(o,r){return delete o[r],delete s[r],!0},get(o,r,h){return Dr(o,r,()=>Ya(o,r,h))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(s,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,r)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(o,r){return Reflect.has(s,r)},ownKeys(){return Reflect.ownKeys(s)},set(o,r,h){return s[r]=h,delete o[r],!0}})}function Or(s,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:n=t.allKeys}=s;return{allKeys:n,scriptable:e,indexable:i,isScriptable:zt(e)?e:()=>e,isIndexable:zt(i)?i:()=>i}}const Wa=(s,t)=>s?s+Vs(t):t,Ys=(s,t)=>D(t)&&s!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Dr(s,t,e){if(Object.prototype.hasOwnProperty.call(s,t)||t==="constructor")return s[t];const i=e();return s[t]=i,i}function Ya(s,t,e){const{_proxy:i,_context:n,_subProxy:o,_descriptors:r}=s;let h=i[t];return zt(h)&&r.isScriptable(t)&&(h=Ha(t,h,s,e)),W(h)&&h.length&&(h=ja(t,h,s,r.isIndexable)),Ys(t,h)&&(h=he(h,n,o&&o[t],r)),h}function Ha(s,t,e,i){const{_proxy:n,_context:o,_subProxy:r,_stack:h}=e;if(h.has(s))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+s);h.add(s);let a=t(o,r||i);return h.delete(s),Ys(s,a)&&(a=Hs(n._scopes,n,s,a)),a}function ja(s,t,e,i){const{_proxy:n,_context:o,_subProxy:r,_descriptors:h}=e;if(typeof o.index<"u"&&i(s))return t[o.index%t.length];if(D(t[0])){const a=t,l=n._scopes.filter(c=>c!==a);t=[];for(const c of a){const u=Hs(l,n,s,c);t.push(he(u,o,r&&r[s],h))}}return t}function zr(s,t,e){return zt(s)?s(t,e):s}const $a=(s,t)=>s===!0?t:typeof s=="string"?re(t,s):void 0;function Ua(s,t,e,i,n){for(const o of t){const r=$a(e,o);if(r){s.add(r);const h=zr(r._fallback,e,n);if(typeof h<"u"&&h!==e&&h!==i)return h}else if(r===!1&&typeof i<"u"&&e!==i)return null}return!1}function Hs(s,t,e,i){const n=t._rootScopes,o=zr(t._fallback,e,i),r=[...s,...n],h=new Set;h.add(i);let a=pn(h,r,e,o||e,i);return a===null||typeof o<"u"&&o!==e&&(a=pn(h,r,o,a,i),a===null)?!1:Ws(Array.from(h),[""],n,o,()=>qa(t,e,i))}function pn(s,t,e,i,n){for(;e;)e=Ua(s,t,e,i,n);return e}function qa(s,t,e){const i=s._getTarget();t in i||(i[t]={});const n=i[t];return W(n)&&D(e)?e:n||{}}function Qa(s,t,e,i){let n;for(const o of t)if(n=Er(Wa(o,s),e),typeof n<"u")return Ys(s,n)?Hs(e,i,s,n):n}function Er(s,t){for(const e of t){if(!e)continue;const i=e[s];if(typeof i<"u")return i}}function mn(s){let t=s._keys;return t||(t=s._keys=Ga(s._scopes)),t}function Ga(s){const t=new Set;for(const e of s)for(const i of Object.keys(e).filter(n=>!n.startsWith("_")))t.add(i);return Array.from(t)}const Ja=Number.EPSILON||1e-14,ae=(s,t)=>t<s.length&&!s[t].skip&&s[t],Rr=s=>s==="x"?"y":"x";function Xa(s,t,e,i){const n=s.skip?t:s,o=t,r=e.skip?t:e,h=ys(o,n),a=ys(r,o);let l=h/(h+a),c=a/(h+a);l=isNaN(l)?0:l,c=isNaN(c)?0:c;const u=i*l,d=i*c;return{previous:{x:o.x-u*(r.x-n.x),y:o.y-u*(r.y-n.y)},next:{x:o.x+d*(r.x-n.x),y:o.y+d*(r.y-n.y)}}}function Ka(s,t,e){const i=s.length;let n,o,r,h,a,l=ae(s,0);for(let c=0;c<i-1;++c)if(a=l,l=ae(s,c+1),!(!a||!l)){if(Te(t[c],0,Ja)){e[c]=e[c+1]=0;continue}n=e[c]/t[c],o=e[c+1]/t[c],h=Math.pow(n,2)+Math.pow(o,2),!(h<=9)&&(r=3/Math.sqrt(h),e[c]=n*r*t[c],e[c+1]=o*r*t[c])}}function Za(s,t,e="x"){const i=Rr(e),n=s.length;let o,r,h,a=ae(s,0);for(let l=0;l<n;++l){if(r=h,h=a,a=ae(s,l+1),!h)continue;const c=h[e],u=h[i];r&&(o=(c-r[e])/3,h[`cp1${e}`]=c-o,h[`cp1${i}`]=u-o*t[l]),a&&(o=(a[e]-c)/3,h[`cp2${e}`]=c+o,h[`cp2${i}`]=u+o*t[l])}}function tl(s,t="x"){const e=Rr(t),i=s.length,n=Array(i).fill(0),o=Array(i);let r,h,a,l=ae(s,0);for(r=0;r<i;++r)if(h=a,a=l,l=ae(s,r+1),!!a){if(l){const c=l[t]-a[t];n[r]=c!==0?(l[e]-a[e])/c:0}o[r]=h?l?gt(n[r-1])!==gt(n[r])?0:(n[r-1]+n[r])/2:n[r-1]:n[r]}Ka(s,n,o),Za(s,o,t)}function Xe(s,t,e){return Math.max(Math.min(s,e),t)}function el(s,t){let e,i,n,o,r,h=Ne(s[0],t);for(e=0,i=s.length;e<i;++e)r=o,o=h,h=e<i-1&&Ne(s[e+1],t),o&&(n=s[e],r&&(n.cp1x=Xe(n.cp1x,t.left,t.right),n.cp1y=Xe(n.cp1y,t.top,t.bottom)),h&&(n.cp2x=Xe(n.cp2x,t.left,t.right),n.cp2y=Xe(n.cp2y,t.top,t.bottom)))}function il(s,t,e,i,n){let o,r,h,a;if(t.spanGaps&&(s=s.filter(l=>!l.skip)),t.cubicInterpolationMode==="monotone")tl(s,n);else{let l=i?s[s.length-1]:s[0];for(o=0,r=s.length;o<r;++o)h=s[o],a=Xa(l,h,s[Math.min(o+1,r-(i?0:1))%r],t.tension),h.cp1x=a.previous.x,h.cp1y=a.previous.y,h.cp2x=a.next.x,h.cp2y=a.next.y,l=h}t.capBezierPoints&&el(s,e)}function js(){return typeof window<"u"&&typeof document<"u"}function $s(s){let t=s.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function yi(s,t,e){let i;return typeof s=="string"?(i=parseInt(s,10),s.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=s,i}const zi=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function sl(s,t){return zi(s).getPropertyValue(t)}const nl=["top","right","bottom","left"];function jt(s,t,e){const i={};e=e?"-"+e:"";for(let n=0;n<4;n++){const o=nl[n];i[o]=parseFloat(s[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const ol=(s,t,e)=>(s>0||t>0)&&(!e||!e.shadowRoot);function rl(s,t){const e=s.touches,i=e&&e.length?e[0]:s,{offsetX:n,offsetY:o}=i;let r=!1,h,a;if(ol(n,o,s.target))h=n,a=o;else{const l=t.getBoundingClientRect();h=i.clientX-l.left,a=i.clientY-l.top,r=!0}return{x:h,y:a,box:r}}function At(s,t){if("native"in s)return s;const{canvas:e,currentDevicePixelRatio:i}=t,n=zi(e),o=n.boxSizing==="border-box",r=jt(n,"padding"),h=jt(n,"border","width"),{x:a,y:l,box:c}=rl(s,e),u=r.left+(c&&h.left),d=r.top+(c&&h.top);let{width:f,height:g}=t;return o&&(f-=r.width+h.width,g-=r.height+h.height),{x:Math.round((a-u)/f*e.width/i),y:Math.round((l-d)/g*e.height/i)}}function hl(s,t,e){let i,n;if(t===void 0||e===void 0){const o=s&&$s(s);if(!o)t=s.clientWidth,e=s.clientHeight;else{const r=o.getBoundingClientRect(),h=zi(o),a=jt(h,"border","width"),l=jt(h,"padding");t=r.width-l.width-a.width,e=r.height-l.height-a.height,i=yi(h.maxWidth,o,"clientWidth"),n=yi(h.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||vi,maxHeight:n||vi}}const Ct=s=>Math.round(s*10)/10;function al(s,t,e,i){const n=zi(s),o=jt(n,"margin"),r=yi(n.maxWidth,s,"clientWidth")||vi,h=yi(n.maxHeight,s,"clientHeight")||vi,a=hl(s,t,e);let{width:l,height:c}=a;if(n.boxSizing==="content-box"){const d=jt(n,"border","width"),f=jt(n,"padding");l-=f.width+d.width,c-=f.height+d.height}return l=Math.max(0,l-o.width),c=Math.max(0,i?l/i:c-o.height),l=Ct(Math.min(l,r,a.maxWidth)),c=Ct(Math.min(c,h,a.maxHeight)),l&&!c&&(c=Ct(l/2)),(t!==void 0||e!==void 0)&&i&&a.height&&c>a.height&&(c=a.height,l=Ct(Math.floor(c*i))),{width:l,height:c}}function bn(s,t,e){const i=t||1,n=Ct(s.height*i),o=Ct(s.width*i);s.height=Ct(s.height),s.width=Ct(s.width);const r=s.canvas;return r.style&&(e||!r.style.height&&!r.style.width)&&(r.style.height=`${s.height}px`,r.style.width=`${s.width}px`),s.currentDevicePixelRatio!==i||r.height!==n||r.width!==o?(s.currentDevicePixelRatio=i,r.height=n,r.width=o,s.ctx.setTransform(i,0,0,i,0,0),!0):!1}const ll=(function(){let s=!1;try{const t={get passive(){return s=!0,!1}};js()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return s})();function _n(s,t){const e=sl(s,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Nt(s,t,e,i){return{x:s.x+e*(t.x-s.x),y:s.y+e*(t.y-s.y)}}function cl(s,t,e,i){return{x:s.x+e*(t.x-s.x),y:i==="middle"?e<.5?s.y:t.y:i==="after"?e<1?s.y:t.y:e>0?t.y:s.y}}function ul(s,t,e,i){const n={x:s.cp2x,y:s.cp2y},o={x:t.cp1x,y:t.cp1y},r=Nt(s,n,e),h=Nt(n,o,e),a=Nt(o,t,e),l=Nt(r,h,e),c=Nt(h,a,e);return Nt(l,c,e)}const dl=function(s,t){return{x(e){return s+s+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},fl=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,t){return s+t},leftForLtr(s,t){return s}}};function se(s,t,e){return s?dl(t,e):fl()}function Lr(s,t){let e,i;(t==="ltr"||t==="rtl")&&(e=s.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),s.prevTextDirection=i)}function Fr(s,t){t!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",t[0],t[1]))}function Ir(s){return s==="angle"?{between:vr,compare:da,normalize:ft}:{between:kt,compare:(t,e)=>t-e,normalize:t=>t}}function vn({start:s,end:t,count:e,loop:i,style:n}){return{start:s%e,end:t%e,loop:i&&(t-s+1)%e===0,style:n}}function gl(s,t,e){const{property:i,start:n,end:o}=e,{between:r,normalize:h}=Ir(i),a=t.length;let{start:l,end:c,loop:u}=s,d,f;if(u){for(l+=a,c+=a,d=0,f=a;d<f&&r(h(t[l%a][i]),n,o);++d)l--,c--;l%=a,c%=a}return c<l&&(c+=a),{start:l,end:c,loop:u,style:s.style}}function Vr(s,t,e){if(!e)return[s];const{property:i,start:n,end:o}=e,r=t.length,{compare:h,between:a,normalize:l}=Ir(i),{start:c,end:u,loop:d,style:f}=gl(s,t,e),g=[];let p=!1,m=null,b,_,y;const w=()=>a(n,y,b)&&h(n,y)!==0,v=()=>h(o,b)===0||a(o,y,b),P=()=>p||w(),S=()=>!p||v();for(let M=c,k=c;M<=u;++M)_=t[M%r],!_.skip&&(b=l(_[i]),b!==y&&(p=a(b,n,o),m===null&&P()&&(m=h(b,n)===0?M:k),m!==null&&S()&&(g.push(vn({start:m,end:M,loop:d,count:r,style:f})),m=null),k=M,y=b));return m!==null&&g.push(vn({start:m,end:u,loop:d,count:r,style:f})),g}function Ar(s,t){const e=[],i=s.segments;for(let n=0;n<i.length;n++){const o=Vr(i[n],s.points,t);o.length&&e.push(...o)}return e}function pl(s,t,e,i){let n=0,o=t-1;if(e&&!i)for(;n<t&&!s[n].skip;)n++;for(;n<t&&s[n].skip;)n++;for(n%=t,e&&(o+=n);o>n&&s[o%t].skip;)o--;return o%=t,{start:n,end:o}}function ml(s,t,e,i){const n=s.length,o=[];let r=t,h=s[t],a;for(a=t+1;a<=e;++a){const l=s[a%n];l.skip||l.stop?h.skip||(i=!1,o.push({start:t%n,end:(a-1)%n,loop:i}),t=r=l.stop?a:null):(r=a,h.skip&&(t=a)),h=l}return r!==null&&o.push({start:t%n,end:r%n,loop:i}),o}function bl(s,t){const e=s.points,i=s.options.spanGaps,n=e.length;if(!n)return[];const o=!!s._loop,{start:r,end:h}=pl(e,n,o,i);if(i===!0)return xn(s,[{start:r,end:h,loop:o}],e,t);const a=h<r?h+n:h,l=!!s._fullLoop&&r===0&&h===n-1;return xn(s,ml(e,r,a,l),e,t)}function xn(s,t,e,i){return!i||!i.setContext||!e?t:_l(s,t,e,i)}function _l(s,t,e,i){const n=s._chart.getContext(),o=yn(s.options),{_datasetIndex:r,options:{spanGaps:h}}=s,a=e.length,l=[];let c=o,u=t[0].start,d=u;function f(g,p,m,b){const _=h?-1:1;if(g!==p){for(g+=a;e[g%a].skip;)g-=_;for(;e[p%a].skip;)p+=_;g%a!==p%a&&(l.push({start:g%a,end:p%a,loop:m,style:b}),c=b,u=p%a)}}for(const g of t){u=h?u:g.start;let p=e[u%a],m;for(d=u+1;d<=g.end;d++){const b=e[d%a];m=yn(i.setContext(Jt(n,{type:"segment",p0:p,p1:b,p0DataIndex:(d-1)%a,p1DataIndex:d%a,datasetIndex:r}))),vl(m,c)&&f(u,d-1,g.loop,c),p=b,c=m}u<d-1&&f(u,d-1,g.loop,c)}return l}function yn(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function vl(s,t){if(!t)return!1;const e=[],i=function(n,o){return Bs(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(s,i)!==JSON.stringify(t,i)}function Ke(s,t,e){return s.options.clip?s[e]:t[e]}function xl(s,t){const{xScale:e,yScale:i}=s;return e&&i?{left:Ke(e,t,"left"),right:Ke(e,t,"right"),top:Ke(i,t,"top"),bottom:Ke(i,t,"bottom")}:t}function Nr(s,t){const e=t._clip;if(e.disabled)return!1;const i=xl(t,s.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?s.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?s.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class yl{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,n){const o=e.listeners[n],r=e.duration;o.forEach(h=>h({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(i-e.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=wr.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const o=i.items;let r=o.length-1,h=!1,a;for(;r>=0;--r)a=o[r],a._active?(a._total>i.duration&&(i.duration=a._total),a.tick(t),h=!0):(o[r]=o[o.length-1],o.pop());h&&(n.draw(),this._notify(n,i,t,"progress")),o.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var bt=new yl;const wn="transparent",wl={boolean(s,t,e){return e>.5?t:s},color(s,t,e){const i=un(s||wn),n=i.valid&&un(t||wn);return n&&n.valid?n.mix(i,e).hexString():t},number(s,t,e){return s+(t-s)*e}};class Ml{constructor(t,e,i,n){const o=e[i];n=Je([t.to,n,o,t.from]);const r=Je([t.from,o,n]);this._active=!0,this._fn=t.fn||wl[t.type||typeof r],this._easing=Oe[t.easing]||Oe.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=r,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const n=this._target[this._prop],o=i-this._start,r=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Je([t.to,e,n,t.from]),this._from=Je([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,n=this._prop,o=this._from,r=this._loop,h=this._to;let a;if(this._active=o!==h&&(r||e<i),!this._active){this._target[n]=h,this._notify(!0);return}if(e<0){this._target[n]=o;return}a=e/i%2,a=r&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[n]=this._fn(o,h,a)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][e]()}}class Br{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!D(t))return;const e=Object.keys(A.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const o=t[n];if(!D(o))return;const r={};for(const h of e)r[h]=o[h];(W(o.properties)&&o.properties||[n]).forEach(h=>{(h===n||!i.has(h))&&i.set(h,r)})})}_animateOptions(t,e){const i=e.options,n=Pl(t,i);if(!n)return[];const o=this._createAnimations(n,i);return i.$shared&&Sl(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,n=[],o=t.$animations||(t.$animations={}),r=Object.keys(e),h=Date.now();let a;for(a=r.length-1;a>=0;--a){const l=r[a];if(l.charAt(0)==="$")continue;if(l==="options"){n.push(...this._animateOptions(t,e));continue}const c=e[l];let u=o[l];const d=i.get(l);if(u)if(d&&u.active()){u.update(d,c,h);continue}else u.cancel();if(!d||!d.duration){t[l]=c;continue}o[l]=u=new Ml(d,t,l,c),n.push(u)}return n}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return bt.add(this._chart,i),!0}}function Sl(s,t){const e=[],i=Object.keys(t);for(let n=0;n<i.length;n++){const o=s[i[n]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function Pl(s,t){if(!t)return;let e=s.options;if(!e){s.options=t;return}return e.$shared&&(s.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Mn(s,t){const e=s&&s.options||{},i=e.reverse,n=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:n,end:i?n:o}}function kl(s,t,e){if(e===!1)return!1;const i=Mn(s,e),n=Mn(t,e);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}function Cl(s){let t,e,i,n;return D(s)?(t=s.top,e=s.right,i=s.bottom,n=s.left):t=e=i=n=s,{top:t,right:e,bottom:i,left:n,disabled:s===!1}}function Wr(s,t){const e=[],i=s._getSortedDatasetMetas(t);let n,o;for(n=0,o=i.length;n<o;++n)e.push(i[n].index);return e}function Sn(s,t,e,i={}){const n=s.keys,o=i.mode==="single";let r,h,a,l;if(t===null)return;let c=!1;for(r=0,h=n.length;r<h;++r){if(a=+n[r],a===e){if(c=!0,i.all)continue;break}l=s.values[a],G(l)&&(o||t===0||gt(t)===gt(l))&&(t+=l)}return!c&&!i.all?0:t}function Tl(s,t){const{iScale:e,vScale:i}=t,n=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",r=Object.keys(s),h=new Array(r.length);let a,l,c;for(a=0,l=r.length;a<l;++a)c=r[a],h[a]={[n]:c,[o]:s[c]};return h}function ji(s,t){const e=s&&s.options.stacked;return e||e===void 0&&t.stack!==void 0}function Ol(s,t,e){return`${s.id}.${t.id}.${e.stack||e.type}`}function Dl(s){const{min:t,max:e,minDefined:i,maxDefined:n}=s.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:n?e:Number.POSITIVE_INFINITY}}function zl(s,t,e){const i=s[t]||(s[t]={});return i[e]||(i[e]={})}function Pn(s,t,e,i){for(const n of t.getMatchingVisibleMetas(i).reverse()){const o=s[n.index];if(e&&o>0||!e&&o<0)return n.index}return null}function kn(s,t){const{chart:e,_cachedMeta:i}=s,n=e._stacks||(e._stacks={}),{iScale:o,vScale:r,index:h}=i,a=o.axis,l=r.axis,c=Ol(o,r,i),u=t.length;let d;for(let f=0;f<u;++f){const g=t[f],{[a]:p,[l]:m}=g,b=g._stacks||(g._stacks={});d=b[l]=zl(n,c,p),d[h]=m,d._top=Pn(d,r,!0,i.type),d._bottom=Pn(d,r,!1,i.type);const _=d._visualValues||(d._visualValues={});_[h]=m}}function $i(s,t){const e=s.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function El(s,t){return Jt(s,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Rl(s,t,e){return Jt(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function be(s,t){const e=s.controller.index,i=s.vScale&&s.vScale.axis;if(i){t=t||s._parsed;for(const n of t){const o=n._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const Ui=s=>s==="reset"||s==="none",Cn=(s,t)=>t?s:Object.assign({},s),Ll=(s,t,e)=>s&&!t.hidden&&t._stacked&&{keys:Wr(e,!0),values:null};class ne{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ji(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&be(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),n=(u,d,f,g)=>u==="x"?d:u==="r"?g:f,o=e.xAxisID=O(i.xAxisID,$i(t,"x")),r=e.yAxisID=O(i.yAxisID,$i(t,"y")),h=e.rAxisID=O(i.rAxisID,$i(t,"r")),a=e.indexAxis,l=e.iAxisID=n(a,o,r,h),c=e.vAxisID=n(a,r,o,h);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(h),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&an(this._data,this),t._stacked&&be(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(D(e)){const n=this._cachedMeta;this._data=Tl(e,n)}else if(i!==e){if(i){an(i,this);const n=this._cachedMeta;be(n),n._parsed=[]}e&&Object.isExtensible(e)&&ma(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const o=e._stacked;e._stacked=ji(e.vScale,e),e.stack!==i.stack&&(n=!0,be(e),e.stack=i.stack),this._resyncElements(t),(n||o!==e._stacked)&&(kn(this,e._parsed),e._stacked=ji(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:n}=this,{iScale:o,_stacked:r}=i,h=o.axis;let a=t===0&&e===n.length?!0:i._sorted,l=t>0&&i._parsed[t-1],c,u,d;if(this._parsing===!1)i._parsed=n,i._sorted=!0,d=n;else{W(n[t])?d=this.parseArrayData(i,n,t,e):D(n[t])?d=this.parseObjectData(i,n,t,e):d=this.parsePrimitiveData(i,n,t,e);const f=()=>u[h]===null||l&&u[h]<l[h];for(c=0;c<e;++c)i._parsed[c+t]=u=d[c],a&&(f()&&(a=!1),l=u);i._sorted=a}r&&kn(this,d)}parsePrimitiveData(t,e,i,n){const{iScale:o,vScale:r}=t,h=o.axis,a=r.axis,l=o.getLabels(),c=o===r,u=new Array(n);let d,f,g;for(d=0,f=n;d<f;++d)g=d+i,u[d]={[h]:c||o.parse(l[g],g),[a]:r.parse(e[g],g)};return u}parseArrayData(t,e,i,n){const{xScale:o,yScale:r}=t,h=new Array(n);let a,l,c,u;for(a=0,l=n;a<l;++a)c=a+i,u=e[c],h[a]={x:o.parse(u[0],c),y:r.parse(u[1],c)};return h}parseObjectData(t,e,i,n){const{xScale:o,yScale:r}=t,{xAxisKey:h="x",yAxisKey:a="y"}=this._parsing,l=new Array(n);let c,u,d,f;for(c=0,u=n;c<u;++c)d=c+i,f=e[d],l[c]={x:o.parse(re(f,h),d),y:r.parse(re(f,a),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const n=this.chart,o=this._cachedMeta,r=e[t.axis],h={keys:Wr(n,!0),values:e._stacks[t.axis]._visualValues};return Sn(h,r,o.index,{mode:i})}updateRangeFromParsed(t,e,i,n){const o=i[e.axis];let r=o===null?NaN:o;const h=n&&i._stacks[e.axis];n&&h&&(n.values=h,r=Sn(n,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const i=this._cachedMeta,n=i._parsed,o=i._sorted&&t===i.iScale,r=n.length,h=this._getOtherScale(t),a=Ll(e,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=Dl(h);let d,f;function g(){f=n[d];const p=f[h.axis];return!G(f[t.axis])||c>p||u<p}for(d=0;d<r&&!(!g()&&(this.updateRangeFromParsed(l,t,f,a),o));++d);if(o){for(d=r-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(l,t,f,a);break}}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let n,o,r;for(n=0,o=e.length;n<o;++n)r=e[n][t.axis],G(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,n=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Cl(O(this.options.clip,kl(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,n=i.data||[],o=e.chartArea,r=[],h=this._drawStart||0,a=this._drawCount||n.length-h,l=this.options.drawActiveElementsOnTop;let c;for(i.dataset&&i.dataset.draw(t,o,h,a),c=h;c<h+a;++c){const u=n[c];u.hidden||(u.active&&l?r.push(u):u.draw(t,o))}for(c=0;c<r.length;++c)r[c].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const n=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=Rl(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=n.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=El(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const n=e==="active",o=this._cachedDataOpts,r=t+"-"+e,h=o[r],a=this.enableOptionSharing&&Ve(i);if(h)return Cn(h,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=n?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),c),f=Object.keys(A.elements[t]),g=()=>this.getContext(i,n,e),p=l.resolveNamedOptions(d,f,g,u);return p.$shared&&(p.$shared=a,o[r]=Object.freeze(Cn(p,a))),p}_resolveAnimations(t,e,i){const n=this.chart,o=this._cachedDataOpts,r=`animation-${e}`,h=o[r];if(h)return h;let a;if(n.options.animation!==!1){const c=this.chart.config,u=c.datasetAnimationScopeKeys(this._type,e),d=c.getOptionScopes(this.getDataset(),u);a=c.createResolver(d,this.getContext(t,i,e))}const l=new Br(n,a&&a.animations);return a&&a._cacheable&&(o[r]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Ui(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),n=this._sharedOptions,o=this.getSharedOptions(i),r=this.includeOptions(e,o)||o!==n;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:r}}updateElement(t,e,i,n){Ui(n)?Object.assign(t,i):this._resolveAnimations(e,n).update(t,i)}updateSharedOptions(t,e,i){t&&!Ui(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,n){t.active=n;const o=this.getStyle(e,n);this._resolveAnimations(e,i,n).update(t,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[h,a,l]of this._syncList)this[h](a,l);this._syncList=[];const n=i.length,o=e.length,r=Math.min(o,n);r&&this.parse(0,r),o>n?this._insertElements(n,o-n,t):o<n&&this._removeElements(o,n-o)}_insertElements(t,e,i=!0){const n=this._cachedMeta,o=n.data,r=t+e;let h;const a=l=>{for(l.length+=e,h=l.length-1;h>=r;h--)l[h]=l[h-e]};for(a(o),h=t;h<r;++h)o[h]=new this.dataElementType;this._parsing&&a(n._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,n){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,e);i._stacked&&be(i,n)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,n]=t;this[e](i,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}C(ne,"defaults",{}),C(ne,"datasetElementType",null),C(ne,"dataElementType",null);function Fl(s,t){if(!s._cache.$bar){const e=s.getMatchingVisibleMetas(t);let i=[];for(let n=0,o=e.length;n<o;n++)i=i.concat(e[n].controller.getAllParsedValues(s));s._cache.$bar=yr(i.sort((n,o)=>n-o))}return s._cache.$bar}function Il(s){const t=s.iScale,e=Fl(t,s.type);let i=t._length,n,o,r,h;const a=()=>{r===32767||r===-32768||(Ve(h)&&(i=Math.min(i,Math.abs(r-h)||i)),h=r)};for(n=0,o=e.length;n<o;++n)r=t.getPixelForValue(e[n]),a();for(h=void 0,n=0,o=t.ticks.length;n<o;++n)r=t.getPixelForTick(n),a();return i}function Vl(s,t,e,i){const n=e.barThickness;let o,r;return R(n)?(o=t.min*e.categoryPercentage,r=e.barPercentage):(o=n*i,r=1),{chunk:o/i,ratio:r,start:t.pixels[s]-o/2}}function Al(s,t,e,i){const n=t.pixels,o=n[s];let r=s>0?n[s-1]:null,h=s<n.length-1?n[s+1]:null;const a=e.categoryPercentage;r===null&&(r=o-(h===null?t.end-t.start:h-o)),h===null&&(h=o+o-r);const l=o-(o-Math.min(r,h))/2*a;return{chunk:Math.abs(h-r)/2*a/i,ratio:e.barPercentage,start:l}}function Nl(s,t,e,i){const n=e.parse(s[0],i),o=e.parse(s[1],i),r=Math.min(n,o),h=Math.max(n,o);let a=r,l=h;Math.abs(r)>Math.abs(h)&&(a=h,l=r),t[e.axis]=l,t._custom={barStart:a,barEnd:l,start:n,end:o,min:r,max:h}}function Yr(s,t,e,i){return W(s)?Nl(s,t,e,i):t[e.axis]=e.parse(s,i),t}function Tn(s,t,e,i){const n=s.iScale,o=s.vScale,r=n.getLabels(),h=n===o,a=[];let l,c,u,d;for(l=e,c=e+i;l<c;++l)d=t[l],u={},u[n.axis]=h||n.parse(r[l],l),a.push(Yr(d,u,o,l));return a}function qi(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function Bl(s,t,e){return s!==0?gt(s):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Wl(s){let t,e,i,n,o;return s.horizontal?(t=s.base>s.x,e="left",i="right"):(t=s.base<s.y,e="bottom",i="top"),t?(n="end",o="start"):(n="start",o="end"),{start:e,end:i,reverse:t,top:n,bottom:o}}function Yl(s,t,e,i){let n=t.borderSkipped;const o={};if(!n){s.borderSkipped=o;return}if(n===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:h,reverse:a,top:l,bottom:c}=Wl(s);n==="middle"&&e&&(s.enableBorderRadius=!0,(e._top||0)===i?n=l:(e._bottom||0)===i?n=c:(o[On(c,r,h,a)]=!0,n=l)),o[On(n,r,h,a)]=!0,s.borderSkipped=o}function On(s,t,e,i){return i?(s=Hl(s,t,e),s=Dn(s,e,t)):s=Dn(s,t,e),s}function Hl(s,t,e){return s===t?e:s===e?t:s}function Dn(s,t,e){return s==="start"?t:s==="end"?e:s}function jl(s,{inflateAmount:t},e){s.inflateAmount=t==="auto"?e===1?.33:0:t}class Qi extends ne{parsePrimitiveData(t,e,i,n){return Tn(t,e,i,n)}parseArrayData(t,e,i,n){return Tn(t,e,i,n)}parseObjectData(t,e,i,n){const{iScale:o,vScale:r}=t,{xAxisKey:h="x",yAxisKey:a="y"}=this._parsing,l=o.axis==="x"?h:a,c=r.axis==="x"?h:a,u=[];let d,f,g,p;for(d=i,f=i+n;d<f;++d)p=e[d],g={},g[o.axis]=o.parse(re(p,l),d),u.push(Yr(re(p,c),g,r,d));return u}updateRangeFromParsed(t,e,i,n){super.updateRangeFromParsed(t,e,i,n);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:n}=e,o=this.getParsed(t),r=o._custom,h=qi(r)?"["+r.start+", "+r.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,n){const o=n==="reset",{index:r,_cachedMeta:{vScale:h}}=this,a=h.getBasePixel(),l=h.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,n);for(let f=e;f<e+i;f++){const g=this.getParsed(f),p=o||R(g[h.axis])?{base:a,head:a}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,c),b=(g._stacks||{})[h.axis],_={horizontal:l,base:p.base,enableBorderRadius:!b||qi(g._custom)||r===b._top||r===b._bottom,x:l?p.head:m.center,y:l?m.center:p.head,height:l?m.size:Math.abs(p.size),width:l?Math.abs(p.size):m.size};d&&(_.options=u||this.resolveDataElementOptions(f,t[f].active?"active":n));const y=_.options||t[f].options;Yl(_,y,b,r),jl(_,y,c.ratio),this.updateElement(t[f],f,_,n)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),o=i.options.stacked,r=[],h=this._cachedMeta.controller.getParsed(e),a=h&&h[i.axis],l=c=>{const u=c._parsed.find(f=>f[i.axis]===a),d=u&&u[c.vScale.axis];if(R(d)||isNaN(d))return!0};for(const c of n)if(!(e!==void 0&&l(c))&&((o===!1||r.indexOf(c.stack)===-1||o===void 0&&c.stack===void 0)&&r.push(c.stack),c.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[O(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const n=this._getStacks(t,i),o=e!==void 0?n.indexOf(e):-1;return o===-1?n.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,n=[];let o,r;for(o=0,r=e.data.length;o<r;++o)n.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const h=t.barThickness;return{min:h||Il(e),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:h?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:n},options:{base:o,minBarLength:r}}=this,h=o||0,a=this.getParsed(t),l=a._custom,c=qi(l);let u=a[e.axis],d=0,f=i?this.applyStack(e,a,i):u,g,p;f!==u&&(d=f-u,f=u),c&&(u=l.barStart,f=l.barEnd-l.barStart,u!==0&&gt(u)!==gt(l.barEnd)&&(d=0),d+=u);const m=!R(o)&&!c?o:d;let b=e.getPixelForValue(m);if(this.chart.getDataVisibility(t)?g=e.getPixelForValue(d+f):g=b,p=g-b,Math.abs(p)<r){p=Bl(p,e,h)*r,u===h&&(b-=p/2);const _=e.getPixelForDecimal(0),y=e.getPixelForDecimal(1),w=Math.min(_,y),v=Math.max(_,y);b=Math.max(Math.min(b,v),w),g=b+p,i&&!c&&(a._stacks[e.axis]._visualValues[n]=e.getValueForPixel(g)-e.getValueForPixel(b))}if(b===e.getPixelForValue(h)){const _=gt(p)*e.getLineWidthForValue(h)/2;b+=_,p-=_}return{size:p,base:b,head:g,center:g+p/2}}_calculateBarIndexPixels(t,e){const i=e.scale,n=this.options,o=n.skipNull,r=O(n.maxBarThickness,1/0);let h,a;const l=this._getAxisCount();if(e.grouped){const c=o?this._getStackCount(t):e.stackCount,u=n.barThickness==="flex"?Al(t,e,n,c*l):Vl(t,e,n,c*l),d=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(O(d,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+f;h=u.start+u.chunk*g+u.chunk/2,a=Math.min(r,u.chunk*u.ratio)}else h=i.getPixelForValue(this.getParsed(t)[i.axis],t),a=Math.min(r,e.min*e.ratio);return{base:h-a/2,head:h+a/2,center:h,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,n=i.length;let o=0;for(;o<n;++o)this.getParsed(o)[e.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}C(Qi,"id","bar"),C(Qi,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),C(Qi,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Gi extends ne{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:n=[],_dataset:o}=e,r=this.chart._animationsDisabled;let{start:h,count:a}=va(e,n,r);this._drawStart=h,this._drawCount=a,xa(e)&&(h=0,a=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:l},t),this.updateElements(n,h,a,t)}updateElements(t,e,i,n){const o=n==="reset",{iScale:r,vScale:h,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,n),d=r.axis,f=h.axis,{spanGaps:g,segment:p}=this.options,m=Ae(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||n==="none",_=e+i,y=t.length;let w=e>0&&this.getParsed(e-1);for(let v=0;v<y;++v){const P=t[v],S=b?P:{};if(v<e||v>=_){S.skip=!0;continue}const M=this.getParsed(v),k=R(M[f]),z=S[d]=r.getPixelForValue(M[d],v),T=S[f]=o||k?h.getBasePixel():h.getPixelForValue(a?this.applyStack(h,M,a):M[f],v);S.skip=isNaN(z)||isNaN(T)||k,S.stop=v>0&&Math.abs(M[d]-w[d])>m,p&&(S.parsed=M,S.raw=l.data[v]),u&&(S.options=c||this.resolveDataElementOptions(v,P.active?"active":n)),b||this.updateElement(P,v,S,n),w=M}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,n=t.data||[];if(!n.length)return i;const o=n[0].size(this.resolveDataElementOptions(0)),r=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}C(Gi,"id","line"),C(Gi,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),C(Gi,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function It(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Us{constructor(t){C(this,"options");this.options=t||{}}static override(t){Object.assign(Us.prototype,t)}init(){}formats(){return It()}parse(){return It()}format(){return It()}add(){return It()}diff(){return It()}startOf(){return It()}endOf(){return It()}}var $l={_date:Us};function Ul(s,t,e,i){const{controller:n,data:o,_sorted:r}=s,h=n._cachedMeta.iScale,a=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&r&&o.length){const l=h._reversePixels?ga:Yt;if(i){if(n._sharedOptions){const c=o[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const d=l(o,t,e-u),f=l(o,t,e+u);return{lo:d.lo,hi:f.hi}}}}else{const c=l(o,t,e);if(a){const{vScale:u}=n._cachedMeta,{_parsed:d}=s,f=d.slice(0,c.lo+1).reverse().findIndex(p=>!R(p[u.axis]));c.lo-=Math.max(0,f);const g=d.slice(c.hi).findIndex(p=>!R(p[u.axis]));c.hi+=Math.max(0,g)}return c}}return{lo:0,hi:o.length-1}}function Ei(s,t,e,i,n){const o=s.getSortedVisibleDatasetMetas(),r=e[t];for(let h=0,a=o.length;h<a;++h){const{index:l,data:c}=o[h],{lo:u,hi:d}=Ul(o[h],t,r,n);for(let f=u;f<=d;++f){const g=c[f];g.skip||i(g,l,f)}}}function ql(s){const t=s.indexOf("x")!==-1,e=s.indexOf("y")!==-1;return function(i,n){const o=t?Math.abs(i.x-n.x):0,r=e?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Ji(s,t,e,i,n){const o=[];return!n&&!s.isPointInArea(t)||Ei(s,e,t,function(h,a,l){!n&&!Ne(h,s.chartArea,0)||h.inRange(t.x,t.y,i)&&o.push({element:h,datasetIndex:a,index:l})},!0),o}function Ql(s,t,e,i){let n=[];function o(r,h,a){const{startAngle:l,endAngle:c}=r.getProps(["startAngle","endAngle"],i),{angle:u}=ua(r,{x:t.x,y:t.y});vr(u,l,c)&&n.push({element:r,datasetIndex:h,index:a})}return Ei(s,e,t,o),n}function Gl(s,t,e,i,n,o){let r=[];const h=ql(e);let a=Number.POSITIVE_INFINITY;function l(c,u,d){const f=c.inRange(t.x,t.y,n);if(i&&!f)return;const g=c.getCenterPoint(n);if(!(!!o||s.isPointInArea(g))&&!f)return;const m=h(t,g);m<a?(r=[{element:c,datasetIndex:u,index:d}],a=m):m===a&&r.push({element:c,datasetIndex:u,index:d})}return Ei(s,e,t,l),r}function Xi(s,t,e,i,n,o){return!o&&!s.isPointInArea(t)?[]:e==="r"&&!i?Ql(s,t,e,n):Gl(s,t,e,i,n,o)}function zn(s,t,e,i,n){const o=[],r=e==="x"?"inXRange":"inYRange";let h=!1;return Ei(s,e,t,(a,l,c)=>{a[r]&&a[r](t[e],n)&&(o.push({element:a,datasetIndex:l,index:c}),h=h||a.inRange(t.x,t.y,n))}),i&&!h?[]:o}var Jl={modes:{index(s,t,e,i){const n=At(t,s),o=e.axis||"x",r=e.includeInvisible||!1,h=e.intersect?Ji(s,n,o,i,r):Xi(s,n,o,!1,i,r),a=[];return h.length?(s.getSortedVisibleDatasetMetas().forEach(l=>{const c=h[0].index,u=l.data[c];u&&!u.skip&&a.push({element:u,datasetIndex:l.index,index:c})}),a):[]},dataset(s,t,e,i){const n=At(t,s),o=e.axis||"xy",r=e.includeInvisible||!1;let h=e.intersect?Ji(s,n,o,i,r):Xi(s,n,o,!1,i,r);if(h.length>0){const a=h[0].datasetIndex,l=s.getDatasetMeta(a).data;h=[];for(let c=0;c<l.length;++c)h.push({element:l[c],datasetIndex:a,index:c})}return h},point(s,t,e,i){const n=At(t,s),o=e.axis||"xy",r=e.includeInvisible||!1;return Ji(s,n,o,i,r)},nearest(s,t,e,i){const n=At(t,s),o=e.axis||"xy",r=e.includeInvisible||!1;return Xi(s,n,o,e.intersect,i,r)},x(s,t,e,i){const n=At(t,s);return zn(s,n,"x",e.intersect,i)},y(s,t,e,i){const n=At(t,s);return zn(s,n,"y",e.intersect,i)}}};const Hr=["left","top","right","bottom"];function _e(s,t){return s.filter(e=>e.pos===t)}function En(s,t){return s.filter(e=>Hr.indexOf(e.pos)===-1&&e.box.axis===t)}function ve(s,t){return s.sort((e,i)=>{const n=t?i:e,o=t?e:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function Xl(s){const t=[];let e,i,n,o,r,h;for(e=0,i=(s||[]).length;e<i;++e)n=s[e],{position:o,options:{stack:r,stackWeight:h=1}}=n,t.push({index:e,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:r&&o+r,stackWeight:h});return t}function Kl(s){const t={};for(const e of s){const{stack:i,pos:n,stackWeight:o}=e;if(!i||!Hr.includes(n))continue;const r=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function Zl(s,t){const e=Kl(s),{vBoxMaxWidth:i,hBoxMaxHeight:n}=t;let o,r,h;for(o=0,r=s.length;o<r;++o){h=s[o];const{fullSize:a}=h.box,l=e[h.stack],c=l&&h.stackWeight/l.weight;h.horizontal?(h.width=c?c*i:a&&t.availableWidth,h.height=n):(h.width=i,h.height=c?c*n:a&&t.availableHeight)}return e}function tc(s){const t=Xl(s),e=ve(t.filter(l=>l.box.fullSize),!0),i=ve(_e(t,"left"),!0),n=ve(_e(t,"right")),o=ve(_e(t,"top"),!0),r=ve(_e(t,"bottom")),h=En(t,"x"),a=En(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:n.concat(a).concat(r).concat(h),chartArea:_e(t,"chartArea"),vertical:i.concat(n).concat(a),horizontal:o.concat(r).concat(h)}}function Rn(s,t,e,i){return Math.max(s[e],t[e])+Math.max(s[i],t[i])}function jr(s,t){s.top=Math.max(s.top,t.top),s.left=Math.max(s.left,t.left),s.bottom=Math.max(s.bottom,t.bottom),s.right=Math.max(s.right,t.right)}function ec(s,t,e,i){const{pos:n,box:o}=e,r=s.maxPadding;if(!D(n)){e.size&&(s[n]-=e.size);const u=i[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?o.height:o.width),e.size=u.size/u.count,s[n]+=e.size}o.getPadding&&jr(r,o.getPadding());const h=Math.max(0,t.outerWidth-Rn(r,s,"left","right")),a=Math.max(0,t.outerHeight-Rn(r,s,"top","bottom")),l=h!==s.w,c=a!==s.h;return s.w=h,s.h=a,e.horizontal?{same:l,other:c}:{same:c,other:l}}function ic(s){const t=s.maxPadding;function e(i){const n=Math.max(t[i]-s[i],0);return s[i]+=n,n}s.y+=e("top"),s.x+=e("left"),e("right"),e("bottom")}function sc(s,t){const e=t.maxPadding;function i(n){const o={left:0,top:0,right:0,bottom:0};return n.forEach(r=>{o[r]=Math.max(t[r],e[r])}),o}return i(s?["left","right"]:["top","bottom"])}function Pe(s,t,e,i){const n=[];let o,r,h,a,l,c;for(o=0,r=s.length,l=0;o<r;++o){h=s[o],a=h.box,a.update(h.width||t.w,h.height||t.h,sc(h.horizontal,t));const{same:u,other:d}=ec(t,e,h,i);l|=u&&n.length,c=c||d,a.fullSize||n.push(h)}return l&&Pe(n,t,e,i)||c}function Ze(s,t,e,i,n){s.top=e,s.left=t,s.right=t+i,s.bottom=e+n,s.width=i,s.height=n}function Ln(s,t,e,i){const n=e.padding;let{x:o,y:r}=t;for(const h of s){const a=h.box,l=i[h.stack]||{placed:0,weight:1},c=h.stackWeight/l.weight||1;if(h.horizontal){const u=t.w*c,d=l.size||a.height;Ve(l.start)&&(r=l.start),a.fullSize?Ze(a,n.left,r,e.outerWidth-n.right-n.left,d):Ze(a,t.left+l.placed,r,u,d),l.start=r,l.placed+=u,r=a.bottom}else{const u=t.h*c,d=l.size||a.width;Ve(l.start)&&(o=l.start),a.fullSize?Ze(a,o,n.top,d,e.outerHeight-n.bottom-n.top):Ze(a,o,t.top+l.placed,d,u),l.start=o,l.placed+=u,o=a.right}}t.x=o,t.y=r}var nt={addBox(s,t){s.boxes||(s.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},s.boxes.push(t)},removeBox(s,t){const e=s.boxes?s.boxes.indexOf(t):-1;e!==-1&&s.boxes.splice(e,1)},configure(s,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(s,t,e,i){if(!s)return;const n=ot(s.options.layout.padding),o=Math.max(t-n.width,0),r=Math.max(e-n.height,0),h=tc(s.boxes),a=h.vertical,l=h.horizontal;L(s.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const c=a.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/c,hBoxMaxHeight:r/2}),d=Object.assign({},n);jr(d,ot(i));const f=Object.assign({maxPadding:d,w:o,h:r,x:n.left,y:n.top},n),g=Zl(a.concat(l),u);Pe(h.fullSize,f,u,g),Pe(a,f,u,g),Pe(l,f,u,g)&&Pe(a,f,u,g),ic(f),Ln(h.leftAndTop,f,u,g),f.x+=f.w,f.y+=f.h,Ln(h.rightAndBottom,f,u,g),s.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},L(h.chartArea,p=>{const m=p.box;Object.assign(m,s.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class $r{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,n){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):i)}}isAttached(t){return!0}updateConfig(t){}}class nc extends $r{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const fi="$chartjs",oc={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Fn=s=>s===null||s==="";function rc(s,t){const e=s.style,i=s.getAttribute("height"),n=s.getAttribute("width");if(s[fi]={initial:{height:i,width:n,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Fn(n)){const o=_n(s,"width");o!==void 0&&(s.width=o)}if(Fn(i))if(s.style.height==="")s.height=s.width/(t||2);else{const o=_n(s,"height");o!==void 0&&(s.height=o)}return s}const Ur=ll?{passive:!0}:!1;function hc(s,t,e){s&&s.addEventListener(t,e,Ur)}function ac(s,t,e){s&&s.canvas&&s.canvas.removeEventListener(t,e,Ur)}function lc(s,t){const e=oc[s.type]||s.type,{x:i,y:n}=At(s,t);return{type:e,chart:t,native:s,x:i!==void 0?i:null,y:n!==void 0?n:null}}function wi(s,t){for(const e of s)if(e===t||e.contains(t))return!0}function cc(s,t,e){const i=s.canvas,n=new MutationObserver(o=>{let r=!1;for(const h of o)r=r||wi(h.addedNodes,i),r=r&&!wi(h.removedNodes,i);r&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function uc(s,t,e){const i=s.canvas,n=new MutationObserver(o=>{let r=!1;for(const h of o)r=r||wi(h.removedNodes,i),r=r&&!wi(h.addedNodes,i);r&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}const We=new Map;let In=0;function qr(){const s=window.devicePixelRatio;s!==In&&(In=s,We.forEach((t,e)=>{e.currentDevicePixelRatio!==s&&t()}))}function dc(s,t){We.size||window.addEventListener("resize",qr),We.set(s,t)}function fc(s){We.delete(s),We.size||window.removeEventListener("resize",qr)}function gc(s,t,e){const i=s.canvas,n=i&&$s(i);if(!n)return;const o=Mr((h,a)=>{const l=n.clientWidth;e(h,a),l<n.clientWidth&&e()},window),r=new ResizeObserver(h=>{const a=h[0],l=a.contentRect.width,c=a.contentRect.height;l===0&&c===0||o(l,c)});return r.observe(n),dc(s,o),r}function Ki(s,t,e){e&&e.disconnect(),t==="resize"&&fc(s)}function pc(s,t,e){const i=s.canvas,n=Mr(o=>{s.ctx!==null&&e(lc(o,s))},s);return hc(i,t,n),n}class mc extends $r{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(rc(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[fi])return!1;const i=e[fi].initial;["height","width"].forEach(o=>{const r=i[o];R(r)?e.removeAttribute(o):e.setAttribute(o,r)});const n=i.style||{};return Object.keys(n).forEach(o=>{e.style[o]=n[o]}),e.width=e.width,delete e[fi],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),r={attach:cc,detach:uc,resize:gc}[e]||pc;n[e]=r(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),n=i[e];if(!n)return;({attach:Ki,detach:Ki,resize:Ki}[e]||ac)(t,e,n),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,n){return al(t,e,i,n)}isAttached(t){const e=t&&$s(t);return!!(e&&e.isConnected)}}function bc(s){return!js()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?nc:mc}class pt{constructor(){C(this,"x");C(this,"y");C(this,"active",!1);C(this,"options");C(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Ae(this.x)&&Ae(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const n={};return t.forEach(o=>{n[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),n}}C(pt,"defaults",{}),C(pt,"defaultRoutes");function _c(s,t){const e=s.options.ticks,i=vc(s),n=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?yc(t):[],r=o.length,h=o[0],a=o[r-1],l=[];if(r>n)return wc(t,l,o,r/n),l;const c=xc(o,t,n);if(r>0){let u,d;const f=r>1?Math.round((a-h)/(r-1)):null;for(ti(t,l,c,R(f)?0:h-f,h),u=0,d=r-1;u<d;u++)ti(t,l,c,o[u],o[u+1]);return ti(t,l,c,a,R(f)?t.length:a+f),l}return ti(t,l,c),l}function vc(s){const t=s.options.offset,e=s._tickSize(),i=s._length/e+(t?0:1),n=s._maxLength/e;return Math.floor(Math.min(i,n))}function xc(s,t,e){const i=Mc(s),n=t.length/e;if(!i)return Math.max(n,1);const o=ra(i);for(let r=0,h=o.length-1;r<h;r++){const a=o[r];if(a>n)return a}return Math.max(n,1)}function yc(s){const t=[];let e,i;for(e=0,i=s.length;e<i;e++)s[e].major&&t.push(e);return t}function wc(s,t,e,i){let n=0,o=e[0],r;for(i=Math.ceil(i),r=0;r<s.length;r++)r===o&&(t.push(s[r]),n++,o=e[n*i])}function ti(s,t,e,i,n){const o=O(i,0),r=Math.min(O(n,s.length),s.length);let h=0,a,l,c;for(e=Math.ceil(e),n&&(a=n-i,e=a/Math.floor(a/e)),c=o;c<0;)h++,c=Math.round(o+h*e);for(l=Math.max(o,0);l<r;l++)l===c&&(t.push(s[l]),h++,c=Math.round(o+h*e))}function Mc(s){const t=s.length;let e,i;if(t<2)return!1;for(i=s[0],e=1;e<t;++e)if(s[e]-s[e-1]!==i)return!1;return i}const Sc=s=>s==="left"?"right":s==="right"?"left":s,Vn=(s,t,e)=>t==="top"||t==="left"?s[t]+e:s[t]-e,An=(s,t)=>Math.min(t||s,s);function Nn(s,t){const e=[],i=s.length/t,n=s.length;let o=0;for(;o<n;o+=i)e.push(s[Math.floor(o)]);return e}function Pc(s,t,e){const i=s.ticks.length,n=Math.min(t,i-1),o=s._startPixel,r=s._endPixel,h=1e-6;let a=s.getPixelForTick(n),l;if(!(e&&(i===1?l=Math.max(a-o,r-a):t===0?l=(s.getPixelForTick(1)-a)/2:l=(a-s.getPixelForTick(n-1))/2,a+=n<t?l:-l,a<o-h||a>r+h)))return a}function kc(s,t){L(s,e=>{const i=e.gc,n=i.length/2;let o;if(n>t){for(o=0;o<n;++o)delete e.data[i[o]];i.splice(0,n)}})}function xe(s){return s.drawTicks?s.tickLength:0}function Bn(s,t){if(!s.display)return 0;const e=Q(s.font,t),i=ot(s.padding);return(W(s.text)?s.text.length:1)*e.lineHeight+i.height}function Cc(s,t){return Jt(s,{scale:t,type:"scale"})}function Tc(s,t,e){return Jt(s,{tick:e,index:t,type:"tick"})}function Oc(s,t,e){let i=Ns(s);return(e&&t!=="right"||!e&&t==="right")&&(i=Sc(i)),i}function Dc(s,t,e,i){const{top:n,left:o,bottom:r,right:h,chart:a}=s,{chartArea:l,scales:c}=a;let u=0,d,f,g;const p=r-n,m=h-o;if(s.isHorizontal()){if(f=q(i,o,h),D(e)){const b=Object.keys(e)[0],_=e[b];g=c[b].getPixelForValue(_)+p-t}else e==="center"?g=(l.bottom+l.top)/2+p-t:g=Vn(s,e,t);d=h-o}else{if(D(e)){const b=Object.keys(e)[0],_=e[b];f=c[b].getPixelForValue(_)-m+t}else e==="center"?f=(l.left+l.right)/2-m+t:f=Vn(s,e,t);g=q(i,r,n),u=e==="left"?-rt:rt}return{titleX:f,titleY:g,maxWidth:d,rotation:u}}class fe extends pt{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:n}=this;return t=lt(t,Number.POSITIVE_INFINITY),e=lt(e,Number.NEGATIVE_INFINITY),i=lt(i,Number.POSITIVE_INFINITY),n=lt(n,Number.NEGATIVE_INFINITY),{min:lt(t,i),max:lt(e,n),minDefined:G(t),maxDefined:G(e)}}getMinMax(t){let{min:e,max:i,minDefined:n,maxDefined:o}=this.getUserBounds(),r;if(n&&o)return{min:e,max:i};const h=this.getMatchingVisibleMetas();for(let a=0,l=h.length;a<l;++a)r=h[a].controller.getMinMax(this,t),n||(e=Math.min(e,r.min)),o||(i=Math.max(i,r.max));return e=o&&e>i?i:e,i=n&&e>i?e:i,{min:lt(e,lt(i,e)),max:lt(i,lt(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){V(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:n,grace:o,ticks:r}=this.options,h=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ba(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=h<this.ticks.length;this._convertTicksToLabels(a?Nn(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=_c(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){V(this.options.afterUpdate,[this])}beforeSetDimensions(){V(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){V(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),V(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){V(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,n,o;for(i=0,n=t.length;i<n;i++)o=t[i],o.label=V(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){V(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){V(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=An(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,o=e.maxRotation;let r=n,h,a,l;if(!this._isVisible()||!e.display||n>=o||i<=1||!this.isHorizontal()){this.labelRotation=n;return}const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,f=et(this.chart.width-u,0,this.maxWidth);h=t.offset?this.maxWidth/i:f/(i-1),u+6>h&&(h=f/(i-(t.offset?.5:1)),a=this.maxHeight-xe(t.grid)-e.padding-Bn(t.title,this.chart.options.font),l=Math.sqrt(u*u+d*d),r=ca(Math.min(Math.asin(et((c.highest.height+6)/h,-1,1)),Math.asin(et(a/l,-1,1))-Math.asin(et(d/l,-1,1)))),r=Math.max(n,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){V(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){V(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:n,grid:o}}=this,r=this._isVisible(),h=this.isHorizontal();if(r){const a=Bn(n,e.options.font);if(h?(t.width=this.maxWidth,t.height=xe(o)+a):(t.height=this.maxHeight,t.width=xe(o)+a),i.display&&this.ticks.length){const{first:l,last:c,widest:u,highest:d}=this._getLabelSizes(),f=i.padding*2,g=Wt(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(h){const b=i.mirror?0:m*u.width+p*d.height;t.height=Math.min(this.maxHeight,t.height+b+f)}else{const b=i.mirror?0:p*u.width+m*d.height;t.width=Math.min(this.maxWidth,t.width+b+f)}this._calculatePadding(l,c,m,p)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,n){const{ticks:{align:o,padding:r},position:h}=this.options,a=this.labelRotation!==0,l=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;a?l?(d=n*t.width,f=i*e.height):(d=i*t.height,f=n*e.width):o==="start"?f=e.width:o==="end"?d=t.width:o!=="inner"&&(d=t.width/2,f=e.width/2),this.paddingLeft=Math.max((d-c+r)*this.width/(this.width-c),0),this.paddingRight=Math.max((f-u+r)*this.width/(this.width-u),0)}else{let c=e.height/2,u=t.height/2;o==="start"?(c=0,u=t.height):o==="end"&&(c=e.height,u=0),this.paddingTop=c+r,this.paddingBottom=u+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){V(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)R(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Nn(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:n,_longestTextCache:o}=this,r=[],h=[],a=Math.floor(e/An(e,i));let l=0,c=0,u,d,f,g,p,m,b,_,y,w,v;for(u=0;u<e;u+=a){if(g=t[u].label,p=this._resolveTickFontOptions(u),n.font=m=p.string,b=o[m]=o[m]||{data:{},gc:[]},_=p.lineHeight,y=w=0,!R(g)&&!W(g))y=fn(n,b.data,b.gc,y,g),w=_;else if(W(g))for(d=0,f=g.length;d<f;++d)v=g[d],!R(v)&&!W(v)&&(y=fn(n,b.data,b.gc,y,v),w+=_);r.push(y),h.push(w),l=Math.max(y,l),c=Math.max(w,c)}kc(o,e);const P=r.indexOf(l),S=h.indexOf(c),M=k=>({width:r[k]||0,height:h[k]||0});return{first:M(0),last:M(e-1),widest:M(P),highest:M(S),widths:r,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return fa(this._alignToPixels?Ft(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=Tc(this.getContext(),t,i))}return this.$context||(this.$context=Cc(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Wt(this.labelRotation),i=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,h=o?o.widest.width+r:0,a=o?o.highest.height+r:0;return this.isHorizontal()?a*i>h*n?h/i:a/n:a*n<h*i?a/i:h/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,n=this.options,{grid:o,position:r,border:h}=n,a=o.offset,l=this.isHorizontal(),u=this.ticks.length+(a?1:0),d=xe(o),f=[],g=h.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,b=function(B){return Ft(i,B,p)};let _,y,w,v,P,S,M,k,z,T,E,Y;if(r==="top")_=b(this.bottom),S=this.bottom-d,k=_-m,T=b(t.top)+m,Y=t.bottom;else if(r==="bottom")_=b(this.top),T=t.top,Y=b(t.bottom)-m,S=_+m,k=this.top+d;else if(r==="left")_=b(this.right),P=this.right-d,M=_-m,z=b(t.left)+m,E=t.right;else if(r==="right")_=b(this.left),z=t.left,E=b(t.right)-m,P=_+m,M=this.left+d;else if(e==="x"){if(r==="center")_=b((t.top+t.bottom)/2+.5);else if(D(r)){const B=Object.keys(r)[0],H=r[B];_=b(this.chart.scales[B].getPixelForValue(H))}T=t.top,Y=t.bottom,S=_+m,k=S+d}else if(e==="y"){if(r==="center")_=b((t.left+t.right)/2);else if(D(r)){const B=Object.keys(r)[0],H=r[B];_=b(this.chart.scales[B].getPixelForValue(H))}P=_-m,M=P-d,z=t.left,E=t.right}const tt=O(n.ticks.maxTicksLimit,u),I=Math.max(1,Math.ceil(u/tt));for(y=0;y<u;y+=I){const B=this.getContext(y),H=o.setContext(B),wt=h.setContext(B),Mt=H.lineWidth,at=H.color,$e=wt.dash||[],Xt=wt.dashOffset,pe=H.tickWidth,Et=H.tickColor,me=H.tickBorderDash||[],Rt=H.tickBorderDashOffset;w=Pc(this,y,a),w!==void 0&&(v=Ft(i,w,Mt),l?P=M=z=E=v:S=k=T=Y=v,f.push({tx1:P,ty1:S,tx2:M,ty2:k,x1:z,y1:T,x2:E,y2:Y,width:Mt,color:at,borderDash:$e,borderDashOffset:Xt,tickWidth:pe,tickColor:Et,tickBorderDash:me,tickBorderDashOffset:Rt}))}return this._ticksLength=u,this._borderValue=_,f}_computeLabelItems(t){const e=this.axis,i=this.options,{position:n,ticks:o}=i,r=this.isHorizontal(),h=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=o,d=xe(i.grid),f=d+c,g=u?-c:f,p=-Wt(this.labelRotation),m=[];let b,_,y,w,v,P,S,M,k,z,T,E,Y="middle";if(n==="top")P=this.bottom-g,S=this._getXAxisLabelAlignment();else if(n==="bottom")P=this.top+g,S=this._getXAxisLabelAlignment();else if(n==="left"){const I=this._getYAxisLabelAlignment(d);S=I.textAlign,v=I.x}else if(n==="right"){const I=this._getYAxisLabelAlignment(d);S=I.textAlign,v=I.x}else if(e==="x"){if(n==="center")P=(t.top+t.bottom)/2+f;else if(D(n)){const I=Object.keys(n)[0],B=n[I];P=this.chart.scales[I].getPixelForValue(B)+f}S=this._getXAxisLabelAlignment()}else if(e==="y"){if(n==="center")v=(t.left+t.right)/2-f;else if(D(n)){const I=Object.keys(n)[0],B=n[I];v=this.chart.scales[I].getPixelForValue(B)}S=this._getYAxisLabelAlignment(d).textAlign}e==="y"&&(a==="start"?Y="top":a==="end"&&(Y="bottom"));const tt=this._getLabelSizes();for(b=0,_=h.length;b<_;++b){y=h[b],w=y.label;const I=o.setContext(this.getContext(b));M=this.getPixelForTick(b)+o.labelOffset,k=this._resolveTickFontOptions(b),z=k.lineHeight,T=W(w)?w.length:1;const B=T/2,H=I.color,wt=I.textStrokeColor,Mt=I.textStrokeWidth;let at=S;r?(v=M,S==="inner"&&(b===_-1?at=this.options.reverse?"left":"right":b===0?at=this.options.reverse?"right":"left":at="center"),n==="top"?l==="near"||p!==0?E=-T*z+z/2:l==="center"?E=-tt.highest.height/2-B*z+z:E=-tt.highest.height+z/2:l==="near"||p!==0?E=z/2:l==="center"?E=tt.highest.height/2-B*z:E=tt.highest.height-T*z,u&&(E*=-1),p!==0&&!I.showLabelBackdrop&&(v+=z/2*Math.sin(p))):(P=M,E=(1-T)*z/2);let $e;if(I.showLabelBackdrop){const Xt=ot(I.backdropPadding),pe=tt.heights[b],Et=tt.widths[b];let me=E-Xt.top,Rt=0-Xt.left;switch(Y){case"middle":me-=pe/2;break;case"bottom":me-=pe;break}switch(S){case"center":Rt-=Et/2;break;case"right":Rt-=Et;break;case"inner":b===_-1?Rt-=Et:b>0&&(Rt-=Et/2);break}$e={left:Rt,top:me,width:Et+Xt.width,height:pe+Xt.height,color:I.backdropColor}}m.push({label:w,font:k,textOffset:E,options:{rotation:p,color:H,strokeColor:wt,strokeWidth:Mt,textAlign:at,textBaseline:Y,translation:[v,P],backdrop:$e}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Wt(this.labelRotation))return t==="top"?"left":"right";let n="center";return e.align==="start"?n="left":e.align==="end"?n="right":e.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:n,padding:o}}=this.options,r=this._getLabelSizes(),h=t+o,a=r.widest.width;let l,c;return e==="left"?n?(c=this.right+o,i==="near"?l="left":i==="center"?(l="center",c+=a/2):(l="right",c+=a)):(c=this.right-h,i==="near"?l="right":i==="center"?(l="center",c-=a/2):(l="left",c=this.left)):e==="right"?n?(c=this.left+o,i==="near"?l="right":i==="center"?(l="center",c-=a/2):(l="left",c-=a)):(c=this.left+h,i==="near"?l="left":i==="center"?(l="center",c+=a/2):(l="right",c=this.right)):l="right",{textAlign:l,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:n,width:o,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,n,o,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(o=>o.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const h=(a,l,c)=>{!c.width||!c.color||(i.save(),i.lineWidth=c.width,i.strokeStyle=c.color,i.setLineDash(c.borderDash||[]),i.lineDashOffset=c.borderDashOffset,i.beginPath(),i.moveTo(a.x,a.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(e.display)for(o=0,r=n.length;o<r;++o){const a=n[o];e.drawOnChartArea&&h({x:a.x1,y:a.y1},{x:a.x2,y:a.y2},a),e.drawTicks&&h({x:a.tx1,y:a.ty1},{x:a.tx2,y:a.ty2},{color:a.tickColor,width:a.tickWidth,borderDash:a.tickBorderDash,borderDashOffset:a.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:n}}=this,o=i.setContext(this.getContext()),r=i.display?o.width:0;if(!r)return;const h=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=Ft(t,this.left,r)-r/2,c=Ft(t,this.right,h)+h/2,u=d=a):(u=Ft(t,this.top,r)-r/2,d=Ft(t,this.bottom,h)+h/2,l=c=a),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&Oi(i,n);const o=this.getLabelItems(t);for(const r of o){const h=r.options,a=r.font,l=r.label,c=r.textOffset;Be(i,l,0,c,a,h)}n&&Di(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:n}}=this;if(!i.display)return;const o=Q(i.font),r=ot(i.padding),h=i.align;let a=o.lineHeight/2;e==="bottom"||e==="center"||D(e)?(a+=r.bottom,W(i.text)&&(a+=o.lineHeight*(i.text.length-1))):a+=r.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=Dc(this,a,e,h);Be(t,i.text,0,0,o,{color:i.color,maxWidth:u,rotation:d,textAlign:Oc(h,e,n),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=O(t.grid&&t.grid.z,-1),n=O(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==fe.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let o,r;for(o=0,r=e.length;o<r;++o){const h=e[o];h[i]===this.id&&(!t||h.type===t)&&n.push(h)}return n}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Q(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ei{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;Rc(e)&&(i=this.register(e));const n=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in n||(n[o]=t,zc(t,r,i),this.override&&A.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,n=this.scope;i in e&&delete e[i],n&&i in A[n]&&(delete A[n][i],this.override&&delete Ut[i])}}function zc(s,t,e){const i=Ie(Object.create(null),[e?A.get(e):{},A.get(t),s.defaults]);A.set(t,i),s.defaultRoutes&&Ec(t,s.defaultRoutes),s.descriptors&&A.describe(t,s.descriptors)}function Ec(s,t){Object.keys(t).forEach(e=>{const i=e.split("."),n=i.pop(),o=[s].concat(i).join("."),r=t[e].split("."),h=r.pop(),a=r.join(".");A.route(o,n,a,h)})}function Rc(s){return"id"in s&&"defaults"in s}class Lc{constructor(){this.controllers=new ei(ne,"datasets",!0),this.elements=new ei(pt,"elements"),this.plugins=new ei(Object,"plugins"),this.scales=new ei(fe,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(n=>{const o=i||this._getRegistryForType(n);i||o.isForType(n)||o===this.plugins&&n.id?this._exec(t,o,n):L(n,r=>{const h=i||this._getRegistryForType(r);this._exec(t,h,r)})})}_exec(t,e,i){const n=Vs(t);V(i["before"+n],[],i),e[t](i),V(i["after"+n],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const n=e.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return n}}var dt=new Lc;class Fc{constructor(){this._init=void 0}notify(t,e,i,n){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const o=n?this._descriptors(t).filter(n):this._descriptors(t),r=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),r}_notify(t,e,i,n){n=n||{};for(const o of t){const r=o.plugin,h=r[i],a=[e,n,o.options];if(V(h,a,r)===!1&&n.cancelable)return!1}return!0}invalidate(){R(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,n=O(i.options&&i.options.plugins,{}),o=Ic(i);return n===!1&&!e?[]:Ac(t,o,n,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,n=(o,r)=>o.filter(h=>!r.some(a=>h.plugin.id===a.plugin.id));this._notify(n(e,i),t,"stop"),this._notify(n(i,e),t,"start")}}function Ic(s){const t={},e=[],i=Object.keys(dt.plugins.items);for(let o=0;o<i.length;o++)e.push(dt.getPlugin(i[o]));const n=s.plugins||[];for(let o=0;o<n.length;o++){const r=n[o];e.indexOf(r)===-1&&(e.push(r),t[r.id]=!0)}return{plugins:e,localIds:t}}function Vc(s,t){return!t&&s===!1?null:s===!0?{}:s}function Ac(s,{plugins:t,localIds:e},i,n){const o=[],r=s.getContext();for(const h of t){const a=h.id,l=Vc(i[a],n);l!==null&&o.push({plugin:h,options:Nc(s.config,{plugin:h,local:e[a]},l,r)})}return o}function Nc(s,{plugin:t,local:e},i,n){const o=s.pluginScopeKeys(t),r=s.getOptionScopes(i,o);return e&&t.defaults&&r.push(t.defaults),s.createResolver(r,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ss(s,t){const e=A.datasets[s]||{};return((t.datasets||{})[s]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Bc(s,t){let e=s;return s==="_index_"?e=t:s==="_value_"&&(e=t==="x"?"y":"x"),e}function Wc(s,t){return s===t?"_index_":"_value_"}function Wn(s){if(s==="x"||s==="y"||s==="r")return s}function Yc(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function Ps(s,...t){if(Wn(s))return s;for(const e of t){const i=e.axis||Yc(e.position)||s.length>1&&Wn(s[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function Yn(s,t,e){if(e[t+"AxisID"]===s)return{axis:t}}function Hc(s,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===s||i.yAxisID===s);if(e.length)return Yn(s,"x",e[0])||Yn(s,"y",e[0])}return{}}function jc(s,t){const e=Ut[s.type]||{scales:{}},i=t.scales||{},n=Ss(s.type,t),o=Object.create(null);return Object.keys(i).forEach(r=>{const h=i[r];if(!D(h))return console.error(`Invalid scale configuration for scale: ${r}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const a=Ps(r,h,Hc(r,s),A.scales[h.type]),l=Wc(a,n),c=e.scales||{};o[r]=Ce(Object.create(null),[{axis:a},h,c[a],c[l]])}),s.data.datasets.forEach(r=>{const h=r.type||s.type,a=r.indexAxis||Ss(h,t),c=(Ut[h]||{}).scales||{};Object.keys(c).forEach(u=>{const d=Bc(u,a),f=r[d+"AxisID"]||d;o[f]=o[f]||Object.create(null),Ce(o[f],[{axis:d},i[f],c[u]])})}),Object.keys(o).forEach(r=>{const h=o[r];Ce(h,[A.scales[h.type],A.scale])}),o}function Qr(s){const t=s.options||(s.options={});t.plugins=O(t.plugins,{}),t.scales=jc(s,t)}function Gr(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function $c(s){return s=s||{},s.data=Gr(s.data),Qr(s),s}const Hn=new Map,Jr=new Set;function ii(s,t){let e=Hn.get(s);return e||(e=t(),Hn.set(s,e),Jr.add(e)),e}const ye=(s,t,e)=>{const i=re(t,e);i!==void 0&&s.add(i)};class Uc{constructor(t){this._config=$c(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Gr(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Qr(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ii(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return ii(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return ii(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return ii(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let n=i.get(t);return(!n||e)&&(n=new Map,i.set(t,n)),n}getOptionScopes(t,e,i){const{options:n,type:o}=this,r=this._cachedScopes(t,i),h=r.get(e);if(h)return h;const a=new Set;e.forEach(c=>{t&&(a.add(t),c.forEach(u=>ye(a,t,u))),c.forEach(u=>ye(a,n,u)),c.forEach(u=>ye(a,Ut[o]||{},u)),c.forEach(u=>ye(a,A,u)),c.forEach(u=>ye(a,ws,u))});const l=Array.from(a);return l.length===0&&l.push(Object.create(null)),Jr.has(e)&&r.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,Ut[e]||{},A.datasets[e]||{},{type:e},A,ws]}resolveNamedOptions(t,e,i,n=[""]){const o={$shared:!0},{resolver:r,subPrefixes:h}=jn(this._resolverCache,t,n);let a=r;if(Qc(r,e)){o.$shared=!1,i=zt(i)?i():i;const l=this.createResolver(t,i,h);a=he(r,i,l)}for(const l of e)o[l]=a[l];return o}createResolver(t,e,i=[""],n){const{resolver:o}=jn(this._resolverCache,t,i);return D(e)?he(o,e,void 0,n):o}}function jn(s,t,e){let i=s.get(t);i||(i=new Map,s.set(t,i));const n=e.join();let o=i.get(n);return o||(o={resolver:Ws(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},i.set(n,o)),o}const qc=s=>D(s)&&Object.getOwnPropertyNames(s).some(t=>zt(s[t]));function Qc(s,t){const{isScriptable:e,isIndexable:i}=Or(s);for(const n of t){const o=e(n),r=i(n),h=(r||o)&&s[n];if(o&&(zt(h)||qc(h))||r&&W(h))return!0}return!1}var Gc="4.5.1";const Jc=["top","bottom","left","right","chartArea"];function $n(s,t){return s==="top"||s==="bottom"||Jc.indexOf(s)===-1&&t==="x"}function Un(s,t){return function(e,i){return e[s]===i[s]?e[t]-i[t]:e[s]-i[s]}}function qn(s){const t=s.chart,e=t.options.animation;t.notifyPlugins("afterRender"),V(e&&e.onComplete,[s],t)}function Xc(s){const t=s.chart,e=t.options.animation;V(e&&e.onProgress,[s],t)}function Xr(s){return js()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const gi={},Qn=s=>{const t=Xr(s);return Object.values(gi).filter(e=>e.canvas===t).pop()};function Kc(s,t,e){const i=Object.keys(s);for(const n of i){const o=+n;if(o>=t){const r=s[n];delete s[n],(e>0||o>t)&&(s[o+e]=r)}}}function Zc(s,t,e,i){return!e||s.type==="mouseout"?null:i?t:s}class Bt{static register(...t){dt.add(...t),Gn()}static unregister(...t){dt.remove(...t),Gn()}constructor(t,e){const i=this.config=new Uc(e),n=Xr(t),o=Qn(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||bc(n)),this.platform.updateConfig(i);const h=this.platform.acquireContext(n,r.aspectRatio),a=h&&h.canvas,l=a&&a.height,c=a&&a.width;if(this.id=Xh(),this.ctx=h,this.canvas=a,this.width=c,this.height=l,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Fc,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ba(u=>this.update(u),r.resizeDelay||0),this._dataChanges=[],gi[this.id]=this,!h||!a){console.error("Failed to create chart: can't acquire context from the given item");return}bt.listen(this,"complete",qn),bt.listen(this,"progress",Xc),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:n,_aspectRatio:o}=this;return R(t)?e&&o?o:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return dt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bn(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gn(this.canvas,this.ctx),this}stop(){return bt.stop(this),this}resize(t,e){bt.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,n=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(n,t,e,o),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,bn(this,h,!0)&&(this.notifyPlugins("resize",{size:r}),V(i.onResize,[this,r],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};L(e,(i,n)=>{i.id=n})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,n=Object.keys(i).reduce((r,h)=>(r[h]=!1,r),{});let o=[];e&&(o=o.concat(Object.keys(e).map(r=>{const h=e[r],a=Ps(r,h),l=a==="r",c=a==="x";return{options:h,dposition:l?"chartArea":c?"bottom":"left",dtype:l?"radialLinear":c?"category":"linear"}}))),L(o,r=>{const h=r.options,a=h.id,l=Ps(a,h),c=O(h.type,r.dtype);(h.position===void 0||$n(h.position,l)!==$n(r.dposition))&&(h.position=r.dposition),n[a]=!0;let u=null;if(a in i&&i[a].type===c)u=i[a];else{const d=dt.getScale(c);u=new d({id:a,type:c,ctx:this.ctx,chart:this}),i[u.id]=u}u.init(h,t)}),L(n,(r,h)=>{r||delete i[h]}),L(i,r=>{nt.configure(this,r,r.options),nt.addBox(this,r)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((n,o)=>n.index-o.index),i>e){for(let n=e;n<i;++n)this._destroyDatasetMeta(n);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(Un("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,n)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=e.length;i<n;i++){const o=e[i];let r=this.getDatasetMeta(i);const h=o.type||this.config.type;if(r.type&&r.type!==h&&(this._destroyDatasetMeta(i),r=this.getDatasetMeta(i)),r.type=h,r.indexAxis=o.indexAxis||Ss(h,this.options),r.order=o.order||0,r.index=i,r.label=""+o.label,r.visible=this.isDatasetVisible(i),r.controller)r.controller.updateIndex(i),r.controller.linkScales();else{const a=dt.getController(h),{datasetElementType:l,dataElementType:c}=A.datasets[h];Object.assign(a,{dataElementType:dt.getElement(c),datasetElementType:l&&dt.getElement(l)}),r.controller=new a(this,i),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){L(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:u}=this.getDatasetMeta(l),d=!n&&o.indexOf(u)===-1;u.buildOrUpdateElements(d),r=Math.max(+u.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),n||L(o,l=>{l.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Un("z","_idx"));const{_active:h,_lastEvent:a}=this;a?this._eventHandler(a,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){L(this.scales,t=>{nt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!nn(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:o}of e){const r=i==="_removeElements"?-o:o;Kc(t,n,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(r=>r[0]===o).map((r,h)=>h+","+r.splice(1).join(","))),n=i(0);for(let o=1;o<e;o++)if(!nn(n,i(o)))return;return Array.from(n).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;nt.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],L(this.boxes,n=>{i&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,o)=>{n._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,zt(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),n={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(i.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(bt.has(this)?this.attached&&!bt.running(this)&&bt.start(this):(this.draw(),qn({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let n,o;for(n=0,o=e.length;n<o;++n){const r=e[n];(!t||r.visible)&&i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},n=Nr(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(n&&Oi(e,n),t.controller.draw(),n&&Di(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Ne(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,n){const o=Jl.modes[e];return typeof o=="function"?o(this,t,i,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let n=i.filter(o=>o&&o._dataset===e).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=Jt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const n=i?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,n);Ve(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),r.update(o,{visible:i}),this.update(h=>h.datasetIndex===t?n:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),bt.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),gn(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete gi[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,r)=>{e.addEventListener(this,o,r),t[o]=r},n=(o,r,h)=>{o.offsetX=r,o.offsetY=h,this._eventHandler(o)};L(this.options.events,o=>i(o,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(a,l)=>{e.addEventListener(this,a,l),t[a]=l},n=(a,l)=>{t[a]&&(e.removeEventListener(this,a,l),delete t[a])},o=(a,l)=>{this.canvas&&this.resize(a,l)};let r;const h=()=>{n("attach",h),this.attached=!0,this.resize(),i("resize",o),i("detach",r)};r=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),i("attach",h)},e.isAttached(this.canvas)?h():r()}unbindEvents(){L(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},L(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const n=i?"set":"remove";let o,r,h,a;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),h=0,a=t.length;h<a;++h){r=t[h];const l=r&&this.getDatasetMeta(r.datasetIndex).controller;l&&l[n+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:r})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[r],index:r}});!bi(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const n=this.options.hover,o=(a,l)=>a.filter(c=>!l.some(u=>c.datasetIndex===u.datasetIndex&&c.index===u.index)),r=o(e,t),h=i?t:o(t,e);r.length&&this.updateHoverStyle(r,n.mode,!1),h.length&&n.mode&&this.updateHoverStyle(h,n.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,n)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:n=[],options:o}=this,r=e,h=this._getActiveElements(t,n,i,r),a=sa(t),l=Zc(t,this._lastEvent,i,a);i&&(this._lastEvent=null,V(o.onHover,[t,h,this],this),a&&V(o.onClick,[t,h,this],this));const c=!bi(h,n);return(c||e)&&(this._active=h,this._updateHoverStyles(h,n,e)),this._lastEvent=l,c}_getActiveElements(t,e,i,n){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,n)}}C(Bt,"defaults",A),C(Bt,"instances",gi),C(Bt,"overrides",Ut),C(Bt,"registry",dt),C(Bt,"version",Gc),C(Bt,"getChart",Qn);function Gn(){return L(Bt.instances,s=>s._plugins.invalidate())}function Kr(s,t,e=t){s.lineCap=O(e.borderCapStyle,t.borderCapStyle),s.setLineDash(O(e.borderDash,t.borderDash)),s.lineDashOffset=O(e.borderDashOffset,t.borderDashOffset),s.lineJoin=O(e.borderJoinStyle,t.borderJoinStyle),s.lineWidth=O(e.borderWidth,t.borderWidth),s.strokeStyle=O(e.borderColor,t.borderColor)}function tu(s,t,e){s.lineTo(e.x,e.y)}function eu(s){return s.stepped?za:s.tension||s.cubicInterpolationMode==="monotone"?Ea:tu}function Zr(s,t,e={}){const i=s.length,{start:n=0,end:o=i-1}=e,{start:r,end:h}=t,a=Math.max(n,r),l=Math.min(o,h),c=n<r&&o<r||n>h&&o>h;return{count:i,start:a,loop:t.loop,ilen:l<a&&!c?i+l-a:l-a}}function iu(s,t,e,i){const{points:n,options:o}=t,{count:r,start:h,loop:a,ilen:l}=Zr(n,e,i),c=eu(o);let{move:u=!0,reverse:d}=i||{},f,g,p;for(f=0;f<=l;++f)g=n[(h+(d?l-f:f))%r],!g.skip&&(u?(s.moveTo(g.x,g.y),u=!1):c(s,p,g,d,o.stepped),p=g);return a&&(g=n[(h+(d?l:0))%r],c(s,p,g,d,o.stepped)),!!a}function su(s,t,e,i){const n=t.points,{count:o,start:r,ilen:h}=Zr(n,e,i),{move:a=!0,reverse:l}=i||{};let c=0,u=0,d,f,g,p,m,b;const _=w=>(r+(l?h-w:w))%o,y=()=>{p!==m&&(s.lineTo(c,m),s.lineTo(c,p),s.lineTo(c,b))};for(a&&(f=n[_(0)],s.moveTo(f.x,f.y)),d=0;d<=h;++d){if(f=n[_(d)],f.skip)continue;const w=f.x,v=f.y,P=w|0;P===g?(v<p?p=v:v>m&&(m=v),c=(u*c+w)/++u):(y(),s.lineTo(w,v),g=P,u=0,p=m=v),b=v}y()}function ks(s){const t=s.options,e=t.borderDash&&t.borderDash.length;return!s._decimated&&!s._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?su:iu}function nu(s){return s.stepped?cl:s.tension||s.cubicInterpolationMode==="monotone"?ul:Nt}function ou(s,t,e,i){let n=t._path;n||(n=t._path=new Path2D,t.path(n,e,i)&&n.closePath()),Kr(s,t.options),s.stroke(n)}function ru(s,t,e,i){const{segments:n,options:o}=t,r=ks(t);for(const h of n)Kr(s,o,h.style),s.beginPath(),r(s,t,h,{start:e,end:e+i-1})&&s.closePath(),s.stroke()}const hu=typeof Path2D=="function";function au(s,t,e,i){hu&&!t.options.segment?ou(s,t,e,i):ru(s,t,e,i)}class Ht extends pt{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;il(this._points,i,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=bl(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,n=t[e],o=this.points,r=Ar(this,{property:e,start:n,end:n});if(!r.length)return;const h=[],a=nu(i);let l,c;for(l=0,c=r.length;l<c;++l){const{start:u,end:d}=r[l],f=o[u],g=o[d];if(f===g){h.push(f);continue}const p=Math.abs((n-f[e])/(g[e]-f[e])),m=a(f,g,p,i.stepped);m[e]=t[e],h.push(m)}return h.length===1?h[0]:h}pathSegment(t,e,i){return ks(this)(t,this,e,i)}path(t,e,i){const n=this.segments,o=ks(this);let r=this._loop;e=e||0,i=i||this.points.length-e;for(const h of n)r&=o(t,this,h,{start:e,end:e+i-1});return!!r}draw(t,e,i,n){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),au(t,this,i,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}C(Ht,"id","line"),C(Ht,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),C(Ht,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),C(Ht,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Jn(s,t,e,i){const n=s.options,{[e]:o}=s.getProps([e],i);return Math.abs(t-o)<n.radius+n.hitRadius}class Zi extends pt{constructor(e){super();C(this,"parsed");C(this,"skip");C(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,n){const o=this.options,{x:r,y:h}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(i-h,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return Jn(this,e,"x",i)}inYRange(e,i){return Jn(this,e,"y",i)}getCenterPoint(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const n=i&&e.borderWidth||0;return(i+n)*2}draw(e,i){const n=this.options;this.skip||n.radius<.1||!Ne(this,i,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Ms(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}C(Zi,"id","point"),C(Zi,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),C(Zi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function th(s,t){const{x:e,y:i,base:n,width:o,height:r}=s.getProps(["x","y","base","width","height"],t);let h,a,l,c,u;return s.horizontal?(u=r/2,h=Math.min(e,n),a=Math.max(e,n),l=i-u,c=i+u):(u=o/2,h=e-u,a=e+u,l=Math.min(i,n),c=Math.max(i,n)),{left:h,top:l,right:a,bottom:c}}function Tt(s,t,e,i){return s?0:et(t,e,i)}function lu(s,t,e){const i=s.options.borderWidth,n=s.borderSkipped,o=Tr(i);return{t:Tt(n.top,o.top,0,e),r:Tt(n.right,o.right,0,t),b:Tt(n.bottom,o.bottom,0,e),l:Tt(n.left,o.left,0,t)}}function cu(s,t,e){const{enableBorderRadius:i}=s.getProps(["enableBorderRadius"]),n=s.options.borderRadius,o=ie(n),r=Math.min(t,e),h=s.borderSkipped,a=i||D(n);return{topLeft:Tt(!a||h.top||h.left,o.topLeft,0,r),topRight:Tt(!a||h.top||h.right,o.topRight,0,r),bottomLeft:Tt(!a||h.bottom||h.left,o.bottomLeft,0,r),bottomRight:Tt(!a||h.bottom||h.right,o.bottomRight,0,r)}}function uu(s){const t=th(s),e=t.right-t.left,i=t.bottom-t.top,n=lu(s,e/2,i/2),o=cu(s,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+n.l,y:t.top+n.t,w:e-n.l-n.r,h:i-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function ts(s,t,e,i){const n=t===null,o=e===null,h=s&&!(n&&o)&&th(s,i);return h&&(n||kt(t,h.left,h.right))&&(o||kt(e,h.top,h.bottom))}function du(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function fu(s,t){s.rect(t.x,t.y,t.w,t.h)}function es(s,t,e={}){const i=s.x!==e.x?-t:0,n=s.y!==e.y?-t:0,o=(s.x+s.w!==e.x+e.w?t:0)-i,r=(s.y+s.h!==e.y+e.h?t:0)-n;return{x:s.x+i,y:s.y+n,w:s.w+o,h:s.h+r,radius:s.radius}}class is extends pt{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:n}}=this,{inner:o,outer:r}=uu(this),h=du(r.radius)?xi:fu;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),h(t,es(r,e,o)),t.clip(),h(t,es(o,-e,r)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),h(t,es(o,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,i){return ts(this,t,e,i)}inXRange(t,e){return ts(this,t,null,e)}inYRange(t,e){return ts(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+n)/2:e,y:o?i:(i+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}C(is,"id","bar"),C(is,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),C(is,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function gu(s,t,e){const i=s.segments,n=s.points,o=t.points,r=[];for(const h of i){let{start:a,end:l}=h;l=Ri(a,l,n);const c=Cs(e,n[a],n[l],h.loop);if(!t.segments){r.push({source:h,target:c,start:n[a],end:n[l]});continue}const u=Ar(t,c);for(const d of u){const f=Cs(e,o[d.start],o[d.end],d.loop),g=Vr(h,n,f);for(const p of g)r.push({source:p,target:d,start:{[e]:Xn(c,f,"start",Math.max)},end:{[e]:Xn(c,f,"end",Math.min)}})}}return r}function Cs(s,t,e,i){if(i)return;let n=t[s],o=e[s];return s==="angle"&&(n=ft(n),o=ft(o)),{property:s,start:n,end:o}}function pu(s,t){const{x:e=null,y:i=null}=s||{},n=t.points,o=[];return t.segments.forEach(({start:r,end:h})=>{h=Ri(r,h,n);const a=n[r],l=n[h];i!==null?(o.push({x:a.x,y:i}),o.push({x:l.x,y:i})):e!==null&&(o.push({x:e,y:a.y}),o.push({x:e,y:l.y}))}),o}function Ri(s,t,e){for(;t>s;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Xn(s,t,e,i){return s&&t?i(s[e],t[e]):s?s[e]:t?t[e]:0}function eh(s,t){let e=[],i=!1;return W(s)?(i=!0,e=s):e=pu(s,t),e.length?new Ht({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function Kn(s){return s&&s.fill!==!1}function mu(s,t,e){let n=s[t].fill;const o=[t];let r;if(!e)return n;for(;n!==!1&&o.indexOf(n)===-1;){if(!G(n))return n;if(r=s[n],!r)return!1;if(r.visible)return n;o.push(n),n=r.fill}return!1}function bu(s,t,e){const i=yu(s);if(D(i))return isNaN(i.value)?!1:i;let n=parseFloat(i);return G(n)&&Math.floor(n)===n?_u(i[0],t,n,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function _u(s,t,e,i){return(s==="-"||s==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function vu(s,t){let e=null;return s==="start"?e=t.bottom:s==="end"?e=t.top:D(s)?e=t.getPixelForValue(s.value):t.getBasePixel&&(e=t.getBasePixel()),e}function xu(s,t,e){let i;return s==="start"?i=e:s==="end"?i=t.options.reverse?t.min:t.max:D(s)?i=s.value:i=t.getBaseValue(),i}function yu(s){const t=s.options,e=t.fill;let i=O(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function wu(s){const{scale:t,index:e,line:i}=s,n=[],o=i.segments,r=i.points,h=Mu(t,e);h.push(eh({x:null,y:t.bottom},i));for(let a=0;a<o.length;a++){const l=o[a];for(let c=l.start;c<=l.end;c++)Su(n,r[c],h)}return new Ht({points:n,options:{}})}function Mu(s,t){const e=[],i=s.getMatchingVisibleMetas("line");for(let n=0;n<i.length;n++){const o=i[n];if(o.index===t)break;o.hidden||e.unshift(o.dataset)}return e}function Su(s,t,e){const i=[];for(let n=0;n<e.length;n++){const o=e[n],{first:r,last:h,point:a}=Pu(o,t,"x");if(!(!a||r&&h)){if(r)i.unshift(a);else if(s.push(a),!h)break}}s.push(...i)}function Pu(s,t,e){const i=s.interpolate(t,e);if(!i)return{};const n=i[e],o=s.segments,r=s.points;let h=!1,a=!1;for(let l=0;l<o.length;l++){const c=o[l],u=r[c.start][e],d=r[c.end][e];if(kt(n,u,d)){h=n===u,a=n===d;break}}return{first:h,last:a,point:i}}class ih{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:n,y:o,radius:r}=this;return e=e||{start:0,end:ht},t.arc(n,o,r,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:n}=this,o=t.angle;return{x:e+Math.cos(o)*n,y:i+Math.sin(o)*n,angle:o}}}function ku(s){const{chart:t,fill:e,line:i}=s;if(G(e))return Cu(t,e);if(e==="stack")return wu(s);if(e==="shape")return!0;const n=Tu(s);return n instanceof ih?n:eh(n,i)}function Cu(s,t){const e=s.getDatasetMeta(t);return e&&s.isDatasetVisible(t)?e.dataset:null}function Tu(s){return(s.scale||{}).getPointPositionForValue?Du(s):Ou(s)}function Ou(s){const{scale:t={},fill:e}=s,i=vu(e,t);if(G(i)){const n=t.isHorizontal();return{x:n?i:null,y:n?null:i}}return null}function Du(s){const{scale:t,fill:e}=s,i=t.options,n=t.getLabels().length,o=i.reverse?t.max:t.min,r=xu(e,t,o),h=[];if(i.grid.circular){const a=t.getPointPositionForValue(0,o);return new ih({x:a.x,y:a.y,radius:t.getDistanceFromCenterForValue(r)})}for(let a=0;a<n;++a)h.push(t.getPointPositionForValue(a,r));return h}function ss(s,t,e){const i=ku(t),{chart:n,index:o,line:r,scale:h,axis:a}=t,l=r.options,c=l.fill,u=l.backgroundColor,{above:d=u,below:f=u}=c||{},g=n.getDatasetMeta(o),p=Nr(n,g);i&&r.points.length&&(Oi(s,e),zu(s,{line:r,target:i,above:d,below:f,area:e,scale:h,axis:a,clip:p}),Di(s))}function zu(s,t){const{line:e,target:i,above:n,below:o,area:r,scale:h,clip:a}=t,l=e._loop?"angle":t.axis;s.save();let c=o;o!==n&&(l==="x"?(Zn(s,i,r.top),ns(s,{line:e,target:i,color:n,scale:h,property:l,clip:a}),s.restore(),s.save(),Zn(s,i,r.bottom)):l==="y"&&(to(s,i,r.left),ns(s,{line:e,target:i,color:o,scale:h,property:l,clip:a}),s.restore(),s.save(),to(s,i,r.right),c=n)),ns(s,{line:e,target:i,color:c,scale:h,property:l,clip:a}),s.restore()}function Zn(s,t,e){const{segments:i,points:n}=t;let o=!0,r=!1;s.beginPath();for(const h of i){const{start:a,end:l}=h,c=n[a],u=n[Ri(a,l,n)];o?(s.moveTo(c.x,c.y),o=!1):(s.lineTo(c.x,e),s.lineTo(c.x,c.y)),r=!!t.pathSegment(s,h,{move:r}),r?s.closePath():s.lineTo(u.x,e)}s.lineTo(t.first().x,e),s.closePath(),s.clip()}function to(s,t,e){const{segments:i,points:n}=t;let o=!0,r=!1;s.beginPath();for(const h of i){const{start:a,end:l}=h,c=n[a],u=n[Ri(a,l,n)];o?(s.moveTo(c.x,c.y),o=!1):(s.lineTo(e,c.y),s.lineTo(c.x,c.y)),r=!!t.pathSegment(s,h,{move:r}),r?s.closePath():s.lineTo(e,u.y)}s.lineTo(e,t.first().y),s.closePath(),s.clip()}function ns(s,t){const{line:e,target:i,property:n,color:o,scale:r,clip:h}=t,a=gu(e,i,n);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:f=o}={}}=l,g=i!==!0;s.save(),s.fillStyle=f,Eu(s,r,h,g&&Cs(n,u,d)),s.beginPath();const p=!!e.pathSegment(s,l);let m;if(g){p?s.closePath():eo(s,i,d,n);const b=!!i.pathSegment(s,c,{move:p,reverse:!0});m=p&&b,m||eo(s,i,u,n)}s.closePath(),s.fill(m?"evenodd":"nonzero"),s.restore()}}function Eu(s,t,e,i){const n=t.chart.chartArea,{property:o,start:r,end:h}=i||{};if(o==="x"||o==="y"){let a,l,c,u;o==="x"?(a=r,l=n.top,c=h,u=n.bottom):(a=n.left,l=r,c=n.right,u=h),s.beginPath(),e&&(a=Math.max(a,e.left),c=Math.min(c,e.right),l=Math.max(l,e.top),u=Math.min(u,e.bottom)),s.rect(a,l,c-a,u-l),s.clip()}}function eo(s,t,e,i){const n=t.interpolate(e,i);n&&s.lineTo(n.x,n.y)}var cg={id:"filler",afterDatasetsUpdate(s,t,e){const i=(s.data.datasets||[]).length,n=[];let o,r,h,a;for(r=0;r<i;++r)o=s.getDatasetMeta(r),h=o.dataset,a=null,h&&h.options&&h instanceof Ht&&(a={visible:s.isDatasetVisible(r),index:r,fill:bu(h,r,i),chart:s,axis:o.controller.options.indexAxis,scale:o.vScale,line:h}),o.$filler=a,n.push(a);for(r=0;r<i;++r)a=n[r],!(!a||a.fill===!1)&&(a.fill=mu(n,r,e.propagate))},beforeDraw(s,t,e){const i=e.drawTime==="beforeDraw",n=s.getSortedVisibleDatasetMetas(),o=s.chartArea;for(let r=n.length-1;r>=0;--r){const h=n[r].$filler;h&&(h.line.updateControlPoints(o,h.axis),i&&h.fill&&ss(s.ctx,h,o))}},beforeDatasetsDraw(s,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=s.getSortedVisibleDatasetMetas();for(let n=i.length-1;n>=0;--n){const o=i[n].$filler;Kn(o)&&ss(s.ctx,o,s.chartArea)}},beforeDatasetDraw(s,t,e){const i=t.meta.$filler;!Kn(i)||e.drawTime!=="beforeDatasetDraw"||ss(s.ctx,i,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const io=(s,t)=>{let{boxHeight:e=t,boxWidth:i=t}=s;return s.usePointStyle&&(e=Math.min(e,t),i=s.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},Ru=(s,t)=>s!==null&&t!==null&&s.datasetIndex===t.datasetIndex&&s.index===t.index;class so extends pt{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=V(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,n)=>t.sort(i,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,n=Q(i.font),o=n.size,r=this._computeTitleHeight(),{boxWidth:h,itemHeight:a}=io(i,o);let l,c;e.font=n.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(r,o,h,a)+10):(c=this.maxHeight,l=this._fitCols(r,n,h,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,n){const{ctx:o,maxWidth:r,options:{labels:{padding:h}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+h;let u=t;o.textAlign="left",o.textBaseline="middle";let d=-1,f=-c;return this.legendItems.forEach((g,p)=>{const m=i+e/2+o.measureText(g.text).width;(p===0||l[l.length-1]+m+2*h>r)&&(u+=c,l[l.length-(p>0?0:1)]=0,f+=c,d++),a[p]={left:0,top:f,row:d,width:m,height:n},l[l.length-1]+=m+h}),u}_fitCols(t,e,i,n){const{ctx:o,maxHeight:r,options:{labels:{padding:h}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=r-t;let u=h,d=0,f=0,g=0,p=0;return this.legendItems.forEach((m,b)=>{const{itemWidth:_,itemHeight:y}=Lu(i,e,o,m,n);b>0&&f+y+2*h>c&&(u+=d+h,l.push({width:d,height:f}),g+=d+h,p++,d=f=0),a[b]={left:g,top:f,col:p,width:_,height:y},d=Math.max(d,_),f+=y+h}),u+=d,l.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:n},rtl:o}}=this,r=se(o,this.left,this.width);if(this.isHorizontal()){let h=0,a=q(i,this.left+n,this.right-this.lineWidths[h]);for(const l of e)h!==l.row&&(h=l.row,a=q(i,this.left+n,this.right-this.lineWidths[h])),l.top+=this.top+t+n,l.left=r.leftForLtr(r.x(a),l.width),a+=l.width+n}else{let h=0,a=q(i,this.top+t+n,this.bottom-this.columnSizes[h].height);for(const l of e)l.col!==h&&(h=l.col,a=q(i,this.top+t+n,this.bottom-this.columnSizes[h].height)),l.top=a,l.left+=this.left+n,l.left=r.leftForLtr(r.x(l.left),l.width),a+=l.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Oi(t,this),this._draw(),Di(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:n}=this,{align:o,labels:r}=t,h=A.color,a=se(t.rtl,this.left,this.width),l=Q(r.font),{padding:c}=r,u=l.size,d=u/2;let f;this.drawTitle(),n.textAlign=a.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=l.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=io(r,u),b=function(P,S,M){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;n.save();const k=O(M.lineWidth,1);if(n.fillStyle=O(M.fillStyle,h),n.lineCap=O(M.lineCap,"butt"),n.lineDashOffset=O(M.lineDashOffset,0),n.lineJoin=O(M.lineJoin,"miter"),n.lineWidth=k,n.strokeStyle=O(M.strokeStyle,h),n.setLineDash(O(M.lineDash,[])),r.usePointStyle){const z={radius:p*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:k},T=a.xPlus(P,g/2),E=S+d;kr(n,z,T,E,r.pointStyleWidth&&g)}else{const z=S+Math.max((u-p)/2,0),T=a.leftForLtr(P,g),E=ie(M.borderRadius);n.beginPath(),Object.values(E).some(Y=>Y!==0)?xi(n,{x:T,y:z,w:g,h:p,radius:E}):n.rect(T,z,g,p),n.fill(),k!==0&&n.stroke()}n.restore()},_=function(P,S,M){Be(n,M.text,P,S+m/2,l,{strikethrough:M.hidden,textAlign:a.textAlign(M.textAlign)})},y=this.isHorizontal(),w=this._computeTitleHeight();y?f={x:q(o,this.left+c,this.right-i[0]),y:this.top+c+w,line:0}:f={x:this.left+c,y:q(o,this.top+w+c,this.bottom-e[0].height),line:0},Lr(this.ctx,t.textDirection);const v=m+c;this.legendItems.forEach((P,S)=>{n.strokeStyle=P.fontColor,n.fillStyle=P.fontColor;const M=n.measureText(P.text).width,k=a.textAlign(P.textAlign||(P.textAlign=r.textAlign)),z=g+d+M;let T=f.x,E=f.y;a.setWidth(this.width),y?S>0&&T+z+c>this.right&&(E=f.y+=v,f.line++,T=f.x=q(o,this.left+c,this.right-i[f.line])):S>0&&E+v>this.bottom&&(T=f.x=T+e[f.line].width+c,f.line++,E=f.y=q(o,this.top+w+c,this.bottom-e[f.line].height));const Y=a.x(T);if(b(Y,E,P),T=_a(k,T+g+d,y?T+z:this.right,t.rtl),_(a.x(T),E,P),y)f.x+=z+c;else if(typeof P.text!="string"){const tt=l.lineHeight;f.y+=sh(P,tt)+c}else f.y+=v}),Fr(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Q(e.font),n=ot(e.padding);if(!e.display)return;const o=se(t.rtl,this.left,this.width),r=this.ctx,h=e.position,a=i.size/2,l=n.top+a;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=q(t.align,u,this.right-d);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);c=l+q(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const f=q(h,u,u+d);r.textAlign=o.textAlign(Ns(h)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=i.string,Be(r,e.text,f,c,i)}_computeTitleHeight(){const t=this.options.title,e=Q(t.font),i=ot(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,n,o;if(kt(t,this.left,this.right)&&kt(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(n=o[i],kt(t,n.left,n.left+n.width)&&kt(e,n.top,n.top+n.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!Vu(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,o=Ru(n,i);n&&!o&&V(e.onLeave,[t,n,this],this),this._hoveredItem=i,i&&!o&&V(e.onHover,[t,i,this],this)}else i&&V(e.onClick,[t,i,this],this)}}function Lu(s,t,e,i,n){const o=Fu(i,s,t,e),r=Iu(n,i,t.lineHeight);return{itemWidth:o,itemHeight:r}}function Fu(s,t,e,i){let n=s.text;return n&&typeof n!="string"&&(n=n.reduce((o,r)=>o.length>r.length?o:r)),t+e.size/2+i.measureText(n).width}function Iu(s,t,e){let i=s;return typeof t.text!="string"&&(i=sh(t,e)),i}function sh(s,t){const e=s.text?s.text.length:0;return t*e}function Vu(s,t){return!!((s==="mousemove"||s==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(s==="click"||s==="mouseup"))}var ug={id:"legend",_element:so,start(s,t,e){const i=s.legend=new so({ctx:s.ctx,options:e,chart:s});nt.configure(s,i,e),nt.addBox(s,i)},stop(s){nt.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,t,e){const i=s.legend;nt.configure(s,i,e),i.options=e},afterUpdate(s){const t=s.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(s,t){t.replay||s.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,t,e){const i=t.datasetIndex,n=e.chart;n.isDatasetVisible(i)?(n.hide(i),t.hidden=!0):(n.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const t=s.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:n,color:o,useBorderRadius:r,borderRadius:h}}=s.legend.options;return s._getSortedDatasetMetas().map(a=>{const l=a.controller.getStyle(e?0:void 0),c=ot(l.borderWidth);return{text:t[a.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!a.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:n||l.textAlign,borderRadius:r&&(h||l.borderRadius),datasetIndex:a.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class nh extends pt{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const n=W(i.text)?i.text.length:1;this._padding=ot(i.padding);const o=n*Q(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:n,right:o,options:r}=this,h=r.align;let a=0,l,c,u;return this.isHorizontal()?(c=q(h,i,o),u=e+t,l=o-i):(r.position==="left"?(c=i+t,u=q(h,n,e),a=j*-.5):(c=o-t,u=q(h,e,n),a=j*.5),l=n-e),{titleX:c,titleY:u,maxWidth:l,rotation:a}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Q(e.font),o=i.lineHeight/2+this._padding.top,{titleX:r,titleY:h,maxWidth:a,rotation:l}=this._drawArgs(o);Be(t,e.text,0,0,i,{color:e.color,maxWidth:a,rotation:l,textAlign:Ns(e.align),textBaseline:"middle",translation:[r,h]})}}function Au(s,t){const e=new nh({ctx:s.ctx,options:t,chart:s});nt.configure(s,e,t),nt.addBox(s,e),s.titleBlock=e}var dg={id:"title",_element:nh,start(s,t,e){Au(s,e)},stop(s){const t=s.titleBlock;nt.removeBox(s,t),delete s.titleBlock},beforeUpdate(s,t,e){const i=s.titleBlock;nt.configure(s,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ke={average(s){if(!s.length)return!1;let t,e,i=new Set,n=0,o=0;for(t=0,e=s.length;t<e;++t){const h=s[t].element;if(h&&h.hasValue()){const a=h.tooltipPosition();i.add(a.x),n+=a.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((h,a)=>h+a)/i.size,y:n/o}},nearest(s,t){if(!s.length)return!1;let e=t.x,i=t.y,n=Number.POSITIVE_INFINITY,o,r,h;for(o=0,r=s.length;o<r;++o){const a=s[o].element;if(a&&a.hasValue()){const l=a.getCenterPoint(),c=ys(t,l);c<n&&(n=c,h=a)}}if(h){const a=h.tooltipPosition();e=a.x,i=a.y}return{x:e,y:i}}};function ut(s,t){return t&&(W(t)?Array.prototype.push.apply(s,t):s.push(t)),s}function _t(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function Nu(s,t){const{element:e,datasetIndex:i,index:n}=t,o=s.getDatasetMeta(i).controller,{label:r,value:h}=o.getLabelAndValue(n);return{chart:s,label:r,parsed:o.getParsed(n),raw:s.data.datasets[i].data[n],formattedValue:h,dataset:o.getDataset(),dataIndex:n,datasetIndex:i,element:e}}function no(s,t){const e=s.chart.ctx,{body:i,footer:n,title:o}=s,{boxWidth:r,boxHeight:h}=t,a=Q(t.bodyFont),l=Q(t.titleFont),c=Q(t.footerFont),u=o.length,d=n.length,f=i.length,g=ot(t.padding);let p=g.height,m=0,b=i.reduce((w,v)=>w+v.before.length+v.lines.length+v.after.length,0);if(b+=s.beforeBody.length+s.afterBody.length,u&&(p+=u*l.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),b){const w=t.displayColors?Math.max(h,a.lineHeight):a.lineHeight;p+=f*w+(b-f)*a.lineHeight+(b-1)*t.bodySpacing}d&&(p+=t.footerMarginTop+d*c.lineHeight+(d-1)*t.footerSpacing);let _=0;const y=function(w){m=Math.max(m,e.measureText(w).width+_)};return e.save(),e.font=l.string,L(s.title,y),e.font=a.string,L(s.beforeBody.concat(s.afterBody),y),_=t.displayColors?r+2+t.boxPadding:0,L(i,w=>{L(w.before,y),L(w.lines,y),L(w.after,y)}),_=0,e.font=c.string,L(s.footer,y),e.restore(),m+=g.width,{width:m,height:p}}function Bu(s,t){const{y:e,height:i}=t;return e<i/2?"top":e>s.height-i/2?"bottom":"center"}function Wu(s,t,e,i){const{x:n,width:o}=i,r=e.caretSize+e.caretPadding;if(s==="left"&&n+o+r>t.width||s==="right"&&n-o-r<0)return!0}function Yu(s,t,e,i){const{x:n,width:o}=e,{width:r,chartArea:{left:h,right:a}}=s;let l="center";return i==="center"?l=n<=(h+a)/2?"left":"right":n<=o/2?l="left":n>=r-o/2&&(l="right"),Wu(l,s,t,e)&&(l="center"),l}function oo(s,t,e){const i=e.yAlign||t.yAlign||Bu(s,e);return{xAlign:e.xAlign||t.xAlign||Yu(s,t,e,i),yAlign:i}}function Hu(s,t){let{x:e,width:i}=s;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function ju(s,t,e){let{y:i,height:n}=s;return t==="top"?i+=e:t==="bottom"?i-=n+e:i-=n/2,i}function ro(s,t,e,i){const{caretSize:n,caretPadding:o,cornerRadius:r}=s,{xAlign:h,yAlign:a}=e,l=n+o,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=ie(r);let g=Hu(t,h);const p=ju(t,a,l);return a==="center"?h==="left"?g+=l:h==="right"&&(g-=l):h==="left"?g-=Math.max(c,d)+n:h==="right"&&(g+=Math.max(u,f)+n),{x:et(g,0,i.width-t.width),y:et(p,0,i.height-t.height)}}function si(s,t,e){const i=ot(e.padding);return t==="center"?s.x+s.width/2:t==="right"?s.x+s.width-i.right:s.x+i.left}function ho(s){return ut([],_t(s))}function $u(s,t,e){return Jt(s,{tooltip:t,tooltipItems:e,type:"tooltip"})}function ao(s,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?s.override(e):s}const oh={beforeTitle:mt,title(s){if(s.length>0){const t=s[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:mt,beforeBody:mt,beforeLabel:mt,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let t=s.dataset.label||"";t&&(t+=": ");const e=s.formattedValue;return R(e)||(t+=e),t},labelColor(s){const e=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const e=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:mt,afterBody:mt,beforeFooter:mt,footer:mt,afterFooter:mt};function X(s,t,e,i){const n=s[t].call(e,i);return typeof n>"u"?oh[t].call(e,i):n}class Ts extends pt{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&e.options.animation&&i.animations,o=new Br(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=$u(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,n=X(i,"beforeTitle",this,t),o=X(i,"title",this,t),r=X(i,"afterTitle",this,t);let h=[];return h=ut(h,_t(n)),h=ut(h,_t(o)),h=ut(h,_t(r)),h}getBeforeBody(t,e){return ho(X(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,n=[];return L(t,o=>{const r={before:[],lines:[],after:[]},h=ao(i,o);ut(r.before,_t(X(h,"beforeLabel",this,o))),ut(r.lines,X(h,"label",this,o)),ut(r.after,_t(X(h,"afterLabel",this,o))),n.push(r)}),n}getAfterBody(t,e){return ho(X(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,n=X(i,"beforeFooter",this,t),o=X(i,"footer",this,t),r=X(i,"afterFooter",this,t);let h=[];return h=ut(h,_t(n)),h=ut(h,_t(o)),h=ut(h,_t(r)),h}_createItems(t){const e=this._active,i=this.chart.data,n=[],o=[],r=[];let h=[],a,l;for(a=0,l=e.length;a<l;++a)h.push(Nu(this.chart,e[a]));return t.filter&&(h=h.filter((c,u,d)=>t.filter(c,u,d,i))),t.itemSort&&(h=h.sort((c,u)=>t.itemSort(c,u,i))),L(h,c=>{const u=ao(t.callbacks,c);n.push(X(u,"labelColor",this,c)),o.push(X(u,"labelPointStyle",this,c)),r.push(X(u,"labelTextColor",this,c))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),n=this._active;let o,r=[];if(!n.length)this.opacity!==0&&(o={opacity:0});else{const h=ke[i.position].call(this,n,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const a=this._size=no(this,i),l=Object.assign({},h,a),c=oo(this.chart,i,l),u=ro(i,l,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,o={opacity:1,x:u.x,y:u.y,width:a.width,height:a.height,caretX:h.x,caretY:h.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,n){const o=this.getCaretPosition(t,i,n);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:n,yAlign:o}=this,{caretSize:r,cornerRadius:h}=i,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=ie(h),{x:d,y:f}=t,{width:g,height:p}=e;let m,b,_,y,w,v;return o==="center"?(w=f+p/2,n==="left"?(m=d,b=m-r,y=w+r,v=w-r):(m=d+g,b=m+r,y=w-r,v=w+r),_=m):(n==="left"?b=d+Math.max(a,c)+r:n==="right"?b=d+g-Math.max(l,u)-r:b=this.caretX,o==="top"?(y=f,w=y-r,m=b-r,_=b+r):(y=f+p,w=y+r,m=b+r,_=b-r),v=y),{x1:m,x2:b,x3:_,y1:y,y2:w,y3:v}}drawTitle(t,e,i){const n=this.title,o=n.length;let r,h,a;if(o){const l=se(i.rtl,this.x,this.width);for(t.x=si(this,i.titleAlign,i),e.textAlign=l.textAlign(i.titleAlign),e.textBaseline="middle",r=Q(i.titleFont),h=i.titleSpacing,e.fillStyle=i.titleColor,e.font=r.string,a=0;a<o;++a)e.fillText(n[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+h,a+1===o&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,e,i,n,o){const r=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:a,boxWidth:l}=o,c=Q(o.bodyFont),u=si(this,"left",o),d=n.x(u),f=a<c.lineHeight?(c.lineHeight-a)/2:0,g=e.y+f;if(o.usePointStyle){const p={radius:Math.min(l,a)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},m=n.leftForLtr(d,l)+l/2,b=g+a/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Ms(t,p,m,b),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,Ms(t,p,m,b)}else{t.lineWidth=D(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const p=n.leftForLtr(d,l),m=n.leftForLtr(n.xPlus(d,1),l-2),b=ie(r.borderRadius);Object.values(b).some(_=>_!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,xi(t,{x:p,y:g,w:l,h:a,radius:b}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),xi(t,{x:m,y:g+1,w:l-2,h:a-2,radius:b}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(p,g,l,a),t.strokeRect(p,g,l,a),t.fillStyle=r.backgroundColor,t.fillRect(m,g+1,l-2,a-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:n}=this,{bodySpacing:o,bodyAlign:r,displayColors:h,boxHeight:a,boxWidth:l,boxPadding:c}=i,u=Q(i.bodyFont);let d=u.lineHeight,f=0;const g=se(i.rtl,this.x,this.width),p=function(M){e.fillText(M,g.x(t.x+f),t.y+d/2),t.y+=d+o},m=g.textAlign(r);let b,_,y,w,v,P,S;for(e.textAlign=r,e.textBaseline="middle",e.font=u.string,t.x=si(this,m,i),e.fillStyle=i.bodyColor,L(this.beforeBody,p),f=h&&m!=="right"?r==="center"?l/2+c:l+2+c:0,w=0,P=n.length;w<P;++w){for(b=n[w],_=this.labelTextColors[w],e.fillStyle=_,L(b.before,p),y=b.lines,h&&y.length&&(this._drawColorBox(e,t,w,g,i),d=Math.max(u.lineHeight,a)),v=0,S=y.length;v<S;++v)p(y[v]),d=u.lineHeight;L(b.after,p)}f=0,d=u.lineHeight,L(this.afterBody,p),t.y-=o}drawFooter(t,e,i){const n=this.footer,o=n.length;let r,h;if(o){const a=se(i.rtl,this.x,this.width);for(t.x=si(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=a.textAlign(i.footerAlign),e.textBaseline="middle",r=Q(i.footerFont),e.fillStyle=i.footerColor,e.font=r.string,h=0;h<o;++h)e.fillText(n[h],a.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+i.footerSpacing}}drawBackground(t,e,i,n){const{xAlign:o,yAlign:r}=this,{x:h,y:a}=t,{width:l,height:c}=i,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:g}=ie(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(h+u,a),r==="top"&&this.drawCaret(t,e,i,n),e.lineTo(h+l-d,a),e.quadraticCurveTo(h+l,a,h+l,a+d),r==="center"&&o==="right"&&this.drawCaret(t,e,i,n),e.lineTo(h+l,a+c-g),e.quadraticCurveTo(h+l,a+c,h+l-g,a+c),r==="bottom"&&this.drawCaret(t,e,i,n),e.lineTo(h+f,a+c),e.quadraticCurveTo(h,a+c,h,a+c-f),r==="center"&&o==="left"&&this.drawCaret(t,e,i,n),e.lineTo(h,a+u),e.quadraticCurveTo(h,a,h+u,a),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,n=i&&i.x,o=i&&i.y;if(n||o){const r=ke[t.position].call(this,this._active,this._eventPosition);if(!r)return;const h=this._size=no(this,t),a=Object.assign({},r,this._size),l=oo(e,t,a),c=ro(t,a,l,e);(n._to!==c.x||o._to!==c.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=h.width,this.height=h.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=ot(e.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,n,e),Lr(t,e.textDirection),o.y+=r.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),Fr(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,n=t.map(({datasetIndex:h,index:a})=>{const l=this.chart.getDatasetMeta(h);if(!l)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:l.data[a],index:a}}),o=!bi(i,n),r=this._positionChanged(n,e);(o||r)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],r=this._getActiveElements(t,o,e,i),h=this._positionChanged(r,t),a=e||!bi(r,o)||h;return a&&(this._active=r,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,i,n){const o=this.options;if(t.type==="mouseout")return[];if(!n)return e.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const r=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:i,caretY:n,options:o}=this,r=ke[o.position].call(this,t,e);return r!==!1&&(i!==r.x||n!==r.y)}}C(Ts,"positioners",ke);var fg={id:"tooltip",_element:Ts,positioners:ke,afterInit(s,t,e){e&&(s.tooltip=new Ts({chart:s,options:e}))},beforeUpdate(s,t,e){s.tooltip&&s.tooltip.initialize(e)},reset(s,t,e){s.tooltip&&s.tooltip.initialize(e)},afterDraw(s){const t=s.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(s.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",e)}},afterEvent(s,t){if(s.tooltip){const e=t.replay;s.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,t)=>t.bodyFont.size,boxWidth:(s,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:oh},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Uu=(s,t,e,i)=>(typeof t=="string"?(e=s.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function qu(s,t,e,i){const n=s.indexOf(t);if(n===-1)return Uu(s,t,e,i);const o=s.lastIndexOf(t);return n!==o?e:n}const Qu=(s,t)=>s===null?null:et(Math.round(s),0,t);function lo(s){const t=this.getLabels();return s>=0&&s<t.length?t[s]:s}class co extends fe{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:n,label:o}of e)i[n]===o&&i.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(R(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:qu(i,t,O(e,t),this._addedLabels),Qu(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,n=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let r=t;r<=e;r++)n.push({value:r});return n}getLabelForValue(t){return lo.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}C(co,"id","category"),C(co,"defaults",{ticks:{callback:lo}});function Gu(s,t){const e=[],{bounds:n,step:o,min:r,max:h,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=s,f=o||1,g=c-1,{min:p,max:m}=t,b=!R(r),_=!R(h),y=!R(l),w=(m-p)/(u+1);let v=rn((m-p)/g/f)*f,P,S,M,k;if(v<1e-14&&!b&&!_)return[{value:p},{value:m}];k=Math.ceil(m/v)-Math.floor(p/v),k>g&&(v=rn(k*v/g/f)*f),R(a)||(P=Math.pow(10,a),v=Math.ceil(v*P)/P),n==="ticks"?(S=Math.floor(p/v)*v,M=Math.ceil(m/v)*v):(S=p,M=m),b&&_&&o&&aa((h-r)/o,v/1e3)?(k=Math.round(Math.min((h-r)/v,c)),v=(h-r)/k,S=r,M=h):y?(S=b?r:S,M=_?h:M,k=l-1,v=(M-S)/k):(k=(M-S)/v,Te(k,Math.round(k),v/1e3)?k=Math.round(k):k=Math.ceil(k));const z=Math.max(hn(v),hn(S));P=Math.pow(10,R(a)?z:a),S=Math.round(S*P)/P,M=Math.round(M*P)/P;let T=0;for(b&&(d&&S!==r?(e.push({value:r}),S<r&&T++,Te(Math.round((S+T*v)*P)/P,r,uo(r,w,s))&&T++):S<r&&T++);T<k;++T){const E=Math.round((S+T*v)*P)/P;if(_&&E>h)break;e.push({value:E})}return _&&d&&M!==h?e.length&&Te(e[e.length-1].value,h,uo(h,w,s))?e[e.length-1].value=h:e.push({value:h}):(!_||M===h)&&e.push({value:M}),e}function uo(s,t,{horizontal:e,minRotation:i}){const n=Wt(i),o=(e?Math.sin(n):Math.cos(n))||.001,r=.75*t*(""+s).length;return Math.min(t/o,r)}class Ju extends fe{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return R(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:o}=this;const r=a=>n=e?n:a,h=a=>o=i?o:a;if(t){const a=gt(n),l=gt(o);a<0&&l<0?h(0):a>0&&l>0&&r(0)}if(n===o){let a=o===0?1:Math.abs(o*.05);h(o+a),t||r(n-a)}this.min=n,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,n;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),e=e||11),e&&(n=Math.min(e,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,r=Gu(n,o);return t.bounds==="ticks"&&la(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const n=(i-e)/Math.max(t.length-1,1)/2;e-=n,i+=n}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Sr(t,this.chart.options.locale,this.options.ticks.format)}}class fo extends Ju{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=G(t)?t:0,this.max=G(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Wt(this.options.ticks.minRotation),n=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}C(fo,"id","linear"),C(fo,"defaults",{ticks:{callback:Pr.formatters.numeric}});const Li={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},K=Object.keys(Li);function go(s,t){return s-t}function po(s,t){if(R(t))return null;const e=s._adapter,{parser:i,round:n,isoWeekday:o}=s._parseOpts;let r=t;return typeof i=="function"&&(r=i(r)),G(r)||(r=typeof i=="string"?e.parse(r,i):e.parse(r)),r===null?null:(n&&(r=n==="week"&&(Ae(o)||o===!0)?e.startOf(r,"isoWeek",o):e.startOf(r,n)),+r)}function mo(s,t,e,i){const n=K.length;for(let o=K.indexOf(s);o<n-1;++o){const r=Li[K[o]],h=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((e-t)/(h*r.size))<=i)return K[o]}return K[n-1]}function Xu(s,t,e,i,n){for(let o=K.length-1;o>=K.indexOf(e);o--){const r=K[o];if(Li[r].common&&s._adapter.diff(n,i,r)>=t-1)return r}return K[e?K.indexOf(e):0]}function Ku(s){for(let t=K.indexOf(s)+1,e=K.length;t<e;++t)if(Li[K[t]].common)return K[t]}function bo(s,t,e){if(!e)s[t]=!0;else if(e.length){const{lo:i,hi:n}=As(e,t),o=e[i]>=t?e[i]:e[n];s[o]=!0}}function Zu(s,t,e,i){const n=s._adapter,o=+n.startOf(t[0].value,i),r=t[t.length-1].value;let h,a;for(h=o;h<=r;h=+n.add(h,1,i))a=e[h],a>=0&&(t[a].major=!0);return t}function _o(s,t,e){const i=[],n={},o=t.length;let r,h;for(r=0;r<o;++r)h=t[r],n[h]=r,i.push({value:h,major:!1});return o===0||!e?i:Zu(s,i,n,e)}class Mi extends fe{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),n=this._adapter=new $l._date(t.adapters.date);n.init(e),Ce(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:po(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:n,max:o,minDefined:r,maxDefined:h}=this.getUserBounds();function a(l){!r&&!isNaN(l.min)&&(n=Math.min(n,l.min)),!h&&!isNaN(l.max)&&(o=Math.max(o,l.max))}(!r||!h)&&(a(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&a(this.getMinMax(!1))),n=G(n)&&!isNaN(n)?n:+e.startOf(Date.now(),i),o=G(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,n=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,r=this.max,h=pa(n,o,r);return this._unit=e.unit||(i.autoSkip?mo(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):Xu(this,h.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Ku(this._unit),this.initOffsets(n),t.reverse&&h.reverse(),_o(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,n,o;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?e=1-n:e=(this.getDecimalForValue(t[1])-n)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;e=et(e,0,r),i=et(i,0,r),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,n=this.options,o=n.time,r=o.unit||mo(o.minUnit,e,i,this._getLabelCapacity(e)),h=O(n.ticks.stepSize,1),a=r==="week"?o.isoWeekday:!1,l=Ae(a)||a===!0,c={};let u=e,d,f;if(l&&(u=+t.startOf(u,"isoWeek",a)),u=+t.startOf(u,l?"day":r),t.diff(i,e,r)>1e5*h)throw new Error(e+" and "+i+" are too far apart with stepSize of "+h+" "+r);const g=n.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<i;d=+t.add(d,h,r),f++)bo(c,d,g);return(d===i||n.bounds==="ticks"||f===1)&&bo(c,d,g),Object.keys(c).sort(go).map(p=>+p)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,o=this._unit,r=e||n[o];return this._adapter.format(t,r)}_tickFormatFunction(t,e,i,n){const o=this.options,r=o.ticks.callback;if(r)return V(r,[t,e,i],this);const h=o.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&h[a],u=l&&h[l],d=i[e],f=l&&u&&d&&d.major;return this._adapter.format(t,n||(f?u:c))}generateTickLabels(t){let e,i,n;for(e=0,i=t.length;e<i;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,n=Wt(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(n),r=Math.sin(n),h=this._resolveTickFontOptions(0).size;return{w:i*o+h*r,h:i*r+h*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,n=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,_o(this,[t],this._majorUnit),n),r=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,i=n.length;e<i;++e)t=t.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const n=this.getLabels();for(e=0,i=n.length;e<i;++e)t.push(po(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return yr(t.sort(go))}}C(Mi,"id","time"),C(Mi,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ni(s,t,e){let i=0,n=s.length-1,o,r,h,a;e?(t>=s[i].pos&&t<=s[n].pos&&({lo:i,hi:n}=Yt(s,"pos",t)),{pos:o,time:h}=s[i],{pos:r,time:a}=s[n]):(t>=s[i].time&&t<=s[n].time&&({lo:i,hi:n}=Yt(s,"time",t)),{time:o,pos:h}=s[i],{time:r,pos:a}=s[n]);const l=r-o;return l?h+(a-h)*(t-o)/l:h}class vo extends Mi{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ni(e,this.min),this._tableRange=ni(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,n=[],o=[];let r,h,a,l,c;for(r=0,h=t.length;r<h;++r)l=t[r],l>=e&&l<=i&&n.push(l);if(n.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(r=0,h=n.length;r<h;++r)c=n[r+1],a=n[r-1],l=n[r],Math.round((c+a)/2)!==l&&o.push({time:l,pos:r/(h-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((n,o)=>n-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(ni(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return ni(this._table,i*this._tableRange+this._minPos,!0)}}C(vo,"id","timeseries"),C(vo,"defaults",Mi.defaults);function F(s){var t=s.width,e=s.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function $t(s,t){return s.width===t.width&&s.height===t.height}var td=(function(){function s(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return s.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(s.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),s.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(n){return n!==i})}}},s.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},s.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},s.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},s.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},s})();function ed(s){return new td(s)}var id=(function(){function s(t,e,i){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=F({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??(function(o){return o}),this._allowResizeObserver=(n=i==null?void 0:i.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return s.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(s.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bitmapSize",{get:function(){return F({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),s.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=F(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},s.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(s.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),s.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},s.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},s.prototype._resizeBitmap=function(t){var e=this.bitmapSize;$t(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},s.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(i,t,e)})},s.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=F(this._transformBitmapSize(t,this._canvasElementClientSize)),n=$t(this.bitmapSize,i)?null:i;e===null&&n===null||e!==null&&n!==null&&$t(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},s.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(i,t,e)})},s.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}nd().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},s.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=xo(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=ed(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},s.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var i=xo(this._canvasElement);if(i!==null){var n=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:i.devicePixelRatio,o=this._canvasElement.getClientRects(),r=o[0]!==void 0?od(o[0],n):F({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(r)}}},s.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var i=e.find(function(r){return r.target===t._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var n=i.devicePixelContentBoxSize[0],o=F({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(o)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},s})();function sd(s,t){return new id(s,t.transform,t.options)}function xo(s){return s.ownerDocument.defaultView}function nd(){return new Promise(function(s){var t=new ResizeObserver(function(e){s(e.every(function(i){return"devicePixelContentBoxSize"in i})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function od(s,t){return F({width:Math.round(s.left*t+s.width*t)-Math.round(s.left*t),height:Math.round(s.top*t+s.height*t)-Math.round(s.top*t)})}var rd=(function(){function s(t,e,i){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return s.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},s.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(s.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),s})();function qt(s,t){var e=s.canvasElementClientSize;if(e.width===0||e.height===0)return null;var i=s.bitmapSize;if(i.width===0||i.height===0)return null;var n=s.canvasElement.getContext("2d",t);return n===null?null:new rd(n,e,i)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.9
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const rh={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var yo,wo;function le(s,t){const e={0:[],1:[s.lineWidth,s.lineWidth],2:[2*s.lineWidth,2*s.lineWidth],3:[6*s.lineWidth,6*s.lineWidth],4:[s.lineWidth,4*s.lineWidth]}[t];s.setLineDash(e)}function hh(s,t,e,i){s.beginPath();const n=s.lineWidth%2?.5:0;s.moveTo(e,t+n),s.lineTo(i,t+n),s.stroke()}function U(s,t){if(!s)throw new Error("Assertion failed"+(t?": "+t:""))}function Z(s){if(s===void 0)throw new Error("Value is undefined");return s}function x(s){if(s===null)throw new Error("Value is null");return s}function Ot(s){return x(Z(s))}(function(s){s[s.Simple=0]="Simple",s[s.WithSteps=1]="WithSteps",s[s.Curved=2]="Curved"})(yo||(yo={})),(function(s){s[s.Solid=0]="Solid",s[s.Dotted=1]="Dotted",s[s.Dashed=2]="Dashed",s[s.LargeDashed=3]="LargeDashed",s[s.SparseDotted=4]="SparseDotted"})(wo||(wo={}));class N{constructor(){this.t=[]}i(t,e,i){const n={h:t,l:e,o:i===!0};this.t.push(n)}_(t){const e=this.t.findIndex((i=>t===i.h));e>-1&&this.t.splice(e,1)}u(t){this.t=this.t.filter((e=>e.l!==t))}p(t,e,i){const n=[...this.t];this.t=this.t.filter((o=>!o.o)),n.forEach((o=>o.h(t,e,i)))}v(){return this.t.length>0}m(){this.t=[]}}function it(s,...t){for(const e of t)for(const i in e)e[i]!==void 0&&Object.prototype.hasOwnProperty.call(e,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof e[i]!="object"||s[i]===void 0||Array.isArray(e[i])?s[i]=e[i]:it(s[i],e[i]));return s}function ce(s){return typeof s=="number"&&isFinite(s)}function Ye(s){return typeof s=="number"&&s%1==0}function je(s){return typeof s=="string"}function oi(s){return typeof s=="boolean"}function xt(s){const t=s;if(!t||typeof t!="object")return t;let e,i,n;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(n=t[i],e[i]=n&&typeof n=="object"?xt(n):n);return e}function hd(s){return s!==null}function Os(s){return s===null?void 0:s}const ah="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Si(s,t,e){return t===void 0&&(t=ah),`${e=e!==void 0?`${e} `:""}${s}px ${t}`}class ad{constructor(t){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=t}N(){const t=this.M,e=this.F(),i=this.W();return t.P===e&&t.T===i||(t.P=e,t.T=i,t.k=Si(e,i),t.A=2.5/12*e,t.V=t.A,t.B=e/12*t.C,t.I=e/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function os(s){return s<0?0:s>255?255:Math.round(s)||0}function Mo(s){return .199*s[0]+.687*s[1]+.114*s[2]}class ld{constructor(t,e){this.q=new Map,this.Y=t,e&&(this.q=e)}j(t,e){if(t==="transparent")return t;const i=this.K(t),n=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${e*n})`}X(t){const e=this.K(t);return{Z:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,G:Mo(e)>160?"black":"white"}}J(t){return Mo(this.K(t))}tt(t,e,i){const[n,o,r,h]=this.K(t),[a,l,c,u]=this.K(e),d=[os(n+i*(a-n)),os(o+i*(l-o)),os(r+i*(c-r)),(f=h+i*(u-h),f<=0||f>1?Math.min(Math.max(f,0),1):Math.round(1e4*f)/1e4)];var f;return`rgba(${d[0]}, ${d[1]}, ${d[2]}, ${d[3]})`}K(t){const e=this.q.get(t);if(e)return e;const i=(function(r){const h=document.createElement("div");h.style.display="none",document.body.appendChild(h),h.style.color=r;const a=window.getComputedStyle(h).color;return document.body.removeChild(h),a})(t),n=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!n){if(this.Y.length)for(const r of this.Y){const h=r(t);if(h)return this.q.set(t,h),h}throw new Error(`Failed to parse color: ${t}`)}const o=[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];return this.q.set(t,o),o}}class cd{constructor(){this.it=[]}st(t){this.it=t}nt(t,e,i){this.it.forEach((n=>{n.nt(t,e,i)}))}}class ge{nt(t,e,i){t.useBitmapCoordinateSpace((n=>this.et(n,e,i)))}}class ud extends ge{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;const n=this.rt.lt,o=this.rt,r=Math.max(1,Math.floor(e))%2/2,h=a=>{t.beginPath();for(let l=n.to-1;l>=n.from;--l){const c=o.ot[l],u=Math.round(c._t*e)+r,d=c.ut*i,f=a*i+r;t.moveTo(u,d),t.arc(u,d,f,0,2*Math.PI)}t.fill()};o.ct>0&&(t.fillStyle=o.dt,h(o.ft+o.ct)),t.fillStyle=o.vt,h(o.ft)}}function dd(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const fd={from:0,to:1};class gd{constructor(t,e,i){this.Mt=new cd,this.bt=[],this.St=[],this.xt=!0,this.O=t,this.Ct=e,this.Pt=i,this.Mt.st(this.bt)}yt(t){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){const t=this.Pt.Dt();t.length!==this.bt.length&&(this.St=t.map(dd),this.bt=this.St.map((e=>{const i=new ud;return i.ht(e),i})),this.Mt.st(this.bt))}Rt(){const t=this.Ct.N().mode===2||!this.Ct.Vt(),e=this.Pt.Bt(),i=this.Ct.It(),n=this.O.Et();this.kt(),e.forEach(((o,r)=>{const h=this.St[r],a=o.At(i),l=o.zt();!t&&a!==null&&o.Vt()&&l!==null?(h.vt=a.Lt,h.ft=a.ft,h.ct=a.Ot,h.ot[0].gt=a.gt,h.ot[0].ut=o.Ft().Nt(a.gt,l.Wt),h.dt=a.Ht??this.O.Ut(h.ot[0].ut/o.Ft().$t()),h.ot[0].wt=i,h.ot[0]._t=n.qt(i),h.lt=fd):h.lt=null}))}}class pd extends ge{constructor(t){super(),this.Yt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Yt===null)return;const o=this.Yt.jt.Vt,r=this.Yt.Kt.Vt;if(!o&&!r)return;const h=Math.round(this.Yt._t*i),a=Math.round(this.Yt.ut*n);t.lineCap="butt",o&&h>=0&&(t.lineWidth=Math.floor(this.Yt.jt.ct*i),t.strokeStyle=this.Yt.jt.R,t.fillStyle=this.Yt.jt.R,le(t,this.Yt.jt.Xt),(function(l,c,u,d){l.beginPath();const f=l.lineWidth%2?.5:0;l.moveTo(c+f,u),l.lineTo(c+f,d),l.stroke()})(t,h,0,e.height)),r&&a>=0&&(t.lineWidth=Math.floor(this.Yt.Kt.ct*n),t.strokeStyle=this.Yt.Kt.R,t.fillStyle=this.Yt.Kt.R,le(t,this.Yt.Kt.Xt),hh(t,a,0,e.width))}}class md{constructor(t,e){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new pd(this.Zt),this.Jt=t,this.Pt=e}yt(){this.xt=!0}Tt(t){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const t=this.Jt.Vt(),e=this.Pt.Qt().N().crosshair,i=this.Zt;if(e.mode===2)return i.Kt.Vt=!1,void(i.jt.Vt=!1);i.Kt.Vt=t&&this.Jt.ti(this.Pt),i.jt.Vt=t&&this.Jt.ii(),i.Kt.ct=e.horzLine.width,i.Kt.Xt=e.horzLine.style,i.Kt.R=e.horzLine.color,i.jt.ct=e.vertLine.width,i.jt.Xt=e.vertLine.style,i.jt.R=e.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}}function bd(s,t,e,i,n,o){s.fillRect(t+o,e,i-2*o,o),s.fillRect(t+o,e+n-o,i-2*o,o),s.fillRect(t,e,o,n),s.fillRect(t+i-o,e,o,n)}function Fi(s,t,e,i,n,o){s.save(),s.globalCompositeOperation="copy",s.fillStyle=o,s.fillRect(t,e,i,n),s.restore()}function So(s,t,e,i,n,o){s.beginPath(),s.roundRect?s.roundRect(t,e,i,n,o):(s.lineTo(t+i-o[1],e),o[1]!==0&&s.arcTo(t+i,e,t+i,e+o[1],o[1]),s.lineTo(t+i,e+n-o[2]),o[2]!==0&&s.arcTo(t+i,e+n,t+i-o[2],e+n,o[2]),s.lineTo(t+o[3],e+n),o[3]!==0&&s.arcTo(t,e+n,t,e+n-o[3],o[3]),s.lineTo(t,e+o[0]),o[0]!==0&&s.arcTo(t,e,t+o[0],e,o[0]))}function Po(s,t,e,i,n,o,r=0,h=[0,0,0,0],a=""){if(s.save(),!r||!a||a===o)return So(s,t,e,i,n,h),s.fillStyle=o,s.fill(),void s.restore();const l=r/2;var c;So(s,t+l,e+l,i-r,n-r,(c=-l,h.map((u=>u===0?u:u+c)))),o!=="transparent"&&(s.fillStyle=o,s.fill()),a!=="transparent"&&(s.lineWidth=r,s.strokeStyle=a,s.closePath(),s.stroke()),s.restore()}function lh(s,t,e,i,n,o,r){s.save(),s.globalCompositeOperation="copy";const h=s.createLinearGradient(0,0,0,n);h.addColorStop(0,o),h.addColorStop(1,r),s.fillStyle=h,s.fillRect(t,e,i,n),s.restore()}class ko{constructor(t,e){this.ht(t,e)}ht(t,e){this.Yt=t,this.ei=e}$t(t,e){return this.Yt.Vt?t.P+t.A+t.V:0}nt(t,e,i,n){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const o=this.Yt.R,r=this.ei.Z,h=t.useBitmapCoordinateSpace((a=>{const l=a.context;l.font=e.k;const c=this.hi(a,e,i,n),u=c.ai;return c.li?Po(l,u.oi,u._i,u.ui,u.ci,r,u.di,[u.ft,0,0,u.ft],r):Po(l,u.fi,u._i,u.ui,u.ci,r,u.di,[0,u.ft,u.ft,0],r),this.Yt.pi&&(l.fillStyle=o,l.fillRect(u.fi,u.mi,u.wi-u.fi,u.gi)),this.Yt.Mi&&(l.fillStyle=e.D,l.fillRect(c.li?u.bi-u.di:0,u._i,u.di,u.Si-u._i)),c}));t.useMediaCoordinateSpace((({context:a})=>{const l=h.xi;a.font=e.k,a.textAlign=h.li?"right":"left",a.textBaseline="middle",a.fillStyle=o,a.fillText(this.Yt.ri,l.Ci,(l._i+l.Si)/2+l.Pi)}))}hi(t,e,i,n){const{context:o,bitmapSize:r,mediaSize:h,horizontalPixelRatio:a,verticalPixelRatio:l}=t,c=this.Yt.pi||!this.Yt.yi?e.C:0,u=this.Yt.ki?e.S:0,d=e.A+this.ei.Ti,f=e.V+this.ei.Ri,g=e.B,p=e.I,m=this.Yt.ri,b=e.P,_=i.Di(o,m),y=Math.ceil(i.Vi(o,m)),w=b+d+f,v=e.S+g+p+y+c,P=Math.max(1,Math.floor(l));let S=Math.round(w*l);S%2!=P%2&&(S+=1);const M=u>0?Math.max(1,Math.floor(u*a)):0,k=Math.round(v*a),z=Math.round(c*a),T=this.ei.Bi??this.ei.Ii,E=Math.round(T*l)-Math.floor(.5*l),Y=Math.floor(E+P/2-S/2),tt=Y+S,I=n==="right",B=I?h.width-u:u,H=I?r.width-M:M;let wt,Mt,at;return I?(wt=H-k,Mt=H-z,at=B-c-g-u):(wt=H+k,Mt=H+z,at=B+c+g),{li:I,ai:{_i:Y,mi:E,Si:tt,ui:k,ci:S,ft:2*a,di:M,oi:wt,fi:H,wi:Mt,gi:P,bi:r.width},xi:{_i:Y/l,Si:tt/l,Ci:at,Pi:_}}}}class Ii{constructor(t){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(t||ko)(this.Ai,this.Ei),this.Oi=new(t||ko)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(t,e=!1){return Math.max(this.Li.$t(t,e),this.Oi.$t(t,e))}Fi(){return this.Ei.Bi||0}Wi(t){this.Ei.Bi=t}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(t){return this.Ni(),this.Ai.pi=this.Ai.pi&&t.N().ticksVisible,this.zi.pi=this.zi.pi&&t.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class _d extends Ii{constructor(t,e,i){super(),this.Jt=t,this.Yi=e,this.ji=i}qi(t,e,i){if(t.Vt=!1,this.Jt.N().mode===2)return;const n=this.Jt.N().horzLine;if(!n.labelVisible)return;const o=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||o===null)return;const r=this.Yi.Xi().X(n.labelBackgroundColor);i.Z=r.Z,t.R=r.G;const h=2/12*this.Yi.P();i.Ti=h,i.Ri=h;const a=this.ji(this.Yi);i.Ii=a.Ii,t.ri=this.Yi.Zi(a.gt,o),t.Vt=!0}}const vd=/[1-9]/g;class ch{constructor(){this.Yt=null}ht(t){this.Yt=t}nt(t,e){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const i=t.useMediaCoordinateSpace((({context:d})=>(d.font=e.k,Math.round(e.Gi.Vi(d,x(this.Yt).ri,vd)))));if(i<=0)return;const n=e.Ji,o=i+2*n,r=o/2,h=this.Yt.Qi;let a=this.Yt.Ii,l=Math.floor(a-r)+.5;l<0?(a+=Math.abs(0-l),l=Math.floor(a-r)+.5):l+o>h&&(a-=Math.abs(h-(l+o)),l=Math.floor(a-r)+.5);const c=l+o,u=Math.ceil(0+e.S+e.C+e.A+e.P+e.V);t.useBitmapCoordinateSpace((({context:d,horizontalPixelRatio:f,verticalPixelRatio:g})=>{const p=x(this.Yt);d.fillStyle=p.Z;const m=Math.round(l*f),b=Math.round(0*g),_=Math.round(c*f),y=Math.round(u*g),w=Math.round(2*f);if(d.beginPath(),d.moveTo(m,b),d.lineTo(m,y-w),d.arcTo(m,y,m+w,y,w),d.lineTo(_-w,y),d.arcTo(_,y,_,y-w,w),d.lineTo(_,b),d.fill(),p.pi){const v=Math.round(p.Ii*f),P=b,S=Math.round((P+e.C)*g);d.fillStyle=p.R;const M=Math.max(1,Math.floor(f)),k=Math.floor(.5*f);d.fillRect(v-k,P,M,S-P)}})),t.useMediaCoordinateSpace((({context:d})=>{const f=x(this.Yt),g=0+e.S+e.C+e.A+e.P/2;d.font=e.k,d.textAlign="left",d.textBaseline="middle",d.fillStyle=f.R;const p=e.Gi.Di(d,"Apr0");d.translate(l+n,g+p),d.fillText(f.ri,0,0)}))}}class xd{constructor(t,e,i){this.xt=!0,this.Gt=new ch,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=t,this.ts=e,this.ji=i}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const t=this.Zt;if(t.Vt=!1,this.Ct.N().mode===2)return;const e=this.Ct.N().vertLine;if(!e.labelVisible)return;const i=this.ts.Et();if(i.Ki())return;t.Qi=i.Qi();const n=this.ji();if(n===null)return;t.Ii=n.Ii;const o=i.ss(this.Ct.It());t.ri=i.ns(x(o)),t.Vt=!0;const r=this.ts.Xi().X(e.labelBackgroundColor);t.Z=r.Z,t.R=r.G,t.pi=i.N().ticksVisible}}class uh{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(t){this.rs=t}Ft(){return this.es}_s(t){this.es=t}us(t){return[]}cs(){return[]}Vt(){return!0}}var Co;(function(s){s[s.Normal=0]="Normal",s[s.Magnet=1]="Magnet",s[s.Hidden=2]="Hidden",s[s.MagnetOHLC=3]="MagnetOHLC"})(Co||(Co={}));class yd extends uh{constructor(t,e){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=t,this.Ps=e,this.ys=((n,o)=>r=>{const h=o(),a=n();if(r===x(this.Pt).ks())return{gt:a,Ii:h};{const l=x(r.zt());return{gt:r.Ts(h,l),Ii:h}}})((()=>this.ds),(()=>this.Ss));const i=((n,o)=>()=>{const r=this.ts.Et().Rs(n()),h=o();return r&&Number.isFinite(h)?{wt:r,Ii:h}:null})((()=>this.fs),(()=>this.si()));this.Ds=new xd(this,t,i)}N(){return this.Ps}Vs(t,e){this.xs=t,this.Cs=e}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(t,e,i){this.ws||(this.ws=!0),this.ps=!0,this.zs(t,e,i)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(t){let e=this.gs.get(t);e||(e=new md(this,t),this.gs.set(t,e));let i=this.Ms.get(t);return i||(i=new gd(this.ts,this,t),this.Ms.set(t,i)),[e,i]}ti(t){return t===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(t,e){this.ps&&this.Pt===t||this.vs.clear();const i=[];return this.Pt===t&&i.push(this.Hs(this.vs,e,this.ys)),i}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach((t=>{var e,i;(e=this.gs.get(t))==null||e.yt(),(i=this.Ms.get(t))==null||i.yt()})),this.vs.forEach((t=>t.yt())),this.Ds.yt()}qs(t){return t&&!t.ks().Ki()?t.ks():null}zs(t,e,i){this.Ys(t,e,i)&&this.Ns()}Ys(t,e,i){const n=this.bs,o=this.Ss,r=this.ds,h=this.fs,a=this.Pt,l=this.qs(i);this.fs=t,this.bs=isNaN(t)?NaN:this.ts.Et().qt(t),this.Pt=i;const c=l!==null?l.zt():null;return l!==null&&c!==null?(this.ds=e,this.Ss=l.Nt(e,c)):(this.ds=NaN,this.Ss=NaN),n!==this.bs||o!==this.Ss||h!==this.fs||r!==this.ds||a!==this.Pt}Os(){const t=this.ts.js().map((i=>i.Xs().Ks())).filter(hd),e=t.length===0?null:Math.max(...t);this.fs=e!==null?e:NaN}Hs(t,e,i){let n=t.get(e);return n===void 0&&(n=new _d(this,e,i),t.set(e,n)),n}}function Vi(s){return s==="left"||s==="right"}class ${constructor(t){this.Zs=new Map,this.Gs=[],this.Js=t}Qs(t,e){const i=(function(n,o){return n===void 0?o:{tn:Math.max(n.tn,o.tn),sn:n.sn||o.sn}})(this.Zs.get(t),e);this.Zs.set(t,i)}nn(){return this.Js}en(t){const e=this.Zs.get(t);return e===void 0?{tn:this.Js}:{tn:Math.max(this.Js,e.tn),sn:e.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(t){this.hn(),this.Gs=[{an:1,Wt:t}]}_n(t){this.un(),this.Gs.push({an:5,Wt:t})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(t){this.hn(),this.Gs.push({an:2,Wt:t})}fn(t){this.hn(),this.Gs.push({an:3,Wt:t})}pn(){return this.Gs}vn(t){for(const e of t.Gs)this.mn(e);this.Js=Math.max(this.Js,t.Js),t.Zs.forEach(((e,i)=>{this.Qs(i,e)}))}static wn(){return new $(2)}static gn(){return new $(3)}mn(t){switch(t.an){case 0:this.rn();break;case 1:this.ln(t.Wt);break;case 2:this.dn(t.Wt);break;case 3:this.fn(t.Wt);break;case 4:this.cn();break;case 5:this._n(t.Wt);break;case 6:this.un()}}un(){const t=this.Gs.findIndex((e=>e.an===5));t!==-1&&this.Gs.splice(t,1)}}class dh{formatTickmarks(t){return t.map((e=>this.format(e)))}}const To=".";function yt(s,t){if(!ce(s))return"n/a";if(!Ye(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?s.toString():("0000000000000000"+s.toString()).slice(-t)}class Ai extends dh{constructor(t,e){if(super(),e||(e=1),ce(t)&&Ye(t)||(t=100),t<0)throw new TypeError("invalid base");this.Yi=t,this.Mn=e,this.bn()}format(t){const e=t<0?"":"";return t=Math.abs(t),e+this.Sn(t)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let t=this.Yi;for(;t>1;)t/=10,this.xn++}}Sn(t){const e=this.Yi/this.Mn;let i=Math.floor(t),n="";const o=this.xn!==void 0?this.xn:NaN;if(e>1){let r=+(Math.round(t*e)-i*e).toFixed(this.xn);r>=e&&(r-=e,i+=1),n=To+yt(+r.toFixed(this.xn)*this.Mn,o)}else i=Math.round(i*e)/e,o>0&&(n=To+yt(0,o));return i.toFixed(0)+n}}class fh extends Ai{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class wd extends dh{constructor(t){super(),this.Cn=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.Pn(t):t<999995?e+this.Pn(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.Pn(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.Pn(t/1e9)+"B")}Pn(t){let e;const i=Math.pow(10,this.Cn);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Cn).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((n,o)=>o))}}const Md=/[2-9]/g;class Pi{constructor(t=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=t}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(t,e,i){return this.In(t,e,i).width}Di(t,e,i){const n=this.In(t,e,i);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}In(t,e,i){const n=i||Md,o=String(e).replace(n,"0");if(this.Dn.has(o))return Z(this.Dn.get(o)).En;if(this.yn===this.Vn){const h=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(h),this.Tn++,this.yn--}t.save(),t.textBaseline="middle";const r=t.measureText(o);return t.restore(),r.width===0&&e.length||(this.Dn.set(o,{En:r,An:this.kn}),this.Rn[this.kn]=o,this.yn++,this.kn++),r}}class Sd{constructor(t){this.zn=null,this.M=null,this.Ln="right",this.On=t}Nn(t,e,i){this.zn=t,this.M=e,this.Ln=i}nt(t){this.M!==null&&this.zn!==null&&this.zn.nt(t,this.M,this.On,this.Ln)}}class gh{constructor(t,e,i){this.Fn=t,this.On=new Pi(50),this.Wn=e,this.O=i,this.F=-1,this.Gt=new Sd(this.On)}Tt(){const t=this.O.Hn(this.Wn);if(t===null)return null;const e=t.Un(this.Wn)?t.$n():this.Wn.Ft();if(e===null)return null;const i=t.qn(e);if(i==="overlay")return null;const n=this.O.Yn();return n.P!==this.F&&(this.F=n.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),n,i),this.Gt}}class Pd extends ge{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}jn(t,e){var r;if(!((r=this.Yt)!=null&&r.Vt))return null;const{ut:i,ct:n,Kn:o}=this.Yt;return e>=i-n-7&&e<=i+n+7?{Xn:this.Yt,Kn:o}:null}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Yt===null||this.Yt.Vt===!1)return;const o=Math.round(this.Yt.ut*n);o<0||o>e.height||(t.lineCap="butt",t.strokeStyle=this.Yt.R,t.lineWidth=Math.floor(this.Yt.ct*i),le(t,this.Yt.Xt),hh(t,o,0,e.width))}}class qs{constructor(t){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new Pd,this.xt=!0,this.Jn=t,this.Qn=t.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class kd extends qs{constructor(t){super(t)}te(){this.Zn.Vt=!1;const t=this.Jn.Ft(),e=t.ie().ie;if(e!==2&&e!==3)return;const i=this.Jn.N();if(!i.baseLineVisible||!this.Jn.Vt())return;const n=this.Jn.zt();n!==null&&(this.Zn.Vt=!0,this.Zn.ut=t.Nt(n.Wt,n.Wt),this.Zn.R=i.baseLineColor,this.Zn.ct=i.baseLineWidth,this.Zn.Xt=i.baseLineStyle)}}class Cd extends ge{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}se(){return this.Yt}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){const n=this.Yt;if(n===null)return;const o=Math.max(1,Math.floor(e)),r=o%2/2,h=Math.round(n.ne.x*e)+r,a=n.ne.y*i;t.fillStyle=n.ee,t.beginPath();const l=Math.max(2,1.5*n.re)*e;t.arc(h,a,l,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.he,t.beginPath(),t.arc(h,a,n.ft*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=o,t.strokeStyle=n.ae,t.beginPath(),t.arc(h,a,n.ft*e+o/2,0,2*Math.PI,!1),t.stroke()}}const Td=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class Od{constructor(t){this.Gt=new Cd,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=t}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),this.ge.N().lastPriceAnimation===2){const t=performance.now(),e=this.we-t;if(e>0)return void(e<650&&(this.we+=2600));this.me=t,this.we=t+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const t=this.ge.Qt().Et(),e=t.Pe(),i=this.ge.zt();if(e===null||i===null)return;const n=this.ge.ye(!0);if(n.ke||!e.Te(n.Re))return;const o={x:t.qt(n.Re),y:this.ge.Ft().Nt(n.gt,i.Wt)},r=n.R,h=this.ge.N().lineWidth,a=this.De(this.Ve(),r);this.Gt.ht({ee:r,re:h,he:a.he,ae:a.ae,ft:a.ft,ne:o})}Ce(){const t=this.Gt.se();if(t!==null){const e=this.De(this.Ve(),t.ee);t.he=e.he,t.ae=e.ae,t.ft=e.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(t,e,i,n){const o=i+(n-i)*e;return this.ge.Qt().Xi().j(t,o)}De(t,e){const i=t%2600/2600;let n;for(const l of Td)if(i>=l.le&&i<=l.oe){n=l;break}U(n!==void 0,"Last price animation internal logic error");const o=(i-n.le)/(n.oe-n.le);return{he:this.Be(e,o,n.ce,n.de),ae:this.Be(e,o,n.fe,n.pe),ft:(r=o,h=n._e,a=n.ue,h+(a-h)*r)};var r,h,a}}class Dd extends qs{constructor(t){super(t)}te(){const t=this.Zn;t.Vt=!1;const e=this.Jn.N();if(!e.priceLineVisible||!this.Jn.Vt())return;const i=this.Jn.ye(e.priceLineSource===0);i.ke||(t.Vt=!0,t.ut=i.Ii,t.R=this.Jn.Ie(i.R),t.ct=e.priceLineWidth,t.Xt=e.priceLineStyle)}}class zd extends Ii{constructor(t){super(),this.Jt=t}qi(t,e,i){t.Vt=!1,e.Vt=!1;const n=this.Jt;if(!n.Vt())return;const o=n.N(),r=o.lastValueVisible,h=n.Ee()!=="",a=o.seriesLastValueMode===0,l=n.ye(!1);if(l.ke)return;r&&(t.ri=this.Ae(l,r,a),t.Vt=t.ri.length!==0),(h||a)&&(e.ri=this.ze(l,r,h,a),e.Vt=e.ri.length>0);const c=n.Ie(l.R),u=this.Jt.Qt().Xi().X(c);i.Z=u.Z,i.Ii=l.Ii,e.Ht=n.Qt().Ut(l.Ii/n.Ft().$t()),t.Ht=c,t.R=u.G,e.R=u.G}ze(t,e,i,n){let o="";const r=this.Jt.Ee();return i&&r.length!==0&&(o+=`${r} `),e&&n&&(o+=this.Jt.Ft().Le()?t.Oe:t.Ne),o.trim()}Ae(t,e,i){return e?i?this.Jt.Ft().Le()?t.Ne:t.Oe:t.ri:""}}function Oo(s,t,e,i){const n=Number.isFinite(t),o=Number.isFinite(e);return n&&o?s(t,e):n||o?n?t:e:i}class J{constructor(t,e){this.Fe=t,this.We=e}He(t){return t!==null&&this.Fe===t.Fe&&this.We===t.We}Ue(){return new J(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(t){return t===null?this:new J(Oo(Math.min,this.$e(),t.$e(),-1/0),Oo(Math.max,this.qe(),t.qe(),1/0))}je(t){if(!ce(t)||this.We-this.Fe===0)return;const e=.5*(this.We+this.Fe);let i=this.We-e,n=this.Fe-e;i*=t,n*=t,this.We=e+i,this.Fe=e+n}Ke(t){ce(t)&&(this.We+=t,this.Fe+=t)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(t){return t===null?null:new J(t.minValue,t.maxValue)}}class ki{constructor(t,e){this.Ge=t,this.Je=e||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(t){return t===null?null:new ki(J.Ze(t.priceRange),t.margins)}}class Ed extends qs{constructor(t,e){super(t),this.ir=e}te(){const t=this.Zn;t.Vt=!1;const e=this.ir.N();if(!this.Jn.Vt()||!e.lineVisible)return;const i=this.ir.sr();i!==null&&(t.Vt=!0,t.ut=i,t.R=e.color,t.ct=e.lineWidth,t.Xt=e.lineStyle,t.Kn=this.ir.N().id)}}class Rd extends Ii{constructor(t,e){super(),this.ge=t,this.ir=e}qi(t,e,i){t.Vt=!1,e.Vt=!1;const n=this.ir.N(),o=n.axisLabelVisible,r=n.title!=="",h=this.ge;if(!o||!h.Vt())return;const a=this.ir.sr();if(a===null)return;r&&(e.ri=n.title,e.Vt=!0),e.Ht=h.Qt().Ut(a/h.Ft().$t()),t.ri=this.nr(n.price),t.Vt=!0;const l=this.ge.Qt().Xi().X(n.axisLabelColor||n.color);i.Z=l.Z;const c=n.axisLabelTextColor||l.G;t.R=c,e.R=c,i.Ii=a}nr(t){const e=this.ge.zt();return e===null?"":this.ge.Ft().Zi(t,e.Wt)}}class Ld{constructor(t,e){this.ge=t,this.Ps=e,this.er=new Ed(t,this),this.Fn=new Rd(t,this),this.rr=new gh(this.Fn,t,t.Qt())}hr(t){it(this.Ps,t),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){const t=this.ge,e=t.Ft();if(t.Qt().Et().Ki()||e.Ki())return null;const i=t.zt();return i===null?null:e.Nt(this.Ps.price,i.Wt)}}class Fd extends uh{constructor(t){super(),this.ts=t}Qt(){return this.ts}}const Id={Bar:(s,t,e,i)=>{const n=t.upColor,o=t.downColor,r=x(s(e,i)),h=Ot(r.Wt[0])<=Ot(r.Wt[3]);return{cr:r.R??(h?n:o)}},Candlestick:(s,t,e,i)=>{const n=t.upColor,o=t.downColor,r=t.borderUpColor,h=t.borderDownColor,a=t.wickUpColor,l=t.wickDownColor,c=x(s(e,i)),u=Ot(c.Wt[0])<=Ot(c.Wt[3]);return{cr:c.R??(u?n:o),dr:c.Ht??(u?r:h),pr:c.vr??(u?a:l)}},Custom:(s,t,e,i)=>({cr:x(s(e,i)).R??t.color}),Area:(s,t,e,i)=>{const n=x(s(e,i));return{cr:n.vt??t.lineColor,vt:n.vt??t.lineColor,mr:n.mr??t.topColor,wr:n.wr??t.bottomColor}},Baseline:(s,t,e,i)=>{const n=x(s(e,i));return{cr:n.Wt[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,gr:n.gr??t.topLineColor,Mr:n.Mr??t.bottomLineColor,br:n.br??t.topFillColor1,Sr:n.Sr??t.topFillColor2,Cr:n.Cr??t.bottomFillColor1,Pr:n.Pr??t.bottomFillColor2}},Line:(s,t,e,i)=>{const n=x(s(e,i));return{cr:n.R??t.color,vt:n.R??t.color}},Histogram:(s,t,e,i)=>({cr:x(s(e,i)).R??t.color})};class Vd{constructor(t){this.yr=(e,i)=>i!==void 0?i.Wt:this.ge.Xs().kr(e),this.ge=t,this.Tr=Id[t.Rr()]}Dr(t,e){return this.Tr(this.yr,this.ge.N(),t,e)}}function ph(s,t,e,i,n=0,o=t.length){let r=o-n;for(;0<r;){const h=r>>1,a=n+h;i(t[a],e)===s?(n=a+1,r-=h+1):r=h}return n}const ue=ph.bind(null,!0),mh=ph.bind(null,!1);var Do;(function(s){s[s.NearestLeft=-1]="NearestLeft",s[s.None=0]="None",s[s.NearestRight=1]="NearestRight"})(Do||(Do={}));const St=30;class Ad{constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(t){return this.Nr(t,0)!==null}kr(t){return this.Fr(t)}Fr(t,e=0){const i=this.Nr(t,e);return i===null?null:{...this.Wr(i),Re:this.Or(i)}}Hr(){return this.Vr}Ur(t,e,i){if(this.Ki())return null;let n=null;for(const o of i)n=ri(n,this.$r(t,e,o));return n}ht(t){this.Ir.clear(),this.Br.clear(),this.Vr=t,this.Er=t.map((e=>e.Re))}qr(){return this.Er}Or(t){return this.Vr[t].Re}Wr(t){return this.Vr[t]}Nr(t,e){const i=this.Yr(t);if(i===null&&e!==0)switch(e){case-1:return this.jr(t);case 1:return this.Kr(t);default:throw new TypeError("Unknown search mode")}return i}jr(t){let e=this.Xr(t);return e>0&&(e-=1),e!==this.Vr.length&&this.Or(e)<t?e:null}Kr(t){const e=this.Zr(t);return e!==this.Vr.length&&t<this.Or(e)?e:null}Yr(t){const e=this.Xr(t);return e===this.Vr.length||t<this.Vr[e].Re?null:e}Xr(t){return ue(this.Vr,t,((e,i)=>e.Re<i))}Zr(t){return mh(this.Vr,t,((e,i)=>e.Re>i))}Gr(t,e,i){let n=null;for(let o=t;o<e;o++){const r=this.Vr[o].Wt[i];Number.isNaN(r)||(n===null?n={Jr:r,Qr:r}:(r<n.Jr&&(n.Jr=r),r>n.Qr&&(n.Qr=r)))}return n}$r(t,e,i){if(this.Ki())return null;let n=null;const o=x(this.Lr()),r=x(this.Ks()),h=Math.max(t,o),a=Math.min(e,r),l=Math.ceil(h/St)*St,c=Math.max(l,Math.floor(a/St)*St);{const d=this.Xr(h),f=this.Zr(Math.min(a,l,e));n=ri(n,this.Gr(d,f,i))}let u=this.Br.get(i);u===void 0&&(u=new Map,this.Br.set(i,u));for(let d=Math.max(l+1,h);d<c;d+=St){const f=Math.floor(d/St);let g=u.get(f);if(g===void 0){const p=this.Xr(f*St),m=this.Zr((f+1)*St-1);g=this.Gr(p,m,i),u.set(f,g)}n=ri(n,g)}{const d=this.Xr(c),f=this.Zr(a);n=ri(n,this.Gr(d,f,i))}return n}}function ri(s,t){return s===null?t:t===null?s:{Jr:Math.min(s.Jr,t.Jr),Qr:Math.max(s.Qr,t.Qr)}}const Ci={setLineStyle:le};class Nd{constructor(t){this.th=t}nt(t,e,i){this.th.draw(t,Ci)}ih(t,e,i){var n,o;(o=(n=this.th).drawBackground)==null||o.call(n,t,Ci)}}class Bd{constructor(t){this.Dn=null,this.sh=t}Tt(){var i;const t=this.sh.renderer();if(t===null)return null;if(((i=this.Dn)==null?void 0:i.nh)===t)return this.Dn.eh;const e=new Nd(t);return this.Dn={nh:t,eh:e},e}rh(){var t,e;return((e=(t=this.sh).zOrder)==null?void 0:e.call(t))??"normal"}}class bh{constructor(t){this.hh=null,this.ah=t}oh(){return this.ah}Ns(){var t,e;(e=(t=this.ah).updateAllViews)==null||e.call(t)}Fs(){var i,n,o;const t=((n=(i=this.ah).paneViews)==null?void 0:n.call(i))??[];if(((o=this.hh)==null?void 0:o.nh)===t)return this.hh.eh;const e=t.map((r=>new Bd(r)));return this.hh={nh:t,eh:e},e}jn(t,e){var i,n;return((n=(i=this.ah).hitTest)==null?void 0:n.call(i,t,e))??null}}let Wd=class extends bh{us(){return[]}};class Yd{constructor(t){this.th=t}nt(t,e,i){this.th.draw(t,Ci)}ih(t,e,i){var n,o;(o=(n=this.th).drawBackground)==null||o.call(n,t,Ci)}}class zo{constructor(t){this.Dn=null,this.sh=t}Tt(){var i;const t=this.sh.renderer();if(t===null)return null;if(((i=this.Dn)==null?void 0:i.nh)===t)return this.Dn.eh;const e=new Yd(t);return this.Dn={nh:t,eh:e},e}rh(){var t,e;return((e=(t=this.sh).zOrder)==null?void 0:e.call(t))??"normal"}}function _h(s){var t,e,i;return{ri:s.text(),Ii:s.coordinate(),Bi:(t=s.fixedCoordinate)==null?void 0:t.call(s),R:s.textColor(),Z:s.backColor(),Vt:((e=s.visible)==null?void 0:e.call(s))??!0,pi:((i=s.tickVisible)==null?void 0:i.call(s))??!0}}class Hd{constructor(t,e){this.Gt=new ch,this._h=t,this.uh=e}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),..._h(this._h)}),this.Gt}}class jd extends Ii{constructor(t,e){super(),this._h=t,this.Yi=e}qi(t,e,i){const n=_h(this._h);i.Z=n.Z,t.R=n.R;const o=2/12*this.Yi.P();i.Ti=o,i.Ri=o,i.Ii=n.Ii,i.Bi=n.Bi,t.ri=n.ri,t.Vt=n.Vt,t.pi=n.pi}}class $d extends bh{constructor(t,e){super(t),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=e}cs(){var n,o,r;const t=((o=(n=this.ah).timeAxisViews)==null?void 0:o.call(n))??[];if(((r=this.dh)==null?void 0:r.nh)===t)return this.dh.eh;const e=this.ge.Qt().Et(),i=t.map((h=>new Hd(h,e)));return this.dh={nh:t,eh:i},i}Ws(){var n,o,r;const t=((o=(n=this.ah).priceAxisViews)==null?void 0:o.call(n))??[];if(((r=this.fh)==null?void 0:r.nh)===t)return this.fh.eh;const e=this.ge.Ft(),i=t.map((h=>new jd(h,e)));return this.fh={nh:t,eh:i},i}wh(){var i,n,o;const t=((n=(i=this.ah).priceAxisPaneViews)==null?void 0:n.call(i))??[];if(((o=this.ph)==null?void 0:o.nh)===t)return this.ph.eh;const e=t.map((r=>new zo(r)));return this.ph={nh:t,eh:e},e}gh(){var i,n,o;const t=((n=(i=this.ah).timeAxisPaneViews)==null?void 0:n.call(i))??[];if(((o=this.mh)==null?void 0:o.nh)===t)return this.mh.eh;const e=t.map((r=>new zo(r)));return this.mh={nh:t,eh:e},e}Mh(t,e){var i,n;return((n=(i=this.ah).autoscaleInfo)==null?void 0:n.call(i,t,e))??null}}function rs(s,t,e,i){s.forEach((n=>{t(n).forEach((o=>{o.rh()===e&&i.push(o)}))}))}function hs(s){return s.Fs()}function Ud(s){return s.wh()}function qd(s){return s.gh()}const Qd=["Area","Line","Baseline"];class Ni extends Fd{constructor(t,e,i,n,o){super(t),this.Yt=new Ad,this.er=new Dd(this),this.bh=[],this.Sh=new kd(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=i,this.kh=e;const r=new zd(this);this.vs=[r],this.rr=new gh(r,this,t),Qd.includes(this.kh)&&(this.xh=new Od(this)),this.Th(),this.sh=n(this,this.Qt(),o)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Ie(t){return this.Ps.priceLineColor||t}ye(t){const e={ke:!0},i=this.Ft();if(this.Qt().Et().Ki()||i.Ki()||this.Yt.Ki())return e;const n=this.Qt().Et().Pe(),o=this.zt();if(n===null||o===null)return e;let r,h;if(t){const u=this.Yt.Ar();if(u===null)return e;r=u,h=u.Re}else{const u=this.Yt.Fr(n.bi(),-1);if(u===null||(r=this.Yt.kr(u.Re),r===null))return e;h=u.Re}const a=r.Wt[3],l=this.Rh().Dr(h,{Wt:r}),c=i.Nt(a,o.Wt);return{ke:!1,gt:a,ri:i.Zi(a,o.Wt),Oe:i.Dh(a),Ne:i.Vh(a,o.Wt),R:l.cr,Ii:c,Re:h}}Rh(){return this.Ch!==null||(this.Ch=new Vd(this)),this.Ch}N(){return this.Ps}hr(t){const e=t.priceScaleId;e!==void 0&&e!==this.Ps.priceScaleId&&this.Qt().Bh(this,e),it(this.Ps,t),t.priceFormat!==void 0&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(t,e){this.Yt.ht(t),this.sh.yt("data"),this.xh!==null&&(e&&e.zh?this.xh.be():t.length===0&&this.xh.Me());const i=this.Qt().Hn(this);this.Qt().Lh(i),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(t){const e=new Ld(this,t);return this.bh.push(e),this.Qt().Eh(this),e}Nh(t){const e=this.bh.indexOf(t);e!==-1&&this.bh.splice(e,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){const t=this.Wh();return t===null?null:{Wt:t.Wt[3],Hh:t.wt}}Wh(){const t=this.Qt().Et().Pe();if(t===null)return null;const e=t.Uh();return this.Yt.Fr(e,1)}Xs(){return this.Yt}$h(t){const e=this.Yt.kr(t);return e===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:e.Wt[0],Yh:e.Wt[1],jh:e.Wt[2],Kh:e.Wt[3]}:e.Wt[3]}Xh(t){const e=[];rs(this.yh,hs,"top",e);const i=this.xh;return i!==null&&i.Vt()&&(this.Ph===null&&i.xe()&&(this.Ph=setTimeout((()=>{this.Ph=null,this.Qt().Zh()}),0)),i.Se(),e.unshift(i)),e}Fs(){const t=[];this.Gh()||t.push(this.Sh),t.push(this.sh,this.er);const e=this.bh.map((i=>i.lr()));return t.push(...e),rs(this.yh,hs,"normal",t),t}Jh(){return this.Qh(hs,"bottom")}ta(t){return this.Qh(Ud,t)}ia(t){return this.Qh(qd,t)}sa(t,e){return this.yh.map((i=>i.jn(t,e))).filter((i=>i!==null))}us(){return[this.rr,...this.bh.map((t=>t._r()))]}Ws(t,e){if(e!==this.es&&!this.Gh())return[];const i=[...this.vs];for(const n of this.bh)i.push(n.ur());return this.yh.forEach((n=>{i.push(...n.Ws())})),i}cs(){const t=[];return this.yh.forEach((e=>{t.push(...e.cs())})),t}Mh(t,e){if(this.Ps.autoscaleInfoProvider!==void 0){const i=this.Ps.autoscaleInfoProvider((()=>{const n=this.na(t,e);return n===null?null:n.Xe()}));return ki.Ze(i)}return this.na(t,e)}nh(){const t=this.Ps.priceFormat;return t.base??1/t.minMove}ea(){return this.ra}Ns(){var t;this.sh.yt();for(const e of this.vs)e.yt();for(const e of this.bh)e.yt();this.er.yt(),this.Sh.yt(),(t=this.xh)==null||t.yt(),this.yh.forEach((e=>e.Ns()))}Ft(){return x(super.Ft())}At(t){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const e=this.Yt.kr(t);return e===null?null:{gt:e.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(t)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(t){this.yh.push(new $d(t,this))}ua(t){this.yh=this.yh.filter((e=>e.oh()!==t))}ca(){if(this.kh==="Custom")return t=>this.sh.da(t)}fa(){if(this.kh==="Custom")return t=>this.sh.pa(t)}va(){return this.Yt.qr()}Gh(){return!Vi(this.Ft().ma())}na(t,e){if(!Ye(t)||!Ye(e)||this.Yt.Ki())return null;const i=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],n=this.Yt.Ur(t,e,i);let o=n!==null?new J(n.Jr,n.Qr):null,r=null;if(this.Rr()==="Histogram"){const h=this.Ps.base,a=new J(h,h);o=o!==null?o.vn(a):a}return this.yh.forEach((h=>{const a=h.Mh(t,e);if(a!=null&&a.priceRange){const l=new J(a.priceRange.minValue,a.priceRange.maxValue);o=o!==null?o.vn(l):l}a!=null&&a.margins&&(r=a.margins)})),new ki(o,r)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(t){switch(this.kh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.Rh().Dr(t).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const t=this.Ps.priceFormat.formatter;this.ra={format:t,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(e=>e.map(t))};break}case"volume":this.ra=new wd(this.Ps.priceFormat.precision);break;case"percent":this.ra=new fh(this.Ps.priceFormat.precision);break;default:{const t=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new Ai(t,this.Ps.priceFormat.minMove*t)}}this.es!==null&&this.es.wa()}Qh(t,e){const i=[];return rs(this.yh,t,e,i),i}}const Gd=[3],Jd=[0,1,2,3];class Xd{constructor(t){this.Ps=t}ga(t,e,i){let n=t;if(this.Ps.mode===0)return n;const o=i.ks(),r=o.zt();if(r===null)return n;const h=o.Nt(t,r),a=i.Ma().filter((c=>c instanceof Ni)).reduce(((c,u)=>{if(i.Un(u)||!u.Vt())return c;const d=u.Ft(),f=u.Xs();if(d.Ki()||!f.Te(e))return c;const g=f.kr(e);if(g===null)return c;const p=Ot(u.zt()),m=this.Ps.mode===3?Jd:Gd;return c.concat(m.map((b=>d.Nt(g.Wt[b],p.Wt))))}),[]);if(a.length===0)return n;a.sort(((c,u)=>Math.abs(c-h)-Math.abs(u-h)));const l=a[0];return n=o.Ts(l,r),n}}function ze(s,t,e){return Math.min(Math.max(s,t),e)}function hi(s,t,e){return t-s<=e}class Kd extends ge{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Yt===null)return;const o=Math.max(1,Math.floor(i));t.lineWidth=o,(function(r,h){r.save(),r.lineWidth%2&&r.translate(.5,.5),h(),r.restore()})(t,(()=>{const r=x(this.Yt);if(r.ba){t.strokeStyle=r.Sa,le(t,r.xa),t.beginPath();for(const h of r.Ca){const a=Math.round(h.Pa*i);t.moveTo(a,-o),t.lineTo(a,e.height+o)}t.stroke()}if(r.ya){t.strokeStyle=r.ka,le(t,r.Ta),t.beginPath();for(const h of r.Ra){const a=Math.round(h.Pa*n);t.moveTo(-o,a),t.lineTo(e.width+o,a)}t.stroke()}}))}}class Zd{constructor(t){this.Gt=new Kd,this.xt=!0,this.Pt=t}yt(){this.xt=!0}Tt(){if(this.xt){const t=this.Pt.Qt().N().grid,e={ya:t.horzLines.visible,ba:t.vertLines.visible,ka:t.horzLines.color,Sa:t.vertLines.color,Ta:t.horzLines.style,xa:t.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map((i=>({Pa:i.coord})))};this.Gt.ht(e),this.xt=!1}return this.Gt}}class tf{constructor(t){this.sh=new Zd(t)}lr(){return this.sh}}const as={Va:4,Ba:1e-4};function te(s,t){const e=100*(s-t)/t;return t<0?-e:e}function ef(s,t){const e=te(s.$e(),t),i=te(s.qe(),t);return new J(e,i)}function Ee(s,t){const e=100*(s-t)/t+100;return t<0?-e:e}function sf(s,t){const e=Ee(s.$e(),t),i=Ee(s.qe(),t);return new J(e,i)}function Ti(s,t){const e=Math.abs(s);if(e<1e-15)return 0;const i=Math.log10(e+t.Ba)+t.Va;return s<0?-i:i}function Re(s,t){const e=Math.abs(s);if(e<1e-15)return 0;const i=Math.pow(10,e-t.Va)-t.Ba;return s<0?-i:i}function we(s,t){if(s===null)return null;const e=Ti(s.$e(),t),i=Ti(s.qe(),t);return new J(e,i)}function ee(s,t){if(s===null)return null;const e=Re(s.$e(),t),i=Re(s.qe(),t);return new J(e,i)}function ls(s){if(s===null)return as;const t=Math.abs(s.qe()-s.$e());if(t>=1||t<1e-15)return as;const e=Math.ceil(Math.abs(Math.log10(t))),i=as.Va+e;return{Va:i,Ba:1/Math.pow(10,i)}}class cs{constructor(t,e){if(this.Ia=t,this.Ea=e,(function(i){if(i<0)return!1;if(i>1e18)return!0;for(let n=i;n>1;n/=10)if(n%10!=0)return!1;return!0})(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let i=this.Ia;i!==1;){if(i%2==0)this.Aa.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.Aa.push(2,2.5),i/=5}if(this.Aa.length>100)throw new Error("something wrong with base")}}}za(t,e,i){const n=this.Ia===0?0:1/this.Ia;let o=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),r=0,h=this.Ea[0];for(;;){const u=hi(o,n,1e-14)&&o>n+1e-14,d=hi(o,i*h,1e-14),f=hi(o,1,1e-14);if(!(u&&d&&f))break;o/=h,h=this.Ea[++r%this.Ea.length]}if(o<=n+1e-14&&(o=n),o=Math.max(1,o),this.Aa.length>0&&(a=o,l=1,c=1e-14,Math.abs(a-l)<c))for(r=0,h=this.Aa[0];hi(o,i*h,1e-14)&&o>n+1e-14;)o/=h,h=this.Aa[++r%this.Aa.length];var a,l,c;return o}}class Eo{constructor(t,e,i,n){this.La=[],this.Yi=t,this.Ia=e,this.Oa=i,this.Na=n}za(t,e){if(t<e)throw new Error("high < low");const i=this.Yi.$t(),n=(t-e)*this.Fa()/i,o=new cs(this.Ia,[2,2.5,2]),r=new cs(this.Ia,[2,2,2.5]),h=new cs(this.Ia,[2.5,2,2]),a=[];return a.push(o.za(t,e,n),r.za(t,e,n),h.za(t,e,n)),(function(l){if(l.length<1)throw Error("array is empty");let c=l[0];for(let u=1;u<l.length;++u)l[u]<c&&(c=l[u]);return c})(a)}Wa(){const t=this.Yi,e=t.zt();if(e===null)return void(this.La=[]);const i=t.$t(),n=this.Oa(i-1,e),o=this.Oa(0,e),r=this.Yi.N().entireTextOnly?this.Ha()/2:0,h=r,a=i-1-r,l=Math.max(n,o),c=Math.min(n,o);if(l===c)return void(this.La=[]);const u=this.za(l,c);if(this.Ua(e,u,l,c,h,a),t.$a()&&this.qa(u,c,l)){const g=this.Yi.Ya();this.ja(e,u,h,a,g,2*g)}const d=this.La.map((g=>g.Ka)),f=this.Yi.Xa(d);for(let g=0;g<this.La.length;g++)this.La[g].Za=f[g]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(t,e,i,n,o,r){const h=this.La,a=this.Yi;let l=i%e;l+=l<0?e:0;const c=i>=n?1:-1;let u=null,d=0;for(let f=i-l;f>n;f-=e){const g=this.Na(f,t,!0);u!==null&&Math.abs(g-u)<this.Fa()||g<o||g>r||(d<h.length?(h[d].Pa=g,h[d].Za=a.Ga(f),h[d].Ka=f):h.push({Pa:g,Za:a.Ga(f),Ka:f}),d++,u=g,a.Ja()&&(e=this.za(f*c,n)))}h.length=d}ja(t,e,i,n,o,r){const h=this.La,a=this.Qa(t,i,o,r),l=this.Qa(t,n,-r,-o),c=this.Na(0,t,!0)-this.Na(e,t,!0);h.length>0&&h[0].Pa-a.Pa<c/2&&h.shift(),h.length>0&&l.Pa-h[h.length-1].Pa<c/2&&h.pop(),h.unshift(a),h.push(l)}Qa(t,e,i,n){const o=(i+n)/2,r=this.Oa(e+i,t),h=this.Oa(e+n,t),a=Math.min(r,h),l=Math.max(r,h),c=Math.max(.1,this.za(l,a)),u=this.Oa(e+o,t),d=u-u%c,f=this.Na(d,t,!0);return{Za:this.Yi.Ga(d),Pa:f,Ka:d}}qa(t,e,i){let n=Ot(this.Yi.Qe());return this.Yi.Ja()&&(n=ee(n,this.Yi.tl())),n.$e()-e<t&&i-n.qe()<t}}function vh(s){return s.slice().sort(((t,e)=>x(t.hs())-x(e.hs())))}var Ro;(function(s){s[s.Normal=0]="Normal",s[s.Logarithmic=1]="Logarithmic",s[s.Percentage=2]="Percentage",s[s.IndexedTo100=3]="IndexedTo100"})(Ro||(Ro={}));const Lo=new fh,Fo=new Ai(100,1);class nf{constructor(t,e,i,n,o){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new N,this.ul=new N,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=Fo,this.wl=ls(null),this.gl=t,this.Ps=e,this.Ml=i,this.bl=n,this.Sl=o,this.xl=new Eo(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(t){if(it(this.Ps,t),this.wa(),t.mode!==void 0&&this.yl({ie:t.mode}),t.scaleMargins!==void 0){const e=Z(t.scaleMargins.top),i=Z(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Dl(){return this.Ps.mode===3}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(t){const e=this.ie();let i=null;t.sn!==void 0&&(this.Ps.autoScale=t.sn),t.ie!==void 0&&(this.Ps.mode=t.ie,t.ie!==2&&t.ie!==3||(this.Ps.autoScale=!0),this.el.rl=!1),e.ie===1&&t.ie!==e.ie&&((function(o,r){if(o===null)return!1;const h=Re(o.$e(),r),a=Re(o.qe(),r);return isFinite(h)&&isFinite(a)})(this.Ge,this.wl)?(i=ee(this.Ge,this.wl),i!==null&&this.Bl(i)):this.Ps.autoScale=!0),t.ie===1&&t.ie!==e.ie&&(i=we(this.Ge,this.wl),i!==null&&this.Bl(i));const n=e.ie!==this.Ps.mode;n&&(e.ie===2||this.Le())&&this.wa(),n&&(e.ie===3||this.Dl())&&this.wa(),t.Vl!==void 0&&e.Vl!==t.Vl&&(this.Ps.invertScale=t.Vl,this.Il()),this.ul.p(e,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(t){this.il!==t&&(this.il=t,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;const t=this.$t()-this.Ll()-this.Ol();return this.sl=t,t}Qe(){return this.Nl(),this.Ge}Bl(t,e){const i=this.Ge;(e||i===null&&t!==null||i!==null&&!i.He(t))&&(this.pl=null,this.Ge=t)}Fl(t){this.Bl(t),this.Wl(t!==null)}Ki(){return this.Nl(),this.il===0||!this.Ge||this.Ge.Ki()}Hl(t){return this.Vl()?t:this.$t()-1-t}Nt(t,e){return this.Le()?t=te(t,e):this.Dl()&&(t=Ee(t,e)),this.Pl(t,e)}Ul(t,e,i){this.Nl();const n=this.Ol(),o=x(this.Qe()),r=o.$e(),h=o.qe(),a=this.zl()-1,l=this.Vl(),c=a/(h-r),u=i===void 0?0:i.from,d=i===void 0?t.length:i.to,f=this.$l();for(let g=u;g<d;g++){const p=t[g],m=p.gt;if(isNaN(m))continue;let b=m;f!==null&&(b=f(p.gt,e));const _=n+c*(b-r),y=l?_:this.il-1-_;p.ut=y}}ql(t,e,i){this.Nl();const n=this.Ol(),o=x(this.Qe()),r=o.$e(),h=o.qe(),a=this.zl()-1,l=this.Vl(),c=a/(h-r),u=i===void 0?0:i.from,d=i===void 0?t.length:i.to,f=this.$l();for(let g=u;g<d;g++){const p=t[g];let m=p.qh,b=p.Yh,_=p.jh,y=p.Kh;f!==null&&(m=f(p.qh,e),b=f(p.Yh,e),_=f(p.jh,e),y=f(p.Kh,e));let w=n+c*(m-r),v=l?w:this.il-1-w;p.Yl=v,w=n+c*(b-r),v=l?w:this.il-1-w,p.jl=v,w=n+c*(_-r),v=l?w:this.il-1-w,p.Kl=v,w=n+c*(y-r),v=l?w:this.il-1-w,p.Xl=v}}Ts(t,e){const i=this.Cl(t,e);return this.Zl(i,e)}Zl(t,e){let i=t;return this.Le()?i=(function(n,o){return o<0&&(n=-n),n/100*o+o})(i,e):this.Dl()&&(i=(function(n,o){return n-=100,o<0&&(n=-n),n/100*o+o})(i,e)),i}Ma(){return this.cl}Dt(){return this.fl||(this.fl=vh(this.cl)),this.fl}Gl(t){this.cl.indexOf(t)===-1&&(this.cl.push(t),this.wa(),this.Jl())}Ql(t){const e=this.cl.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.cl.splice(e,1),this.cl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let t=null;for(const e of this.cl){const i=e.zt();i!==null&&(t===null||i.Hh<t.Hh)&&(t=i)}return t===null?null:t.Wt}Vl(){return this.Ps.invertScale}Da(){const t=this.zt()===null;if(this.pl!==null&&(t||this.pl.io===t))return this.pl.Da;this.xl.Wa();const e=this.xl.Da();return this.pl={Da:e,io:t},this._l.p(),e}so(){return this._l}no(t){this.Le()||this.Dl()||this.vl===null&&this.nl===null&&(this.Ki()||(this.vl=this.il-t,this.nl=x(this.Qe()).Ue()))}eo(t){if(this.Le()||this.Dl()||this.vl===null)return;this.yl({sn:!1}),(t=this.il-t)<0&&(t=0);let e=(this.vl+.2*(this.il-1))/(t+.2*(this.il-1));const i=x(this.nl).Ue();e=Math.max(e,.1),i.je(e),this.Bl(i)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(t){this.Tl()||this.ml===null&&this.nl===null&&(this.Ki()||(this.ml=t,this.nl=x(this.Qe()).Ue()))}ao(t){if(this.Tl()||this.ml===null)return;const e=x(this.Qe()).Ye()/(this.zl()-1);let i=t-this.ml;this.Vl()&&(i*=-1);const n=i*e,o=x(this.nl).Ue();o.Ke(n),this.Bl(o,!0),this.pl=null}lo(){this.Tl()||this.ml!==null&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(t,e){switch(this.Ps.mode){case 2:return this.oo(te(t,e));case 3:return this.ea().format(Ee(t,e));default:return this.nr(t)}}Ga(t){switch(this.Ps.mode){case 2:return this.oo(t);case 3:return this.ea().format(t);default:return this.nr(t)}}Xa(t){switch(this.Ps.mode){case 2:return this._o(t);case 3:return this.ea().formatTickmarks(t);default:return this.uo(t)}}Dh(t){return this.nr(t,x(this.dl).ea())}Vh(t,e){return t=te(t,e),this.oo(t,Lo)}co(){return this.cl}do(t){this.el={hl:t,rl:!1}}Ns(){this.cl.forEach((t=>t.Ns()))}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let t=1/0;this.dl=null;for(const i of this.cl)i.hs()<t&&(t=i.hs(),this.dl=i);let e=100;this.dl!==null&&(e=Math.round(this.dl.nh())),this.ra=Fo,this.Le()?(this.ra=Lo,e=100):this.Dl()?(this.ra=new Ai(100,1),e=100):this.dl!==null&&(this.ra=this.dl.ea()),this.xl=new Eo(this,e,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return this.dl===null||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(t){this.al=t}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(t,e){if(this.Nl(),this.Ki())return 0;t=this.Ja()&&t?Ti(t,this.wl):t;const i=x(this.Qe()),n=this.Ol()+(this.zl()-1)*(t-i.$e())/i.Ye();return this.Hl(n)}Cl(t,e){if(this.Nl(),this.Ki())return 0;const i=this.Hl(t),n=x(this.Qe()),o=n.$e()+n.Ye()*((i-this.Ol())/(this.zl()-1));return this.Ja()?Re(o,this.wl):o}Il(){this.pl=null,this.xl.Wa()}po(){if(this.Rl()&&!this.Tl())return;const t=this.el.hl;if(t===null)return;let e=null;const i=this.co();let n=0,o=0;for(const a of i){if(!a.Vt())continue;const l=a.zt();if(l===null)continue;const c=a.Mh(t.Uh(),t.bi());let u=c&&c.Qe();if(u!==null){switch(this.Ps.mode){case 1:u=we(u,this.wl);break;case 2:u=ef(u,l.Wt);break;case 3:u=sf(u,l.Wt)}if(e=e===null?u:e.vn(x(u)),c!==null){const d=c.tr();d!==null&&(n=Math.max(n,d.above),o=Math.max(o,d.below))}}}if(this.$a()&&(n=Math.max(n,this.Ya()),o=Math.max(o,this.Ya())),n===this.ll&&o===this.ol||(this.ll=n,this.ol=o,this.pl=null,this.kl()),e!==null){if(e.$e()===e.qe()){const a=5*this.fo();this.Ja()&&(e=ee(e,this.wl)),e=new J(e.$e()-a,e.qe()+a),this.Ja()&&(e=we(e,this.wl))}if(this.Ja()){const a=ee(e,this.wl),l=ls(a);if(r=l,h=this.wl,r.Va!==h.Va||r.Ba!==h.Ba){const c=this.nl!==null?ee(this.nl,this.wl):null;this.wl=l,e=we(a,l),c!==null&&(this.nl=we(c,l))}}this.Bl(e)}else this.Ge===null&&(this.Bl(new J(-.5,.5)),this.wl=ls(null));var r,h}$l(){return this.Le()?te:this.Dl()?Ee:this.Ja()?t=>Ti(t,this.wl):null}vo(t,e,i){return e===void 0?(i===void 0&&(i=this.ea()),i.format(t)):e(t)}mo(t,e,i){return e===void 0?(i===void 0&&(i=this.ea()),i.formatTickmarks(t)):e(t)}nr(t,e){return this.vo(t,this.bl.priceFormatter,e)}uo(t,e){const i=this.bl.priceFormatter;return this.mo(t,this.bl.tickmarksPriceFormatter??(i?n=>n.map(i):void 0),e)}oo(t,e){return this.vo(t,this.bl.percentageFormatter,e)}_o(t,e){const i=this.bl.percentageFormatter;return this.mo(t,this.bl.tickmarksPercentageFormatter??(i?n=>n.map(i):void 0),e)}}function Io(s){return s instanceof Ni}class Vo{constructor(t,e){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new N,this.yh=[],this.uh=t,this.ts=e,this.Co=new tf(this);const i=e.N();this.Po=this.yo("left",i.leftPriceScale),this.ko=this.yo("right",i.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(i)}Ro(t){if(t.leftPriceScale&&this.Po.hr(t.leftPriceScale),t.rightPriceScale&&this.ko.hr(t.rightPriceScale),t.localization&&(this.Po.wa(),this.ko.wa()),t.overlayPriceScales){const e=Array.from(this.wo.values());for(const i of e){const n=x(i[0].Ft());n.hr(t.overlayPriceScales),t.localization&&n.wa()}}}Do(t){switch(t){case"left":return this.Po;case"right":return this.ko}return this.wo.has(t)?Z(this.wo.get(t))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach((t=>{t.m&&t.m()})),this.yh=this.yh.filter((t=>{const e=t.oh();return e.detached&&e.detached(),!1})),this.xo.p()}Bo(){return this.bo}Io(t){this.bo=t}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(t){this.Mo=t,this.Ao()}Al(t){this.il=t,this.Po.Al(t),this.ko.Al(t),this.cl.forEach((e=>{if(this.Un(e)){const i=e.Ft();i!==null&&i.Al(t)}})),this.Ao()}zo(t){this.So=t}Lo(){return this.So}Oo(){return this.cl.filter(Io)}Ma(){return this.cl}Un(t){const e=t.Ft();return e===null||this.Po!==e&&this.ko!==e}Gl(t,e,i){this.No(t,e,i?t.hs():this.cl.length)}Ql(t,e){const i=this.cl.indexOf(t);U(i!==-1,"removeDataSource: invalid data source"),this.cl.splice(i,1),e||this.cl.forEach(((r,h)=>r.ls(h)));const n=x(t.Ft()).ma();if(this.wo.has(n)){const r=Z(this.wo.get(n)),h=r.indexOf(t);h!==-1&&(r.splice(h,1),r.length===0&&this.wo.delete(n))}const o=t.Ft();o&&o.Ma().indexOf(t)>=0&&(o.Ql(t),this.Fo(o)),this.fl=null}qn(t){return t===this.Po?"left":t===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(t,e){t.no(e)}$o(t,e){t.eo(e),this.Ao()}qo(t){t.ro()}Yo(t,e){t.ho(e)}jo(t,e){t.ao(e),this.Ao()}Ko(t){t.lo()}Ao(){this.cl.forEach((t=>{t.Ns()}))}ks(){let t=null;return this.ts.N().rightPriceScale.visible&&this.ko.Ma().length!==0?t=this.ko:this.ts.N().leftPriceScale.visible&&this.Po.Ma().length!==0?t=this.Po:this.cl.length!==0&&(t=this.cl[0].Ft()),t===null&&(t=this.ko),t}$n(){let t=null;return this.ts.N().rightPriceScale.visible?t=this.ko:this.ts.N().leftPriceScale.visible&&(t=this.Po),t}Fo(t){t!==null&&t.Tl()&&this.Xo(t)}Zo(t){const e=this.uh.Pe();t.yl({sn:!0}),e!==null&&t.do(e),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach((t=>{this.Un(t)&&this.Fo(t.Ft())})),this.Ao(),this.ts.ar()}Dt(){return this.fl===null&&(this.fl=vh(this.cl)),this.fl}Qo(t,e){e=ze(e,0,this.cl.length-1);const i=this.cl.indexOf(t);U(i!==-1,"setSeriesOrder: invalid data source"),this.cl.splice(i,1),this.cl.splice(e,0,t),this.cl.forEach(((n,o)=>n.ls(o))),this.fl=null;for(const n of[this.Po,this.ko])n.Jl(),n.wa();this.ts.ar()}Bt(){return this.Dt().filter(Io)}t_(){return this.xo}i_(){return this.Co}_a(t){this.yh.push(new Wd(t))}ua(t){this.yh=this.yh.filter((e=>e.oh()!==t)),t.detached&&t.detached(),this.ts.ar()}s_(){return this.yh}sa(t,e){return this.yh.map((i=>i.jn(t,e))).filter((i=>i!==null))}Xo(t){const e=t.co();if(e&&e.length>0&&!this.uh.Ki()){const i=this.uh.Pe();i!==null&&t.do(i)}t.Ns()}No(t,e,i){let n=this.Do(e);if(n===null&&(n=this.yo(e,this.ts.N().overlayPriceScales)),this.cl.splice(i,0,t),!Vi(e)){const o=this.wo.get(e)||[];o.push(t),this.wo.set(e,o)}t.ls(i),n.Gl(t),t._s(n),this.Fo(n),this.fl=null}To(t,e,i){e.ie!==i.ie&&this.Xo(t)}yo(t,e){const i={visible:!0,autoScale:!0,...xt(e)},n=new nf(t,i,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return n.Al(this.$t()),n}}function ai(s){return{n_:s.n_,e_:{Kn:s.r_.externalId},h_:s.r_.cursorStyle}}function of(s,t,e,i){for(const n of s){const o=n.Tt(i);if(o!==null&&o.jn){const r=o.jn(t,e);if(r!==null)return{a_:n,e_:r}}}return null}function rf(s){return s.Fs!==void 0}function xh(s,t,e){const i=[s,...s.Dt()],n=(function(o,r,h){var d;let a,l;for(const f of o){const g=((d=f.sa)==null?void 0:d.call(f,r,h))??[];for(const p of g)c=p.zOrder,u=a==null?void 0:a.zOrder,(!u||c==="top"&&u!=="top"||c==="normal"&&u==="bottom")&&(a=p,l=f)}var c,u;return a&&l?{r_:a,n_:l}:null})(i,t,e);if((n==null?void 0:n.r_.zOrder)==="top")return ai(n);for(const o of i){if(n&&n.n_===o&&n.r_.zOrder!=="bottom"&&!n.r_.isBackground)return ai(n);if(rf(o)){const r=of(o.Fs(s),t,e,s);if(r!==null)return{n_:o,a_:r.a_,e_:r.e_}}if(n&&n.n_===o&&n.r_.zOrder!=="bottom"&&n.r_.isBackground)return ai(n)}return n!=null&&n.r_?ai(n):null}class hf{constructor(t,e,i=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=t,this.o_=e,this.Vn=i}__(t){const e=t.time,i=this.o_.cacheKey(e),n=this.Dn.get(i);if(n!==void 0)return n.u_;if(this.yn===this.Vn){const r=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Z(r)),this.Tn++,this.yn--}const o=this.l_(t);return this.Dn.set(i,{u_:o,An:this.kn}),this.Rn.set(this.kn,i),this.yn++,this.kn++,o}}class Le{constructor(t,e){U(t<=e,"right should be >= left"),this.c_=t,this.d_=e}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(t){return this.c_<=t&&t<=this.d_}He(t){return this.c_===t.Uh()&&this.d_===t.bi()}}function Ao(s,t){return s===null||t===null?s===t:s.He(t)}class af{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(t){this.v_=t,this.Dn=null}w_(t,e){this.g_(e),this.Dn=null;for(let i=e;i<t.length;++i){const n=t[i];let o=this.p_.get(n.timeWeight);o===void 0&&(o=[],this.p_.set(n.timeWeight,o)),o.push({index:i,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}M_(t,e,i,n,o){const r=Math.ceil(e/t);return this.Dn!==null&&this.Dn.b_===r&&o===this.Dn.S_&&i===this.Dn.x_||(this.Dn={S_:o,x_:i,Da:this.C_(r,i,n),b_:r}),this.Dn.Da}g_(t){if(t===0)return void this.p_.clear();const e=[];this.p_.forEach(((i,n)=>{t<=i[0].index?e.push(n):i.splice(ue(i,t,(o=>o.index<t)),1/0)}));for(const i of e)this.p_.delete(i)}C_(t,e,i){let n=[];const o=r=>!e||i.has(r.index);for(const r of Array.from(this.p_.keys()).sort(((h,a)=>a-h))){if(!this.p_.get(r))continue;const h=n;n=[];const a=h.length;let l=0;const c=Z(this.p_.get(r)),u=c.length;let d=1/0,f=-1/0;for(let g=0;g<u;g++){const p=c[g],m=p.index;for(;l<a;){const b=h[l],_=b.index;if(!(_<m&&o(b))){d=_;break}l++,n.push(b),f=_,d=1/0}if(d-m>=t&&m-f>=t&&o(p))n.push(p),f=m;else if(this.v_)return h}for(;l<a;l++)o(h[l])&&n.push(h[l])}return n}}class oe{constructor(t){this.P_=t}y_(){return this.P_===null?null:new Le(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new oe(null)}}function lf(s,t){return s.weight>t.weight?s:t}class cf{constructor(t,e,i,n){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new af,this.B_=new Map,this.I_=oe.T_(),this.E_=!0,this.A_=new N,this.z_=new N,this.L_=new N,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=e,this.bl=i,this.U_=e.rightOffset,this.q_=e.barSpacing,this.ts=t,this.Y_(e),this.o_=n,this.j_(),this.V_.m_(e.uniformDistribution),this.K_()}N(){return this.Ps}X_(t){it(this.bl,t),this.Z_(),this.j_()}hr(t,e){it(this.Ps,t),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),t.barSpacing!==void 0&&this.ts.dn(t.barSpacing),t.rightOffset!==void 0&&this.ts.fn(t.rightOffset),this.Y_(t),t.minBarSpacing===void 0&&t.maxBarSpacing===void 0||this.ts.dn(t.barSpacing??this.q_),t.ignoreWhitespaceIndices!==void 0&&t.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(t){var e;return((e=this.D_[t])==null?void 0:e.time)??null}ss(t){return this.D_[t]??null}Q_(t,e){if(this.D_.length<1)return null;if(this.o_.key(t)>this.o_.key(this.D_[this.D_.length-1].time))return e?this.D_.length-1:null;const i=ue(this.D_,this.o_.key(t),((n,o)=>this.o_.key(n.time)<o));return this.o_.key(t)<this.o_.key(this.D_[i].time)?e?i:null:i}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){const t=this.Pe();if(t===null)return null;const e={from:t.Uh(),to:t.bi()};return this.eu(e)}eu(t){const e=Math.round(t.from),i=Math.round(t.to),n=x(this.ru()),o=x(this.hu());return{from:x(this.ss(Math.max(n,e))),to:x(this.ss(Math.min(o,i)))}}au(t){return{from:x(this.Q_(t.from,!0)),to:x(this.Q_(t.to,!0))}}Qi(){return this.Mo}Eo(t){if(!isFinite(t)||t<=0||this.Mo===t)return;const e=this.su(),i=this.Mo;if(this.Mo=t,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&i!==0){const n=this.q_*t/i;this.q_=n}if(this.Ps.fixLeftEdge&&e!==null&&e.Uh()<=0){const n=i-t;this.U_-=Math.round(n/this.q_)+1,this.E_=!0}this.lu(),this.ou()}qt(t){if(this.Ki()||!Ye(t))return 0;const e=this._u()+this.U_-t;return this.Mo-(e+.5)*this.q_-1}uu(t,e){const i=this._u(),n=e===void 0?0:e.from,o=e===void 0?t.length:e.to;for(let r=n;r<o;r++){const h=t[r].wt,a=i+this.U_-h,l=this.Mo-(a+.5)*this.q_-1;t[r]._t=l}}cu(t,e){const i=Math.ceil(this.du(t));return e&&this.Ps.ignoreWhitespaceIndices&&!this.fu(i)?this.pu(i):i}fn(t){this.E_=!0,this.U_=t,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(t){const e=this.q_;if(this.wu(t),this.Ps.rightOffsetPixels!==void 0&&e!==0){const i=this.U_*e/this.q_;this.U_=i}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const t=this.q_,e=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),i=Math.round(e/t),n=x(this.Pe()),o=Math.max(n.Uh(),n.Uh()-i),r=Math.max(n.bi(),n.bi()-i),h=this.V_.M_(t,e,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),a=this.ru()+i,l=this.hu()-i,c=this.Mu(),u=this.Ps.fixLeftEdge||c,d=this.Ps.fixRightEdge||c;let f=0;for(const g of h){if(!(o<=g.index&&g.index<=r))continue;let p;f<this.H_.length?(p=this.H_[f],p.coord=this.qt(g.index),p.label=this.bu(g),p.weight=g.weight):(p={needAlignCoordinate:!1,coord:this.qt(g.index),label:this.bu(g),weight:g.weight},this.H_.push(p)),this.q_>e/2&&!c?p.needAlignCoordinate=!1:p.needAlignCoordinate=u&&g.index<=a||d&&g.index>=l,f++}return this.H_.length=f,this.N_=this.H_,this.H_}Su(){let t;this.E_=!0,this.dn(this.Ps.barSpacing),t=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(t)}xu(t){this.E_=!0,this.R_=t,this.ou(),this.G_()}Cu(t,e){const i=this.du(t),n=this.mu(),o=n+e*(n/10);this.dn(o),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(i-this.du(t)))}no(t){this.ml&&this.lo(),this.vl===null&&this.O_===null&&(this.Ki()||(this.vl=t,this.Pu()))}eo(t){if(this.O_===null)return;const e=ze(this.Mo-t,0,this.Mo),i=ze(this.Mo-x(this.vl),0,this.Mo);e!==0&&i!==0&&this.dn(this.O_.mu*e/i)}ro(){this.vl!==null&&(this.vl=null,this.yu())}ho(t){this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=t,this.Pu()))}ao(t){if(this.ml===null)return;const e=(this.ml-t)/this.mu();this.U_=x(this.O_).gu+e,this.E_=!0,this.ou()}lo(){this.ml!==null&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.U_,n=performance.now();this.ts._n({Ru:o=>(o-n)/e>=1,Du:o=>{const r=(o-n)/e;return r>=1?t:i+(t-i)*r}})}yt(t,e){this.E_=!0,this.D_=t,this.V_.w_(t,e),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(t,e){const i=t.f_(),n=e&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-n)/i),this.U_=t.bi()-this._u(),e&&(this.U_=n?n/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){const t=this.ru(),e=this.hu();t!==null&&e!==null&&this.Eu(new Le(t,e),!0)}zu(t){const e=new Le(t.from,t.to);this.Eu(e)}ns(t){return this.bl.timeFormatter!==void 0?this.bl.timeFormatter(t.originalTime):this.o_.formatHorzItem(t.time)}K_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const t=this.ts.js();for(const e of t)for(const i of e.va())this.F_.set(i,!0);this.W_++}Mu(){const t=this.ts.N().handleScroll,e=this.ts.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}ru(){return this.D_.length===0?null:0}hu(){return this.D_.length===0?null:this.D_.length-1}Lu(t){return(this.Mo-1-t)/this.q_}du(t){const e=this.Lu(t),i=this._u()+this.U_-e;return Math.round(1e6*i)/1e6}wu(t){const e=this.q_;this.q_=t,this.lu(),e!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(oe.T_());const t=this._u(),e=this.Mo/this.q_,i=this.U_+t,n=new Le(i-e+1,i);this.Nu(new oe(n))}lu(){const t=ze(this.q_,this.Fu(),this.Wu());this.q_!==t&&(this.q_=t,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){const t=this.Hu();t!==null&&this.U_<t&&(this.U_=t,this.E_=!0);const e=this.Uu();this.U_>e&&(this.U_=e,this.E_=!0)}Hu(){const t=this.ru(),e=this.R_;return t===null||e===null?null:t-e-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(t){let e=this.B_.get(t.weight);return e===void 0&&(e=new hf((i=>this.$u(i)),this.o_),this.B_.set(t.weight,e)),e.__(t)}$u(t){return this.o_.formatTickmark(t,this.bl)}Nu(t){const e=this.I_;this.I_=t,Ao(e.y_(),this.I_.y_())||this.A_.p(),Ao(e.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;const t=this.ru();if(t===null)return;const e=this.Pe();if(e===null)return;const i=e.Uh()-t;if(i<0){const n=this.U_-i-1;this.fn(n)}this.lu()}J_(){this.ou(),this.lu()}fu(t){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(t)||!1}pu(t){const e=(function*(n){const o=Math.round(n),r=o<n;let h=1;for(;;)r?(yield o+h,yield o-h):(yield o-h,yield o+h),h++})(t),i=this.hu();for(;i;){const n=e.next().value;if(this.F_.get(n))return n;if(n<0||n>i)break}return t}Y_(t){if(t.rightOffsetPixels!==void 0){const e=t.rightOffsetPixels/(t.barSpacing||this.q_);this.ts.fn(e)}}}var No,Bo,Wo,Yo,Ho;(function(s){s[s.OnTouchEnd=0]="OnTouchEnd",s[s.OnNextTap=1]="OnNextTap"})(No||(No={}));class uf{constructor(t,e,i){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new N,this.Xu=new N,this.Zu=null,this.Gu=t,this.Ps=e,this.o_=i,this.Sl=new ld(this.Ps.layout.colorParsers),this.Ju=new ad(this),this.uh=new cf(this,e.timeScale,this.Ps.localization,i),this.Ct=new yd(this,e.crosshair),this.Qu=new Xd(e.crosshair),e.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc($.gn())}ar(){this.rc($.wn())}Zh(){this.rc(new $(1))}Eh(t){const e=this.hc(t);this.rc(e)}ac(){return this.ju}lc(t){var i,n,o,r;if(((i=this.ju)==null?void 0:i.n_)===(t==null?void 0:t.n_)&&((o=(n=this.ju)==null?void 0:n.e_)==null?void 0:o.Kn)===((r=t==null?void 0:t.e_)==null?void 0:r.Kn))return;const e=this.ju;this.ju=t,e!==null&&this.Eh(e.n_),t!==null&&t.n_!==(e==null?void 0:e.n_)&&this.Eh(t.n_)}N(){return this.Ps}hr(t){it(this.Ps,t),this.qu.forEach((e=>e.Ro(t))),t.timeScale!==void 0&&this.uh.hr(t.timeScale),t.localization!==void 0&&this.uh.X_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(t,e,i=0){const n=this.qu[i];if(n===void 0)return;if(t==="left")return it(this.Ps,{leftPriceScale:e}),n.Ro({leftPriceScale:e}),this.Ku.p(),void this.Ih();if(t==="right")return it(this.Ps,{rightPriceScale:e}),n.Ro({rightPriceScale:e}),this.Ku.p(),void this.Ih();const o=this._c(t,i);o!==null&&(o.Ft.hr(e),this.Ku.p())}_c(t,e){const i=this.qu[e];if(i===void 0)return null;const n=i.Do(t);return n!==null?{Us:i,Ft:n}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(t,e){t.Al(e),this.vu()}Eo(t){this.Mo=t,this.uh.Eo(this.Mo),this.qu.forEach((e=>e.Eo(t))),this.vu()}fc(t){this.qu.length!==1&&(U(t>=0&&t<this.qu.length,"Invalid pane index"),this.qu.splice(t,1),this.Ih())}vc(t,e){if(this.qu.length<2)return;U(t>=0&&t<this.qu.length,"Invalid pane index");const i=this.qu[t],n=this.qu.reduce(((u,d)=>u+d.Bo()),0),o=this.qu.reduce(((u,d)=>u+d.$t()),0),r=o-30*(this.qu.length-1);e=Math.min(r,Math.max(30,e));const h=n/o,a=i.$t();i.Io(e*h);let l=e-a,c=this.qu.length-1;for(const u of this.qu)if(u!==i){const d=Math.min(r,Math.max(30,u.$t()-l/c));l-=u.$t()-d,c-=1;const f=d*h;u.Io(f)}this.Ih()}mc(t,e){U(t>=0&&t<this.qu.length&&e>=0&&e<this.qu.length,"Invalid pane index");const i=this.qu[t],n=this.qu[e];this.qu[t]=n,this.qu[e]=i,this.Ih()}wc(t,e){if(U(t>=0&&t<this.qu.length&&e>=0&&e<this.qu.length,"Invalid pane index"),t===e)return;const[i]=this.qu.splice(t,1);this.qu.splice(e,0,i),this.Ih()}Uo(t,e,i){t.Uo(e,i)}$o(t,e,i){t.$o(e,i),this.Ah(),this.rc(this.gc(t,2))}qo(t,e){t.qo(e),this.rc(this.gc(t,2))}Yo(t,e,i){e.Tl()||t.Yo(e,i)}jo(t,e,i){e.Tl()||(t.jo(e,i),this.Ah(),this.rc(this.gc(t,2)))}Ko(t,e){e.Tl()||(t.Ko(e),this.rc(this.gc(t,2)))}Zo(t,e){t.Zo(e),this.rc(this.gc(t,2))}Mc(t){this.uh.no(t)}bc(t,e){const i=this.Et();if(i.Ki()||e===0)return;const n=i.Qi();t=Math.max(1,Math.min(t,n)),i.Cu(t,e),this.vu()}Sc(t){this.xc(0),this.Cc(t),this.Pc()}yc(t){this.uh.eo(t),this.vu()}kc(){this.uh.ro(),this.ar()}xc(t){this.uh.ho(t)}Cc(t){this.uh.ao(t),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(t,e,i,n,o){this.Ct.Vs(t,e);let r=NaN,h=this.uh.cu(t,!0);const a=this.uh.Pe();a!==null&&(h=Math.min(Math.max(a.Uh(),h),a.bi()));const l=n.ks(),c=l.zt();if(c!==null&&(r=l.Ts(e,c)),r=this.Qu.ga(r,h,n),this.Ct.As(h,r,n),this.Zh(),!o){const u=xh(n,t,e);this.lc(u&&{n_:u.n_,e_:u.e_,h_:u.h_||null}),this.Xu.p(this.Ct.It(),{x:t,y:e},i)}}Rc(t,e,i){const n=i.ks(),o=n.zt(),r=n.Nt(t,x(o)),h=this.uh.Q_(e,!0),a=this.uh.qt(x(h));this.Tc(a,r,null,i,!0)}Dc(t){this.uc().Ls(),this.Zh(),t||this.Xu.p(null,null,null)}Ah(){const t=this.Ct.Us();if(t!==null){const e=this.Ct.Is(),i=this.Ct.Es();this.Tc(e,i,null,t)}this.Ct.Ns()}Vc(t,e,i){const n=this.uh.Rs(0);e!==void 0&&i!==void 0&&this.uh.yt(e,i);const o=this.uh.Rs(0),r=this.uh._u(),h=this.uh.Pe();if(h!==null&&n!==null&&o!==null){const a=h.Te(r),l=this.o_.key(n)>this.o_.key(o),c=t!==null&&t>r&&!l,u=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,d=a&&(i!==void 0||u)&&this.uh.N().shiftVisibleRangeOnNewBar;if(c&&!d){const f=t-r;this.uh.fn(this.uh.gu()-f)}}this.uh.xu(t)}Lh(t){t!==null&&t.Jo()}Hn(t){if((function(i){return i instanceof Vo})(t))return t;const e=this.qu.find((i=>i.Dt().includes(t)));return e===void 0?null:e}vu(){this.qu.forEach((t=>t.Jo())),this.Ah()}m(){this.qu.forEach((t=>t.m())),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(t,e){const i=this.tc(e);this.Ec(t,i),this.Yu.push(t),this.Yu.length===1?this.Ih():this.ar()}Ac(t){const e=this.Hn(t),i=this.Yu.indexOf(t);U(i!==-1,"Series not found");const n=x(e);this.Yu.splice(i,1),n.Ql(t),t.m&&t.m(),this.uh.K_(),this.zc(n)}Bh(t,e){const i=x(this.Hn(t));i.Ql(t,!0),i.Gl(t,e,!0)}Au(){const t=$.wn();t.rn(),this.rc(t)}Lc(t){const e=$.wn();e.ln(t),this.rc(e)}cn(){const t=$.wn();t.cn(),this.rc(t)}dn(t){const e=$.wn();e.dn(t),this.rc(e)}fn(t){const e=$.wn();e.fn(t),this.rc(e)}_n(t){const e=$.wn();e._n(t),this.rc(e)}hn(){const t=$.wn();t.hn(),this.rc(t)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(t,e){if(U(e>=0,"Index should be greater or equal to 0"),e===this.Fc(t))return;const i=x(this.Hn(t));i.Ql(t);const n=this.tc(e);this.Ec(t,n),i.Ma().length===0&&this.zc(i),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(t){const e=this.ec,i=this.sc;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Zu===null||this.Zu.mr!==i||this.Zu.wr!==e)this.Zu={mr:i,wr:e,Hc:new Map};else{const o=this.Zu.Hc.get(t);if(o!==void 0)return o}const n=this.Sl.tt(i,e,t/100);return this.Zu.Hc.set(t,n),n}Uc(t){return this.qu.indexOf(t)}Xi(){return this.Sl}$c(){return this.qc()}qc(t){const e=new Vo(this.uh,this);this.qu.push(e);const i=t??this.qu.length-1,n=$.gn();return n.Qs(i,{tn:0,sn:!0}),this.rc(n),e}tc(t){return U(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.qu.length,t))<this.qu.length?this.qu[t]:this.qc(t)}Fc(t){return this.qu.findIndex((e=>e.Oo().includes(t)))}gc(t,e){const i=new $(e);if(t!==null){const n=this.qu.indexOf(t);i.Qs(n,{tn:e})}return i}hc(t,e){return e===void 0&&(e=2),this.gc(this.Hn(t),e)}rc(t){this.Gu&&this.Gu(t),this.qu.forEach((e=>e.i_().lr().yt()))}Ec(t,e){const i=t.N().priceScaleId,n=i!==void 0?i:this.Oc();e.Gl(t,n),Vi(n)||t.hr(t.N())}nc(t){const e=this.Ps.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}zc(t){!t.Lo()&&t.Ma().length===0&&this.qu.length>1&&this.qu.splice(this.Uc(t),1)}}function yh(s){if(s>=1)return 0;let t=0;for(;t<8;t++){const e=Math.round(s);if(Math.abs(e-s)<1e-8)return t;s*=10}return t}function Ds(s){return!ce(s)&&!je(s)}function wh(s){return ce(s)}(function(s){s[s.Disabled=0]="Disabled",s[s.Continuous=1]="Continuous",s[s.OnDataUpdate=2]="OnDataUpdate"})(Bo||(Bo={})),(function(s){s[s.LastBar=0]="LastBar",s[s.LastVisible=1]="LastVisible"})(Wo||(Wo={})),(function(s){s.Solid="solid",s.VerticalGradient="gradient"})(Yo||(Yo={})),(function(s){s[s.Year=0]="Year",s[s.Month=1]="Month",s[s.DayOfMonth=2]="DayOfMonth",s[s.Time=3]="Time",s[s.TimeWithSeconds=4]="TimeWithSeconds"})(Ho||(Ho={}));const jo=s=>s.getUTCFullYear();function df(s,t,e){return t.replace(/yyyy/g,(i=>yt(jo(i),4))(s)).replace(/yy/g,(i=>yt(jo(i)%100,2))(s)).replace(/MMMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(s,e)).replace(/MMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(s,e)).replace(/MM/g,(i=>yt((n=>n.getUTCMonth()+1)(i),2))(s)).replace(/dd/g,(i=>yt((n=>n.getUTCDate())(i),2))(s))}class Mh{constructor(t="yyyy-MM-dd",e="default"){this.Yc=t,this.jc=e}__(t){return df(t,this.Yc,this.jc)}}class ff{constructor(t){this.Kc=t||"%h:%m:%s"}__(t){return this.Kc.replace("%h",yt(t.getUTCHours(),2)).replace("%m",yt(t.getUTCMinutes(),2)).replace("%s",yt(t.getUTCSeconds(),2))}}const gf={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class pf{constructor(t={}){const e={...gf,...t};this.Qc=new Mh(e.Xc,e.Jc),this.td=new ff(e.Zc),this.sd=e.Gc}__(t){return`${this.Qc.__(t)}${this.sd}${this.td.__(t)}`}}function li(s){return 60*s*60*1e3}function us(s){return 60*s*1e3}const ci=[{nd:($o=1,1e3*$o),ed:10},{nd:us(1),ed:20},{nd:us(5),ed:21},{nd:us(30),ed:22},{nd:li(1),ed:30},{nd:li(3),ed:31},{nd:li(6),ed:32},{nd:li(12),ed:33}];var $o;function Uo(s,t){if(s.getUTCFullYear()!==t.getUTCFullYear())return 70;if(s.getUTCMonth()!==t.getUTCMonth())return 60;if(s.getUTCDate()!==t.getUTCDate())return 50;for(let e=ci.length-1;e>=0;--e)if(Math.floor(t.getTime()/ci[e].nd)!==Math.floor(s.getTime()/ci[e].nd))return ci[e].ed;return 0}function ds(s){let t=s;if(je(s)&&(t=Qs(s)),!Ds(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{rd:Math.round(e.getTime()/1e3),hd:t}}function qo(s){if(!wh(s))throw new Error("time must be of type isUTCTimestamp");return{rd:s}}function Qs(s){const t=new Date(s);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${s}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function Qo(s){je(s.time)&&(s.time=Qs(s.time))}class Go{options(){return this.Ps}setOptions(t){this.Ps=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?(function(e){e.forEach(Qo)})(t):Qo(t)}createConverterToInternalObj(t){return x((function(e){return e.length===0?null:Ds(e[0].time)||je(e[0].time)?ds:qo})(t))}key(t){return typeof t=="object"&&"rd"in t?t.rd:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.hd===void 0?new Date(1e3*e.rd).getTime():new Date(Date.UTC(e.hd.year,e.hd.month-1,e.hd.day)).getTime()}convertHorzItemToInternal(t){return wh(e=t)?qo(e):Ds(e)?ds(e):ds(Qs(e));var e}updateFormatter(t){if(!this.Ps)return;const e=t.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new pf({Xc:e,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:t.locale}):this.ad=new Mh(e,t.locale)}formatHorzItem(t){const e=t;return this.ad.__(new Date(1e3*e.rd))}formatTickmark(t,e){const i=(function(o,r,h){switch(o){case 0:case 10:return r?h?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return r?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(t.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),n=this.Ps.timeScale;if(n.tickMarkFormatter!==void 0){const o=n.tickMarkFormatter(t.originalTime,i,e.locale);if(o!==null)return o}return(function(o,r,h){const a={};switch(r){case 0:a.year="numeric";break;case 1:a.month="short";break;case 2:a.day="numeric";break;case 3:a.hour12=!1,a.hour="2-digit",a.minute="2-digit";break;case 4:a.hour12=!1,a.hour="2-digit",a.minute="2-digit",a.second="2-digit"}const l=o.hd===void 0?new Date(1e3*o.rd):new Date(Date.UTC(o.hd.year,o.hd.month-1,o.hd.day));return new Date(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()).toLocaleString(h,a)})(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(lf,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(i,n=0){if(i.length===0)return;let o=n===0?null:i[n-1].time.rd,r=o!==null?new Date(1e3*o):null,h=0;for(let a=n;a<i.length;++a){const l=i[a],c=new Date(1e3*l.time.rd);r!==null&&(l.timeWeight=Uo(c,r)),h+=l.time.rd-(o||l.time.rd),o=l.time.rd,r=c}if(n===0&&i.length>1){const a=Math.ceil(h/(i.length-1)),l=new Date(1e3*(i[0].time.rd-a));i[0].timeWeight=Uo(new Date(1e3*i[0].time.rd),l)}})(t,e)}static ld(t){return it({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const de=typeof window<"u";function Jo(){return!!de&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function fs(){return!!de&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function zs(s){return s+s%2}function mf(s){de&&window.chrome!==void 0&&s.addEventListener("mousedown",(t=>{if(t.button===1)return t.preventDefault(),!1}))}class Bi{constructor(t,e,i){this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!fs(),this.Ld=n=>{this.Od(n)},this.Nd=n=>{if(this.Fd(n)){const o=this.Wd(n);if(++this.dd,this.fd&&this.dd>1){const{Hd:r}=this.Ud(ct(n),this.pd);r<30&&!this.Sd&&this.$d(o,this.Yd.qd),this.jd()}}else{const o=this.Wd(n);if(++this.od,this._d&&this.od>1){const{Hd:r}=this.Ud(ct(n),this.ud);r<5&&!this.bd&&this.Kd(o,this.Yd.Xd),this.Zd()}}},this.Gd=t,this.Yd=e,this.Ps=i,this.Jd()}m(){this.xd!==null&&(this.xd(),this.xd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.yd!==null&&(this.yd(),this.yd=null),this.kd!==null&&(this.kd(),this.kd=null),this.Td!==null&&(this.Td(),this.Td=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(t){this.yd&&this.yd();const e=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",e)},this.Gd.addEventListener("mousemove",e),this.Fd(t))return;const i=this.Wd(t);this.Kd(i,this.Yd.sf),this.zd=!0}Zd(){this._d!==null&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}jd(){this.fd!==null&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}if(t){if(this.Id||this.gd!==null||this.Fd(t))return;const e=this.Wd(t);this.Kd(e,this.Yd.nf),this.zd=!0}ef(t){const e=gs(t.changedTouches,x(this.Ad));if(e===null||(this.Ed=ui(t),this.Rd!==null)||this.Bd)return;this.Vd=!0;const i=this.Ud(ct(e),x(this.gd)),{rf:n,hf:o,Hd:r}=i;if(this.Md||!(r<5)){if(!this.Md){const h=.5*n,a=o>=h&&!this.Ps.af(),l=h>o&&!this.Ps.lf();a||l||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){const h=this.Wd(t,e);this.$d(h,this.Yd._f),Zt(t)}}}uf(t){if(t.button!==0)return;const e=this.Ud(ct(t),x(this.wd)),{Hd:i}=e;if(i>=5&&(this.bd=!0,this.Zd()),this.bd){const n=this.Wd(t);this.Kd(n,this.Yd.cf)}}Ud(t,e){const i=Math.abs(e._t-t._t),n=Math.abs(e.ut-t.ut);return{rf:i,hf:n,Hd:i+n}}df(t){let e=gs(t.changedTouches,x(this.Ad));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.Ad=null,this.Ed=ui(t),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);const i=this.Wd(t,e);if(this.$d(i,this.Yd.ff),++this.dd,this.fd&&this.dd>1){const{Hd:n}=this.Ud(ct(e),this.pd);n<30&&!this.Sd&&this.$d(i,this.Yd.qd),this.jd()}else this.Sd||(this.$d(i,this.Yd.pf),this.Yd.pf&&Zt(t));this.dd===0&&Zt(t),t.touches.length===0&&this.md&&(this.md=!1,Zt(t))}Od(t){if(t.button!==0)return;const e=this.Wd(t);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),Jo()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(t))if(this.Kd(e,this.Yd.vf),++this.od,this._d&&this.od>1){const{Hd:i}=this.Ud(ct(t),this.ud);i<5&&!this.bd&&this.Kd(e,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(e,this.Yd.mf)}Qd(){this.vd!==null&&(clearTimeout(this.vd),this.vd=null)}wf(t){if(this.Ad!==null)return;const e=t.changedTouches[0];this.Ad=e.identifier,this.Ed=ui(t);const i=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=ct(e),this.Td&&(this.Td(),this.Td=null);{const o=this.ef.bind(this),r=this.df.bind(this);this.Td=()=>{i.removeEventListener("touchmove",o),i.removeEventListener("touchend",r)},i.addEventListener("touchmove",o,{passive:!1}),i.addEventListener("touchend",r,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,t),240)}const n=this.Wd(t,e);this.$d(n,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=ct(e))}bf(t){if(t.button!==0)return;const e=this.Gd.ownerDocument.documentElement;Jo()&&e.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=ct(t),this.kd&&(this.kd(),this.kd=null);{const n=this.uf.bind(this),o=this.Od.bind(this);this.kd=()=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",o)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",o)}if(this.Id=!0,this.Fd(t))return;const i=this.Wd(t);this.Kd(i,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=ct(t))}Jd(){this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{const t=this.Gd.ownerDocument,e=i=>{this.Yd.xf&&(i.composed&&this.Gd.contains(i.composedPath()[0])||i.target&&this.Gd.contains(i.target)||this.Yd.xf())};this.Cd=()=>{t.removeEventListener("touchstart",e)},this.xd=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}fs()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),mf(this.Gd),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",(()=>{}),{passive:!1})}Pf(){this.Yd.yf===void 0&&this.Yd.kf===void 0&&this.Yd.Tf===void 0||(this.Gd.addEventListener("touchstart",(t=>this.Rf(t.touches)),{passive:!0}),this.Gd.addEventListener("touchmove",(t=>{if(t.touches.length===2&&this.Rd!==null&&this.Yd.kf!==void 0){const e=Xo(t.touches[0],t.touches[1])/this.Dd;this.Yd.kf(this.Rd,e),Zt(t)}}),{passive:!1}),this.Gd.addEventListener("touchend",(t=>{this.Rf(t.touches)})))}Rf(t){t.length===1&&(this.Vd=!1),t.length!==2||this.Vd||this.md?this.Df():this.Vf(t)}Vf(t){const e=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,ut:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Dd=Xo(t[0],t[1]),this.Yd.yf!==void 0&&this.Yd.yf(),this.Qd()}Df(){this.Rd!==null&&(this.Rd=null,this.Yd.Tf!==void 0&&this.Yd.Tf())}Cf(t){if(this.yd&&this.yd(),this.Fd(t)||!this.zd)return;const e=this.Wd(t);this.Kd(e,this.Yd.Bf),this.zd=!fs()}gf(t){const e=gs(t.touches,x(this.Ad));if(e===null)return;const i=this.Wd(t,e);this.$d(i,this.Yd.If),this.Sd=!0,this.md=!0}Fd(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:ui(t)<this.Ed+500}$d(t,e){e&&e.call(this.Yd,t)}Kd(t,e){e&&e.call(this.Yd,t)}Wd(t,e){const i=e||t,n=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-n.left,localY:i.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Ef:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",Af:t.type,zf:i.target,a_:t.view,Lf:()=>{t.type!=="touchstart"&&Zt(t)}}}}function Xo(s,t){const e=s.clientX-t.clientX,i=s.clientY-t.clientY;return Math.sqrt(e*e+i*i)}function Zt(s){s.cancelable&&s.preventDefault()}function ct(s){return{_t:s.pageX,ut:s.pageY}}function ui(s){return s.timeStamp||performance.now()}function gs(s,t){for(let e=0;e<s.length;++e)if(s[e].identifier===t)return s[e];return null}class bf{constructor(t,e,i){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=t,this.Uf=t.$f()[e],this.qf=t.$f()[i],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){this.Nf!==null&&this.Nf.m()}Zf(){return this.Yf}Gf(){return F({width:this.Uf.Gf().width,height:1})}Jf(){return F({width:this.Uf.Jf().width,height:1*window.devicePixelRatio})}Qf(t,e,i){const n=this.Jf();t.fillStyle=this.Hf.N().layout.panes.separatorColor,t.fillRect(e,i,n.width,n.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of!==null&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),this.Nf!==null&&(this.Nf.m(),this.Nf=null)))}Xf(){const t=document.createElement("div"),e=t.style;e.position="fixed",e.display="none",e.zIndex="49",e.top="0",e.left="0",e.width="100%",e.height="100%",e.cursor="row-resize",this.jf.appendChild(t);const i=document.createElement("div"),n=i.style;n.position="absolute",n.zIndex="50",n.top="-4px",n.height="9px",n.width="100%",n.backgroundColor="",n.cursor="row-resize",this.jf.appendChild(i);const o={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new Bi(i,o,{af:()=>!1,lf:()=>!0}),this.Of={ip:i,tp:t}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(t){this.Of!==null&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(t){this.Of!==null&&this.Wf===null&&(this.Of.ip.style.backgroundColor="")}ep(t){if(this.Of===null)return;const e=this.Uf.ap().Bo()+this.qf.ap().Bo(),i=e/(this.Uf.Gf().height+this.qf.Gf().height),n=30*i;e<=2*n||(this.Wf={lp:t.pageY,op:this.Uf.ap().Bo(),_p:e-n,up:e,cp:i,dp:n},this.Of.tp.style.display="block")}rp(t){const e=this.Wf;if(e===null)return;const i=(t.pageY-e.lp)*e.cp,n=ze(e.op+i,e.dp,e._p);this.Uf.ap().Io(n),this.qf.ap().Io(e.up-n),this.Hf.Qt().Ih()}hp(t){this.Wf!==null&&this.Of!==null&&(this.Wf=null,this.Of.tp.style.display="none")}}function ps(s,t){return s.fp-t.fp}function ms(s,t,e){const i=(s.fp-t.fp)/(s.wt-t.wt);return Math.sign(i)*Math.min(Math.abs(i),e)}class _f{constructor(t,e,i,n){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=t,this.xp=e,this.Cp=i,this.Mn=n}Pp(t,e){if(this.pp!==null){if(this.pp.wt===e)return void(this.pp.fp=t);if(Math.abs(this.pp.fp-t)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:e,fp:t}}le(t,e){if(this.pp===null||this.vp===null||e-this.pp.wt>50)return;let i=0;const n=ms(this.pp,this.vp,this.xp),o=ps(this.pp,this.vp),r=[n],h=[o];if(i+=o,this.mp!==null){const l=ms(this.vp,this.mp,this.xp);if(Math.sign(l)===Math.sign(n)){const c=ps(this.vp,this.mp);if(r.push(l),h.push(c),i+=c,this.wp!==null){const u=ms(this.mp,this.wp,this.xp);if(Math.sign(u)===Math.sign(n)){const d=ps(this.mp,this.wp);r.push(u),h.push(d),i+=d}}}}let a=0;for(let l=0;l<r.length;++l)a+=h[l]/i*r[l];Math.abs(a)<this.Sp||(this.gp={fp:t,wt:e},this.bp=a,this.Mp=(function(l,c){const u=Math.log(c);return Math.log(1*u/-l)/u})(Math.abs(a),this.Cp))}Du(t){const e=x(this.gp),i=t-e.wt;return e.fp+this.bp*(Math.pow(this.Cp,i)-1)/Math.log(this.Cp)}Ru(t){return this.gp===null||this.yp(t)===this.Mp}yp(t){const e=t-x(this.gp).wt;return Math.min(e,this.Mp)}}class vf{constructor(t,e){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=t,this.Vp=e,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){const t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Rp==="dark"),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function Qt(s,t){const e=x(s.ownerDocument).createElement("canvas");s.appendChild(e);const i=sd(e,{options:{allowResizeObserver:!0},transform:(n,o)=>({width:Math.max(n.width,o.width),height:Math.max(n.height,o.height)})});return i.resizeCanvasElement(t),i}function Gt(s){var t;s.width=1,s.height=1,(t=s.getContext("2d"))==null||t.clearRect(0,0,1,1)}function Es(s,t,e,i){s.ih&&s.ih(t,e,i)}function pi(s,t,e,i){s.nt(t,e,i)}function Rs(s,t,e,i){const n=s(e,i);for(const o of n){const r=o.Tt(i);r!==null&&t(r)}}function bs(s,t){return e=>{var i,n;return(function(o){return o.Ft!==void 0})(e)?(((i=e.Ft())==null?void 0:i.ma())??"")!==t?[]:((n=e.ta)==null?void 0:n.call(e,s))??[]:[]}}function Ko(s,t,e,i){if(!s.length)return;let n=0;const o=s[0].$t(i,!0);let r=t===1?e/2-(s[0].Fi()-o/2):s[0].Fi()-o/2-e/2;r=Math.max(0,r);for(let h=1;h<s.length;h++){const a=s[h],l=s[h-1],c=l.$t(i,!1),u=a.Fi(),d=l.Fi();if(t===1?u>d-c:u<d+c){const f=d-c*t;a.Wi(f);const g=f-t*c/2;if((t===1?g<0:g>e)&&r>0){const p=t===1?-1-g:g-e,m=Math.min(p,r);for(let b=n;b<s.length;b++)s[b].Wi(s[b].Fi()+t*m);r-=m}}else n=h,r=t===1?d-c-u:u-(d+c)}}class Zo{constructor(t,e,i,n){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new Pi(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=t,this.Ps=e,this.Ml=e.layout,this.Ju=i,this.jp=n==="left",this.Kp=bs("normal",n),this.Xp=bs("top",n),this.Zp=bs("bottom",n),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=Qt(this.jf,F({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const o=this.Gp.canvasElement;o.style.position="absolute",o.style.zIndex="1",o.style.left="0",o.style.top="0",this.Jp=Qt(this.jf,F({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const r=this.Jp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0";const h={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new Bi(this.Jp.canvasElement,h,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),Gt(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Gt(this.Gp.canvasElement),this.Gp.dispose(),this.Yi!==null&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){const t=this.Ju.N();return this.Wp!==t.k&&(this.Fp.Bn(),this.Wp=t.k),t}nv(){if(this.Yi===null)return 0;let t=0;const e=this.sv(),i=x(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));i.save();const n=this.Yi.Da();i.font=this.ev(),n.length>0&&(t=Math.max(this.Fp.Vi(i,n[0].Za),this.Fp.Vi(i,n[n.length-1].Za)));const o=this.rv();for(let l=o.length;l--;){const c=this.Fp.Vi(i,o[l].ri());c>t&&(t=c)}const r=this.Yi.zt();if(r!==null&&this.Op!==null&&(h=this.Ps.crosshair).mode!==2&&h.horzLine.visible&&h.horzLine.labelVisible){const l=this.Yi.Ts(1,r),c=this.Yi.Ts(this.Op.height-2,r);t=Math.max(t,this.Fp.Vi(i,this.Yi.Zi(Math.floor(Math.min(l,c))+.11111111111111,r)),this.Fp.Vi(i,this.Yi.Zi(Math.ceil(Math.max(l,c))-.11111111111111,r)))}var h;i.restore();const a=t||34;return zs(Math.ceil(e.S+e.C+e.B+e.I+5+a))}hv(t){this.Op!==null&&$t(this.Op,t)||(this.Op=t,this.Up=!0,this.Gp.resizeCanvasElement(t),this.Jp.resizeCanvasElement(t),this.Up=!1,this.jf.style.width=`${t.width}px`,this.jf.style.height=`${t.height}px`)}av(){return x(this.Op).width}_s(t){this.Yi!==t&&(this.Yi!==null&&this.Yi.so().u(this),this.Yi=t,t.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){const t=this.Pt.ap();this.Pt.qp().Qt().Zo(t,x(this.Ft()))}lv(t){if(this.Op===null)return;const e={colorSpace:this.Pt.qp().N().layout.colorSpace};if(t!==1){this.ov(),this.Gp.applySuggestedBitmapSize();const n=qt(this.Gp,e);n!==null&&(n.useBitmapCoordinateSpace((o=>{this._v(o),this.uv(o)})),this.Pt.cv(n,this.Zp),this.dv(n),this.Pt.cv(n,this.Kp),this.fv(n))}this.Jp.applySuggestedBitmapSize();const i=qt(this.Jp,e);i!==null&&(i.useBitmapCoordinateSpace((({context:n,bitmapSize:o})=>{n.clearRect(0,0,o.width,o.height)})),this.pv(i),this.Pt.cv(i,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(t,e,i,n){const o=this.Jf();if(o.width>0&&o.height>0&&(t.drawImage(this.Gp.canvasElement,e,i),n)){const r=this.Jp.canvasElement;t.drawImage(r,e,i)}}yt(){var t;(t=this.Yi)==null||t.Da()}ep(t){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),i=this.Pt.ap();this.Np=!0,e.Uo(i,this.Yi,t.localY)}rp(t){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),i=this.Pt.ap(),n=this.Yi;e.$o(i,n,t.localY)}Qp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.qp().Qt(),e=this.Pt.ap(),i=this.Yi;this.Np&&(this.Np=!1,t.qo(e,i))}hp(t){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),i=this.Pt.ap();this.Np=!1,e.qo(i,this.Yi)}tv(t){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(t){this.Yi!==null&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(t){this.vv(0)}rv(){const t=[],e=this.Yi===null?void 0:this.Yi;return(i=>{for(let n=0;n<i.length;++n){const o=i[n].Ws(this.Pt.ap(),e);for(let r=0;r<o.length;r++)t.push(o[r])}})(this.Pt.ap().Dt()),t}_v({context:t,bitmapSize:e}){const{width:i,height:n}=e,o=this.Pt.ap().Qt(),r=o.$(),h=o.Wc();r===h?Fi(t,0,0,i,n,r):lh(t,0,0,i,n,r,h)}uv({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(this.Op===null||this.Yi===null||!this.Yi.N().borderVisible)return;t.fillStyle=this.Yi.N().borderColor;const n=Math.max(1,Math.floor(this.sv().S*i));let o;o=this.jp?e.width-n:0,t.fillRect(o,0,n,e.height)}dv(t){if(this.Op===null||this.Yi===null)return;const e=this.Yi.Da(),i=this.Yi.N(),n=this.sv(),o=this.jp?this.Op.width-n.C:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace((({context:r,horizontalPixelRatio:h,verticalPixelRatio:a})=>{r.fillStyle=i.borderColor;const l=Math.max(1,Math.floor(a)),c=Math.floor(.5*a),u=Math.round(n.C*h);r.beginPath();for(const d of e)r.rect(Math.floor(o*h),Math.round(d.Pa*a)-c,u,l);r.fill()})),t.useMediaCoordinateSpace((({context:r})=>{r.font=this.ev(),r.fillStyle=i.textColor??this.Ml.textColor,r.textAlign=this.jp?"right":"left",r.textBaseline="middle";const h=this.jp?Math.round(o-n.B):Math.round(o+n.C+n.B),a=e.map((l=>this.Fp.Di(r,l.Za)));for(let l=e.length;l--;){const c=e[l];r.fillText(c.Za,h,c.Pa+a[l])}}))}ov(){if(this.Op===null||this.Yi===null)return;let t=this.Op.height/2;const e=[],i=this.Yi.Dt().slice(),n=this.Pt.ap(),o=this.sv();this.Yi===n.$n()&&this.Pt.ap().Dt().forEach((a=>{n.Un(a)&&i.push(a)}));const r=this.Yi.Ma()[0],h=this.Yi;i.forEach((a=>{const l=a.Ws(n,h);l.forEach((c=>{c.Wi(null),c.Hi()&&e.push(c)})),r===a&&l.length>0&&(t=l[0].Ii())})),e.forEach((a=>a.Wi(a.Ii()))),this.Yi.N().alignLabels&&this.mv(e,o,t)}mv(t,e,i){if(this.Op===null)return;const n=t.filter((r=>r.Ii()<=i)),o=t.filter((r=>r.Ii()>i));n.sort(((r,h)=>h.Ii()-r.Ii())),n.length&&o.length&&o.push(n[0]),o.sort(((r,h)=>r.Ii()-h.Ii()));for(const r of t){const h=Math.floor(r.$t(e)/2),a=r.Ii();a>-h&&a<h&&r.Wi(h),a>this.Op.height-h&&a<this.Op.height+h&&r.Wi(this.Op.height-h)}Ko(n,1,this.Op.height,e),Ko(o,-1,this.Op.height,e)}fv(t){if(this.Op===null)return;const e=this.rv(),i=this.sv(),n=this.jp?"right":"left";e.forEach((o=>{o.Ui()&&o.Tt(x(this.Yi)).nt(t,i,this.Fp,n)}))}pv(t){if(this.Op===null||this.Yi===null)return;const e=this.Pt.qp().Qt(),i=[],n=this.Pt.ap(),o=e.uc().Ws(n,this.Yi);o.length&&i.push(o);const r=this.sv(),h=this.jp?"right":"left";i.forEach((a=>{a.forEach((l=>{l.Tt(x(this.Yi)).nt(t,r,this.Fp,h)}))}))}vv(t){this.jf.style.cursor=t===1?"ns-resize":"default"}_l(){const t=this.nv();this.Hp<t&&this.Pt.qp().Qt().Ih(),this.Hp=t}ev(){return Si(this.Ml.fontSize,this.Ml.fontFamily)}}function xf(s,t){var e;return((e=s.Jh)==null?void 0:e.call(s,t))??[]}function tr(s,t){var e;return((e=s.Fs)==null?void 0:e.call(s,t))??[]}function er(s,t){var e;return((e=s.us)==null?void 0:e.call(s,t))??[]}function yf(s,t){var e;return((e=s.Xh)==null?void 0:e.call(s,t))??[]}class Gs{constructor(t,e){this.Op=F({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new N,this.Cv=new N,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Yp=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Vp=t,this.Vv=e,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(i),this.Gp=Qt(i,F({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const n=this.Gp.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jp=Qt(i,F({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const o=this.Jp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new Bi(this.Jp.canvasElement,this,{af:()=>this.kv===null&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>this.kv===null&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.wv!==null&&this.wv.m(),this.gv!==null&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),Gt(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Gt(this.Gp.canvasElement),this.Gp.dispose(),this.Vv!==null&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return x(this.Vv)}Lv(t){var e;this.Vv!==null&&this.Vv.t_().u(this),this.Vv=t,this.Vv!==null&&this.Vv.t_().i(Gs.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new vf(this.Iv,this.Vp),this.Mv.yt()):((e=this.Mv)==null||e.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(this.Vv!==null&&(this.Ov(),this.ts().js().length!==0)){if(this.wv!==null){const t=this.Vv.Wo();this.wv._s(x(t))}if(this.gv!==null){const t=this.Vv.Ho();this.gv._s(x(t))}}}Nv(){this.wv!==null&&this.wv.yt(),this.gv!==null&&this.gv.yt()}Bo(){return this.Vv!==null?this.Vv.Bo():0}Io(t){this.Vv&&this.Vv.Io(t)}sf(t){if(!this.Vv)return;this.Fv();const e=t.localX,i=t.localY;this.Wv(e,i,t)}Sf(t){this.Fv(),this.Hv(),this.Wv(t.localX,t.localY,t)}nf(t){if(!this.Vv)return;this.Fv();const e=t.localX,i=t.localY;this.Wv(e,i,t)}mf(t){this.Vv!==null&&(this.Fv(),this.Uv(t))}Xd(t){this.Vv!==null&&this.$v(this.Cv,t)}qd(t){this.Xd(t)}cf(t){this.Fv(),this.qv(t),this.Wv(t.localX,t.localY,t)}vf(t){this.Vv!==null&&(this.Fv(),this.yv=!1,this.Yv(t))}pf(t){this.Vv!==null&&this.Uv(t)}If(t){if(this.yv=!0,this.kv===null){const e={x:t.localX,y:t.localY};this.jv(e,e,t)}}Bf(t){this.Vv!==null&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(t,e){if(!this.Vp.N().handleScale.pinch)return;const i=5*(e-this.Pv);this.Pv=e,this.ts().bc(t._t,i)}Mf(t){this.yv=!1,this.Tv=this.kv!==null,this.Hv();const e=this.ts().uc();this.kv!==null&&e.Vt()&&(this.Rv={x:e.si(),y:e.ni()},this.kv={x:t.localX,y:t.localY})}_f(t){if(this.Vv===null)return;const e=t.localX,i=t.localY;if(this.kv===null)this.qv(t);else{this.Tv=!1;const n=x(this.Rv),o=n.x+(e-this.kv.x),r=n.y+(i-this.kv.y);this.Wv(o,r,t)}}ff(t){this.qp().N().trackingMode.exitMode===0&&(this.Tv=!0),this.Gv(),this.Yv(t)}jn(t,e){const i=this.Vv;return i===null?null:xh(i,t,e)}Jv(t,e){x(e==="left"?this.wv:this.gv).hv(F({width:t,height:this.Op.height}))}Gf(){return this.Op}hv(t){$t(this.Op,t)||(this.Op=t,this.Up=!0,this.Gp.resizeCanvasElement(t),this.Jp.resizeCanvasElement(t),this.Up=!1,this.Iv.style.width=t.width+"px",this.Iv.style.height=t.height+"px")}Qv(){const t=x(this.Vv);t.Fo(t.Wo()),t.Fo(t.Ho());for(const e of t.Ma())if(t.Un(e)){const i=e.Ft();i!==null&&t.Fo(i),e.Ns()}for(const e of t.s_())e.Ns()}Jf(){return this.Gp.bitmapSize}Qf(t,e,i,n){const o=this.Jf();if(o.width>0&&o.height>0&&(t.drawImage(this.Gp.canvasElement,e,i),n)){const r=this.Jp.canvasElement;t!==null&&t.drawImage(r,e,i)}}lv(t){if(t===0||this.Vv===null)return;t>1&&this.Qv(),this.wv!==null&&this.wv.lv(t),this.gv!==null&&this.gv.lv(t);const e={colorSpace:this.Vp.N().layout.colorSpace};if(t!==1){this.Gp.applySuggestedBitmapSize();const n=qt(this.Gp,e);n!==null&&(n.useBitmapCoordinateSpace((o=>{this._v(o)})),this.Vv&&(this.tm(n,xf),this.im(n),this.tm(n,tr),this.tm(n,er)))}this.Jp.applySuggestedBitmapSize();const i=qt(this.Jp,e);i!==null&&(i.useBitmapCoordinateSpace((({context:n,bitmapSize:o})=>{n.clearRect(0,0,o.width,o.height)})),this.sm(i),this.tm(i,yf),this.tm(i,er))}nm(){return this.wv}rm(){return this.gv}cv(t,e){this.tm(t,e)}Bv(){this.Vv!==null&&this.Vv.t_().u(this),this.Vv=null}Uv(t){this.$v(this.xv,t)}$v(t,e){const i=e.localX,n=e.localY;t.v()&&t.p(this.ts().Et().cu(i),{x:i,y:n},e)}_v({context:t,bitmapSize:e}){const{width:i,height:n}=e,o=this.ts(),r=o.$(),h=o.Wc();r===h?Fi(t,0,0,i,n,h):lh(t,0,0,i,n,r,h)}im(t){const e=x(this.Vv),i=e.i_().lr().Tt(e);i!==null&&i.nt(t,!1)}sm(t){this.hm(t,tr,pi,this.ts().uc())}tm(t,e){const i=x(this.Vv),n=i.Dt(),o=i.s_();for(const r of o)this.hm(t,e,Es,r);for(const r of n)this.hm(t,e,Es,r);for(const r of o)this.hm(t,e,pi,r);for(const r of n)this.hm(t,e,pi,r)}hm(t,e,i,n){const o=x(this.Vv),r=o.Qt().ac(),h=r!==null&&r.n_===n,a=r!==null&&h&&r.e_!==void 0?r.e_.Xn:void 0;Rs(e,(l=>i(l,t,h,a)),n,o)}Ov(){if(this.Vv===null)return;const t=this.Vp,e=this.Vv.Wo().N().visible,i=this.Vv.Ho().N().visible;e||this.wv===null||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),i||this.gv===null||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);const n=t.Qt().Bc();e&&this.wv===null&&(this.wv=new Zo(this,t.N(),n,"left"),this.Ev.appendChild(this.wv.Zf())),i&&this.gv===null&&(this.gv=new Zo(this,t.N(),n,"right"),this.Av.appendChild(this.gv.Zf()))}am(t){return t.Ef&&this.yv||this.kv!==null}lm(t){return Math.max(0,Math.min(t,this.Op.width-1))}om(t){return Math.max(0,Math.min(t,this.Op.height-1))}Wv(t,e,i){this.ts().Tc(this.lm(t),this.om(e),i,x(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(t,e,i){this.kv=t,this.Tv=!1,this.Wv(e.x,e.y,i);const n=this.ts().uc();this.Rv={x:n.si(),y:n.ni()}}ts(){return this.Vp.Qt()}Yv(t){if(!this.Sv)return;const e=this.ts(),i=this.ap();if(e.Ko(i,i.ks()),this.bv=null,this.Sv=!1,e.Pc(),this.Dv!==null){const n=performance.now(),o=e.Et();this.Dv.le(o.gu(),n),this.Dv.Ru(n)||e._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)x(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.Vv.ks().Ki()&&this.ts().Et().Ki()}}qv(t){if(this.Vv===null)return;const e=this.ts(),i=e.Et();if(i.Ki())return;const n=this.Vp.N(),o=n.handleScroll,r=n.kineticScroll;if((!o.pressedMouseMove||t.Ef)&&(!o.horzTouchDrag&&!o.vertTouchDrag||!t.Ef))return;const h=this.Vv.ks(),a=performance.now();if(this.bv!==null||this.am(t)||(this.bv={x:t.clientX,y:t.clientY,rd:a,_m:t.localX,um:t.localY}),this.bv!==null&&!this.Sv&&(this.bv.x!==t.clientX||this.bv.y!==t.clientY)){if(t.Ef&&r.touch||!t.Ef&&r.mouse){const l=i.mu();this.Dv=new _f(.2/l,7/l,.997,15/l),this.Dv.Pp(i.gu(),this.bv.rd)}else this.Dv=null;h.Ki()||e.Yo(this.Vv,h,t.localY),e.xc(t.localX),this.Sv=!0}this.Sv&&(h.Ki()||e.jo(this.Vv,h,t.localY),e.Cc(t.localX),this.Dv!==null&&this.Dv.Pp(i.gu(),a))}}class ir{constructor(t,e,i,n,o){this.xt=!0,this.Op=F({width:0,height:0}),this.$p=()=>this.lv(3),this.jp=t==="left",this.Ju=i.Bc,this.Ps=e,this.dm=n,this.fm=o,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=Qt(this.jf,F({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Gt(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(t){$t(this.Op,t)||(this.Op=t,this.Gp.resizeCanvasElement(t),this.jf.style.width=`${t.width}px`,this.jf.style.height=`${t.height}px`,this.xt=!0)}lv(t){if(t<3&&!this.xt||this.Op.width===0||this.Op.height===0)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();const e=qt(this.Gp,{colorSpace:this.Ps.layout.colorSpace});e!==null&&e.useBitmapCoordinateSpace((i=>{this._v(i),this.uv(i)}))}Jf(){return this.Gp.bitmapSize}Qf(t,e,i){const n=this.Jf();n.width>0&&n.height>0&&t.drawImage(this.Gp.canvasElement,e,i)}uv({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(!this.dm())return;t.fillStyle=this.Ps.timeScale.borderColor;const o=Math.floor(this.Ju.N().S*i),r=Math.floor(this.Ju.N().S*n),h=this.jp?e.width-o:0;t.fillRect(h,0,o,r)}_v({context:t,bitmapSize:e}){Fi(t,0,0,e.width,e.height,this.fm())}}function Js(s){return t=>{var e;return((e=t.ia)==null?void 0:e.call(t,s))??[]}}const wf=Js("normal"),Mf=Js("top"),Sf=Js("bottom");class Pf{constructor(t,e){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=F({width:0,height:0}),this.gm=new N,this.Fp=new Pi(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=t,this.o_=e,this.Ps=t.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=Qt(this.Sm,F({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jp=Qt(this.Sm,F({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const n=this.Jp.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new Bi(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),this.pm!==null&&this.pm.m(),this.vm!==null&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),Gt(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Gt(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(t){if(this.wm)return;this.wm=!0;const e=this.Vp.Qt();!e.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&e.Mc(t.localX)}Mf(t){this.Sf(t)}xf(){const t=this.Vp.Qt();!t.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&t.kc())}cf(t){const e=this.Vp.Qt();!e.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&e.yc(t.localX)}_f(t){this.cf(t)}vf(){this.wm=!1;const t=this.Vp.Qt();t.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||t.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(t,e,i){$t(this.Op,t)||(this.Op=t,this.Up=!0,this.Gp.resizeCanvasElement(t),this.Jp.resizeCanvasElement(t),this.Up=!1,this.jf.style.width=`${t.width}px`,this.jf.style.height=`${t.height}px`,this.gm.p(t)),this.pm!==null&&this.pm.hv(F({width:e,height:t.height})),this.vm!==null&&this.vm.hv(F({width:i,height:t.height}))}Tm(){const t=this.Rm();return Math.ceil(t.S+t.C+t.P+t.A+t.V+t.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(t,e,i,n){const o=this.Jf();if(o.width>0&&o.height>0&&(t.drawImage(this.Gp.canvasElement,e,i),n)){const r=this.Jp.canvasElement;t.drawImage(r,e,i)}}lv(t){if(t===0)return;const e={colorSpace:this.Ps.colorSpace};if(t!==1){this.Gp.applySuggestedBitmapSize();const n=qt(this.Gp,e);n!==null&&(n.useBitmapCoordinateSpace((o=>{this._v(o),this.uv(o),this.Vm(n,Sf)})),this.dv(n),this.Vm(n,wf)),this.pm!==null&&this.pm.lv(t),this.vm!==null&&this.vm.lv(t)}this.Jp.applySuggestedBitmapSize();const i=qt(this.Jp,e);i!==null&&(i.useBitmapCoordinateSpace((({context:n,bitmapSize:o})=>{n.clearRect(0,0,o.width,o.height)})),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],i),this.Vm(i,Mf))}Vm(t,e){const i=this.Vp.Qt().js();for(const n of i)Rs(e,(o=>Es(o,t,!1,void 0)),n,void 0);for(const n of i)Rs(e,(o=>pi(o,t,!1,void 0)),n,void 0)}_v({context:t,bitmapSize:e}){Fi(t,0,0,e.width,e.height,this.Vp.Qt().Wc())}uv({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.Vp.N().timeScale.borderVisible){t.fillStyle=this.Im();const n=Math.max(1,Math.floor(this.Rm().S*i));t.fillRect(0,0,e.width,n)}}dv(t){const e=this.Vp.Qt().Et(),i=e.Da();if(!i||i.length===0)return;const n=this.o_.maxTickMarkWeight(i),o=this.Rm(),r=e.N();r.borderVisible&&r.ticksVisible&&t.useBitmapCoordinateSpace((({context:h,horizontalPixelRatio:a,verticalPixelRatio:l})=>{h.strokeStyle=this.Im(),h.fillStyle=this.Im();const c=Math.max(1,Math.floor(a)),u=Math.floor(.5*a);h.beginPath();const d=Math.round(o.C*l);for(let f=i.length;f--;){const g=Math.round(i[f].coord*a);h.rect(g-u,0,c,d)}h.fill()})),t.useMediaCoordinateSpace((({context:h})=>{const a=o.S+o.C+o.A+o.P/2;h.textAlign="center",h.textBaseline="middle",h.fillStyle=this.H(),h.font=this.ev();for(const l of i)if(l.weight<n){const c=l.needAlignCoordinate?this.Em(h,l.coord,l.label):l.coord;h.fillText(l.label,c,a)}this.Vp.N().timeScale.allowBoldLabels&&(h.font=this.Am());for(const l of i)if(l.weight>=n){const c=l.needAlignCoordinate?this.Em(h,l.coord,l.label):l.coord;h.fillText(l.label,c,a)}}))}Em(t,e,i){const n=this.Fp.Vi(t,i),o=n/2,r=Math.floor(e-o)+.5;return r<0?e+=Math.abs(0-r):r+n>this.Op.width&&(e-=Math.abs(this.Op.width-(r+n))),e}Bm(t,e){const i=this.Rm();for(const n of t)for(const o of n.cs())o.Tt().nt(e,i)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return Si(this.F(),this.Ps.fontFamily)}Am(){return Si(this.F(),this.Ps.fontFamily,"bold")}Rm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new Pi,Dm:0});const t=this.M,e=this.ev();if(t.k!==e){const i=this.F();t.P=i,t.k=e,t.A=3*i/12,t.V=3*i/12,t.Ji=9*i/12,t.L=0,t.Dm=4*i/12,t.Gi.Bn()}return this.M}vv(t){this.jf.style.cursor=t===1?"ew-resize":"default"}xm(){const t=this.Vp.Qt(),e=t.N();e.leftPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),e.rightPriceScale.visible||this.vm===null||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);const i={Bc:this.Vp.Qt().Bc()},n=()=>e.leftPriceScale.borderVisible&&t.Et().N().borderVisible,o=()=>t.Wc();e.leftPriceScale.visible&&this.pm===null&&(this.pm=new ir("left",e,i,n,o),this.Mm.appendChild(this.pm.Zf())),e.rightPriceScale.visible&&this.vm===null&&(this.vm=new ir("right",e,i,n,o),this.bm.appendChild(this.vm.Zf()))}}var fr;const kf=!!de&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((s=>s.brand.includes("Chromium")))&&!!de&&((fr=navigator==null?void 0:navigator.userAgentData)!=null&&fr.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class Cf{constructor(t,e,i){var n;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new N,this.Cv=new N,this.Xu=new N,this.Um=null,this.$m=null,this.Dp=t,this.Ps=e,this.o_=i,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(n=this.kp).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),_s(this.Ps)&&this.Km(!0),this.ts=new uf(this.Gu.bind(this),this.Ps,i),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new Pf(this,this.o_),this.qm.appendChild(this.Zm.Zf());const o=e.autoSize&&this.Gm();let r=this.Ps.width,h=this.Ps.height;if(o||r===0||h===0){const a=t.getBoundingClientRect();r=r||a.width,h=h||a.height}this.Jm(r,h),this.Qm(),t.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){this.Km(!1),this.Om!==0&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const t of this.zm)this.qm.removeChild(t.Zf()),t.Xv().u(this),t.Zv().u(this),t.m();this.zm=[];for(const t of this.Lm)this.sw(t);this.Lm=[],x(this.Zm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(t,e,i=!1){if(this.il===e&&this.Mo===t)return;const n=(function(h){const a=Math.floor(h.width),l=Math.floor(h.height);return F({width:a-a%2,height:l-l%2})})(F({width:t,height:e}));this.il=n.height,this.Mo=n.width;const o=this.il+"px",r=this.Mo+"px";x(this.kp).style.height=o,x(this.kp).style.width=r,this.qm.style.height=o,this.qm.style.width=r,i?this.ew($.gn(),performance.now()):this.ts.Ih()}lv(t){t===void 0&&(t=$.gn());for(let e=0;e<this.zm.length;e++)this.zm[e].lv(t.en(e).tn);this.Ps.timeScale.visible&&this.Zm.lv(t.nn())}hr(t){var n;const e=_s(this.Ps);this.ts.hr(t);const i=_s(this.Ps);i!==e&&this.Km(i),(n=t.layout)!=null&&n.panes&&this.rw(),this.tw(),this.hw(t)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(t=!1){this.Wm!==null&&(this.ew(this.Wm,performance.now()),this.Wm=null);const e=this.lw(null),i=document.createElement("canvas");i.width=e.width,i.height=e.height;const n=x(i.getContext("2d"));return this.lw(n,t),i}ow(t){return t==="left"&&!this._w()||t==="right"&&!this.uw()||this.zm.length===0?0:x(t==="left"?this.zm[0].nm():this.zm[0].rm()).av()}cw(){return this.Ps.autoSize&&this.Um!==null}ip(){return this.kp}dw(t){this.$m=t,this.$m?this.ip().style.setProperty("cursor",t):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(t){return Z(this.zm[t]).Gf()}rw(){this.Lm.forEach((t=>{t.yt()}))}hw(t){(t.autoSize!==void 0||!this.Um||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Um&&this.Gm(),t.autoSize===!1&&this.Um!==null&&this.nw(),t.autoSize||t.width===void 0&&t.height===void 0||this.Jm(t.width||this.Mo,t.height||this.il))}lw(t,e){let i=0,n=0;const o=this.zm[0],r=(a,l)=>{let c=0;for(let u=0;u<this.zm.length;u++){const d=this.zm[u],f=x(a==="left"?d.nm():d.rm()),g=f.Jf();if(t!==null&&f.Qf(t,l,c,e),c+=g.height,u<this.zm.length-1){const p=this.Lm[u],m=p.Jf();t!==null&&p.Qf(t,l,c),c+=m.height}}};this._w()&&(r("left",0),i+=x(o.nm()).Jf().width);for(let a=0;a<this.zm.length;a++){const l=this.zm[a],c=l.Jf();if(t!==null&&l.Qf(t,i,n,e),n+=c.height,a<this.zm.length-1){const u=this.Lm[a],d=u.Jf();t!==null&&u.Qf(t,i,n),n+=d.height}}i+=o.Jf().width,this.uw()&&(r("right",i),i+=x(o.rm()).Jf().width);const h=(a,l,c)=>{x(a==="left"?this.Zm.Cm():this.Zm.Pm()).Qf(x(t),l,c)};if(this.Ps.timeScale.visible){const a=this.Zm.Jf();if(t!==null){let l=0;this._w()&&(h("left",l,n),l=x(o.nm()).Jf().width),this.Zm.Qf(t,l,n,e),l+=a.width,this.uw()&&h("right",l,n)}n+=a.height}return F({width:i,height:n})}mw(){let t=0,e=0,i=0;for(const m of this.zm)this._w()&&(e=Math.max(e,x(m.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(i=Math.max(i,x(m.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),t+=m.Bo();e=zs(e),i=zs(i);const n=this.Mo,o=this.il,r=Math.max(n-e-i,0),h=1*this.Lm.length,a=this.Ps.timeScale.visible;let l=a?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0;var c;l=(c=l)+c%2;const u=h+l,d=o<u?0:o-u,f=d/t;let g=0;const p=window.devicePixelRatio||1;for(let m=0;m<this.zm.length;++m){const b=this.zm[m];b.Lv(this.ts.$s()[m]);let _=0,y=0;y=m===this.zm.length-1?Math.ceil((d-g)*p)/p:Math.round(b.Bo()*f*p)/p,_=Math.max(y,2),g+=_,b.hv(F({width:r,height:_})),this._w()&&b.Jv(e,"left"),this.uw()&&b.Jv(i,"right"),b.ap()&&this.ts.dc(b.ap(),_)}this.Zm.km(F({width:a?r:0,height:l}),a?e:0,a?i:0),this.ts.Eo(r),this.Nm!==e&&(this.Nm=e),this.Fm!==i&&(this.Fm=i)}Km(t){t?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return kf?1/window.devicePixelRatio:1}jm(t){if(!(t.deltaX!==0&&this.Ps.handleScroll.mouseWheel||t.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const e=this.ww(t),i=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),n!==0&&this.Ps.handleScale.mouseWheel){const o=Math.sign(n)*Math.min(1,Math.abs(n)),r=t.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(r,o)}i!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*i)}ew(t,e){var n;const i=t.nn();i===3&&this.gw(),i!==3&&i!==2||(this.Mw(t),this.bw(t,e),this.Zm.yt(),this.zm.forEach((o=>{o.Nv()})),((n=this.Wm)==null?void 0:n.nn())===3&&(this.Wm.vn(t),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,e),t=this.Wm,this.Wm=null)),this.lv(t)}bw(t,e){for(const i of t.pn())this.mn(i,e)}Mw(t){const e=this.ts.$s();for(let i=0;i<e.length;i++)t.en(i).sn&&e[i].Go()}mn(t,e){const i=this.ts.Et();switch(t.an){case 0:i.Au();break;case 1:i.zu(t.Wt);break;case 2:i.dn(t.Wt);break;case 3:i.fn(t.Wt);break;case 4:i.Su();break;case 5:t.Wt.Ru(e)||i.fn(t.Wt.Du(e))}}Gu(t){this.Wm!==null?this.Wm.vn(t):this.Wm=t,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame((e=>{if(this.Hm=!1,this.Om=0,this.Wm!==null){const i=this.Wm;this.Wm=null,this.ew(i,e);for(const n of i.pn())if(n.an===5&&!n.Wt.Ru(e)){this.Qt()._n(n.Wt);break}}})))}gw(){this.Qm()}sw(t){this.qm.removeChild(t.Zf()),t.m()}Qm(){const t=this.ts.$s(),e=t.length,i=this.zm.length;for(let n=e;n<i;n++){const o=Z(this.zm.pop());this.qm.removeChild(o.Zf()),o.Xv().u(this),o.Zv().u(this),o.m();const r=this.Lm.pop();r!==void 0&&this.sw(r)}for(let n=i;n<e;n++){const o=new Gs(this,t[n]);if(o.Xv().i(this.Sw.bind(this,o),this),o.Zv().i(this.xw.bind(this,o),this),this.zm.push(o),n>0){const r=new bf(this,n-1,n);this.Lm.push(r),this.qm.insertBefore(r.Zf(),this.Zm.Zf())}this.qm.insertBefore(o.Zf(),this.Zm.Zf())}for(let n=0;n<e;n++){const o=t[n],r=this.zm[n];r.ap()!==o?r.Lv(o):r.zv()}this.tw(),this.mw()}Cw(t,e,i,n){var u;const o=new Map;t!==null&&this.ts.js().forEach((d=>{const f=d.Xs().Fr(t);f!==null&&o.set(d,f)}));let r;if(t!==null){const d=(u=this.ts.Et().ss(t))==null?void 0:u.originalTime;d!==void 0&&(r=d)}const h=this.Qt().ac(),a=h!==null&&h.n_ instanceof Ni?h.n_:void 0,l=h!==null&&h.e_!==void 0?h.e_.Kn:void 0,c=this.Pw(n);return{yw:r,Re:t??void 0,kw:e??void 0,Tw:c!==-1?c:void 0,Rw:a,Dw:o,Vw:l,Bw:i??void 0}}Pw(t){let e=-1;if(t)e=this.zm.indexOf(t);else{const i=this.Qt().uc().Us();i!==null&&(e=this.Qt().$s().indexOf(i))}return e}Sw(t,e,i,n){this.xv.p((()=>this.Cw(e,i,n,t)))}xw(t,e,i,n){this.Cv.p((()=>this.Cw(e,i,n,t)))}Xm(t,e,i){var n;this.dw(((n=this.Qt().ac())==null?void 0:n.h_)??null),this.Xu.p((()=>this.Cw(t,e,i)))}tw(){const t=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=t}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver((t=>{const e=t[t.length-1];e&&this.Jm(e.contentRect.width,e.contentRect.height)})),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){this.Um!==null&&this.Um.disconnect(),this.Um=null}}function _s(s){return!!(s.handleScroll.mouseWheel||s.handleScale.mouseWheel)}function Tf(s){return s.open===void 0&&s.value===void 0}function Of(s){return(function(t){return t.open!==void 0})(s)||(function(t){return t.value!==void 0})(s)}function sr(s,t,e,i){const n=e.value,o={Re:t,wt:s,Wt:[n,n,n,n],yw:i};return e.color!==void 0&&(o.R=e.color),o}function Df(s,t,e,i){const n=e.value,o={Re:t,wt:s,Wt:[n,n,n,n],yw:i};return e.lineColor!==void 0&&(o.vt=e.lineColor),e.topColor!==void 0&&(o.mr=e.topColor),e.bottomColor!==void 0&&(o.wr=e.bottomColor),o}function zf(s,t,e,i){const n=e.value,o={Re:t,wt:s,Wt:[n,n,n,n],yw:i};return e.topLineColor!==void 0&&(o.gr=e.topLineColor),e.bottomLineColor!==void 0&&(o.Mr=e.bottomLineColor),e.topFillColor1!==void 0&&(o.br=e.topFillColor1),e.topFillColor2!==void 0&&(o.Sr=e.topFillColor2),e.bottomFillColor1!==void 0&&(o.Cr=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(o.Pr=e.bottomFillColor2),o}function Ef(s,t,e,i){const n={Re:t,wt:s,Wt:[e.open,e.high,e.low,e.close],yw:i};return e.color!==void 0&&(n.R=e.color),n}function Rf(s,t,e,i){const n={Re:t,wt:s,Wt:[e.open,e.high,e.low,e.close],yw:i};return e.color!==void 0&&(n.R=e.color),e.borderColor!==void 0&&(n.Ht=e.borderColor),e.wickColor!==void 0&&(n.vr=e.wickColor),n}function Lf(s,t,e,i,n){const o=Z(n)(e),r=Math.max(...o),h=Math.min(...o),a=o[o.length-1],l=[a,r,h,a],{time:c,color:u,...d}=e;return{Re:t,wt:s,Wt:l,yw:i,se:d,R:u}}function Me(s){return s.Wt!==void 0}function nr(s,t){return t.customValues!==void 0&&(s.Iw=t.customValues),s}function Vt(s){return(t,e,i,n,o,r)=>(function(h,a){return a?a(h):Tf(h)})(i,r)?nr({wt:t,Re:e,yw:n},i):nr(s(t,e,i,n,o),i)}function or(s){return{Candlestick:Vt(Rf),Bar:Vt(Ef),Area:Vt(Df),Baseline:Vt(zf),Histogram:Vt(sr),Line:Vt(sr),Custom:Vt(Lf)}[s]}function rr(s){return{Re:0,Ew:new Map,Hh:s}}function hr(s,t){if(s!==void 0&&s.length!==0)return{Aw:t.key(s[0].wt),zw:t.key(s[s.length-1].wt)}}function ar(s){let t;return s.forEach((e=>{t===void 0&&(t=e.yw)})),Z(t)}class Ff{constructor(t){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=t}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(t,e){let i=this.Lw.size!==0,n=!1;const o=this.Ow.get(t);if(o!==void 0)if(this.Ow.size===1)i=!1,n=!0,this.Lw.clear();else for(const a of this.Fw)a.pointData.Ew.delete(t)&&(n=!0);let r=[];if(e.length!==0){const a=e.map((f=>f.time)),l=this.o_.createConverterToInternalObj(e),c=or(t.Rr()),u=t.ca(),d=t.fa();r=e.map(((f,g)=>{const p=l(f.time),m=this.o_.key(p);let b=this.Lw.get(m);b===void 0&&(b=rr(p),this.Lw.set(m,b),n=!0);const _=c(p,b.Re,f,a[g],u,d);return b.Ew.set(t,_),_}))}i&&this.Hw(),this.Uw(t,r);let h=-1;if(n){const a=[];this.Lw.forEach((l=>{a.push({timeWeight:0,time:l.Hh,pointData:l,originalTime:ar(l.Ew)})})),a.sort(((l,c)=>this.o_.key(l.time)-this.o_.key(c.time))),h=this.$w(a)}return this.qw(t,h,(function(a,l,c){const u=hr(a,c),d=hr(l,c);if(u!==void 0&&d!==void 0)return{Yw:!1,zh:u.zw>=d.zw&&u.Aw>=d.Aw}})(this.Ow.get(t),o,this.o_))}Ac(t){return this.Ww(t,[])}jw(t,e,i){const n=e;(function(m){m.yw===void 0&&(m.yw=m.time)})(n),this.o_.preprocessData(e);const o=this.o_.createConverterToInternalObj([e])(e.time),r=this.Nw.get(t);if(!i&&r!==void 0&&this.o_.key(o)<this.o_.key(r))throw new Error(`Cannot update oldest data, last time=${r}, new time=${o}`);let h=this.Lw.get(this.o_.key(o));if(i&&h===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const a=h===void 0;h===void 0&&(h=rr(o),this.Lw.set(this.o_.key(o),h));const l=or(t.Rr()),c=t.ca(),u=t.fa(),d=l(o,h.Re,e,n.yw,c,u);h.Ew.set(t,d),i?this.Kw(t,d,h.Re):this.Xw(t,d);const f={zh:Me(d),Yw:i};if(!a)return this.qw(t,-1,f);const g={timeWeight:0,time:h.Hh,pointData:h,originalTime:ar(h.Ew)},p=ue(this.Fw,this.o_.key(g.time),((m,b)=>this.o_.key(m.time)<b));this.Fw.splice(p,0,g);for(let m=p;m<this.Fw.length;++m)di(this.Fw[m].pointData,m);return this.o_.fillWeightsForPoints(this.Fw,p),this.qw(t,p,f)}Zw(t,e){const i=this.Ow.get(t);if(i===void 0||e<=0)return[[],this.Gw()];e=Math.min(e,i.length);const n=i.splice(-e).reverse();i.length===0?this.Nw.delete(t):this.Nw.set(t,i[i.length-1].wt);for(const o of n){const r=this.Lw.get(this.o_.key(o.wt));if(r&&(r.Ew.delete(t),r.Ew.size===0)){this.Lw.delete(this.o_.key(r.Hh)),this.Fw.splice(r.Re,1);for(let h=r.Re;h<this.Fw.length;++h)di(this.Fw[h].pointData,h)}}return[n,this.qw(t,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(t,e){let i=this.Ow.get(t);i===void 0&&(i=[],this.Ow.set(t,i));const n=i.length!==0?i[i.length-1]:null;n===null||this.o_.key(e.wt)>this.o_.key(n.wt)?Me(e)&&i.push(e):Me(e)?i[i.length-1]=e:i.splice(-1,1),this.Nw.set(t,e.wt)}Kw(t,e,i){const n=this.Ow.get(t);if(n===void 0)return;const o=ue(n,i,((r,h)=>r.Re<h));Me(e)?n[o]=e:n.splice(o,1)}Uw(t,e){e.length!==0?(this.Ow.set(t,e.filter(Me)),this.Nw.set(t,e[e.length-1].wt)):(this.Ow.delete(t),this.Nw.delete(t))}Hw(){for(const t of this.Fw)t.pointData.Ew.size===0&&this.Lw.delete(this.o_.key(t.time))}$w(t){let e=-1;for(let i=0;i<this.Fw.length&&i<t.length;++i){const n=this.Fw[i],o=t[i];if(this.o_.key(n.time)!==this.o_.key(o.time)){e=i;break}o.timeWeight=n.timeWeight,di(o.pointData,i)}if(e===-1&&this.Fw.length!==t.length&&(e=Math.min(this.Fw.length,t.length)),e===-1)return-1;for(let i=e;i<t.length;++i)di(t[i].pointData,i);return this.o_.fillWeightsForPoints(t,e),this.Fw=t,e}Jw(){if(this.Ow.size===0)return null;let t=0;return this.Ow.forEach((e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].Re))})),t}qw(t,e,i){const n=this.Gw();if(e!==-1)this.Ow.forEach(((o,r)=>{n.Oo.set(r,{se:o,Qw:r===t?i:void 0})})),this.Ow.has(t)||n.Oo.set(t,{se:[],Qw:i}),n.Et.tg=this.Fw,n.Et.ig=e;else{const o=this.Ow.get(t);n.Oo.set(t,{se:o||[],Qw:i})}return n}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function di(s,t){s.Re=t,s.Ew.forEach((e=>{e.Re=t}))}function If(s,t){return s.wt<t}function Vf(s,t){return t<s.wt}function Af(s,t,e){const i=t.Uh(),n=t.bi(),o=ue(s,i,If),r=mh(s,n,Vf);if(!e)return{from:o,to:r};let h=o,a=r;return o>0&&o<s.length&&s[o].wt>=i&&(h=o-1),r>0&&r<s.length&&s[r-1].wt<=n&&(a=r+1),{from:h,to:a}}class Sh{constructor(t,e,i){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=t,this.Qn=e,this.ag=i}yt(t){this.sg=!0,t==="data"&&(this.ng=!0),t==="options"&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),this.hg===null?null:this.og):null}_g(){this.rg=this.rg.map((t=>({...t,...this.Jn.Rh().Dr(t.wt)})))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){const t=this.Jn.Ft(),e=this.Qn.Et();if(this.ug(),e.Ki()||t.Ki())return;const i=e.Pe();if(i===null||this.Jn.Xs().zr()===0)return;const n=this.Jn.zt();n!==null&&(this.hg=Af(this.rg,i,this.ag),this.fg(t,e,n.Wt),this.pg())}}class Nf{constructor(t,e){this.vg=t,this.Yi=e}nt(t,e,i){this.vg.draw(t,this.Yi,e,i)}}class Bf extends Sh{constructor(t,e,i){super(t,e,!1),this.sh=i,this.og=new Nf(this.sh.renderer(),(n=>{const o=t.zt();return o===null?null:t.Ft().Nt(n,o.Wt)}))}da(t){return this.sh.priceValueBuilder(t)}pa(t){return this.sh.isWhitespace(t)}cg(){const t=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map((e=>({wt:e.Re,_t:NaN,...t.Dr(e.Re),mg:e.se})))}fg(t,e){e.uu(this.rg,Os(this.hg))}pg(){this.sh.update({bars:this.rg.map(Wf),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function Wf(s){return{x:s._t,time:s.wt,originalData:s.mg,barColor:s.cr}}const Yf={color:"#2196f3"},Hf=(s,t,e)=>{const i=Ot(e);return new Bf(s,t,i)};function Xs(s){const t={value:s.Wt[3],time:s.yw};return s.Iw!==void 0&&(t.customValues=s.Iw),t}function lr(s){const t=Xs(s);return s.R!==void 0&&(t.color=s.R),t}function jf(s){const t=Xs(s);return s.vt!==void 0&&(t.lineColor=s.vt),s.mr!==void 0&&(t.topColor=s.mr),s.wr!==void 0&&(t.bottomColor=s.wr),t}function $f(s){const t=Xs(s);return s.gr!==void 0&&(t.topLineColor=s.gr),s.Mr!==void 0&&(t.bottomLineColor=s.Mr),s.br!==void 0&&(t.topFillColor1=s.br),s.Sr!==void 0&&(t.topFillColor2=s.Sr),s.Cr!==void 0&&(t.bottomFillColor1=s.Cr),s.Pr!==void 0&&(t.bottomFillColor2=s.Pr),t}function Ph(s){const t={open:s.Wt[0],high:s.Wt[1],low:s.Wt[2],close:s.Wt[3],time:s.yw};return s.Iw!==void 0&&(t.customValues=s.Iw),t}function Uf(s){const t=Ph(s);return s.R!==void 0&&(t.color=s.R),t}function qf(s){const t=Ph(s),{R:e,Ht:i,vr:n}=s;return e!==void 0&&(t.color=e),i!==void 0&&(t.borderColor=i),n!==void 0&&(t.wickColor=n),t}function mi(s){return{Area:jf,Line:lr,Baseline:$f,Histogram:lr,Bar:Uf,Candlestick:qf,Custom:Qf}[s]}function Qf(s){const t=s.yw;return{...s.se,time:t}}const Gf={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},Jf={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},Xf={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:ah,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},vs={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},Kf={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function cr(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:Xf,crosshair:Gf,grid:Jf,overlayPriceScales:{...vs},leftPriceScale:{...vs,visible:!1},rightPriceScale:{...vs,visible:!0},timeScale:Kf,localization:{locale:de?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class kh{constructor(t,e,i){this.Hf=t,this.wg=e,this.gg=i??0}applyOptions(t){this.Hf.Qt().oc(this.wg,t,this.gg)}options(){return this.Yi().N()}width(){return Vi(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(t){this.setAutoScale(!1),this.Yi().Fl(new J(t.from,t.to))}getVisibleRange(){let t,e,i=this.Yi().Qe();if(i===null)return null;if(this.Yi().Ja()){const n=this.Yi().fo(),o=yh(n);i=ee(i,this.Yi().tl()),t=Number((Math.round(i.$e()/n)*n).toFixed(o)),e=Number((Math.round(i.qe()/n)*n).toFixed(o))}else t=i.$e(),e=i.qe();return{from:t,to:e}}setAutoScale(t){this.applyOptions({autoScale:t})}Yi(){return x(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class Zf{constructor(t,e,i,n){this.Hf=t,this.Pt=i,this.Mg=e,this.bg=n}getHeight(){return this.Pt.$t()}setHeight(t){const e=this.Hf.Qt(),i=e.Uc(this.Pt);e.vc(i,t)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(t){this.Pt.Io(t),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(t){const e=this.paneIndex();e!==t&&(U(t>=0&&t<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(e,t))}getSeries(){return this.Pt.Oo().map((t=>this.Mg(t)))??[]}getHTMLElement(){const t=this.Hf.$f();return t&&t.length!==0&&t[this.paneIndex()]?t[this.paneIndex()].Zf():null}attachPrimitive(t){this.Pt._a(t),t.attached&&t.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(t){this.Pt.ua(t)}priceScale(t){if(this.Pt.Do(t)===null)throw new Error(`Cannot find price scale with id: ${t}`);return new kh(this.Hf,t,this.paneIndex())}setPreserveEmptyPane(t){this.Pt.zo(t)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(t,e={},i=0){return this.bg.addCustomSeries(t,e,i)}addSeries(t,e={}){return this.bg.addSeries(t,e,this.paneIndex())}}const tg={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class ur{constructor(t){this.ir=t}applyOptions(t){this.ir.hr(t)}options(){return this.ir.N()}Sg(){return this.ir}}class eg{constructor(t,e,i,n,o,r){this.xg=new N,this.Jn=t,this.Cg=e,this.Pg=i,this.o_=o,this.bg=n,this.yg=r}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(t){const e=this.Jn.zt();return e===null?null:this.Jn.Ft().Nt(t,e.Wt)}coordinateToPrice(t){const e=this.Jn.zt();return e===null?null:this.Jn.Ft().Ts(t,e.Wt)}barsInLogicalRange(t){if(t===null)return null;const e=new oe(new Le(t.from,t.to)).y_(),i=this.Jn.Xs();if(i.Ki())return null;const n=i.Fr(e.Uh(),1),o=i.Fr(e.bi(),-1),r=x(i.Lr()),h=x(i.Ks());if(n!==null&&o!==null&&n.Re>o.Re)return{barsBefore:t.from-r,barsAfter:h-t.to};const a={barsBefore:n===null||n.Re===r?t.from-r:n.Re-r,barsAfter:o===null||o.Re===h?h-t.to:h-o.Re};return n!==null&&o!==null&&(a.from=n.yw,a.to=o.yw),a}setData(t){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,t),this.Tg("full")}update(t,e=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,t,e),this.Tg("update")}pop(t=1){const e=this.Cg.Dg(this.Jn,t);e.length!==0&&this.Tg("update");const i=mi(this.seriesType());return e.map((n=>i(n)))}dataByIndex(t,e){const i=this.Jn.Xs().Fr(t,e);return i===null?null:mi(this.seriesType())(i)}data(){const t=mi(this.seriesType());return this.Jn.Xs().Hr().map((e=>t(e)))}subscribeDataChanged(t){this.xg.i(t)}unsubscribeDataChanged(t){this.xg._(t)}applyOptions(t){this.Jn.hr(t)}options(){return xt(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(t){const e=it(xt(tg),t),i=this.Jn.Oh(e);return new ur(i)}removePriceLine(t){this.Jn.Nh(t.Sg())}priceLines(){return this.Jn.Fh().map((t=>new ur(t)))}seriesType(){return this.Jn.Rr()}lastValueData(t){const e=this.Jn.ye(t);return e.ke?{noData:!0}:{noData:!1,price:e.gt,color:e.R}}attachPrimitive(t){this.Jn._a(t),t.attached&&t.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(t){this.Jn.ua(t),t.detached&&t.detached(),this.Jn.Qt().Ih()}getPane(){const t=this.Jn,e=x(this.Jn.Qt().Hn(t));return this.yg(e)}moveToPane(t){this.Jn.Qt().Nc(this.Jn,t)}seriesOrder(){const t=this.Jn.Qt().Hn(this.Jn);return t===null?-1:t.Oo().indexOf(this.Jn)}setSeriesOrder(t){const e=this.Jn.Qt().Hn(this.Jn);e!==null&&e.Qo(this.Jn,t)}Tg(t){this.xg.v()&&this.xg.p(t)}}class ig{constructor(t,e,i){this.Vg=new N,this.z_=new N,this.gm=new N,this.ts=t,this.uh=t.Et(),this.Zm=e,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=i}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(t,e){e?this.uh.Tu(t,1e3):this.ts.fn(t)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const t=this.uh.nu();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.o_.convertHorzItemToInternal(t.from),to:this.o_.convertHorzItemToInternal(t.to)},i=this.uh.au(e);this.ts.Lc(i)}getVisibleLogicalRange(){const t=this.uh.su();return t===null?null:{from:t.Uh(),to:t.bi()}}setVisibleLogicalRange(t){U(t.from<=t.to,"The from index cannot be after the to index."),this.ts.Lc(t)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(t){const e=this.ts.Et();return e.Ki()?null:e.qt(t)}coordinateToLogical(t){return this.uh.Ki()?null:this.uh.cu(t)}timeToIndex(t,e){const i=this.o_.convertHorzItemToInternal(t);return this.uh.Q_(i,e)}timeToCoordinate(t){const e=this.timeToIndex(t,!1);return e===null?null:this.uh.qt(e)}coordinateToTime(t){const e=this.ts.Et(),i=e.cu(t),n=e.ss(i);return n===null?null:n.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(t){this.Vg.i(t)}unsubscribeVisibleTimeRangeChange(t){this.Vg._(t)}subscribeVisibleLogicalRangeChange(t){this.z_.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.z_._(t)}subscribeSizeChange(t){this.gm.i(t)}unsubscribeSizeChange(t){this.gm._(t)}applyOptions(t){this.uh.hr(t)}options(){return{...xt(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(t){this.gm.p(t.width,t.height)}}function dr(s){return(function(t){if(oi(t.handleScale)){const i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:n}=t.handleScale;oi(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),oi(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}const e=t.handleScroll;oi(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})})(s),s}class sg{constructor(t,e,i){this.Ag=new Map,this.zg=new Map,this.Lg=new N,this.Og=new N,this.Ng=new N,this.qu=new WeakMap,this.Fg=new Ff(e);const n=i===void 0?xt(cr()):it(xt(cr()),dr(i));this.Wg=e,this.Hf=new Cf(t,n,e),this.Hf.Xv().i((r=>{this.Lg.v()&&this.Lg.p(this.Hg(r()))}),this),this.Hf.Zv().i((r=>{this.Og.v()&&this.Og.p(this.Hg(r()))}),this),this.Hf.cc().i((r=>{this.Ng.v()&&this.Ng.p(this.Hg(r()))}),this);const o=this.Hf.Qt();this.Ug=new ig(o,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(t,e,i){this.autoSizeActive()||this.Hf.Jm(t,e,i)}addCustomSeries(t,e={},i=0){const n=(o=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...Yf,...o.defaultOptions()},$g:Hf,qg:o}))(Ot(t));return this.Yg(n,e,i)}addSeries(t,e={},i=0){return this.Yg(t,e,i)}removeSeries(t){const e=Z(this.Ag.get(t)),i=this.Fg.Ac(e);this.Hf.Qt().Ac(e),this.jg(i),this.Ag.delete(t),this.zg.delete(e)}kg(t,e){this.jg(this.Fg.Ww(t,e))}Rg(t,e,i){this.jg(this.Fg.jw(t,e,i))}Dg(t,e){const[i,n]=this.Fg.Zw(t,e);return i.length!==0&&this.jg(n),i}subscribeClick(t){this.Lg.i(t)}unsubscribeClick(t){this.Lg._(t)}subscribeCrosshairMove(t){this.Ng.i(t)}unsubscribeCrosshairMove(t){this.Ng._(t)}subscribeDblClick(t){this.Og.i(t)}unsubscribeDblClick(t){this.Og._(t)}priceScale(t,e=0){return new kh(this.Hf,t,e)}timeScale(){return this.Ug}applyOptions(t){this.Hf.hr(dr(t))}options(){return this.Hf.N()}takeScreenshot(t=!1,e=!1){let i,n;try{e||(i=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),n=this.Hf.aw(t)}finally{e||i===void 0||this.Hf.Qt().hr({crosshair:{mode:i}})}return n}addPane(t=!1){const e=this.Hf.Qt().$c();return e.zo(t),this.Kg(e)}removePane(t){this.Hf.Qt().fc(t)}swapPanes(t,e){this.Hf.Qt().mc(t,e)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map((t=>this.Kg(t)))}paneSize(t=0){const e=this.Hf.pw(t);return{height:e.height,width:e.width}}setCrosshairPosition(t,e,i){const n=this.Ag.get(i);if(n===void 0)return;const o=this.Hf.Qt().Hn(n);o!==null&&this.Hf.Qt().Rc(t,e,o)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(t,e={},i=0){U(t.$g!==void 0),(function(a){if(a===void 0||a.type==="custom")return;const l=a;l.minMove!==void 0&&l.precision===void 0&&(l.precision=yh(l.minMove))})(e.priceFormat),t.type==="Candlestick"&&(function(a){a.borderColor!==void 0&&(a.borderUpColor=a.borderColor,a.borderDownColor=a.borderColor),a.wickColor!==void 0&&(a.wickUpColor=a.wickColor,a.wickDownColor=a.wickColor)})(e);const n=it(xt(rh),xt(t.defaultOptions),e),o=t.$g,r=new Ni(this.Hf.Qt(),t.type,n,o,t.qg);this.Hf.Qt().Ic(r,i);const h=new eg(r,this,this,this,this.Wg,(a=>this.Kg(a)));return this.Ag.set(h,r),this.zg.set(r,h),h}jg(t){const e=this.Hf.Qt();e.Vc(t.Et._u,t.Et.tg,t.Et.ig),t.Oo.forEach(((i,n)=>n.ht(i.se,i.Qw))),e.Et().K_(),e.vu()}Xg(t){return Z(this.zg.get(t))}Hg(t){const e=new Map;t.Dw.forEach(((n,o)=>{const r=o.Rr(),h=mi(r)(n);if(r!=="Custom")U(Of(h));else{const a=o.fa();U(!a||a(h)===!1)}e.set(this.Xg(o),h)}));const i=t.Rw!==void 0&&this.zg.has(t.Rw)?this.Xg(t.Rw):void 0;return{time:t.yw,logical:t.Re,point:t.kw,paneIndex:t.Tw,hoveredSeries:i,hoveredObjectId:t.Vw,seriesData:e,sourceEvent:t.Bw}}Kg(t){let e=this.qu.get(t);return e||(e=new Zf(this.Hf,(i=>this.Xg(i)),t,this),this.qu.set(t,e)),e}}function ng(s){if(je(s)){const t=document.getElementById(s);return U(t!==null,`Cannot find element in DOM with id=${s}`),t}return s}function og(s,t,e){const i=ng(s),n=new sg(i,t,e);return t.setOptions(n.options()),n}function gg(s,t){return og(s,new Go,Go.ld(t))}class rg extends Sh{constructor(t,e){super(t,e,!1)}fg(t,e,i){e.uu(this.rg,Os(this.hg)),t.ql(this.rg,i,Os(this.hg))}VM(t,e,i){return{wt:t,qh:e.Wt[0],Yh:e.Wt[1],jh:e.Wt[2],Kh:e.Wt[3],_t:NaN,Yl:NaN,jl:NaN,Kl:NaN,Xl:NaN}}cg(){const t=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map((e=>this.Gg(e.Re,e,t)))}}class hg extends ge{constructor(){super(...arguments),this.Yt=null,this.yM=0}ht(t){this.Yt=t}et(t){if(this.Yt===null||this.Yt.Xs.length===0||this.Yt.lt===null)return;const{horizontalPixelRatio:e}=t;this.yM=(function(o,r){if(o>=2.5&&o<=4)return Math.floor(3*r);const h=1-.2*Math.atan(Math.max(4,o)-4)/(.5*Math.PI),a=Math.floor(o*h*r),l=Math.floor(o*r),c=Math.min(a,l);return Math.max(Math.floor(r),c)})(this.Yt.mu,e),this.yM>=2&&Math.floor(e)%2!=this.yM%2&&this.yM--;const i=this.Yt.Xs;this.Yt.BM&&this.IM(t,i,this.Yt.lt),this.Yt.Mi&&this.uv(t,i,this.Yt.lt);const n=this.EM(e);(!this.Yt.Mi||this.yM>2*n)&&this.AM(t,i,this.Yt.lt)}IM(t,e,i){if(this.Yt===null)return;const{context:n,horizontalPixelRatio:o,verticalPixelRatio:r}=t;let h="",a=Math.min(Math.floor(o),Math.floor(this.Yt.mu*o));a=Math.max(Math.floor(o),Math.min(a,this.yM));const l=Math.floor(.5*a);let c=null;for(let u=i.from;u<i.to;u++){const d=e[u];d.pr!==h&&(n.fillStyle=d.pr,h=d.pr);const f=Math.round(Math.min(d.Yl,d.Xl)*r),g=Math.round(Math.max(d.Yl,d.Xl)*r),p=Math.round(d.jl*r),m=Math.round(d.Kl*r);let b=Math.round(o*d._t)-l;const _=b+a-1;c!==null&&(b=Math.max(c+1,b),b=Math.min(b,_));const y=_-b+1;n.fillRect(b,p,y,f-p),n.fillRect(b,g+1,y,m-g),c=_}}EM(t){let e=Math.floor(1*t);this.yM<=2*e&&(e=Math.floor(.5*(this.yM-1)));const i=Math.max(Math.floor(t),e);return this.yM<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}uv(t,e,i){if(this.Yt===null)return;const{context:n,horizontalPixelRatio:o,verticalPixelRatio:r}=t;let h="";const a=this.EM(o);let l=null;for(let c=i.from;c<i.to;c++){const u=e[c];u.dr!==h&&(n.fillStyle=u.dr,h=u.dr);let d=Math.round(u._t*o)-Math.floor(.5*this.yM);const f=d+this.yM-1,g=Math.round(Math.min(u.Yl,u.Xl)*r),p=Math.round(Math.max(u.Yl,u.Xl)*r);if(l!==null&&(d=Math.max(l+1,d),d=Math.min(d,f)),this.Yt.mu*o>2*a)bd(n,d,g,f-d+1,p-g+1,a);else{const m=f-d+1;n.fillRect(d,g,m,p-g+1)}l=f}}AM(t,e,i){if(this.Yt===null)return;const{context:n,horizontalPixelRatio:o,verticalPixelRatio:r}=t;let h="";const a=this.EM(o);for(let l=i.from;l<i.to;l++){const c=e[l];let u=Math.round(Math.min(c.Yl,c.Xl)*r),d=Math.round(Math.max(c.Yl,c.Xl)*r),f=Math.round(c._t*o)-Math.floor(.5*this.yM),g=f+this.yM-1;if(c.cr!==h){const p=c.cr;n.fillStyle=p,h=p}this.Yt.Mi&&(f+=a,u+=a,g-=a,d-=a),u>d||n.fillRect(f,u,g-f+1,d-u+1)}}}class ag extends rg{constructor(){super(...arguments),this.og=new hg}Gg(t,e,i){return{...this.VM(t,e,i),...i.Dr(t)}}pg(){const t=this.Jn.N();this.og.ht({Xs:this.rg,mu:this.Qn.Et().mu(),BM:t.wickVisible,Mi:t.borderVisible,lt:this.hg})}}const pg={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},$g:(s,t)=>new ag(s,t)};({...rh});export{is as B,Bt as C,fo as L,Zi as P,gg as W,co as a,Ht as b,fg as c,ug as d,Qi as e,Gi as f,pg as g,wo as h,cg as i,dg as p};
//# sourceMappingURL=charts-SeOzVKbO.js.map
