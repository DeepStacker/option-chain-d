{"version":3,"file":"Historical-YyxKE7XX.js","sources":["../../src/api/historicalApi.js","../../src/pages/Historical.jsx"],"sourcesContent":["/**\n * Historical API Service\n * Handles endpoints for historical option chain data\n */\nimport axiosInstance from './config';\n\nconst HISTORICAL_BASE = '/historical';\n\n/**\n * Get available historical dates for a symbol\n */\nexport const getAvailableDates = async (symbol) => {\n    const response = await axiosInstance.get(\n        `${HISTORICAL_BASE}/dates/${symbol}`\n    );\n    return response.data;\n};\n\n/**\n * Get available snapshot times for a specific date\n */\nexport const getAvailableTimes = async (symbol, date) => {\n    const response = await axiosInstance.get(\n        `${HISTORICAL_BASE}/times/${symbol}/${date}`\n    );\n    return response.data;\n};\n\n/**\n * Get a specific historical snapshot\n */\nexport const getHistoricalSnapshot = async ({\n    symbol,\n    expiry,\n    date,\n    time,\n}) => {\n    const response = await axiosInstance.get(\n        `${HISTORICAL_BASE}/snapshot/${symbol}/${expiry}`,\n        {\n            params: { date, time },\n        }\n    );\n    return response.data;\n};\n\n/**\n * Get replay data for a time range\n */\nexport const getReplayData = async ({\n    symbol,\n    expiry,\n    date,\n    startTime = '09:15',\n    endTime = '15:30',\n    interval = 5,\n}) => {\n    const response = await axiosInstance.get(\n        `${HISTORICAL_BASE}/replay/${symbol}/${expiry}`,\n        {\n            params: {\n                date,\n                start_time: startTime,\n                end_time: endTime,\n                interval,\n            },\n        }\n    );\n    return response.data;\n};\n\n/**\n * Save current snapshot (admin function)\n */\nexport const saveCurrentSnapshot = async (symbol, expiry) => {\n    const response = await axiosInstance.post(\n        `${HISTORICAL_BASE}/snapshot/${symbol}/${expiry}`\n    );\n    return response.data;\n};\n\nexport default {\n    getAvailableDates,\n    getAvailableTimes,\n    getHistoricalSnapshot,\n    getReplayData,\n    saveCurrentSnapshot,\n};\n","import { useState, useEffect, useCallback } from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { \n    CalendarDaysIcon, \n    ClockIcon, \n    PlayIcon, \n    PauseIcon, \n    ForwardIcon,\n    BackwardIcon,\n    ArrowPathIcon,\n    ChartBarIcon\n} from '@heroicons/react/24/outline';\nimport { getAvailableDates, getAvailableTimes, getHistoricalSnapshot } from '../api/historicalApi';\nimport { selectIsAuthenticated, selectSelectedSymbol, selectSelectedExpiry } from '../context/selectors';\nimport Card from '../components/common/Card';\nimport Button from '../components/common/Button';\n\n/**\n * Historical Option Chain Page\n * Query and replay historical option chain data\n */\nconst Historical = () => {\n    const isAuthenticated = useSelector(selectIsAuthenticated);\n    const navigate = useNavigate();\n    const selectedSymbol = useSelector(selectSelectedSymbol);\n    const selectedExpiry = useSelector(selectSelectedExpiry);\n\n    // State\n    const [availableDates, setAvailableDates] = useState([]);\n    const [availableTimes, setAvailableTimes] = useState([]);\n    const [selectedDate, setSelectedDate] = useState('');\n    const [selectedTime, setSelectedTime] = useState('');\n    const [snapshotData, setSnapshotData] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n    \n    // Playback state\n    const [isPlaying, setIsPlaying] = useState(false);\n    const [playbackSpeed, setPlaybackSpeed] = useState(1);\n    const [currentTimeIndex, setCurrentTimeIndex] = useState(0);\n\n    // Fetch available dates on mount\n    useEffect(() => {\n        const fetchDates = async () => {\n            try {\n                const response = await getAvailableDates(selectedSymbol);\n                setAvailableDates(response.dates || []);\n                if (response.dates?.length > 0) {\n                    setSelectedDate(response.dates[0]);\n                }\n            } catch (err) {\n                console.error('Failed to fetch dates:', err);\n                setError('Failed to load available dates');\n            }\n        };\n        fetchDates();\n    }, [selectedSymbol]);\n\n    // Fetch available times when date changes\n    useEffect(() => {\n        if (!selectedDate) return;\n        \n        const fetchTimes = async () => {\n            try {\n                const response = await getAvailableTimes(selectedSymbol, selectedDate);\n                setAvailableTimes(response.times || []);\n                if (response.times?.length > 0) {\n                    setSelectedTime(response.times[0]);\n                    setCurrentTimeIndex(0);\n                }\n            } catch (err) {\n                console.error('Failed to fetch times:', err);\n            }\n        };\n        fetchTimes();\n    }, [selectedSymbol, selectedDate]);\n\n    // Fetch snapshot data\n    const fetchSnapshot = useCallback(async () => {\n        if (!selectedDate || !selectedTime || !selectedExpiry) return;\n        \n        setLoading(true);\n        setError(null);\n        \n        try {\n            const response = await getHistoricalSnapshot({\n                symbol: selectedSymbol,\n                expiry: selectedExpiry,\n                date: selectedDate,\n                time: selectedTime,\n            });\n            setSnapshotData(response);\n        } catch (err) {\n            console.error('Failed to fetch snapshot:', err);\n            setError(err.message || 'Failed to load historical data');\n        } finally {\n            setLoading(false);\n        }\n    }, [selectedSymbol, selectedExpiry, selectedDate, selectedTime]);\n\n    // Auto-fetch on selection change\n    useEffect(() => {\n        if (selectedDate && selectedTime && selectedExpiry) {\n            fetchSnapshot();\n        }\n    }, [selectedDate, selectedTime, selectedExpiry, fetchSnapshot]);\n\n    // Playback controls\n    useEffect(() => {\n        if (!isPlaying || availableTimes.length === 0) return;\n\n        const interval = setInterval(() => {\n            setCurrentTimeIndex((prev) => {\n                const next = prev + 1;\n                if (next >= availableTimes.length) {\n                    setIsPlaying(false);\n                    return prev;\n                }\n                setSelectedTime(availableTimes[next]);\n                return next;\n            });\n        }, 1000 / playbackSpeed);\n\n        return () => clearInterval(interval);\n    }, [isPlaying, playbackSpeed, availableTimes]);\n\n    const handlePrevTime = () => {\n        if (currentTimeIndex > 0) {\n            const newIndex = currentTimeIndex - 1;\n            setCurrentTimeIndex(newIndex);\n            setSelectedTime(availableTimes[newIndex]);\n        }\n    };\n\n    const handleNextTime = () => {\n        if (currentTimeIndex < availableTimes.length - 1) {\n            const newIndex = currentTimeIndex + 1;\n            setCurrentTimeIndex(newIndex);\n            setSelectedTime(availableTimes[newIndex]);\n        }\n    };\n\n    if (!isAuthenticated) {\n        return (\n            <div className=\"flex flex-col items-center justify-center min-h-[60vh] gap-4\">\n                <h2 className=\"text-2xl font-bold dark:text-white\">Authentication Required</h2>\n                <p className=\"text-gray-600 dark:text-gray-400\">Please log in to view historical data.</p>\n                <Button onClick={() => navigate('/login')}>Login Now</Button>\n            </div>\n        );\n    }\n\n    // Calculate summary stats from snapshot\n    const callOITotal = Object.values(snapshotData?.option_chain || {}).reduce((sum, s) => {\n        return sum + (s.ce?.OI || s.ce?.oi || 0);\n    }, 0);\n    \n    const putOITotal = Object.values(snapshotData?.option_chain || {}).reduce((sum, s) => {\n        return sum + (s.pe?.OI || s.pe?.oi || 0);\n    }, 0);\n\n    return (\n        <>\n            <Helmet>\n                <title>Historical Data | Stockify</title>\n                <meta name=\"description\" content=\"View and replay historical option chain data\" />\n            </Helmet>\n\n            <div className=\"w-full px-4 py-4 space-y-4\">\n                {/* Header */}\n                <div className=\"flex items-center justify-between\">\n                    <div>\n                        <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                            Historical Option Chain\n                        </h1>\n                        <p className=\"text-sm text-gray-500 mt-1\">\n                            Replay historical option chain data for any date\n                        </p>\n                    </div>\n                    <button\n                        onClick={fetchSnapshot}\n                        disabled={loading}\n                        className=\"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n                    >\n                        <ArrowPathIcon className={`w-5 h-5 text-gray-600 dark:text-gray-400 ${loading ? 'animate-spin' : ''}`} />\n                    </button>\n                </div>\n\n                {/* Controls Card */}\n                <Card variant=\"glass\" className=\"p-4\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                        {/* Symbol Display */}\n                        <div>\n                            <label className=\"block text-xs font-medium text-gray-500 mb-2\">Symbol</label>\n                            <div className=\"bg-gray-100 dark:bg-gray-800 rounded-lg px-4 py-2.5 text-gray-900 dark:text-white font-medium\">\n                                {selectedSymbol}\n                            </div>\n                        </div>\n\n                        {/* Date Selector */}\n                        <div>\n                            <label className=\"block text-xs font-medium text-gray-500 mb-2\">\n                                <CalendarDaysIcon className=\"w-4 h-4 inline mr-1\" />\n                                Date\n                            </label>\n                            <select\n                                value={selectedDate}\n                                onChange={(e) => setSelectedDate(e.target.value)}\n                                className=\"w-full bg-gray-100 dark:bg-gray-800 border-0 rounded-lg px-4 py-2.5 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                            >\n                                {availableDates.map((date) => (\n                                    <option key={date} value={date}>{date}</option>\n                                ))}\n                            </select>\n                        </div>\n\n                        {/* Time Selector */}\n                        <div>\n                            <label className=\"block text-xs font-medium text-gray-500 mb-2\">\n                                <ClockIcon className=\"w-4 h-4 inline mr-1\" />\n                                Time\n                            </label>\n                            <select\n                                value={selectedTime}\n                                onChange={(e) => {\n                                    setSelectedTime(e.target.value);\n                                    setCurrentTimeIndex(availableTimes.indexOf(e.target.value));\n                                }}\n                                className=\"w-full bg-gray-100 dark:bg-gray-800 border-0 rounded-lg px-4 py-2.5 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                            >\n                                {availableTimes.map((time) => (\n                                    <option key={time} value={time}>{time}</option>\n                                ))}\n                            </select>\n                        </div>\n\n                        {/* Playback Speed */}\n                        <div>\n                            <label className=\"block text-xs font-medium text-gray-500 mb-2\">Speed</label>\n                            <select\n                                value={playbackSpeed}\n                                onChange={(e) => setPlaybackSpeed(Number(e.target.value))}\n                                className=\"w-full bg-gray-100 dark:bg-gray-800 border-0 rounded-lg px-4 py-2.5 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                            >\n                                <option value={0.5}>0.5x</option>\n                                <option value={1}>1x</option>\n                                <option value={2}>2x</option>\n                                <option value={5}>5x</option>\n                                <option value={10}>10x</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    {/* Playback Controls */}\n                    <div className=\"flex items-center justify-center gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                        <button\n                            onClick={handlePrevTime}\n                            disabled={currentTimeIndex === 0}\n                            className=\"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-50 transition-colors\"\n                        >\n                            <BackwardIcon className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n                        </button>\n                        \n                        <button\n                            onClick={() => setIsPlaying(!isPlaying)}\n                            className={`p-3 rounded-xl transition-all ${\n                                isPlaying \n                                    ? 'bg-red-100 dark:bg-red-900/30 text-red-600' \n                                    : 'bg-blue-100 dark:bg-blue-900/30 text-blue-600'\n                            }`}\n                        >\n                            {isPlaying ? (\n                                <PauseIcon className=\"w-6 h-6\" />\n                            ) : (\n                                <PlayIcon className=\"w-6 h-6\" />\n                            )}\n                        </button>\n                        \n                        <button\n                            onClick={handleNextTime}\n                            disabled={currentTimeIndex >= availableTimes.length - 1}\n                            className=\"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-50 transition-colors\"\n                        >\n                            <ForwardIcon className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n                        </button>\n\n                        <div className=\"ml-4 text-sm text-gray-500\">\n                            {currentTimeIndex + 1} / {availableTimes.length} snapshots\n                        </div>\n                    </div>\n\n                    {/* Progress Bar */}\n                    <div className=\"mt-4\">\n                        <div className=\"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden\">\n                            <div \n                                className=\"h-full bg-blue-500 transition-all duration-300\"\n                                style={{ \n                                    width: `${availableTimes.length > 0 ? ((currentTimeIndex + 1) / availableTimes.length) * 100 : 0}%` \n                                }}\n                            />\n                        </div>\n                        <div className=\"flex justify-between text-xs text-gray-400 mt-1\">\n                            <span>{availableTimes[0] || '09:15'}</span>\n                            <span>{availableTimes[availableTimes.length - 1] || '15:30'}</span>\n                        </div>\n                    </div>\n                </Card>\n\n                {/* Error Display */}\n                {error && (\n                    <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 text-red-700 dark:text-red-400\">\n                        {error}\n                    </div>\n                )}\n\n                {/* Loading State */}\n                {loading && (\n                    <div className=\"flex items-center justify-center py-12\">\n                        <ArrowPathIcon className=\"w-8 h-8 animate-spin text-blue-500\" />\n                        <span className=\"ml-2 text-gray-500\">Loading historical data...</span>\n                    </div>\n                )}\n\n                {/* Snapshot Data Display */}\n                {snapshotData && !loading && (\n                    <div className=\"space-y-4\">\n                        {/* Summary Stats */}\n                        <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n                            <Card variant=\"glass\" className=\"p-4 text-center\">\n                                <div className=\"text-xs text-gray-500 uppercase mb-1\">Spot Price</div>\n                                <div className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                                    {snapshotData.spot?.toLocaleString()}\n                                </div>\n                            </Card>\n                            <Card variant=\"glass\" className=\"p-4 text-center\">\n                                <div className=\"text-xs text-gray-500 uppercase mb-1\">ATM Strike</div>\n                                <div className=\"text-xl font-bold text-yellow-600\">\n                                    {snapshotData.atm_strike?.toLocaleString()}\n                                </div>\n                            </Card>\n                            <Card variant=\"glass\" className=\"p-4 text-center\">\n                                <div className=\"text-xs text-gray-500 uppercase mb-1\">PCR</div>\n                                <div className={`text-xl font-bold ${snapshotData.pcr > 1 ? 'text-green-600' : 'text-red-600'}`}>\n                                    {snapshotData.pcr?.toFixed(3)}\n                                </div>\n                            </Card>\n                            <Card variant=\"glass\" className=\"p-4 text-center\">\n                                <div className=\"text-xs text-gray-500 uppercase mb-1\">Max Pain</div>\n                                <div className=\"text-xl font-bold text-purple-600\">\n                                    {snapshotData.max_pain?.toLocaleString()}\n                                </div>\n                            </Card>\n                            <Card variant=\"glass\" className=\"p-4 text-center\">\n                                <div className=\"text-xs text-gray-500 uppercase mb-1\">Total OI</div>\n                                <div className=\"text-sm font-bold text-gray-900 dark:text-white\">\n                                    <span className=\"text-green-600\">{(callOITotal / 100000).toFixed(1)}L CE</span>\n                                    {' / '}\n                                    <span className=\"text-red-600\">{(putOITotal / 100000).toFixed(1)}L PE</span>\n                                </div>\n                            </Card>\n                        </div>\n\n                        {/* Option Chain Table */}\n                        <Card variant=\"glass\" className=\"overflow-hidden\">\n                            <div className=\"overflow-x-auto max-h-[500px]\">\n                                <table className=\"w-full text-sm\">\n                                    <thead className=\"bg-gray-100 dark:bg-gray-800 sticky top-0\">\n                                        <tr>\n                                            <th colSpan=\"4\" className=\"py-2 px-4 text-green-600 font-semibold border-r border-gray-200 dark:border-gray-700\">\n                                                CALLS\n                                            </th>\n                                            <th className=\"py-2 px-4 text-yellow-600 font-semibold border-r border-gray-200 dark:border-gray-700\">\n                                                STRIKE\n                                            </th>\n                                            <th colSpan=\"4\" className=\"py-2 px-4 text-red-600 font-semibold\">\n                                                PUTS\n                                            </th>\n                                        </tr>\n                                        <tr className=\"text-xs text-gray-500\">\n                                            <th className=\"py-2 px-2\">OI</th>\n                                            <th className=\"py-2 px-2\">Volume</th>\n                                            <th className=\"py-2 px-2\">IV</th>\n                                            <th className=\"py-2 px-2 border-r border-gray-200 dark:border-gray-700\">LTP</th>\n                                            <th className=\"py-2 px-2 border-r border-gray-200 dark:border-gray-700\"></th>\n                                            <th className=\"py-2 px-2\">LTP</th>\n                                            <th className=\"py-2 px-2\">IV</th>\n                                            <th className=\"py-2 px-2\">Volume</th>\n                                            <th className=\"py-2 px-2\">OI</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {Object.entries(snapshotData.option_chain || {})\n                                            .sort((a, b) => parseFloat(a[0]) - parseFloat(b[0]))\n                                            .slice(0, 30)\n                                            .map(([strike, data]) => {\n                                                const isATM = parseFloat(strike) === snapshotData.atm_strike;\n                                                return (\n                                                    <tr \n                                                        key={strike} \n                                                        className={`border-b border-gray-100 dark:border-gray-800 ${\n                                                            isATM ? 'bg-yellow-50 dark:bg-yellow-900/20' : ''\n                                                        }`}\n                                                    >\n                                                        {/* Call side */}\n                                                        <td className=\"py-2 px-2 text-center text-green-600\">\n                                                            {((data.ce?.OI || data.ce?.oi || 0) / 1000).toFixed(0)}K\n                                                        </td>\n                                                        <td className=\"py-2 px-2 text-center text-gray-600 dark:text-gray-400\">\n                                                            {((data.ce?.volume || data.ce?.vol || 0) / 1000).toFixed(0)}K\n                                                        </td>\n                                                        <td className=\"py-2 px-2 text-center text-blue-600\">\n                                                            {data.ce?.iv?.toFixed(1) || '-'}\n                                                        </td>\n                                                        <td className=\"py-2 px-2 text-center font-medium border-r border-gray-200 dark:border-gray-700\">\n                                                            {data.ce?.ltp?.toFixed(2) || '-'}\n                                                        </td>\n                                                        \n                                                        {/* Strike */}\n                                                        <td className={`py-2 px-4 text-center font-bold border-r border-gray-200 dark:border-gray-700 ${\n                                                            isATM ? 'text-yellow-600' : 'text-gray-900 dark:text-white'\n                                                        }`}>\n                                                            {parseFloat(strike).toFixed(0)}\n                                                        </td>\n                                                        \n                                                        {/* Put side */}\n                                                        <td className=\"py-2 px-2 text-center font-medium\">\n                                                            {data.pe?.ltp?.toFixed(2) || '-'}\n                                                        </td>\n                                                        <td className=\"py-2 px-2 text-center text-blue-600\">\n                                                            {data.pe?.iv?.toFixed(1) || '-'}\n                                                        </td>\n                                                        <td className=\"py-2 px-2 text-center text-gray-600 dark:text-gray-400\">\n                                                            {((data.pe?.volume || data.pe?.vol || 0) / 1000).toFixed(0)}K\n                                                        </td>\n                                                        <td className=\"py-2 px-2 text-center text-red-600\">\n                                                            {((data.pe?.OI || data.pe?.oi || 0) / 1000).toFixed(0)}K\n                                                        </td>\n                                                    </tr>\n                                                );\n                                            })\n                                        }\n                                    </tbody>\n                                </table>\n                            </div>\n                        </Card>\n                    </div>\n                )}\n\n                {/* Empty State */}\n                {!snapshotData && !loading && !error && (\n                    <Card variant=\"glass\" className=\"p-12 text-center\">\n                        <ChartBarIcon className=\"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4\" />\n                        <h3 className=\"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                            No Historical Data\n                        </h3>\n                        <p className=\"text-gray-500\">\n                            Select a date and time to view historical option chain data\n                        </p>\n                    </Card>\n                )}\n            </div>\n        </>\n    );\n};\n\nexport default Historical;\n"],"names":["HISTORICAL_BASE","getAvailableDates","symbol","axiosInstance","getAvailableTimes","date","getHistoricalSnapshot","expiry","time","Historical","isAuthenticated","useSelector","selectIsAuthenticated","navigate","useNavigate","selectedSymbol","selectSelectedSymbol","selectedExpiry","selectSelectedExpiry","availableDates","setAvailableDates","useState","availableTimes","setAvailableTimes","selectedDate","setSelectedDate","selectedTime","setSelectedTime","snapshotData","setSnapshotData","loading","setLoading","error","setError","isPlaying","setIsPlaying","playbackSpeed","setPlaybackSpeed","currentTimeIndex","setCurrentTimeIndex","useEffect","response","_a","err","fetchSnapshot","useCallback","interval","prev","next","handlePrevTime","newIndex","handleNextTime","jsxs","jsx","Button","callOITotal","sum","_b","putOITotal","Fragment","Helmet","ArrowPathIcon","Card","CalendarDaysIcon","e","ClockIcon","BackwardIcon","PauseIcon","PlayIcon","ForwardIcon","_c","_d","a","b","strike","data","isATM","_f","_e","_h","_g","_j","_i","_l","_k","_m","_n","_o","_p","ChartBarIcon"],"mappings":"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"}