import{r as c,j as e,m as z,A as V}from"./animations-CCQynVHD.js";import{u as I}from"./redux-CHwIDTp6.js";import{e as N,u as Q,H as J,B as g}from"./index-DUqnRfh4.js";import{C as k,B as M}from"./Card-wJW6FCvb.js";import{S as R}from"./Skeleton-Dr9iDnWc.js";import{H as T,a0 as W,x as P,aj as Z,S as X,ak as ee,al as se,a as B,a1 as te,a5 as D,z as G,ac as O,ab as H,N as L,am as Y,a9 as q,O as K}from"./icons-1ld_-Ybk.js";import"./network-htDwveLI.js";import"./firebase-UuSzqDeJ.js";const w={listConfigs:async(t=null)=>{const l=t?{category:t}:{};return(await N.get("/admin/config",{params:l})).data},getConfig:async t=>(await N.get(`/admin/config/${t}`)).data,createConfig:async t=>(await N.post("/admin/config",t)).data,updateConfig:async(t,l)=>(await N.put(`/admin/config/${t}`,l)).data,deleteConfig:async t=>(await N.delete(`/admin/config/${t}`)).data,listInstruments:async(t=!0)=>(await N.get("/admin/instruments",{params:{active_only:t}})).data,createInstrument:async t=>(await N.post("/admin/instruments",t)).data,updateInstrument:async(t,l)=>(await N.put(`/admin/instruments/${t}`,l)).data,deleteInstrument:async t=>(await N.delete(`/admin/instruments/${t}`)).data,listUsers:async(t=1,l=20,o=null)=>{const m={page:t,page_size:l};return o&&(m.search=o),(await N.get("/users",{params:m})).data},getUser:async t=>(await N.get(`/users/${t}`)).data,updateUser:async(t,l)=>(await N.put(`/users/${t}`,l)).data,deactivateUser:async t=>(await N.post(`/users/${t}/deactivate`)).data,activateUser:async t=>(await N.post(`/users/${t}/activate`)).data,clearCache:async(t=null,l=!1)=>(await N.post("/admin/cache/clear",{pattern:t,clear_all:l})).data,getHealth:async()=>(await N.get("/health")).data,getRuntimeSettings:async()=>(await N.get("/admin/settings/runtime")).data,seedDatabase:async()=>(await N.post("/admin/seed")).data,getSystemMetrics:async()=>(await N.get("/admin/monitoring/system")).data,getWebSocketStats:async()=>(await N.get("/admin/monitoring/websockets")).data,getDatabaseStats:async()=>(await N.get("/admin/monitoring/database")).data,getRedisStats:async()=>(await N.get("/admin/monitoring/redis")).data,getLogs:async(t=null,l=100,o=null)=>{const m={limit:l};return t&&(m.level=t),o&&(m.search=o),(await N.get("/admin/monitoring/logs",{params:m})).data},getFeatureFlags:async()=>(await N.get("/admin/features")).data,toggleFeature:async(t,l)=>(await N.put(`/admin/features/${t}`,{enabled:l})).data},ae=()=>{var h,v,i;const[t,l]=c.useState(null),[o,m]=c.useState(!0),j=I(a=>a.theme.theme)==="dark",f=async()=>{m(!0);try{const a=await w.getHealth();l(a)}catch(a){console.error("Health check failed:",a)}finally{m(!1)}};c.useEffect(()=>{f();const a=setInterval(f,3e4);return()=>clearInterval(a)},[]);const y=a=>{switch(a){case"healthy":case"connected":return"text-green-500";case"degraded":return"text-yellow-500";default:return"text-red-500"}};return o&&!t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(R,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"System Health"}),e.jsx("button",{onClick:f,className:`p-2 rounded-lg ${j?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(D,{className:`w-5 h-5 ${o?"animate-spin":""}`})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(k,{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Overall Status"}),e.jsx("div",{className:`text-xl font-bold ${y(t==null?void 0:t.status)}`,children:((h=t==null?void 0:t.status)==null?void 0:h.toUpperCase())||"UNKNOWN"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Uptime"}),e.jsx("div",{className:"text-xl font-bold",children:t!=null&&t.uptime_seconds?`${Math.floor(t.uptime_seconds/60)}m`:"N/A"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Database"}),e.jsx("div",{className:`text-xl font-bold ${y(t==null?void 0:t.database)}`,children:((v=t==null?void 0:t.database)==null?void 0:v.toUpperCase())||"UNKNOWN"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Redis Cache"}),e.jsx("div",{className:`text-xl font-bold ${y(t==null?void 0:t.redis)}`,children:((i=t==null?void 0:t.redis)==null?void 0:i.toUpperCase())||"UNKNOWN"})]})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Version"}),e.jsx("div",{className:"font-mono",children:(t==null?void 0:t.version)||"N/A"})]})]})},re=()=>{const[t,l]=c.useState([]),[o,m]=c.useState(!0),[d,j]=c.useState(1),[f,y]=c.useState(1),[h,v]=c.useState(0),a=I(n=>n.theme.theme)==="dark",x=c.useCallback(async()=>{m(!0);try{const n=await w.listUsers(d,10);l(n.items||n.data||[]),y(n.pages||1),v(n.total||0)}catch(n){console.error("Failed to fetch users:",n),g.error("Failed to load users")}finally{m(!1)}},[d]);c.useEffect(()=>{x()},[x]);const p=async(n,_)=>{try{_?await w.deactivateUser(n):await w.activateUser(n),g.success(`User ${_?"deactivated":"activated"}`),x()}catch{g.error("Failed to update user status")}},C=async n=>{const _=n.role==="admin"?"user":"admin",A=_==="admin"?`Grant admin privileges to ${n.email}?`:`Revoke admin privileges from ${n.email}?`;if(confirm(A))try{await w.updateUser(n.id,{role:_}),g.success(`${n.email} is now ${_==="admin"?"an admin":"a regular user"}`),x()}catch{g.error("Failed to update user role")}};return o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(R,{size:"lg"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"User Management"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[h," total users"]})]}),e.jsx("button",{onClick:x,className:`p-2 rounded-lg ${a?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(D,{className:`w-5 h-5 ${o?"animate-spin":""}`})})]}),e.jsx("div",{className:"overflow-x-auto rounded-xl border dark:border-gray-700",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:a?"bg-gray-800":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Role"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Provider"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Last Login"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),e.jsxs("tbody",{children:[t.map(n=>{var _,A;return e.jsxs("tr",{className:`border-t ${a?"border-gray-700":"border-gray-200"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[n.profile_image?e.jsx("img",{src:n.profile_image,alt:"",className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${a?"bg-gray-700":"bg-gray-200"}`,children:e.jsx(X,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:n.username||((_=n.email)==null?void 0:_.split("@")[0])}),e.jsx("div",{className:"text-xs text-gray-500",children:n.email})]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${n.role==="admin"?"bg-purple-500 text-white":n.role==="premium"?"bg-yellow-500 text-black":"bg-gray-500 text-white"}`,children:(A=n.role)==null?void 0:A.toUpperCase()})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm",children:n.login_provider||"email"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${n.is_active?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:n.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-500",children:n.last_login?new Date(n.last_login).toLocaleDateString():"Never"}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>C(n),className:`px-3 py-1 rounded text-xs font-medium ${n.role==="admin"?"bg-orange-500 hover:bg-orange-600 text-white":"bg-purple-500 hover:bg-purple-600 text-white"}`,children:n.role==="admin"?"Revoke Admin":"Make Admin"}),e.jsx("button",{onClick:()=>p(n.id,n.is_active),className:`px-3 py-1 rounded text-xs ${n.is_active?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"} text-white`,children:n.is_active?"Disable":"Enable"})]})})]},n.id)}),t.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"py-8 text-center text-gray-500",children:"No users found. Users are added when they log in via Google."})})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",t.length," of ",h," users"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(n=>Math.max(1,n-1)),disabled:d===1,className:"px-3 py-1 bg-gray-500 text-white rounded disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"px-3 py-1",children:["Page ",d," of ",f]}),e.jsx("button",{onClick:()=>j(n=>Math.min(f,n+1)),disabled:d===f,className:"px-3 py-1 bg-gray-500 text-white rounded disabled:opacity-50",children:"Next"})]})]})]})},ne=()=>{const[t,l]=c.useState(!1),m=I(j=>j.theme.theme)==="dark",d=async(j=!1)=>{l(!0);try{await w.clearCache(null,j),g.success(j?"All cache cleared!":"Options cache cleared!")}catch{g.error("Failed to clear cache")}finally{l(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Cache Management"}),e.jsx("div",{className:`p-4 rounded-lg ${m?"bg-yellow-900/20":"bg-yellow-50"} border border-yellow-500`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(G,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-yellow-700 dark:text-yellow-300",children:"Warning"}),e.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Clearing cache will force all data to be refetched from external APIs."})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs(M,{onClick:()=>d(!1),loading:t,variant:"secondary",children:[e.jsx(O,{className:"w-5 h-5 mr-2"}),"Clear Options Cache"]}),e.jsxs(M,{onClick:()=>d(!0),loading:t,variant:"danger",children:[e.jsx(O,{className:"w-5 h-5 mr-2"}),"Clear All Cache"]})]})]})},le=()=>{const[t,l]=c.useState([]),[o,m]=c.useState(!0),[d,j]=c.useState(""),[f,y]=c.useState(null),[h,v]=c.useState({}),[i,a]=c.useState(!1),[x,p]=c.useState({key:"",value:"",category:"system",description:"",is_sensitive:!1}),n=I(s=>s.theme.theme)==="dark",_=["api","trading","cache","features","system"],A=c.useCallback(async()=>{m(!0);try{const s=await w.listConfigs(d||null);l(Array.isArray(s)?s:(s==null?void 0:s.data)||[])}catch(s){console.error("Failed to fetch configs:",s),g.error("Failed to load configurations")}finally{m(!1)}},[d]);c.useEffect(()=>{A()},[A]);const r=async(s,u)=>{try{await w.updateConfig(s,{value:u}),g.success(`Config "${s}" updated`),A(),y(null)}catch{g.error("Failed to update config")}},F=async s=>{if(confirm(`Delete config "${s}"?`))try{await w.deleteConfig(s),g.success(`Config "${s}" deleted`),A()}catch{g.error("Failed to delete config")}},U=s=>{v(u=>({...u,[s]:!u[s]}))},b=async()=>{var s,u;if(!x.key||!x.value){g.error("Key and Value are required");return}try{await w.createConfig({key:x.key,value:x.value,category:x.category,description:x.description,is_sensitive:x.is_sensitive,value_type:"string"}),g.success(`Config "${x.key}" created`),a(!1),p({key:"",value:"",category:"system",description:"",is_sensitive:!1}),A()}catch(E){g.error("Failed to create config: "+(((u=(s=E.response)==null?void 0:s.data)==null?void 0:u.message)||E.message))}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Configuration Manager"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:d,onChange:s=>j(s.target.value),className:`px-3 py-2 rounded-lg border ${n?"bg-gray-800 border-gray-700":"bg-white border-gray-300"}`,children:[e.jsx("option",{value:"",children:"All Categories"}),_.map(s=>e.jsx("option",{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))]}),e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:[e.jsx(H,{className:"w-5 h-5"}),"Add Config"]}),e.jsx("button",{onClick:A,className:`p-2 rounded-lg ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(D,{className:`w-5 h-5 ${o?"animate-spin":""}`})})]})]}),e.jsx(V,{children:i&&e.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>a(!1),children:e.jsxs(z.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:`w-full max-w-md p-6 rounded-2xl ${n?"bg-gray-800":"bg-white"} shadow-2xl`,onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Create New Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Key *"}),e.jsx("input",{value:x.key,onChange:s=>p(u=>({...u,key:s.target.value})),placeholder:"e.g., DHAN_API_TIMEOUT",className:`w-full px-3 py-2 rounded-lg border ${n?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Value *"}),e.jsx("input",{value:x.value,onChange:s=>p(u=>({...u,value:s.target.value})),placeholder:"e.g., 30",className:`w-full px-3 py-2 rounded-lg border ${n?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),e.jsx("select",{value:x.category,onChange:s=>p(u=>({...u,category:s.target.value})),className:`w-full px-3 py-2 rounded-lg border ${n?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,children:_.map(s=>e.jsx("option",{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("input",{value:x.description,onChange:s=>p(u=>({...u,description:s.target.value})),placeholder:"What does this config do?",className:`w-full px-3 py-2 rounded-lg border ${n?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.is_sensitive,onChange:s=>p(u=>({...u,is_sensitive:s.target.checked})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Sensitive (hide value by default)"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>a(!1),className:`flex-1 px-4 py-2 rounded-lg ${n?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`,children:"Cancel"}),e.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Create"})]})]})})}),o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(R,{size:"lg"})}):e.jsxs("div",{className:"space-y-3",children:[t.map(s=>e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono font-bold text-blue-500",children:s.key}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${n?"bg-gray-700":"bg-gray-100"}`,children:s.category}),s.is_sensitive&&e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-red-500/20 text-red-500",children:"Sensitive"})]}),e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:s.description}),f===s.key?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:`edit-${s.key}`,defaultValue:s.value,className:`flex-1 px-3 py-2 rounded-lg border ${n?"bg-gray-800 border-gray-600":"bg-white border-gray-300"}`}),e.jsx("button",{onClick:()=>r(s.key,document.getElementById(`edit-${s.key}`).value),className:"p-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:e.jsx(L,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>y(null),className:"p-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:e.jsx(P,{className:"w-5 h-5"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:`px-3 py-1 rounded text-sm ${n?"bg-gray-800":"bg-gray-100"}`,children:s.is_sensitive&&!h[s.key]?"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢":s.value}),s.is_sensitive&&e.jsx("button",{onClick:()=>U(s.key),className:"text-gray-400 hover:text-gray-600",children:h[s.key]?e.jsx(Y,{className:"w-4 h-4"}):e.jsx(q,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>y(s.key),className:`p-2 rounded-lg ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>F(s.key),className:"p-2 rounded-lg text-red-500 hover:bg-red-500/10",children:e.jsx(O,{className:"w-4 h-4"})})]})]})},s.key)),t.length===0&&e.jsx(k,{className:"text-center py-12 text-gray-500",children:"No configurations found"})]})]})},ie=()=>{const[t,l]=c.useState([]),[o,m]=c.useState(!0),[d,j]=c.useState(!1),[f,y]=c.useState(!1),[h,v]=c.useState(null),[i,a]=c.useState({symbol:"",display_name:"",segment:"IDX",lot_size:25,tick_size:.05,strike_interval:50,strikes_count:20,priority:0,is_active:!0}),p=I(s=>s.theme.theme)==="dark",C=c.useCallback(async()=>{m(!0);try{const s=await w.listInstruments(!d);l(Array.isArray(s)?s:(s==null?void 0:s.data)||[])}catch(s){console.error("Failed to fetch instruments:",s),g.error("Failed to load instruments")}finally{m(!1)}},[d]);c.useEffect(()=>{C()},[C]);const n=()=>{a({symbol:"",display_name:"",segment:"IDX",lot_size:25,tick_size:.05,strike_interval:50,strikes_count:20,priority:0,is_active:!0})},_=s=>{a({symbol:s.symbol,display_name:s.display_name||"",segment:s.segment||"IDX",lot_size:s.lot_size||25,tick_size:s.tick_size||.05,strike_interval:s.strike_interval||50,strikes_count:s.strikes_count||20,priority:s.priority||0,is_active:s.is_active}),v(s)},A=async()=>{if(!i.symbol){g.error("Symbol is required");return}try{await w.createInstrument(i),g.success(`Instrument "${i.symbol}" created`),y(!1),n(),C()}catch(s){g.error("Failed to create instrument: "+(s.message||s))}},r=async()=>{try{await w.updateInstrument(h.id,i),g.success(`${i.symbol} updated`),v(null),n(),C()}catch{g.error("Failed to update instrument")}},F=async s=>{if(confirm(`Delete instrument "${s.symbol}"? This cannot be undone.`))try{await w.deleteInstrument(s.id),g.success(`${s.symbol} deleted`),C()}catch{g.error("Failed to delete instrument")}},U=async s=>{try{await w.updateInstrument(s.id,{is_active:!s.is_active}),g.success(`${s.symbol} ${s.is_active?"deactivated":"activated"}`),C()}catch{g.error("Failed to update instrument")}},b=({isEdit:s,onClose:u,onSubmit:E})=>e.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:u,children:e.jsxs(z.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:`w-full max-w-lg p-6 rounded-2xl ${p?"bg-gray-800":"bg-white"} shadow-2xl max-h-[90vh] overflow-y-auto`,onClick:$=>$.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:s?"Edit Instrument":"Create New Instrument"}),e.jsxs("div",{className:"grid gap-4 grid-cols-2",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Symbol *"}),e.jsx("input",{value:i.symbol,onChange:$=>a(S=>({...S,symbol:$.target.value.toUpperCase()})),placeholder:"e.g., NIFTY",disabled:s,className:`w-full px-3 py-2 rounded-lg border ${p?"bg-gray-700 border-gray-600":"bg-white border-gray-300"} ${s?"opacity-50":""}`})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Display Name"}),e.jsx("input",{value:i.display_name,onChange:$=>a(S=>({...S,display_name:$.target.value})),placeholder:"e.g., Nifty 50",className:`w-full px-3 py-2 rounded-lg border ${p?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Segment"}),e.jsxs("select",{value:i.segment,onChange:$=>a(S=>({...S,segment:$.target.value})),className:`w-full px-3 py-2 rounded-lg border ${p?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,children:[e.jsx("option",{value:"IDX",children:"Index (IDX)"}),e.jsx("option",{value:"EQ",children:"Equity (EQ)"}),e.jsx("option",{value:"COMM",children:"Commodity"}),e.jsx("option",{value:"CUR",children:"Currency"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Lot Size"}),e.jsx("input",{type:"number",value:i.lot_size,onChange:$=>a(S=>({...S,lot_size:parseInt($.target.value)||1})),className:`w-full px-3 py-2 rounded-lg border ${p?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tick Size"}),e.jsx("input",{type:"number",step:"0.01",value:i.tick_size,onChange:$=>a(S=>({...S,tick_size:parseFloat($.target.value)||.05})),className:`w-full px-3 py-2 rounded-lg border ${p?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Strike Interval"}),e.jsx("input",{type:"number",value:i.strike_interval,onChange:$=>a(S=>({...S,strike_interval:parseFloat($.target.value)||50})),className:`w-full px-3 py-2 rounded-lg border ${p?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Strikes Count"}),e.jsx("input",{type:"number",value:i.strikes_count,onChange:$=>a(S=>({...S,strikes_count:parseInt($.target.value)||20})),className:`w-full px-3 py-2 rounded-lg border ${p?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Priority"}),e.jsx("input",{type:"number",value:i.priority,onChange:$=>a(S=>({...S,priority:parseInt($.target.value)||0})),className:`w-full px-3 py-2 rounded-lg border ${p?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i.is_active,onChange:$=>a(S=>({...S,is_active:$.target.checked})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Active"})]})})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:u,className:`flex-1 px-4 py-2 rounded-lg ${p?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`,children:"Cancel"}),e.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:s?"Update":"Create"})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Trading Instruments"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:s=>j(s.target.checked),className:"rounded"}),"Show Inactive"]}),e.jsxs("button",{onClick:()=>{n(),y(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:[e.jsx(H,{className:"w-5 h-5"}),"Add Instrument"]})]})]}),e.jsxs(V,{children:[f&&e.jsx(b,{isEdit:!1,onClose:()=>y(!1),onSubmit:A}),h&&e.jsx(b,{isEdit:!0,onClose:()=>{v(null),n()},onSubmit:r})]}),o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(R,{size:"lg"})}):e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[t.map(s=>e.jsxs(k,{className:`p-4 ${s.is_active?"":"opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-lg font-bold",children:s.symbol}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.is_active?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:s.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Display:"}),e.jsx("span",{children:s.display_name||s.symbol})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Segment:"}),e.jsx("span",{children:s.segment||"IDX"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Lot Size:"}),e.jsx("span",{children:s.lot_size||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Strike Interval:"}),e.jsx("span",{children:s.strike_interval||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Strikes:"}),e.jsx("span",{children:s.strikes_count||20})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>_(s),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium ${p?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`,children:[e.jsx(K,{className:"w-4 h-4 inline mr-1"}),"Edit"]}),e.jsx("button",{onClick:()=>U(s),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium ${s.is_active?"bg-orange-500 hover:bg-orange-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:s.is_active?"Disable":"Enable"}),e.jsx("button",{onClick:()=>F(s),className:"px-3 py-2 rounded-lg text-sm font-medium bg-red-500 hover:bg-red-600 text-white",children:e.jsx(O,{className:"w-4 h-4"})})]})]},s.id)),t.length===0&&e.jsx(k,{className:"col-span-full text-center py-12 text-gray-500",children:'No instruments found. Click "Add Instrument" to create one.'})]})]})},ce=()=>{const[t,l]=c.useState(null),[o,m]=c.useState(!0),[d,j]=c.useState(!1),y=I(a=>a.theme.theme)==="dark",h=c.useCallback(async()=>{m(!0);try{const a=await w.getRuntimeSettings();l(typeof a=="object"&&!Array.isArray(a)&&!(a!=null&&a.data)?a:(a==null?void 0:a.data)||{})}catch(a){console.error("Failed to fetch runtime settings:",a),g.error("Failed to load runtime settings")}finally{m(!1)}},[]);c.useEffect(()=>{h()},[h]);const v=async()=>{j(!0);try{const a=await w.seedDatabase();g.success(a.message||"Database re-seeded")}catch{g.error("Failed to re-seed database")}finally{j(!1)}},i={application:"text-purple-500",server:"text-blue-500",database:"text-green-500",redis:"text-red-500",api:"text-orange-500",websocket:"text-cyan-500",security:"text-pink-500",trading:"text-yellow-500",logging:"text-gray-500"};return o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(R,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Runtime Settings (.env)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:v,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50",children:[e.jsx(H,{className:"w-5 h-5"}),d?"Seeding...":"Re-seed Defaults"]}),e.jsx("button",{onClick:h,className:`p-2 rounded-lg ${y?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(D,{className:`w-5 h-5 ${o?"animate-spin":""}`})})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Object.entries(t||{}).map(([a,x])=>e.jsxs(k,{className:"p-4",children:[e.jsx("h4",{className:`font-bold mb-3 capitalize ${i[a]||"text-blue-500"}`,children:a}),e.jsx("div",{className:"space-y-2",children:Object.entries(x||{}).map(([p,C])=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 font-mono text-xs",children:p}),e.jsx("span",{className:`font-medium ${y?"text-gray-200":"text-gray-800"}`,children:typeof C=="boolean"?C?"âœ“":"âœ—":String(C)})]},p))})]},a))}),e.jsx(k,{className:`p-4 ${y?"bg-yellow-900/20":"bg-yellow-50"} border border-yellow-500/30`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(G,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-yellow-700 dark:text-yellow-300",children:"Read-Only Settings"}),e.jsxs("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:["These values are loaded from the server's .env file and cannot be changed via UI. Use the ",e.jsx("strong",{children:"Config"})," tab to manage dynamic runtime settings stored in the database."]})]})]})})]})},de=()=>{const[t,l]=c.useState([]),[o,m]=c.useState(!0),[d,j]=c.useState({}),[f,y]=c.useState(null),[h,v]=c.useState(""),a=I(r=>r.theme.theme)==="dark",x=c.useCallback(async()=>{m(!0);try{const r=await w.listConfigs("api"),F=Array.isArray(r)?r:(r==null?void 0:r.data)||[];l(F)}catch(r){console.error("Failed to fetch API configs:",r),g.error("Failed to load API configurations")}finally{m(!1)}},[]);c.useEffect(()=>{x()},[x]);const p=r=>{j(F=>({...F,[r]:!F[r]}))},C=r=>{y(r.key),v(r.value)},n=async()=>{try{await w.updateConfig(f,{value:h}),g.success(`${f} updated successfully`),y(null),v(""),x()}catch{g.error("Failed to update configuration")}},_=()=>{y(null),v("")},A=(r,F=!1)=>r?F?r:r.length<=8?"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢":r.substring(0,4)+"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"+r.substring(r.length-4):e.jsx("span",{className:"text-gray-400 italic",children:"Not set"});return o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(R,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"API Keys & Tokens"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage sensitive API credentials securely"})]}),e.jsx("button",{onClick:x,className:`p-2 rounded-lg ${a?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(D,{className:`w-5 h-5 ${o?"animate-spin":""}`})})]}),e.jsx(k,{className:`p-4 ${a?"bg-red-900/20":"bg-red-50"} border border-red-500/30`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(T,{className:"w-5 h-5 text-red-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-red-700 dark:text-red-300",children:"Security Notice"}),e.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"API tokens are sensitive credentials. Never share them publicly. Changes take effect immediately."})]})]})}),e.jsxs("div",{className:"space-y-4",children:[t.filter(r=>r.is_sensitive||r.key.includes("TOKEN")||r.key.includes("KEY")||r.key.includes("SECRET")).map(r=>e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-bold text-blue-500",children:r.display_name||r.key}),r.is_sensitive&&e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-red-500/20 text-red-500",children:"Sensitive"})]}),e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:r.description}),f===r.key?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:d[r.key]?"text":"password",value:h,onChange:F=>v(F.target.value),placeholder:"Enter new value...",className:`flex-1 px-3 py-2 rounded-lg border ${a?"bg-gray-800 border-gray-600":"bg-white border-gray-300"}`}),e.jsx("button",{onClick:n,className:"p-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:e.jsx(L,{className:"w-5 h-5"})}),e.jsx("button",{onClick:_,className:"p-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:e.jsx(P,{className:"w-5 h-5"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:`px-3 py-1 rounded text-sm ${a?"bg-gray-800":"bg-gray-100"} font-mono`,children:r.is_sensitive?A(r.value,d[r.key]):r.value}),r.is_sensitive&&e.jsx("button",{onClick:()=>p(r.key),className:"text-gray-400 hover:text-gray-600",children:d[r.key]?e.jsx(Y,{className:"w-4 h-4"}):e.jsx(q,{className:"w-4 h-4"})})]})]}),f!==r.key&&e.jsx("button",{onClick:()=>C(r),className:`p-2 rounded-lg ${a?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(K,{className:"w-4 h-4"})})]})},r.key)),t.filter(r=>!r.is_sensitive&&!r.key.includes("TOKEN")&&!r.key.includes("KEY")).length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"text-md font-semibold mt-6",children:"Other API Settings"}),t.filter(r=>!r.is_sensitive&&!r.key.includes("TOKEN")&&!r.key.includes("KEY")).map(r=>e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:r.display_name||r.key}),e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:r.description}),f===r.key?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:h,onChange:F=>v(F.target.value),className:`flex-1 px-3 py-2 rounded-lg border ${a?"bg-gray-800 border-gray-600":"bg-white border-gray-300"}`}),e.jsx("button",{onClick:n,className:"p-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:e.jsx(L,{className:"w-5 h-5"})}),e.jsx("button",{onClick:_,className:"p-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:e.jsx(P,{className:"w-5 h-5"})})]}):e.jsx("code",{className:`px-3 py-1 rounded text-sm ${a?"bg-gray-800":"bg-gray-100"}`,children:r.value})]}),f!==r.key&&e.jsx("button",{onClick:()=>C(r),className:`p-2 rounded-lg ${a?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(K,{className:"w-4 h-4"})})]})},r.key))]}),t.length===0&&e.jsx(k,{className:"text-center py-12 text-gray-500",children:"No API configurations found. Run the database seeder to create default configs."})]})]})},oe=()=>{var n,_,A,r,F,U;const[t,l]=c.useState(null),[o,m]=c.useState(null),[d,j]=c.useState(null),[f,y]=c.useState(!0),[h,v]=c.useState(!1),a=I(b=>b.theme.theme)==="dark",x=c.useCallback(async()=>{try{const[b,s,u]=await Promise.all([w.getSystemMetrics(),w.getDatabaseStats(),w.getRedisStats()]);l(Array.isArray(b)?null:(b==null?void 0:b.data)||b),m(Array.isArray(s)?null:(s==null?void 0:s.data)||s),j(Array.isArray(u)?null:(u==null?void 0:u.data)||u)}catch(b){console.error("Failed to fetch metrics:",b)}finally{y(!1)}},[]);c.useEffect(()=>{x()},[x]),c.useEffect(()=>{if(h){const b=setInterval(x,5e3);return()=>clearInterval(b)}},[h,x]);const p=b=>{if(!b)return"N/A";const s=b/(1024*1024*1024);return s>=1?`${s.toFixed(2)} GB`:`${(b/(1024*1024)).toFixed(1)} MB`},C=({title:b,value:s,max:u,unit:E,color:$})=>{const S=u?Math.min(s/u*100,100):s;return e.jsxs(k,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:b}),e.jsxs("div",{className:"text-2xl font-bold mb-2",children:[typeof s=="number"?s.toFixed(1):s,E]}),e.jsx("div",{className:`h-2 rounded-full ${a?"bg-gray-700":"bg-gray-200"}`,children:e.jsx("div",{className:`h-full rounded-full transition-all ${S>80?"bg-red-500":S>50?"bg-yellow-500":$||"bg-green-500"}`,style:{width:`${S}%`}})})]})};return f?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(R,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"System Monitoring"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:b=>v(b.target.checked),className:"rounded"}),"Auto-refresh (5s)"]}),e.jsx("button",{onClick:x,className:`p-2 rounded-lg ${a?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(D,{className:`w-5 h-5 ${f?"animate-spin":""}`})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(C,{title:"CPU Usage",value:((n=t==null?void 0:t.cpu)==null?void 0:n.percent)||0,max:100,unit:"%",color:"bg-blue-500"}),e.jsx(C,{title:"Memory Usage",value:((_=t==null?void 0:t.memory)==null?void 0:_.percent)||0,max:100,unit:"%",color:"bg-purple-500"}),e.jsx(C,{title:"Disk Usage",value:((A=t==null?void 0:t.disk)==null?void 0:A.percent)||0,max:100,unit:"%",color:"bg-orange-500"}),e.jsx(C,{title:"Process Memory",value:p((r=t==null?void 0:t.process)==null?void 0:r.memory_rss),max:null,unit:"",color:"bg-green-500"})]}),e.jsxs(k,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Database"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Size:"})," ",p(o==null?void 0:o.database_size_bytes)]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Connections:"})," ",(o==null?void 0:o.active_connections)||0]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Tables:"})," ",((F=o==null?void 0:o.tables)==null?void 0:F.length)||0]})]}),((U=o==null?void 0:o.tables)==null?void 0:U.length)>0&&e.jsx("div",{className:"mt-4 grid gap-2 md:grid-cols-3",children:o.tables.slice(0,6).map(b=>e.jsxs("div",{className:`px-3 py-2 rounded ${a?"bg-gray-800":"bg-gray-100"}`,children:[e.jsx("div",{className:"font-mono text-sm",children:b.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[b.rows," rows"]})]},b.name))})]}),e.jsxs(k,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Redis Cache"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Status:"})," ",d!=null&&d.connected?"ðŸŸ¢ Connected":"ðŸ”´ Disconnected"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Memory:"})," ",(d==null?void 0:d.used_memory)||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Clients:"})," ",(d==null?void 0:d.connected_clients)||0]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Hit Rate:"})," ",d!=null&&d.hit_rate?`${d.hit_rate}%`:"N/A"]})]})]})]})},me=()=>{const[t,l]=c.useState([]),[o,m]=c.useState(!0),[d,j]=c.useState({}),y=I(i=>i.theme.theme)==="dark",h=c.useCallback(async()=>{m(!0);try{const i=await w.getFeatureFlags();l(Array.isArray(i)?i:(i==null?void 0:i.data)||[])}catch(i){console.error("Failed to fetch features:",i),g.error("Failed to load feature flags")}finally{m(!1)}},[]);c.useEffect(()=>{h()},[h]);const v=async(i,a)=>{j(x=>({...x,[i]:!0}));try{await w.toggleFeature(i,!a),g.success(`Feature ${a?"disabled":"enabled"}`),h()}catch{g.error("Failed to toggle feature")}finally{j(x=>({...x,[i]:!1}))}};return o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(R,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Feature Flags"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enable or disable application features"})]}),e.jsx("button",{onClick:h,className:`p-2 rounded-lg ${y?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(D,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.map(i=>e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:i.display_name}),e.jsx("div",{className:"text-sm text-gray-500",children:i.description})]}),e.jsx("button",{onClick:()=>v(i.key,i.enabled),disabled:d[i.key],className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${i.enabled?"bg-green-500":y?"bg-gray-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i.enabled?"translate-x-6":"translate-x-1"}`})})]})},i.key)),t.length===0&&e.jsx(k,{className:"col-span-full text-center py-12 text-gray-500",children:"No feature flags found. Run the database seeder to create default flags."})]})]})},xe=[{id:"health",name:"Health",icon:Z},{id:"users",name:"Users",icon:X},{id:"cache",name:"Cache",icon:ee},{id:"config",name:"Config",icon:se},{id:"instruments",name:"Instruments",icon:B},{id:"apikeys",name:"API Keys",icon:T},{id:"monitoring",name:"Monitoring",icon:B},{id:"features",name:"Features",icon:te},{id:"settings",name:"Settings",icon:W}],Ne=()=>{const t=Q(),l=I(i=>i.auth.user),m=I(i=>i.theme.theme)==="dark",[d,j]=c.useState("health"),[f,y]=c.useState(!0);c.useEffect(()=>{console.log("ðŸ” Admin Page - User data:",{hasUser:!!l,email:l==null?void 0:l.email,role:l==null?void 0:l.role,is_admin:l==null?void 0:l.is_admin})},[l]);const h=(l==null?void 0:l.role)==="admin"||(l==null?void 0:l.role)==="ADMIN",v=!!l&&h;return c.useEffect(()=>{const i=setTimeout(()=>y(!1),300);return()=>clearTimeout(i)},[]),f?e.jsx("div",{className:`min-h-screen flex items-center justify-center ${m?"bg-gray-900":"bg-gray-50"}`,children:e.jsx(R,{size:"lg"})}):l?v?e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx("title",{children:"Admin Panel | DeepStrike"})}),e.jsxs("div",{className:`min-h-screen ${m?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("div",{className:`sticky top-0 z-40 ${m?"bg-gray-800":"bg-white"} border-b ${m?"border-gray-700":"border-gray-200"} shadow-sm`,children:e.jsxs("div",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl",children:e.jsx(W,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Admin Panel"}),e.jsx("p",{className:"text-sm text-gray-500",children:"System Administration"})]})]}),e.jsx("button",{onClick:()=>t("/dashboard"),className:`p-2 rounded-lg ${m?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(P,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-1 scrollbar-hide",children:xe.map(i=>{const a=i.icon;return e.jsxs("button",{onClick:()=>j(i.id),className:`flex items-center space-x-2 px-4 py-2.5 rounded-xl text-sm font-medium whitespace-nowrap transition-all ${d===i.id?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg":`${m?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`}`,children:[e.jsx(a,{className:"w-5 h-5"}),e.jsx("span",{children:i.name})]},i.id)})})]})}),e.jsxs(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-6",children:[d==="health"&&e.jsx(ae,{}),d==="users"&&e.jsx(re,{}),d==="cache"&&e.jsx(ne,{}),d==="config"&&e.jsx(le,{}),d==="instruments"&&e.jsx(ie,{}),d==="apikeys"&&e.jsx(de,{}),d==="monitoring"&&e.jsx(oe,{}),d==="features"&&e.jsx(me,{}),d==="settings"&&e.jsx(ce,{})]},d)]})]}):e.jsx("div",{className:`min-h-screen flex items-center justify-center ${m?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs(k,{className:"text-center p-8 max-w-md",children:[e.jsx(T,{className:"w-16 h-16 mx-auto text-red-500 mb-4"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"You don't have administrator privileges to access this page."}),e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"If you believe this is an error, contact your system administrator."}),e.jsx(M,{onClick:()=>t("/dashboard"),children:"Back to Dashboard"})]})}):e.jsx("div",{className:`min-h-screen flex items-center justify-center ${m?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs(k,{className:"text-center p-8 max-w-md",children:[e.jsx(T,{className:"w-16 h-16 mx-auto text-yellow-500 mb-4"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Login Required"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Please log in to access the admin panel."}),e.jsx(M,{onClick:()=>t("/login"),children:"Go to Login"})]})})};export{Ne as default};
//# sourceMappingURL=Admin-BHBlNGcE.js.map
