{"version":3,"file":"PositionSizing-CDJIJfrd.js","sources":["../../src/components/position/PositionCalculator.jsx","../../src/utils/positionAnalytics.js","../../src/components/position/RiskAnalysis.jsx","../../src/components/position/SuggestedPositions.jsx","../../src/pages/PositionSizing.jsx"],"sourcesContent":["import { useState, useCallback, memo } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { \r\n  ChevronDownIcon, \r\n  ChevronUpIcon,\r\n  ArrowTrendingUpIcon,\r\n  ArrowTrendingDownIcon,\r\n} from '@heroicons/react/24/outline';\r\n\r\n/**\r\n * Enhanced Position Calculator with modern styling\r\n */\r\nconst PositionCalculator = memo(({ setCalculatedPosition, setAnalysisData, isCalculating }) => {\r\n  const theme = useSelector((state) => state.theme.theme);\r\n  const isDark = theme === 'dark';\r\n  \r\n  // Basic Position Sizing\r\n  const [accountSize, setAccountSize] = useState('');\r\n  const [riskPercentage, setRiskPercentage] = useState('1');\r\n  const [entryPrice, setEntryPrice] = useState('');\r\n  const [stopLoss, setStopLoss] = useState('');\r\n  const [targetPrice, setTargetPrice] = useState('');\r\n  \r\n  // Advanced Options\r\n  const [positionType, setPositionType] = useState('long');\r\n  const [leverageUsed, setLeverageUsed] = useState('1');\r\n  const [correlatedPositions, setCorrelatedPositions] = useState('0');\r\n  const [marketVolatility, setMarketVolatility] = useState('medium');\r\n  const [timeFrame, setTimeFrame] = useState('intraday');\r\n  const [portfolioHeatMap, setPortfolioHeatMap] = useState('0');\r\n  const [showAdvanced, setShowAdvanced] = useState(false);\r\n\r\n  // Input styling\r\n  const inputClass = `w-full px-3 py-2 rounded-lg border text-sm transition-all focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 ${\r\n    isDark \r\n      ? 'bg-gray-700/50 border-gray-600 text-white placeholder-gray-400' \r\n      : 'bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400'\r\n  }`;\r\n\r\n  const labelClass = `block text-xs font-medium mb-1.5 ${isDark ? 'text-gray-300' : 'text-gray-600'}`;\r\n\r\n  const selectClass = `w-full px-3 py-2 rounded-lg border text-sm transition-all cursor-pointer ${\r\n    isDark \r\n      ? 'bg-gray-700/50 border-gray-600 text-white' \r\n      : 'bg-gray-50 border-gray-200 text-gray-900'\r\n  }`;\r\n\r\n  const calculatePosition = useCallback(() => {\r\n    if (!accountSize || !entryPrice || !stopLoss) {\r\n      return;\r\n    }\r\n\r\n    const riskAmount = (parseFloat(accountSize) * parseFloat(riskPercentage)) / 100;\r\n    const stopLossDistance = Math.abs(parseFloat(entryPrice) - parseFloat(stopLoss));\r\n    let positionSize = riskAmount / stopLossDistance;\r\n    \r\n    // Apply leverage\r\n    positionSize *= parseFloat(leverageUsed);\r\n    \r\n    // Adjust for market volatility\r\n    const volatilityMultiplier = {\r\n      low: 1.2,\r\n      medium: 1.0,\r\n      high: 0.8\r\n    }[marketVolatility];\r\n    positionSize *= volatilityMultiplier;\r\n\r\n    // Calculate risk metrics\r\n    const potentialLoss = stopLossDistance * positionSize;\r\n    const potentialGain = targetPrice ? \r\n      Math.abs(parseFloat(targetPrice) - parseFloat(entryPrice)) * positionSize : 0;\r\n    const calculatedRR = potentialLoss > 0 ? potentialGain / potentialLoss : 0;\r\n\r\n    // Portfolio heat calculation\r\n    const portfolioHeat = (parseFloat(portfolioHeatMap) + parseFloat(riskPercentage)) / 100;\r\n\r\n    const positionData = {\r\n      positionSize: Math.floor(positionSize * parseFloat(entryPrice)),\r\n      quantity: Math.floor(positionSize),\r\n      totalValue: positionSize * parseFloat(entryPrice),\r\n      maxRisk: riskAmount,\r\n      stopLoss: parseFloat(stopLoss),\r\n      targetProfit: potentialGain,\r\n      riskRewardRatio: calculatedRR,\r\n      leveragedValue: positionSize * parseFloat(entryPrice) * parseFloat(leverageUsed),\r\n    };\r\n\r\n    const analysisData = {\r\n      riskRewardRatio: calculatedRR.toFixed(2),\r\n      portfolioHeat: portfolioHeat.toFixed(2),\r\n      potentialLoss: potentialLoss.toFixed(2),\r\n      potentialGain: potentialGain.toFixed(2),\r\n      volatilityImpact: ((1 - volatilityMultiplier) * 100).toFixed(1),\r\n      correlationRisk: parseFloat(correlatedPositions) > 30 ? 'High' : 'Moderate',\r\n      timeFrameRisk: timeFrame === 'intraday' ? 'Lower' : 'Higher',\r\n      suggestions: []\r\n    };\r\n\r\n    // Generate suggestions\r\n    if (calculatedRR < 2 && calculatedRR > 0) {\r\n      analysisData.suggestions.push('Consider a better entry point for improved R:R ratio');\r\n    }\r\n    if (portfolioHeat > 0.5) {\r\n      analysisData.suggestions.push('High portfolio heat - consider reducing position size');\r\n    }\r\n    if (parseFloat(leverageUsed) > 2) {\r\n      analysisData.suggestions.push('High leverage - monitor position closely');\r\n    }\r\n\r\n    setCalculatedPosition(positionData);\r\n    setAnalysisData(analysisData);\r\n  }, [accountSize, riskPercentage, entryPrice, stopLoss, targetPrice, leverageUsed, \r\n      marketVolatility, correlatedPositions, portfolioHeatMap, timeFrame, \r\n      setCalculatedPosition, setAnalysisData]);\r\n\r\n  const isValid = accountSize && entryPrice && stopLoss;\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Position Type Toggle */}\r\n      <div className=\"flex rounded-lg overflow-hidden border ${isDark ? 'border-gray-600' : 'border-gray-200'}\">\r\n        <button\r\n          onClick={() => setPositionType('long')}\r\n          className={`flex-1 flex items-center justify-center gap-2 py-2 text-sm font-medium transition-all ${\r\n            positionType === 'long'\r\n              ? 'bg-green-500 text-white'\r\n              : isDark ? 'bg-gray-700 text-gray-400 hover:bg-gray-600' : 'bg-gray-100 text-gray-500 hover:bg-gray-200'\r\n          }`}\r\n        >\r\n          <ArrowTrendingUpIcon className=\"w-4 h-4\" />\r\n          Long\r\n        </button>\r\n        <button\r\n          onClick={() => setPositionType('short')}\r\n          className={`flex-1 flex items-center justify-center gap-2 py-2 text-sm font-medium transition-all ${\r\n            positionType === 'short'\r\n              ? 'bg-red-500 text-white'\r\n              : isDark ? 'bg-gray-700 text-gray-400 hover:bg-gray-600' : 'bg-gray-100 text-gray-500 hover:bg-gray-200'\r\n          }`}\r\n        >\r\n          <ArrowTrendingDownIcon className=\"w-4 h-4\" />\r\n          Short\r\n        </button>\r\n      </div>\r\n\r\n      {/* Basic Fields */}\r\n      <div className=\"space-y-3\">\r\n        <div>\r\n          <label className={labelClass}>Account Size (₹)</label>\r\n          <input\r\n            type=\"number\"\r\n            value={accountSize}\r\n            onChange={(e) => setAccountSize(e.target.value)}\r\n            className={inputClass}\r\n            placeholder=\"e.g. 100000\"\r\n          />\r\n        </div>\r\n        \r\n        <div>\r\n          <label className={labelClass}>Risk Per Trade (%)</label>\r\n          <div className=\"flex gap-2\">\r\n            {['0.5', '1', '2', '3'].map((val) => (\r\n              <button\r\n                key={val}\r\n                onClick={() => setRiskPercentage(val)}\r\n                className={`flex-1 py-1.5 text-xs font-medium rounded-lg transition-all ${\r\n                  riskPercentage === val\r\n                    ? 'bg-blue-500 text-white'\r\n                    : isDark ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                }`}\r\n              >\r\n                {val}%\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <div>\r\n            <label className={labelClass}>Entry (₹)</label>\r\n            <input\r\n              type=\"number\"\r\n              value={entryPrice}\r\n              onChange={(e) => setEntryPrice(e.target.value)}\r\n              className={inputClass}\r\n              placeholder=\"Entry\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className={labelClass}>Stop Loss (₹)</label>\r\n            <input\r\n              type=\"number\"\r\n              value={stopLoss}\r\n              onChange={(e) => setStopLoss(e.target.value)}\r\n              className={inputClass}\r\n              placeholder=\"SL\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label className={labelClass}>Target (₹)</label>\r\n          <input\r\n            type=\"number\"\r\n            value={targetPrice}\r\n            onChange={(e) => setTargetPrice(e.target.value)}\r\n            className={inputClass}\r\n            placeholder=\"Target price (optional)\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Advanced Options Toggle */}\r\n      <button\r\n        onClick={() => setShowAdvanced(!showAdvanced)}\r\n        className={`w-full flex items-center justify-between py-2 px-3 rounded-lg text-sm font-medium transition-all ${\r\n          isDark ? 'bg-gray-700/50 text-gray-300 hover:bg-gray-700' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n        }`}\r\n      >\r\n        <span>Advanced Options</span>\r\n        {showAdvanced ? <ChevronUpIcon className=\"w-4 h-4\" /> : <ChevronDownIcon className=\"w-4 h-4\" />}\r\n      </button>\r\n\r\n      {/* Advanced Options */}\r\n      <AnimatePresence>\r\n        {showAdvanced && (\r\n          <motion.div\r\n            initial={{ height: 0, opacity: 0 }}\r\n            animate={{ height: 'auto', opacity: 1 }}\r\n            exit={{ height: 0, opacity: 0 }}\r\n            transition={{ duration: 0.2 }}\r\n            className=\"overflow-hidden\"\r\n          >\r\n            <div className=\"space-y-3 pt-2\">\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                <div>\r\n                  <label className={labelClass}>Leverage</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={leverageUsed}\r\n                    onChange={(e) => setLeverageUsed(e.target.value)}\r\n                    className={inputClass}\r\n                    placeholder=\"1x\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className={labelClass}>Volatility</label>\r\n                  <select\r\n                    value={marketVolatility}\r\n                    onChange={(e) => setMarketVolatility(e.target.value)}\r\n                    className={selectClass}\r\n                  >\r\n                    <option value=\"low\">Low</option>\r\n                    <option value=\"medium\">Medium</option>\r\n                    <option value=\"high\">High</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className={labelClass}>Time Frame</label>\r\n                <div className=\"flex gap-2\">\r\n                  {['intraday', 'swing', 'positional'].map((tf) => (\r\n                    <button\r\n                      key={tf}\r\n                      onClick={() => setTimeFrame(tf)}\r\n                      className={`flex-1 py-1.5 text-xs font-medium rounded-lg capitalize transition-all ${\r\n                        timeFrame === tf\r\n                          ? 'bg-blue-500 text-white'\r\n                          : isDark ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                      }`}\r\n                    >\r\n                      {tf}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                <div>\r\n                  <label className={labelClass}>Correlation %</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={correlatedPositions}\r\n                    onChange={(e) => setCorrelatedPositions(e.target.value)}\r\n                    className={inputClass}\r\n                    placeholder=\"0\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className={labelClass}>Portfolio Heat %</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={portfolioHeatMap}\r\n                    onChange={(e) => setPortfolioHeatMap(e.target.value)}\r\n                    className={inputClass}\r\n                    placeholder=\"0\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Calculate Button */}\r\n      <button\r\n        onClick={calculatePosition}\r\n        disabled={!isValid || isCalculating}\r\n        className={`w-full py-2.5 px-4 rounded-xl font-semibold text-sm transition-all ${\r\n          isValid && !isCalculating\r\n            ? 'bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg shadow-blue-500/25'\r\n            : isDark ? 'bg-gray-700 text-gray-500 cursor-not-allowed' : 'bg-gray-200 text-gray-400 cursor-not-allowed'\r\n        }`}\r\n      >\r\n        {isCalculating ? 'Calculating...' : 'Calculate Position'}\r\n      </button>\r\n    </div>\r\n  );\r\n});\r\n\r\nPositionCalculator.displayName = 'PositionCalculator';\r\n\r\nexport default PositionCalculator;\r\n","// Advanced Position Sizing Analytics\r\n\r\n// Kelly Criterion calculation\r\nexport const calculateKellyCriterion = (winRate, riskRewardRatio) => {\r\n    const winProbability = winRate / 100;\r\n    const lossProbability = 1 - winProbability;\r\n    const kelly = (winProbability * riskRewardRatio - lossProbability) / riskRewardRatio;\r\n    return Math.max(0, kelly); // Never suggest negative position sizes\r\n};\r\n\r\n// Optimal position size based on market conditions\r\nexport const calculateOptimalPosition = (baseSize, marketConditions) => {\r\n    const {\r\n        volatility,      // market volatility (low: 0.8, medium: 1, high: 1.2)\r\n        trend,          // market trend strength (0 to 1)\r\n        liquidity,      // market liquidity (0 to 1)\r\n        correlation     // correlation with other positions (0 to 1)\r\n    } = marketConditions;\r\n\r\n    let multiplier = 1;\r\n\r\n    // Adjust for volatility\r\n    multiplier *= (2 - volatility);\r\n\r\n    // Adjust for trend alignment\r\n    multiplier *= (1 + trend * 0.2);\r\n\r\n    // Adjust for liquidity\r\n    multiplier *= liquidity;\r\n\r\n    // Reduce size for high correlation\r\n    multiplier *= (1 - correlation * 0.3);\r\n\r\n    return baseSize * multiplier;\r\n};\r\n\r\n// Risk metrics calculation\r\nexport const calculateRiskMetrics = (position, marketData) => {\r\n    const {\r\n        price,\r\n        stopLoss,\r\n        _target,\r\n        volatility,\r\n        volume\r\n    } = marketData;\r\n\r\n    // Calculate Average True Range (ATR) based volatility\r\n    const atrMultiplier = volatility === 'high' ? 2 : volatility === 'medium' ? 1.5 : 1;\r\n    const normalizedRange = Math.abs(price - stopLoss) * atrMultiplier;\r\n\r\n    // Calculate volume-based liquidity risk\r\n    const liquidityRisk = volume < 100000 ? 'high' : volume < 500000 ? 'medium' : 'low';\r\n\r\n    // Calculate position impact\r\n    const positionImpact = (position.quantity * price) / volume;\r\n\r\n    return {\r\n        volatilityRisk: normalizedRange / price,\r\n        liquidityRisk,\r\n        positionImpact,\r\n        slippageEstimate: calculateSlippage(positionImpact, liquidityRisk)\r\n    };\r\n};\r\n\r\n// Slippage estimation\r\nconst calculateSlippage = (positionImpact, liquidityRisk) => {\r\n    const baseSlippage = positionImpact * 100; // Base slippage in percentage\r\n    const liquidityMultiplier = {\r\n        'high': 2,\r\n        'medium': 1.5,\r\n        'low': 1\r\n    }[liquidityRisk];\r\n\r\n    return baseSlippage * liquidityMultiplier;\r\n};\r\n\r\n// Monte Carlo simulation for risk assessment\r\nexport const runMonteCarloSimulation = (position, marketData, iterations = 1000) => {\r\n    const results = [];\r\n    const { price, volatility, target, stopLoss } = marketData;\r\n    const dailyVolatility = volatility === 'high' ? 0.02 : volatility === 'medium' ? 0.015 : 0.01;\r\n\r\n    for (let i = 0; i < iterations; i++) {\r\n        let currentPrice = price;\r\n        let days = 0;\r\n\r\n        while (currentPrice > stopLoss && currentPrice < target && days < 20) {\r\n            // Random walk with drift\r\n            const drift = (target - price) / (price * 100); // Slight bias towards target\r\n            const randomMove = (Math.random() - 0.5) * dailyVolatility;\r\n            currentPrice *= (1 + randomMove + drift);\r\n            days++;\r\n        }\r\n\r\n        results.push({\r\n            finalPrice: currentPrice,\r\n            days,\r\n            outcome: currentPrice >= target ? 'win' : 'loss'\r\n        });\r\n    }\r\n\r\n    return analyzeMonteCarloResults(results);\r\n};\r\n\r\n// Analyze Monte Carlo simulation results\r\nconst analyzeMonteCarloResults = (results) => {\r\n    const wins = results.filter(r => r.outcome === 'win');\r\n    const winRate = (wins.length / results.length) * 100;\r\n    const avgDays = results.reduce((sum, r) => sum + r.days, 0) / results.length;\r\n\r\n    return {\r\n        winProbability: winRate.toFixed(2),\r\n        averageDaysToOutcome: avgDays.toFixed(1),\r\n        confidenceScore: calculateConfidenceScore(winRate, avgDays)\r\n    };\r\n};\r\n\r\n// Calculate confidence score for the trade\r\nconst calculateConfidenceScore = (winRate, avgDays) => {\r\n    // Higher win rate and lower duration = better confidence\r\n    const winRateScore = winRate / 100;\r\n    const durationScore = Math.max(0, 1 - (avgDays / 20)); // Normalize to 0-1 range\r\n    return ((winRateScore * 0.7) + (durationScore * 0.3)) * 100;\r\n};\r\n\r\n// Generate advanced trading suggestions\r\nexport const generateTradingSuggestions = (position, analysis, marketData) => {\r\n    const suggestions = [];\r\n    const { riskRewardRatio, portfolioHeat, volatilityImpact } = analysis;\r\n    const { volatility, trend, volume } = marketData;\r\n\r\n    // Risk:Reward Analysis\r\n    if (riskRewardRatio < 1.5) {\r\n        suggestions.push({\r\n            type: 'warning',\r\n            message: 'Risk:Reward ratio is below recommended minimum of 1.5:1',\r\n            action: 'Consider adjusting entry price or target to improve R:R ratio'\r\n        });\r\n    }\r\n\r\n    // Portfolio Heat Analysis\r\n    if (portfolioHeat > 0.4) {\r\n        suggestions.push({\r\n            type: 'danger',\r\n            message: 'High portfolio heat detected',\r\n            action: 'Reduce position size or hedge existing positions'\r\n        });\r\n    }\r\n\r\n    // Volatility-based Suggestions\r\n    if (volatility === 'high' && volatilityImpact > 15) {\r\n        suggestions.push({\r\n            type: 'info',\r\n            message: 'High market volatility detected',\r\n            action: 'Consider using options strategies or scaling in gradually'\r\n        });\r\n    }\r\n\r\n    // Volume Analysis\r\n    if (volume < position.quantity * 100) {\r\n        suggestions.push({\r\n            type: 'warning',\r\n            message: 'Position size may impact market liquidity',\r\n            action: 'Consider breaking up the order or using TWAP/VWAP'\r\n        });\r\n    }\r\n\r\n    // Trend Analysis\r\n    if (trend === 'weak' && position.type === 'long') {\r\n        suggestions.push({\r\n            type: 'info',\r\n            message: 'Weak market trend for long position',\r\n            action: 'Consider waiting for trend confirmation or reducing size'\r\n        });\r\n    }\r\n\r\n    return suggestions;\r\n};\r\n\r\n// Calculate optimal entry points\r\nexport const calculateOptimalEntries = (position, marketData) => {\r\n    const { price, volatility, volume: _volume } = marketData;\r\n    const volatilityFactor = volatility === 'high' ? 0.02 : volatility === 'medium' ? 0.015 : 0.01;\r\n\r\n    return {\r\n        conservative: {\r\n            price: price * (1 - volatilityFactor),\r\n            size: Math.floor(position.quantity * 0.4),\r\n            conditions: 'Market volatility decrease or support level test'\r\n        },\r\n        moderate: {\r\n            price: price,\r\n            size: Math.floor(position.quantity * 0.3),\r\n            conditions: 'Current market price with volume confirmation'\r\n        },\r\n        aggressive: {\r\n            price: price * (1 + volatilityFactor),\r\n            size: Math.floor(position.quantity * 0.3),\r\n            conditions: 'Momentum confirmation or breakout'\r\n        }\r\n    };\r\n};\r\n","import { useState, memo, useMemo } from 'react';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n} from 'chart.js';\r\nimport { \r\n  ChartBarIcon, \r\n  SparklesIcon, \r\n  LightBulbIcon,\r\n  ExclamationTriangleIcon,\r\n  CheckCircleIcon,\r\n  InformationCircleIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { runMonteCarloSimulation, calculateRiskMetrics, generateTradingSuggestions } from '../../utils/positionAnalytics';\r\n\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\r\n\r\n/**\r\n * Enhanced Risk Analysis Component with glass-morphism styling\r\n */\r\nconst RiskAnalysis = memo(({ calculatedPosition, analysisData = {}, theme }) => {\r\n  const [selectedTab, setSelectedTab] = useState('overview');\r\n  const isDark = theme === 'dark';\r\n  const safeAnalysisData = useMemo(() => analysisData || {}, [analysisData]);\r\n  \r\n  // Memoize market data and calculations\r\n  const { simulationResults, riskMetrics, tradingSuggestions, marketData } = useMemo(() => {\r\n    const mktData = {\r\n      price: calculatedPosition.entryPrice,\r\n      stopLoss: calculatedPosition.stopLoss,\r\n      target: calculatedPosition.targetPrice,\r\n      volatility: safeAnalysisData.volatilityLevel || 'medium',\r\n      volume: 500000\r\n    };\r\n    \r\n    return {\r\n      marketData: mktData,\r\n      simulationResults: runMonteCarloSimulation(calculatedPosition, mktData),\r\n      riskMetrics: calculateRiskMetrics(calculatedPosition, mktData),\r\n      tradingSuggestions: generateTradingSuggestions(calculatedPosition, safeAnalysisData, mktData)\r\n    };\r\n  }, [calculatedPosition, safeAnalysisData]);\r\n\r\n  // Chart configurations\r\n  const chartOptions = useMemo(() => ({\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: { display: false },\r\n      tooltip: {\r\n        backgroundColor: isDark ? '#1f2937' : '#ffffff',\r\n        titleColor: isDark ? '#fff' : '#111',\r\n        bodyColor: isDark ? '#9ca3af' : '#666',\r\n        borderColor: isDark ? '#374151' : '#e5e7eb',\r\n        borderWidth: 1,\r\n        callbacks: {\r\n          label: (ctx) => typeof ctx.raw === 'number' ? `₹${ctx.raw.toFixed(2)}` : `${ctx.raw}%`\r\n        }\r\n      }\r\n    },\r\n    scales: {\r\n      y: {\r\n        beginAtZero: true,\r\n        grid: { color: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)' },\r\n        ticks: { color: isDark ? '#9ca3af' : '#6b7280' }\r\n      },\r\n      x: {\r\n        grid: { display: false },\r\n        ticks: { color: isDark ? '#9ca3af' : '#6b7280', font: { size: 10 } }\r\n      }\r\n    }\r\n  }), [isDark]);\r\n\r\n  const positionChartData = useMemo(() => ({\r\n    labels: ['Position', 'Risk', 'Gain', 'Loss'],\r\n    datasets: [{\r\n      data: [\r\n        calculatedPosition.totalValue || 0,\r\n        calculatedPosition.riskAmount || 0,\r\n        parseFloat(safeAnalysisData.potentialGain) || 0,\r\n        parseFloat(safeAnalysisData.potentialLoss) || 0\r\n      ],\r\n      backgroundColor: ['rgba(59,130,246,0.7)', 'rgba(239,68,68,0.7)', 'rgba(34,197,94,0.7)', 'rgba(249,115,22,0.7)'],\r\n      borderRadius: 6\r\n    }]\r\n  }), [calculatedPosition, safeAnalysisData]);\r\n\r\n  const tabs = [\r\n    { id: 'overview', label: 'Overview', icon: ChartBarIcon },\r\n    { id: 'simulation', label: 'Monte Carlo', icon: SparklesIcon },\r\n    { id: 'suggestions', label: 'Insights', icon: LightBulbIcon },\r\n  ];\r\n\r\n  return (\r\n    <div className={`rounded-2xl border backdrop-blur-sm ${\r\n      isDark ? 'bg-gray-800/50 border-gray-700' : 'bg-white/80 border-gray-200 shadow-lg'\r\n    }`}>\r\n      {/* Header with Tabs */}\r\n      <div className={`px-5 py-3 border-b flex items-center gap-4 ${isDark ? 'border-gray-700' : 'border-gray-200'}`}>\r\n        <h3 className=\"font-semibold flex items-center gap-2\">\r\n          <ChartBarIcon className={`w-5 h-5 ${isDark ? 'text-blue-400' : 'text-blue-600'}`} />\r\n          Risk Analysis\r\n        </h3>\r\n        <div className=\"flex-1\" />\r\n        <div className=\"flex rounded-lg overflow-hidden border ${isDark ? 'border-gray-600' : 'border-gray-200'}\">\r\n          {tabs.map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setSelectedTab(tab.id)}\r\n              className={`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium transition-all ${\r\n                selectedTab === tab.id\r\n                  ? 'bg-blue-500 text-white'\r\n                  : isDark ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n              }`}\r\n            >\r\n              <tab.icon className=\"w-3.5 h-3.5\" />\r\n              {tab.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"p-5\">\r\n        <AnimatePresence mode=\"wait\">\r\n          {selectedTab === 'overview' && (\r\n            <motion.div\r\n              key=\"overview\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n            >\r\n              {/* Key Metrics */}\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-5\">\r\n                {[\r\n                  { label: 'Position Size', value: `${calculatedPosition.quantity || 0} units` },\r\n                  { label: 'Risk:Reward', value: safeAnalysisData.riskRewardRatio },\r\n                  { label: 'Portfolio Heat', value: `${safeAnalysisData.portfolioHeat}%` },\r\n                  { label: 'Vol. Impact', value: `${safeAnalysisData.volatilityImpact}%` },\r\n                ].map((metric) => (\r\n                  <div key={metric.label} className={`p-3 rounded-xl ${isDark ? 'bg-gray-700/50' : 'bg-gray-50'}`}>\r\n                    <p className={`text-xs ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>{metric.label}</p>\r\n                    <p className=\"text-lg font-bold\">{metric.value}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Chart */}\r\n              <div className=\"h-48 mb-5\">\r\n                <Bar data={positionChartData} options={chartOptions} />\r\n              </div>\r\n\r\n              {/* Risk Metrics */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className={`p-4 rounded-xl ${isDark ? 'bg-gray-700/50' : 'bg-gray-50'}`}>\r\n                  <h4 className=\"text-sm font-medium mb-3\">Market Risk</h4>\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <MetricRow label=\"Volatility Risk\" value={`${(riskMetrics.volatilityRisk * 100).toFixed(1)}%`} isDark={isDark} />\r\n                    <MetricRow label=\"Liquidity Risk\" value={riskMetrics.liquidityRisk} status={riskMetrics.liquidityRisk} isDark={isDark} />\r\n                    <MetricRow label=\"Position Impact\" value={`${(riskMetrics.positionImpact * 100).toFixed(2)}%`} isDark={isDark} />\r\n                    <MetricRow label=\"Est. Slippage\" value={`${riskMetrics.slippageEstimate.toFixed(2)}%`} isDark={isDark} />\r\n                  </div>\r\n                </div>\r\n                <div className={`p-4 rounded-xl ${isDark ? 'bg-gray-700/50' : 'bg-gray-50'}`}>\r\n                  <h4 className=\"text-sm font-medium mb-3\">Position Risk</h4>\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <MetricRow label=\"Correlation Risk\" value={safeAnalysisData.correlationRisk} isDark={isDark} />\r\n                    <MetricRow label=\"Time Frame Risk\" value={safeAnalysisData.timeFrameRisk} isDark={isDark} />\r\n                    <MetricRow label=\"Market Condition\" value={marketData.volatility} isDark={isDark} />\r\n                    <MetricRow label=\"Risk Score\" value={`${simulationResults.confidenceScore?.toFixed(1) || 0}%`} \r\n                      status={simulationResults.confidenceScore > 70 ? 'low' : simulationResults.confidenceScore > 50 ? 'medium' : 'high'} isDark={isDark} />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n\r\n          {selectedTab === 'simulation' && (\r\n            <motion.div\r\n              key=\"simulation\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              className=\"space-y-5\"\r\n            >\r\n              <div className=\"grid grid-cols-3 gap-3\">\r\n                {[\r\n                  { label: 'Win Probability', value: `${simulationResults.winProbability}%`, color: 'green' },\r\n                  { label: 'Avg Days', value: `${simulationResults.averageDaysToOutcome} days`, color: 'blue' },\r\n                  { label: 'Confidence', value: `${simulationResults.confidenceScore}%`, color: 'purple' },\r\n                ].map((stat) => (\r\n                  <div key={stat.label} className={`p-4 rounded-xl text-center ${isDark ? 'bg-gray-700/50' : 'bg-gray-50'}`}>\r\n                    <p className={`text-xs mb-1 ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>{stat.label}</p>\r\n                    <p className={`text-xl font-bold text-${stat.color}-500`}>{stat.value}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <div className={`p-4 rounded-xl ${isDark ? 'bg-gray-700/50' : 'bg-gray-50'}`}>\r\n                <h4 className=\"text-sm font-medium mb-2\">Simulation Details</h4>\r\n                <ul className={`text-xs space-y-1 ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                  <li>• Based on {marketData.volatility} market volatility</li>\r\n                  <li>• 1000 Monte Carlo iterations</li>\r\n                  <li>• Maximum 20-day simulation period</li>\r\n                  <li>• Includes market drift and random walk</li>\r\n                </ul>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n\r\n          {selectedTab === 'suggestions' && (\r\n            <motion.div\r\n              key=\"suggestions\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              className=\"space-y-3\"\r\n            >\r\n              {tradingSuggestions.length > 0 ? tradingSuggestions.map((suggestion, i) => (\r\n                <div key={i} className={`p-4 rounded-xl border-l-4 ${\r\n                  suggestion.type === 'danger' ? 'border-red-500' : \r\n                  suggestion.type === 'warning' ? 'border-amber-500' : 'border-blue-500'\r\n                } ${isDark ? 'bg-gray-700/50' : 'bg-gray-50'}`}>\r\n                  <div className=\"flex items-start gap-2\">\r\n                    {suggestion.type === 'danger' ? <ExclamationTriangleIcon className=\"w-5 h-5 text-red-500 flex-shrink-0\" /> :\r\n                     suggestion.type === 'warning' ? <InformationCircleIcon className=\"w-5 h-5 text-amber-500 flex-shrink-0\" /> :\r\n                     <CheckCircleIcon className=\"w-5 h-5 text-blue-500 flex-shrink-0\" />}\r\n                    <div>\r\n                      <p className=\"font-medium text-sm\">{suggestion.message}</p>\r\n                      <p className={`text-xs mt-1 ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>{suggestion.action}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )) : (\r\n                <div className={`p-6 text-center rounded-xl ${isDark ? 'bg-gray-700/50' : 'bg-gray-50'}`}>\r\n                  <CheckCircleIcon className=\"w-10 h-10 mx-auto text-green-500 mb-2\" />\r\n                  <p className=\"font-medium\">Position looks good!</p>\r\n                  <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>No significant risk warnings</p>\r\n                </div>\r\n              )}\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nRiskAnalysis.displayName = 'RiskAnalysis';\r\n\r\n/**\r\n * Metric Row Helper\r\n */\r\nconst MetricRow = memo(({ label, value, status, isDark }) => {\r\n  const statusColors = {\r\n    high: 'text-red-500',\r\n    medium: 'text-amber-500',\r\n    low: 'text-green-500',\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex justify-between\">\r\n      <span className={isDark ? 'text-gray-400' : 'text-gray-500'}>{label}</span>\r\n      <span className={status ? statusColors[status] || '' : ''}>{value}</span>\r\n    </div>\r\n  );\r\n});\r\n\r\nMetricRow.displayName = 'MetricRow';\r\n\r\nexport default RiskAnalysis;\r\n","import { memo, useMemo } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { \r\n  ShieldCheckIcon, \r\n  ScaleIcon, \r\n  BoltIcon,\r\n  SparklesIcon,\r\n} from '@heroicons/react/24/outline';\r\n\r\n/**\r\n * Enhanced Suggested Positions with glass-morphism styling\r\n */\r\nconst SuggestedPositions = memo(({ calculatedPosition, analysisData = {}, theme }) => {\r\n  const isDark = theme === 'dark';\r\n  const safeAnalysisData = useMemo(() => analysisData || {}, [analysisData]);\r\n\r\n  // Memoize alternative calculations\r\n  const alternatives = useMemo(() => {\r\n    const qty = calculatedPosition.quantity || 0;\r\n    const risk = calculatedPosition.riskAmount || 0;\r\n    const gain = parseFloat(safeAnalysisData.potentialGain) || 0;\r\n    const volImpact = parseFloat(safeAnalysisData.volatilityImpact) || 0;\r\n\r\n    return {\r\n      conservative: {\r\n        quantity: Math.floor(qty * 0.75),\r\n        risk: (risk * 0.75).toFixed(2),\r\n        potential: (gain * 0.75).toFixed(2)\r\n      },\r\n      calculated: {\r\n        quantity: qty,\r\n        risk: risk.toFixed(2),\r\n        potential: gain.toFixed(2)\r\n      },\r\n      aggressive: {\r\n        quantity: Math.floor(qty * 1.25),\r\n        risk: (risk * 1.25).toFixed(2),\r\n        potential: (gain * 1.25).toFixed(2)\r\n      },\r\n      scaled: {\r\n        quantity: Math.floor(qty * (1 - volImpact / 100)),\r\n        risk: (risk * (1 - volImpact / 100)).toFixed(2),\r\n        potential: (gain * (1 - volImpact / 100)).toFixed(2)\r\n      }\r\n    };\r\n  }, [calculatedPosition, safeAnalysisData]);\r\n\r\n  const positionCards = [\r\n    {\r\n      type: 'conservative',\r\n      label: 'Conservative',\r\n      icon: ShieldCheckIcon,\r\n      color: 'green',\r\n      badge: 'Lower Risk',\r\n      ...alternatives.conservative\r\n    },\r\n    {\r\n      type: 'calculated',\r\n      label: 'Calculated',\r\n      icon: ScaleIcon,\r\n      color: 'blue',\r\n      badge: 'Balanced',\r\n      isMain: true,\r\n      ...alternatives.calculated\r\n    },\r\n    {\r\n      type: 'aggressive',\r\n      label: 'Aggressive',\r\n      icon: BoltIcon,\r\n      color: 'red',\r\n      badge: 'Higher Risk',\r\n      ...alternatives.aggressive\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className={`rounded-2xl border backdrop-blur-sm ${\r\n      isDark ? 'bg-gray-800/50 border-gray-700' : 'bg-white/80 border-gray-200 shadow-lg'\r\n    }`}>\r\n      {/* Header */}\r\n      <div className={`px-5 py-3 border-b flex items-center gap-2 ${isDark ? 'border-gray-700' : 'border-gray-200'}`}>\r\n        <ScaleIcon className={`w-5 h-5 ${isDark ? 'text-purple-400' : 'text-purple-600'}`} />\r\n        <h3 className=\"font-semibold\">Alternative Positions</h3>\r\n      </div>\r\n\r\n      {/* Cards Grid */}\r\n      <div className=\"p-5\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\r\n          {positionCards.map((card, index) => (\r\n            <motion.div\r\n              key={card.type}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: index * 0.1 }}\r\n              className={`relative p-4 rounded-xl ${\r\n                card.isMain \r\n                  ? 'ring-2 ring-blue-500 ' + (isDark ? 'bg-blue-500/10' : 'bg-blue-50')\r\n                  : isDark ? 'bg-gray-700/50' : 'bg-gray-50'\r\n              }`}\r\n            >\r\n              {/* Header */}\r\n              <div className=\"flex items-center justify-between mb-3\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <card.icon className={`w-4 h-4 text-${card.color}-500`} />\r\n                  <span className=\"font-medium text-sm\">{card.label}</span>\r\n                </div>\r\n                <span className={`text-[10px] px-2 py-0.5 rounded-full font-medium ${\r\n                  card.color === 'green' ? 'bg-green-500/20 text-green-500' :\r\n                  card.color === 'blue' ? 'bg-blue-500/20 text-blue-500' :\r\n                  'bg-red-500/20 text-red-500'\r\n                }`}>\r\n                  {card.badge}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Metrics */}\r\n              <div className=\"space-y-2\">\r\n                <MetricLine label=\"Quantity\" value={card.quantity} isDark={isDark} />\r\n                <MetricLine label=\"Risk\" value={`₹${card.risk}`} isDark={isDark} />\r\n                <MetricLine label=\"Potential\" value={`₹${card.potential}`} isDark={isDark} color=\"green\" />\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Volatility Adjusted */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.3 }}\r\n          className={`p-4 rounded-xl ${isDark ? 'bg-purple-500/10 border border-purple-500/30' : 'bg-purple-50 border border-purple-200'}`}\r\n        >\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <SparklesIcon className=\"w-4 h-4 text-purple-500\" />\r\n              <span className=\"font-medium text-sm\">Volatility Adjusted</span>\r\n            </div>\r\n            <span className=\"text-[10px] px-2 py-0.5 rounded-full font-medium bg-purple-500/20 text-purple-500\">\r\n              Market Adapted\r\n            </span>\r\n          </div>\r\n          <div className=\"grid grid-cols-3 gap-4\">\r\n            <MetricLine label=\"Quantity\" value={alternatives.scaled.quantity} isDark={isDark} />\r\n            <MetricLine label=\"Risk\" value={`₹${alternatives.scaled.risk}`} isDark={isDark} />\r\n            <MetricLine label=\"Potential\" value={`₹${alternatives.scaled.potential}`} isDark={isDark} color=\"green\" />\r\n          </div>\r\n          <p className={`text-xs mt-2 ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n            * Adjusted for current market volatility of {safeAnalysisData.volatilityImpact || 0}%\r\n          </p>\r\n        </motion.div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nSuggestedPositions.displayName = 'SuggestedPositions';\r\n\r\n/**\r\n * Metric Line Helper\r\n */\r\nconst MetricLine = memo(({ label, value, isDark, color }) => (\r\n  <div className=\"flex justify-between text-sm\">\r\n    <span className={isDark ? 'text-gray-400' : 'text-gray-500'}>{label}</span>\r\n    <span className={`font-semibold ${color === 'green' ? 'text-green-500' : ''}`}>{value}</span>\r\n  </div>\r\n));\r\n\r\nMetricLine.displayName = 'MetricLine';\r\n\r\nexport default SuggestedPositions;\r\n","import { useState, useEffect, useMemo, useCallback, memo } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport {\r\n  CalculatorIcon,\r\n  ChartBarIcon,\r\n  ScaleIcon,\r\n  ExclamationTriangleIcon,\r\n  ArrowTrendingUpIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport PositionCalculator from '../components/position/PositionCalculator';\r\nimport RiskAnalysis from '../components/position/RiskAnalysis';\r\nimport SuggestedPositions from '../components/position/SuggestedPositions';\r\n\r\n/**\r\n * Professional Position Sizing Page\r\n * Features: Glass-morphism design, animated transitions, key metrics display\r\n */\r\nconst PositionSizing = () => {\r\n  const theme = useSelector((state) => state.theme.theme);\r\n  const [calculatedPosition, setCalculatedPosition] = useState(null);\r\n  const [analysisData, setAnalysisData] = useState(null);\r\n  const [isCalculating, setIsCalculating] = useState(false);\r\n  \r\n  const isDark = theme === 'dark';\r\n\r\n  useEffect(() => {\r\n    document.title = 'DeepStrike | Position Sizing Calculator';\r\n  }, []);\r\n\r\n  // Memoized key metrics from calculated position\r\n  const keyMetrics = useMemo(() => {\r\n    if (!calculatedPosition) return null;\r\n    return {\r\n      positionSize: calculatedPosition.positionSize || 0,\r\n      maxRisk: calculatedPosition.maxRisk || 0,\r\n      stopLoss: calculatedPosition.stopLoss || 0,\r\n      targetProfit: calculatedPosition.targetProfit || 0,\r\n      riskRewardRatio: calculatedPosition.riskRewardRatio || 0,\r\n    };\r\n  }, [calculatedPosition]);\r\n\r\n  // Handle calculation with loading state\r\n  const handleCalculate = useCallback((position, analysis) => {\r\n    setIsCalculating(true);\r\n    // Simulate brief calculation time for smooth UX\r\n    setTimeout(() => {\r\n      setCalculatedPosition(position);\r\n      setAnalysisData(analysis);\r\n      setIsCalculating(false);\r\n    }, 300);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Position Sizing | DeepStrike</title>\r\n        <meta name=\"description\" content=\"Professional position sizing calculator with risk management tools\" />\r\n      </Helmet>\r\n\r\n      <div className={`min-h-screen transition-colors duration-300 ${\r\n        isDark ? 'text-white' : 'text-gray-900'\r\n      }`}>\r\n        \r\n        {/* Compact Header */}\r\n        <div className={`sticky top-0 z-10 backdrop-blur-md border-b ${\r\n          isDark ? 'bg-gray-900/90 border-gray-800' : 'bg-white/90 border-gray-200'\r\n        }`}>\r\n          <div className=\"max-w-7xl mx-auto px-4 py-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className={`p-2 rounded-xl ${isDark ? 'bg-blue-500/20' : 'bg-blue-100'}`}>\r\n                  <CalculatorIcon className={`w-6 h-6 ${isDark ? 'text-blue-400' : 'text-blue-600'}`} />\r\n                </div>\r\n                <div>\r\n                  <h1 className=\"text-xl font-bold\">Position Sizing</h1>\r\n                  <p className={`text-xs ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                    Risk-based position calculator\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Quick Metrics */}\r\n              {keyMetrics && (\r\n                <motion.div \r\n                  initial={{ opacity: 0, x: 20 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  className=\"hidden md:flex items-center gap-4\"\r\n                >\r\n                  <MetricBadge \r\n                    label=\"Position\" \r\n                    value={`₹${keyMetrics.positionSize.toLocaleString()}`}\r\n                    icon={ScaleIcon}\r\n                    color=\"blue\"\r\n                    isDark={isDark}\r\n                  />\r\n                  <MetricBadge \r\n                    label=\"Risk\" \r\n                    value={`₹${keyMetrics.maxRisk.toLocaleString()}`}\r\n                    icon={ExclamationTriangleIcon}\r\n                    color=\"red\"\r\n                    isDark={isDark}\r\n                  />\r\n                  <MetricBadge \r\n                    label=\"R:R\" \r\n                    value={`1:${keyMetrics.riskRewardRatio.toFixed(1)}`}\r\n                    icon={ArrowTrendingUpIcon}\r\n                    color=\"green\"\r\n                    isDark={isDark}\r\n                  />\r\n                </motion.div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Content */}\r\n        <div className=\"max-w-7xl mx-auto px-4 py-6\">\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n            \r\n            {/* Calculator Panel */}\r\n            <div className=\"lg:col-span-1\">\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className={`p-5 rounded-2xl border backdrop-blur-sm ${\r\n                  isDark \r\n                    ? 'bg-gray-800/50 border-gray-700' \r\n                    : 'bg-white/80 border-gray-200 shadow-lg'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center gap-2 mb-4\">\r\n                  <CalculatorIcon className={`w-5 h-5 ${isDark ? 'text-blue-400' : 'text-blue-600'}`} />\r\n                  <h2 className=\"font-semibold\">Calculator</h2>\r\n                </div>\r\n                <PositionCalculator \r\n                  setCalculatedPosition={(pos) => handleCalculate(pos, analysisData)}\r\n                  setAnalysisData={setAnalysisData}\r\n                  isCalculating={isCalculating}\r\n                />\r\n              </motion.div>\r\n            </div>\r\n\r\n            {/* Results Panel */}\r\n            <div className=\"lg:col-span-2\">\r\n              <AnimatePresence mode=\"wait\">\r\n                {isCalculating ? (\r\n                  <LoadingState isDark={isDark} />\r\n                ) : calculatedPosition ? (\r\n                  <motion.div\r\n                    key=\"results\"\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    exit={{ opacity: 0, y: -20 }}\r\n                    className=\"space-y-6\"\r\n                  >\r\n                    <RiskAnalysis \r\n                      calculatedPosition={calculatedPosition}\r\n                      analysisData={analysisData}\r\n                      theme={theme}\r\n                    />\r\n                    <SuggestedPositions \r\n                      calculatedPosition={calculatedPosition}\r\n                      analysisData={analysisData}\r\n                      theme={theme}\r\n                    />\r\n                  </motion.div>\r\n                ) : (\r\n                  <EmptyState isDark={isDark} />\r\n                )}\r\n              </AnimatePresence>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\n/**\r\n * Metric Badge Component\r\n */\r\nconst MetricBadge = memo(({ label, value, icon: Icon, color, isDark }) => {\r\n  const colorClasses = {\r\n    blue: isDark ? 'text-blue-400 bg-blue-500/10' : 'text-blue-600 bg-blue-50',\r\n    red: isDark ? 'text-red-400 bg-red-500/10' : 'text-red-600 bg-red-50',\r\n    green: isDark ? 'text-green-400 bg-green-500/10' : 'text-green-600 bg-green-50',\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-center gap-2 px-3 py-1.5 rounded-lg ${colorClasses[color]}`}>\r\n      <Icon className=\"w-4 h-4\" />\r\n      <div>\r\n        <div className=\"text-[10px] uppercase opacity-70\">{label}</div>\r\n        <div className=\"text-sm font-bold\">{value}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nMetricBadge.displayName = 'MetricBadge';\r\n\r\n/**\r\n * Loading State Component\r\n */\r\nconst LoadingState = memo(({ isDark }) => (\r\n  <motion.div\r\n    key=\"loading\"\r\n    initial={{ opacity: 0 }}\r\n    animate={{ opacity: 1 }}\r\n    exit={{ opacity: 0 }}\r\n    className={`flex flex-col justify-center items-center h-80 rounded-2xl border backdrop-blur-sm ${\r\n      isDark ? 'bg-gray-800/50 border-gray-700' : 'bg-white/80 border-gray-200'\r\n    }`}\r\n  >\r\n    <div className=\"relative\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-3 border-blue-200 border-t-blue-600\" />\r\n      <CalculatorIcon className=\"absolute inset-0 m-auto w-5 h-5 text-blue-600\" />\r\n    </div>\r\n    <p className={`mt-4 text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n      Calculating position...\r\n    </p>\r\n  </motion.div>\r\n));\r\n\r\nLoadingState.displayName = 'LoadingState';\r\n\r\n/**\r\n * Empty State Component  \r\n */\r\nconst EmptyState = memo(({ isDark }) => (\r\n  <motion.div\r\n    key=\"empty\"\r\n    initial={{ opacity: 0 }}\r\n    animate={{ opacity: 1 }}\r\n    exit={{ opacity: 0 }}\r\n    className={`flex flex-col justify-center items-center h-80 rounded-2xl border backdrop-blur-sm ${\r\n      isDark ? 'bg-gray-800/50 border-gray-700' : 'bg-white/80 border-gray-200'\r\n    }`}\r\n  >\r\n    <div className={`p-4 rounded-full mb-4 ${isDark ? 'bg-gray-700' : 'bg-gray-100'}`}>\r\n      <ChartBarIcon className={`w-8 h-8 ${isDark ? 'text-gray-400' : 'text-gray-500'}`} />\r\n    </div>\r\n    <h3 className=\"text-lg font-semibold mb-2\">Ready to Calculate</h3>\r\n    <p className={`text-sm text-center max-w-xs ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n      Enter your account balance, risk percentage, and trade details to calculate optimal position size\r\n    </p>\r\n  </motion.div>\r\n));\r\n\r\nEmptyState.displayName = 'EmptyState';\r\n\r\nexport default PositionSizing;\r\n"],"names":["PositionCalculator","memo","setCalculatedPosition","setAnalysisData","isCalculating","isDark","useSelector","state","accountSize","setAccountSize","useState","riskPercentage","setRiskPercentage","entryPrice","setEntryPrice","stopLoss","setStopLoss","targetPrice","setTargetPrice","positionType","setPositionType","leverageUsed","setLeverageUsed","correlatedPositions","setCorrelatedPositions","marketVolatility","setMarketVolatility","timeFrame","setTimeFrame","portfolioHeatMap","setPortfolioHeatMap","showAdvanced","setShowAdvanced","inputClass","labelClass","selectClass","calculatePosition","useCallback","riskAmount","stopLossDistance","positionSize","volatilityMultiplier","potentialLoss","potentialGain","calculatedRR","portfolioHeat","positionData","analysisData","isValid","jsxs","jsx","ArrowTrendingUpIcon","ArrowTrendingDownIcon","e","val","ChevronUpIcon","ChevronDownIcon","AnimatePresence","motion","tf","calculateRiskMetrics","position","marketData","price","_target","volatility","volume","atrMultiplier","normalizedRange","liquidityRisk","positionImpact","calculateSlippage","baseSlippage","liquidityMultiplier","runMonteCarloSimulation","iterations","results","target","dailyVolatility","i","currentPrice","days","drift","randomMove","analyzeMonteCarloResults","winRate","r","avgDays","sum","calculateConfidenceScore","winRateScore","durationScore","generateTradingSuggestions","analysis","suggestions","riskRewardRatio","volatilityImpact","trend","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","RiskAnalysis","calculatedPosition","theme","selectedTab","setSelectedTab","safeAnalysisData","useMemo","simulationResults","riskMetrics","tradingSuggestions","mktData","chartOptions","ctx","positionChartData","tabs","ChartBarIcon","SparklesIcon","LightBulbIcon","tab","metric","Bar","MetricRow","_a","stat","suggestion","ExclamationTriangleIcon","InformationCircleIcon","CheckCircleIcon","label","value","status","statusColors","SuggestedPositions","alternatives","qty","risk","gain","volImpact","positionCards","ShieldCheckIcon","ScaleIcon","BoltIcon","card","index","MetricLine","color","PositionSizing","setIsCalculating","useEffect","keyMetrics","handleCalculate","Fragment","Helmet","CalculatorIcon","MetricBadge","pos","LoadingState","EmptyState","Icon","colorClasses"],"mappings":"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"}