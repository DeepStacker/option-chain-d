const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Dashboard-DJogH1pr.js","assets/js/vendor-61R5RNdl.js","assets/js/charts-BVf48S-_.js","assets/css/vendor-w23F2EJY.css","assets/js/animations-9kslzpSP.js","assets/js/ui-icons-BuGoXOaE.js","assets/js/firebase-Dm1Xd1Ru.js","assets/js/Profile-eP1p61hV.js","assets/js/Home-CM_p_rP5.js","assets/js/About-DGp6Sdqy.js","assets/js/Card-DOfmhbZR.js","assets/js/Skeleton-54bdQbPe.js","assets/js/Blog-CVlMTOdv.js","assets/js/Contact-h3AV-ZhI.js","assets/js/Tca-Cl1E0gY8.js","assets/js/PositionSizing-D3ag_ptN.js","assets/js/OptionChain-CnpcW91-.js","assets/js/analyticsService-BzsekLUT.js","assets/js/Analytics-g1Ytbi9N.js","assets/js/Historical-DB74jWuw.js","assets/js/SplitView-BmRKNAIw.js","assets/js/Screeners--60fXnuf.js","assets/js/Calculators-CFI8tjp8.js","assets/js/NotFound-BguSUL37.js","assets/js/Admin-DnlA6wWU.js"])))=>i.map(i=>d[i]);
import{a4 as e,a5 as t,a6 as a,a7 as s,a8 as r,a9 as i,aa as n,r as l,ab as o,ac as c,ad as d,ae as u,af as p,j as m,ag as h,ah as x,ai as g,aj as f,a3 as b,ak as y,al as j,am as v,an as w,ao as N,ap as k,aq as S,ar as _,as as I}from"./vendor-61R5RNdl.js";import{G as A,a as T,g as E,s as L,b as C,c as D,d as R,o as P,e as O}from"./firebase-Dm1Xd1Ru.js";import{m as z,A as F}from"./animations-9kslzpSP.js";import{F as V,a as $,b as U,c as B,d as H,e as M,f as Y,g as J,h as W,i as K,j as q,k as G,l as X,m as Q,n as Z,o as ee,p as te,q as ae,r as se,s as re,t as ie,u as ne,v as le,w as oe,x as ce,y as de,z as ue,A as pe,B as me}from"./ui-icons-BuGoXOaE.js";import"./charts-BVf48S-_.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const he={log:(...e)=>{},warn:(...e)=>{},error:(...e)=>{},debug:(...e)=>{}};console.log=()=>{};const xe={},ge=function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),r=a?.nonce||a?.getAttribute("nonce");s=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in xe)return;xe[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,r&&s.setAttribute("nonce",r),document.head.appendChild(s),t?new Promise((t,a)=>{s.addEventListener("load",t),s.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},fe=new A;fe.setCustomParameters({prompt:"select_account",access_type:"offline"}),new T;const be=E(e({apiKey:"AIzaSyAoeZHm-azcBvHdEFEfnKYibK6bYHyXqLU",authDomain:"stockify-6e2b1.firebaseapp.com",projectId:"stockify-6e2b1",storageBucket:"stockify-6e2b1.appspot.com",messagingSenderId:"1051195772160",appId:"1:1051195772160:web:b2b7ea0d56cf988baf37e5",measurementId:"G-WFZQQV6LY6"}));(async()=>{try{await L(be,C)}catch(e){}})();const ye=async()=>{try{const e=await D(be,fe);return e.user}catch(e){throw e}};const je=new class{constructor(){this.refreshTimeouts=new Map,this.isRefreshing=!1,this.refreshPromise=null}isTokenExpired(e){if(!e)return!0;try{const t=JSON.parse(atob(e.split(".")[1])),a=Math.floor(Date.now()/1e3),s=300;return t.exp<=a+s}catch(t){return!0}}clearExpiredTokens(){const e=[localStorage,sessionStorage];let t=!1;return e.forEach(e=>{const a=e.getItem("authToken");a&&this.isTokenExpired(a)&&(e.removeItem("authToken"),e.removeItem("user"),t=!0)}),t}clearAllAuthData(){[localStorage,sessionStorage].forEach(e=>{e.removeItem("authToken"),e.removeItem("user"),e.removeItem("redirectAfterLogin")}),delete a.defaults.headers.common.Authorization}scheduleTokenRefresh(e){const t=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");if(t&&!this.isTokenExpired(t))try{const a=1e3*JSON.parse(atob(t.split(".")[1])).exp,s=a-Date.now()-6e5;if(s>0){const t=setTimeout(()=>{e(we())},s);this.refreshTimeouts.set("main",t)}}catch(a){}}cleanup(){this.refreshTimeouts.forEach(e=>clearTimeout(e)),this.refreshTimeouts.clear(),this.isRefreshing=!1,this.refreshPromise=null}},ve=t("auth/initializeAuth",async(e,{dispatch:t,rejectWithValue:s})=>{try{he.log("ðŸ” Initializing authentication...");if(je.clearExpiredTokens())return he.log("ðŸ—‘ï¸ Expired tokens were cleared during initialization"),{user:null,isAuthenticated:!1};const e=localStorage.getItem("user")||sessionStorage.getItem("user"),s=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");if(e&&s)try{const r=JSON.parse(e);if(!je.isTokenExpired(s))return he.log("âœ… Valid token found in storage, user authenticated"),a.defaults.headers.common.Authorization=`Bearer ${s}`,je.scheduleTokenRefresh(t),{user:{...r,token:s},isAuthenticated:!0};he.log("â° Stored token is expired - clearing"),je.clearAllAuthData()}catch(r){je.clearAllAuthData()}return he.log("âŒ No valid authentication found"),{user:null,isAuthenticated:!1}}catch(i){return je.clearAllAuthData(),s({message:"Failed to initialize authentication",error:i.message})}}),we=t("auth/refreshUserToken",async(e,{rejectWithValue:t})=>{try{return je.isRefreshing&&je.refreshPromise||(je.isRefreshing=!0,je.refreshPromise=(async()=>{try{const e=be.currentUser;if(!e)throw new Error("No authenticated user found");const t=await e.getIdToken(!0),s=Date.now()+33e5,r=localStorage.getItem("authToken")?localStorage:sessionStorage;r.setItem("authToken",t);const i=r.getItem("user");if(i){const e=JSON.parse(i);e.token=t,e.tokenExpiry=s,e.lastRefresh=(new Date).toISOString(),r.setItem("user",JSON.stringify(e))}return a.defaults.headers.common.Authorization=`Bearer ${t}`,je.isRefreshing=!1,je.refreshPromise=null,{token:t,expiry:s}}catch(e){throw je.isRefreshing=!1,je.refreshPromise=null,e}})()),je.refreshPromise}catch(s){return je.isRefreshing=!1,t(s.message)}}),Ne=t("auth/performLogout",async(e,{dispatch:t,rejectWithValue:a})=>{try{return he.log("ðŸšª Performing logout..."),await R(be),he.log("âœ… Firebase sign out successful"),je.clearAllAuthData(),je.cleanup(),{success:!0}}catch(s){return je.clearAllAuthData(),je.cleanup(),a(s.message)}}),ke=s({name:"auth",initialState:{user:null,isAuthenticated:!1,loading:!1,error:null,authLoading:!0,lastActivity:null,tokenRefreshing:!1,initializationComplete:!1},reducers:{setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0,e.loading=!1,e.error=null,e.lastActivity=Date.now(),e.authLoading=!1,e.initializationComplete=!0,t.payload.token&&(a.defaults.headers.common.Authorization=`Bearer ${t.payload.token}`)},clearUser:e=>{e.user=null,e.isAuthenticated=!1,e.loading=!1,e.error=null,e.lastActivity=null,e.tokenRefreshing=!1,e.authLoading=!1,e.initializationComplete=!0,je.clearAllAuthData(),je.cleanup()},updateTokenData:(e,t)=>{e.user&&(e.user.token=t.payload.token,e.user.tokenExpiry=t.payload.expiry,e.user.lastRefresh=(new Date).toISOString()),e.tokenRefreshing=!1},setTokenRefreshing:(e,t)=>{e.tokenRefreshing=t.payload},updateLastActivity:e=>{e.lastActivity=Date.now()},setInitializationComplete:e=>{e.initializationComplete=!0,e.authLoading=!1},setAuthLoading:(e,t)=>{e.authLoading=t.payload}},extraReducers:e=>{e.addCase(ve.pending,e=>{e.authLoading=!0,e.initializationComplete=!1,e.error=null}).addCase(ve.fulfilled,(e,t)=>{e.authLoading=!1,e.initializationComplete=!0,t.payload.isAuthenticated?(e.user=t.payload.user,e.isAuthenticated=!0,e.lastActivity=Date.now()):(e.user=null,e.isAuthenticated=!1)}).addCase(ve.rejected,(e,t)=>{e.authLoading=!1,e.initializationComplete=!0,e.user=null,e.isAuthenticated=!1,e.error=t.payload?.message||"Authentication initialization failed"}),e.addCase(we.pending,e=>{e.tokenRefreshing=!0}).addCase(we.fulfilled,(e,t)=>{e.tokenRefreshing=!1,e.user&&t.payload&&(e.user.token=t.payload.token,e.user.tokenExpiry=t.payload.expiry,e.user.lastRefresh=(new Date).toISOString())}).addCase(we.rejected,(e,t)=>{e.tokenRefreshing=!1,e.error=t.payload,e.user=null,e.isAuthenticated=!1,je.clearAllAuthData()}),e.addCase(Ne.pending,e=>{e.loading=!0}).addCase(Ne.fulfilled,e=>{e.user=null,e.isAuthenticated=!1,e.loading=!1,e.error=null,e.lastActivity=null,e.tokenRefreshing=!1,e.authLoading=!1}).addCase(Ne.rejected,(e,t)=>{e.user=null,e.isAuthenticated=!1,e.loading=!1,e.error=t.payload})}}),{setUser:Se,clearUser:_e,updateTokenData:Ie,setTokenRefreshing:Ae,updateLastActivity:Te,setInitializationComplete:Ee,setAuthLoading:Le}=ke.actions,Ce=ke.reducer,De=()=>{const e=r(),t=i(),{isAuthenticated:a,authLoading:s}=n(e=>e.auth),o=l.useRef(!1);return l.useEffect(()=>{if(!s&&a&&!o.current){const a=localStorage.getItem("redirectAfterLogin");a&&t.pathname!==a?(localStorage.removeItem("redirectAfterLogin"),e(a,{replace:!0}),o.current=!0):a||"/login"!==t.pathname||(e("/dashboard",{replace:!0}),o.current=!0)}},[a,s,e,t.pathname]),l.useEffect(()=>{a||(o.current=!1)},[a]),null},Re=s({name:"user",initialState:{user:null},reducers:{loginUser:(e,t)=>{e.user=t.payload},logoutUser:e=>{e.user=null}}}),{loginUser:Pe,logoutUser:Oe}=Re.actions,ze=Re.reducer,Fe=e=>{"undefined"!=typeof document&&("dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},Ve=s({name:"theme",initialState:{theme:(()=>{if("undefined"!=typeof localStorage){const e=localStorage.getItem("theme");if(e)return Fe(e),e}return Fe("dark"),"dark"})(),isReversed:!0,isHighlighting:!0,isItmHighlighting:!1},reducers:{setDarkTheme:e=>{e.theme="dark",localStorage.setItem("theme","dark"),Fe("dark")},setLightTheme:e=>{e.theme="light",localStorage.setItem("theme","light"),Fe("light")},toggleTheme:e=>{const t="light"===e.theme?"dark":"light";e.theme=t,localStorage.setItem("theme",t),Fe(t)},setIsItmHighlighting:e=>{e.isItmHighlighting=!0!==e.isItmHighlighting}}}),{toggleTheme:$e,setIsReversed:Ue,setIsHighlighting:Be,setIsItmHighlighting:He}=Ve.actions,Me=Ve.reducer;a.defaults.withCredentials=!0;const Ye=new Map,Je=()=>localStorage.getItem("authToken"),We=e=>401===e.response?.status?(localStorage.removeItem("authToken"),Je()&&window.location.reload(),"Session expired. Please login again."):e.response?e.response.data?.message||"Server error":e.request?"No response from server":e.message||"An error occurred",Ke=e=>Array.isArray(e)&&0!==e.length?Math.min(...e.map(e=>"object"==typeof e?e.exp_sid||e.value||e.timestamp||0:"number"==typeof e?e:parseInt(e)||0)):null,qe=(e,t={})=>`${e}_${JSON.stringify(t)}`,Ge=e=>{if(!e)return null;const t={};return e.oc&&Object.entries(e.oc).forEach(([e,a])=>{const s=parseFloat(e),r=(e,t)=>({ltp:e?.ltp||0,atp:e?.atp||0,pc:e?.pc||0,volume:e?.volume||e?.vol||0,vol:e?.vol||e?.volume||0,pVol:e?.pVol||0,OI:e?.OI||e?.oi||0,oi:e?.OI||e?.oi||0,oichng:e?.oichng||e?.oi_change||0,oi_change:e?.oichng||e?.oi_change||0,p_oi:e?.p_oi||0,oiperchnge:e?.oiperchnge||0,iv:e?.iv||0,optgeeks:e?.optgeeks||{},delta:e?.optgeeks?.delta||0,gamma:e?.optgeeks?.gamma||0,theta:e?.optgeeks?.theta||0,vega:e?.optgeeks?.vega||0,p_chng:e?.p_chng||e?.change||0,p_pchng:e?.p_pchng||0,bid:e?.bid||0,ask:e?.ask||0,bid_qty:e?.bid_qty||0,ask_qty:e?.ask_qty||0,btyp:e?.btyp||"NT",BuiltupName:e?.BuiltupName||"NEUTRAL",mness:e?.mness||"",sym:e?.sym||"",sid:e?.sid||0,disp_sym:e?.disp_sym||"",otype:e?.otype||t});t[s]={strike:a.strike||s,strike_price:a.strike_price||s,ce:r(a.ce,"CE"),pe:r(a.pe,"PE"),reversal:a.reversal||0,wkly_reversal:a.wkly_reversal||0,fut_reversal:a.fut_reversal||0,rs:a.rs||0,rr:a.rr||0,ss:a.ss||0,sr_diff:a.sr_diff||0,ce_tv:a.ce_tv||0,pe_tv:a.pe_tv||0,pcr:a.pcr||0,trading_signals:a.trading_signals||{},market_regimes:a.market_regimes||{},price_range:a.price_range||{}}}),{options:{data:{oc:t,sltp:e.spot?.ltp||e.sltp||0,schng:e.spot?.change||e.schng||0,sperchng:e.spot?.change_percent||e.sperchng||0,u_id:e.u_id||0,fl:e.future||e.fl||{},atmiv:e.atmiv||0,atmiv_change:e.atmiv_change||0,atm_strike:e.atm_strike||0,symbol:e.symbol,expiry:e.expiry,max_pain_strike:e.max_pain_strike||0,dte:e.dte||e.days_to_expiry||0,lot_size:e.lot_size||75,total_ce_oi:e.total_ce_oi||0,total_pe_oi:e.total_pe_oi||0,pcr:e.pcr||0,expiry_list:e.expiry_list||[]}},spot:{data:{Ltp:e.spot?.ltp||0,Change:e.spot?.change||0,ChangePercent:e.spot?.change_percent||0,ltp:e.spot?.ltp||0,change:e.spot?.change||0,change_percent:e.spot?.change_percent||0}},fut:{data:e.future||e.fut?.data||{}}}},Xe=t("data/fetchExpiryDate",async(e,{getState:t,rejectWithValue:s})=>{const r=qe("fetchExpiryDate",e);if(Ye.has(r))return Ye.get(r);try{const s=Je();if(!s)throw new Error("No auth token");const{config:{baseURL:i}}=t(),n=e.sid||e.symbol||"NIFTY",l=a.get(`${i}/options/expiry/${n}`,{headers:{Authorization:`Bearer ${s}`}}).then(e=>e.data);Ye.set(r,l);const o=await l;return Ye.delete(r),o}catch(i){return Ye.delete(r),s(We(i))}}),Qe=t("data/fetchLiveData",async(e,{getState:t,rejectWithValue:s})=>{const r=t(),i=qe("fetchLiveData",{sid:r.data.sid,exp_sid:r.data.exp_sid});if(Ye.has(i))return Ye.get(i);try{const e=Je();if(!e)throw new Error("No auth token");const{config:{baseURL:t},data:{sid:s,exp_sid:n}}=r,l={sid:s,exp_sid:n},o=a.get(`${t}/options/live`,{params:l,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}).then(e=>e.data);Ye.set(i,o);const c=await o;return Ye.delete(i),c}catch(n){return Ye.delete(i),s(We(n))}}),Ze=t("data/fetchLiveDataDirectSocket",async(e,{dispatch:t})=>t(Qe()).unwrap()),et=t("data/initializeLiveData",async({useDirectSocket:e=!1},{dispatch:t,getState:a,rejectWithValue:s})=>{const r=a(),i=qe("initializeLiveData",{useDirectSocket:e,sid:r.data.sid,exp_sid:r.data.exp_sid});if(Ye.has(i))return Ye.get(i);try{const a=e?t(Ze()).unwrap():t(Qe()).unwrap();Ye.set(i,a);const s=await a;return Ye.delete(i),s}catch(n){return Ye.delete(i),s(n.message||"Failed to initialize live data")}}),tt=t("data/setSidAndFetchData",async({newSid:e,useDirectSocket:t=!1},{dispatch:a})=>{const s=qe("setSidAndFetchData",{newSid:e,useDirectSocket:t});if(Ye.has(s))return Ye.get(s);try{const r=(async()=>{a(rt(e));const s=await a(Xe({sid:e})).unwrap(),r=Array.isArray(s)?s:s?.data?.expiry_dates||s?.expiry_dates||[];if(!r?.length)throw new Error("No expiry dates available");const i=Ke(r);if(!i)throw new Error("No valid expiry date found");return a(st(i)),await new Promise(e=>setTimeout(e,50)),await a(et({useDirectSocket:t})).unwrap(),{success:!0,sid:e,exp_sid:i}})();Ye.set(s,r);const i=await r;return Ye.delete(s),i}catch(r){throw Ye.delete(s),r}}),at=s({name:"data",initialState:{data:{},expDate:[],exp_sid:null,sid:"NIFTY",isOc:!0,error:null,isStreaming:!1,loading:!1,popupData:null,connectionMethod:"api"},reducers:{setExp_sid:(e,t)=>{e.exp_sid=t.payload},setSid:(e,t)=>{e.sid=t.payload,e.exp_sid=null,e.data={}},setIsOc:(e,t)=>{e.isOc=t.payload},updateLiveData:(e,t)=>{const a=t.payload;if(!a||!a.oc)return;const s=Ge(a);!s||!e.data?.options?.data?.expiry_list||s.options.data.expiry_list&&0!==s.options.data.expiry_list.length||(s.options.data.expiry_list=e.data.options.data.expiry_list),e.data=s,e.connectionMethod="websocket"},setStreamingState:(e,t)=>{e.isStreaming=t.payload},setConnectionMethod:(e,t)=>{e.connectionMethod=t.payload},resetError:e=>{e.error=null},setPopupData:(e,t)=>{e.popupData=t.payload},clearData:e=>{e.data={},e.error=null,e.isStreaming=!1},setLatestExpiry:e=>{if(e.expDate.length>0){const t=Ke(e.expDate);t&&t!==e.exp_sid&&(e.exp_sid=t)}}},extraReducers:e=>{e.addCase(Qe.pending,e=>{e.loading=!0,e.error=null,e.connectionMethod="api"}).addCase(Qe.fulfilled,(e,t)=>{const a=t.payload,s=Ge(a);e.data=s,e.loading=!1}).addCase(Qe.rejected,(e,t)=>{e.error=t.payload||"Failed to fetch live data",e.loading=!1,e.isStreaming=!1}).addCase(Ze.pending,e=>{e.loading=!0,e.error=null,e.connectionMethod="socket"}).addCase(Ze.fulfilled,e=>{e.loading=!1}).addCase(Ze.rejected,(e,t)=>{e.error=t.payload||"Failed to connect via socket",e.loading=!1,e.isStreaming=!1}).addCase(et.pending,e=>{e.loading=!0,e.error=null}).addCase(et.fulfilled,e=>{e.loading=!1}).addCase(et.rejected,(e,t)=>{e.error=t.payload||"Failed to initialize live data",e.loading=!1,e.isStreaming=!1}).addCase(Xe.pending,e=>{e.loading=!0,e.error=null}).addCase(Xe.fulfilled,(e,t)=>{const a=t.payload,s=Array.isArray(a)?a:a?.data?.expiry_dates||a?.expiry_dates||[];if(e.expDate=s,s.length>0){const t=Ke(s);t&&(e.exp_sid=t)}e.loading=!1}).addCase(Xe.rejected,(e,t)=>{e.error=t.payload||"Failed to fetch expiry dates",e.loading=!1})}}),{setExp_sid:st,setSid:rt,setIsOc:it,updateLiveData:nt,setStreamingState:lt,setConnectionMethod:ot,resetError:ct,setPopupData:dt,clearData:ut,setLatestExpiry:pt}=at.actions,mt=()=>e=>{e(lt(!1))},ht=at.reducer,xt=s({name:"optionChain",initialState:{popupData:null,strike:null,isPopupVisible:!1,isDeltaPopupVisible:!1,isFuturePricePopupVisible:!1,isReversalPopupVisible:!1,isIVPopupVisible:!1,loading:!1,fetchError:null,tickerOptions:["NIFTY","BANKNIFTY","FINNIFTY","MIDCPNIFTY","NIFTYNXT50","SENSEX","BANKEX","SHRIRAMFIN","MM","HDFCLIFE","DIVISLAB","LT","CRUDEOIL","ADANIENT","ADANIPORTS","APOLLOHOSP","ASIANPAINT","AXISBANK","BAJAJ-AUTO","BAJFINANCE","BAJAJFINSV","BEL","BPCL","BHARTIARTL","BRITANNIA","CIPLA","COALINDIA","DRREDDY","EICHERMOT","GRASIM","HCLTECH","HDFCBANK","HEROMOTOCO","HINDALCO","HINDUNILVR","ICICIBANK","ITC","INDUSINDBK","INFY","JSWSTEEL","KOTAKBANK","MARUTI","NTPC","NESTLEIND","ONGC","POWERGRID","RELIANCE","SBILIFE","SBIN","SUNPHARMA","TCS","TATACONSUM","TATAMOTORS","TATASTEEL","TECHM","TRENT","ULTRACEMCO","WIPRO"]},reducers:{setPopupData:(e,t)=>{e.popupData=t.payload},setStrike:(e,t)=>{e.strike=t.payload},togglePopup:e=>{e.isPopupVisible=!e.isPopupVisible},toggleDeltaPopup:e=>{e.isDeltaPopupVisible=!e.isDeltaPopupVisible},toggleFuturePricePopup:e=>{e.isFuturePricePopupVisible=!e.isFuturePricePopupVisible},toggleReversalPopup:e=>{e.isReversalPopupVisible=!e.isReversalPopupVisible},toggleIVPopup:e=>{e.isIVPopupVisible=!e.isIVPopupVisible},setLoading:(e,t)=>{e.loading=t.payload},setFetchError:(e,t)=>{e.fetchError=t.payload}}}),{setPopupData:gt,setStrike:ft,togglePopup:bt,toggleDeltaPopup:yt,toggleFuturePricePopup:jt,toggleReversalPopup:vt,toggleIVPopup:wt,setLoading:Nt,setFetchError:kt}=xt.actions,St=xt.reducer,_t=s({name:"tca",initialState:{tradePerDay:3,ndtpc:20,tradeAmount:500,riskReward:2,chancePercent:50,chargesPerTrade:56,results:0,profitLossChart:0},reducers:{setTradePerDay:(e,t)=>{e.tradePerDay=t.payload},setNdtpc:(e,t)=>{e.ndtpc=t.payload},setTradeAmount:(e,t)=>{e.tradeAmount=t.payload},setRiskReward:(e,t)=>{e.riskReward=t.payload},setChancePercent:(e,t)=>{e.chancePercent=t.payload},setChargesPerTrade:(e,t)=>{e.chargesPerTrade=t.payload},setResults:(e,t)=>{e.results=t.payload},setProfitLossChart:(e,t)=>{e.profitLossChart=t.payload}}}),{setTradePerDay:It,setNdtpc:At,setTradeAmount:Tt,setRiskReward:Et,setChancePercent:Lt,setChargesPerTrade:Ct,setResults:Dt,setProfitLossChart:Rt}=_t.actions,Pt=_t.reducer,Ot=s({name:"toast",initialState:{toasts:[]},reducers:{addToast:(e,t)=>{const a={id:Date.now(),message:t.payload.message,type:t.payload.type||"info",duration:t.payload.duration||3e3};e.toasts.push(a)},removeToast:(e,t)=>{e.toasts=e.toasts.filter(e=>e.id!==t.payload)}}}),{addToast:zt,removeToast:Ft}=Ot.actions,Vt=Ot.reducer,$t={baseURL:"http://localhost:8000/api/v1",socketURL:"ws://localhost:8000"};let Ut=JSON.parse(localStorage.getItem("appConfig"));(Ut?.baseURL?.includes("10001")||Ut?.baseURL?.includes("/api/api"))&&(localStorage.removeItem("appConfig"),Ut=null);const Bt=s({name:"config",initialState:Ut||$t,reducers:{setURLs:(e,t)=>{e.baseURL=t.payload.baseURL,e.socketURL=t.payload.socketURL,localStorage.setItem("appConfig",JSON.stringify(e))},resetURLs:e=>{e.baseURL=$t.baseURL,e.socketURL=$t.socketURL,localStorage.setItem("appConfig",JSON.stringify(e))}}}),{setURLs:Ht,resetURLs:Mt}=Bt.actions,Yt=Bt.reducer,Jt=s({name:"chart",initialState:{symbols:[],currentSymbol:"INR",timeframe:"10",chartData:[],connectionStatus:"disconnected",weekly:!0,daily:!1,avg:!1},reducers:{setSymbols:(e,t)=>{e.symbols=t.payload},setWeekly:(e,t)=>{e.weekly=t.payload},setDaily:(e,t)=>{e.daily=t.payload},setAvg:(e,t)=>{e.avg=t.payload},setCurrentSymbol:(e,t)=>{e.currentSymbol=t.payload},setTimeframe:(e,t)=>{e.timeframe="1"===t.payload?"":t.payload},setChartData:(e,t)=>{e.chartData=Array.isArray(t.payload)?t.payload:[]},setConnectionStatus:(e,t)=>{e.connectionStatus=t.payload},appendLiveCandle:(e,t)=>{const a=t.payload;if(!a||!a.time)return;const s=e.chartData[e.chartData.length-1];s?.time===a.time?e.chartData[e.chartData.length-1]=a:e.chartData.push(a)}}}),{setSymbols:Wt,setDaily:Kt,setWeekly:qt,setAvg:Gt,setCurrentSymbol:Xt,setTimeframe:Qt,setChartData:Zt,setConnectionStatus:ea,appendLiveCandle:ta}=Jt.actions,aa=Jt.reducer,sa=o({reducer:{user:ze,theme:Me,data:ht,optionChain:St,tca:Pt,config:Yt,auth:d({key:"root",storage:u,whitelist:["auth"]},Ce),toast:Vt,chart:aa},middleware:e=>e({serializableCheck:!1})}),ra=c(sa),ia=()=>{const e=p(),t=r(),[a,s]=l.useState(!1),[i,o]=l.useState(!1),{isAuthenticated:c,user:d,authLoading:u}=n(e=>e.auth),g="dark"===n(e=>e.theme?.theme||"light");l.useEffect(()=>{o(!0)},[]),l.useEffect(()=>{if(!u&&c&&d&&i){const e=localStorage.getItem("redirectAfterLogin")||"/dashboard";localStorage.removeItem("redirectAfterLogin"),t(e,{replace:!0})}},[c,d,t,u,i]);const f=[{icon:$,text:"Real-time Options Data"},{icon:U,text:"Advanced Analytics"},{icon:B,text:"Premium Features"}];return!i||u?m.jsx("div",{className:"min-h-screen flex items-center justify-center "+(g?"bg-slate-950":"bg-slate-50"),children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),m.jsx("p",{className:"text-lg font-medium "+(g?"text-slate-400":"text-slate-600"),children:"Connecting..."})]})}):m.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden "+(g?"bg-slate-950":"bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100"),children:[m.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[m.jsx(z.div,{animate:{x:[0,100,0],y:[0,-50,0]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute top-0 left-1/4 w-[600px] h-[600px] bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-full blur-3xl"}),m.jsx(z.div,{animate:{x:[0,-80,0],y:[0,60,0]},transition:{duration:25,repeat:1/0,ease:"linear"},className:"absolute bottom-0 right-1/4 w-[500px] h-[500px] bg-gradient-to-r from-cyan-500/20 to-emerald-500/20 rounded-full blur-3xl"})]}),m.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-center gap-12 px-6 max-w-6xl mx-auto",children:[m.jsxs(z.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.5},className:"flex-1 text-center lg:text-left",children:[m.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-3 mb-8",children:[m.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-500/30",children:m.jsx(V,{className:"w-8 h-8 text-white"})}),m.jsxs("div",{children:[m.jsx("span",{className:"text-3xl font-black "+(g?"text-white":"text-slate-900"),children:"Deep"}),m.jsx("span",{className:"text-3xl font-black bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Strike"})]})]}),m.jsxs("h1",{className:"text-4xl lg:text-5xl font-black mb-4 leading-tight "+(g?"text-white":"text-slate-900"),children:["Welcome Back,"," ",m.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-cyan-600 bg-clip-text text-transparent",children:"Trader"})]}),m.jsx("p",{className:"text-lg lg:text-xl mb-8 max-w-md "+(g?"text-slate-400":"text-slate-600"),children:"Access real-time options analytics and make smarter trading decisions."}),m.jsx("div",{className:"flex flex-col gap-3",children:f.map((e,t)=>m.jsxs(z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+.1*t},className:"flex items-center gap-3 "+(g?"text-slate-300":"text-slate-700"),children:[m.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${g?"bg-slate-800":"bg-white"} shadow-sm`,children:m.jsx(e.icon,{className:"w-5 h-5 text-blue-500"})}),m.jsx("span",{className:"font-medium",children:e.text})]},t))})]}),m.jsxs(z.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"w-full max-w-md",children:[m.jsxs("div",{className:"p-8 rounded-3xl shadow-2xl border backdrop-blur-sm "+(g?"bg-slate-900/80 border-slate-800":"bg-white/80 border-slate-200"),children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2 "+(g?"text-white":"text-slate-900"),children:"Sign In"}),m.jsx("p",{className:""+(g?"text-slate-400":"text-slate-600"),children:"Continue with your Google account"})]}),m.jsx(z.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:async()=>{try{s(!0);const t=await ye();if(t){const a=await t.getIdToken(!0);localStorage.setItem("authToken",a);const s={uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,token:a};e(Se(s)),x.success("Welcome back! ðŸŽ‰")}}catch(t){x.error("Login failed. Please try again.")}finally{s(!1)}},disabled:a,className:"w-full flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-bold text-lg transition-all "+(a?"bg-slate-400 cursor-not-allowed text-white":"bg-white text-slate-900 border-2 border-slate-200 hover:border-blue-500 hover:shadow-lg shadow-md"),children:a?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-6 h-6 border-2 border-slate-400 border-t-white rounded-full animate-spin"}),"Signing in..."]}):m.jsxs(m.Fragment,{children:[m.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-6 h-6"}),"Continue with Google"]})}),m.jsxs("div",{className:"flex items-center gap-4 my-6",children:[m.jsx("div",{className:"flex-1 h-px "+(g?"bg-slate-700":"bg-slate-200")}),m.jsx("span",{className:"text-sm "+(g?"text-slate-500":"text-slate-400"),children:"or"}),m.jsx("div",{className:"flex-1 h-px "+(g?"bg-slate-700":"bg-slate-200")})]}),m.jsx("div",{className:"text-center",children:m.jsxs("p",{className:""+(g?"text-slate-400":"text-slate-600"),children:["Don't have an account?"," ",m.jsx(h,{to:"/register",className:"font-bold text-blue-500 hover:text-blue-600 transition-colors",children:"Sign up free"})]})}),m.jsx("div",{className:"mt-6 pt-6 border-t "+(g?"border-slate-800":"border-slate-100"),children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm "+(g?"text-slate-500":"text-slate-400"),children:[m.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),m.jsx("span",{children:"Secured with 256-bit encryption"})]})})]}),m.jsxs("div",{className:"text-center mt-6 text-sm "+(g?"text-slate-500":"text-slate-400"),children:[m.jsx(h,{to:"/",className:"hover:text-blue-500 transition-colors",children:"Home"}),m.jsx("span",{className:"mx-2",children:"â€¢"}),m.jsx("a",{href:"#",className:"hover:text-blue-500 transition-colors",children:"Privacy"}),m.jsx("span",{className:"mx-2",children:"â€¢"}),m.jsx("a",{href:"#",className:"hover:text-blue-500 transition-colors",children:"Terms"})]})]})]})]})},na=()=>{const e=p(),t=r(),[a,s]=l.useState(!1),[i,o]=l.useState(!1),{isAuthenticated:c,user:d,authLoading:u}=n(e=>e.auth),g="dark"===n(e=>e.theme?.theme||"light");l.useEffect(()=>{o(!0)},[]),l.useEffect(()=>{!u&&c&&d&&i&&t("/dashboard",{replace:!0})},[c,d,t,u,i]);return!i||u?m.jsx("div",{className:"min-h-screen flex items-center justify-center "+(g?"bg-slate-950":"bg-slate-50"),children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),m.jsx("p",{className:"text-lg font-medium "+(g?"text-slate-400":"text-slate-600"),children:"Loading..."})]})}):m.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden "+(g?"bg-slate-950":"bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50"),children:[m.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[m.jsx(z.div,{animate:{x:[0,-80,0],y:[0,50,0]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute top-0 right-1/4 w-[600px] h-[600px] bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full blur-3xl"}),m.jsx(z.div,{animate:{x:[0,100,0],y:[0,-60,0]},transition:{duration:25,repeat:1/0,ease:"linear"},className:"absolute bottom-0 left-1/4 w-[500px] h-[500px] bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-full blur-3xl"})]}),m.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-center gap-12 px-6 max-w-6xl mx-auto",children:[m.jsxs(z.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.5},className:"flex-1 text-center lg:text-left",children:[m.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-3 mb-8",children:[m.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl flex items-center justify-center shadow-lg shadow-purple-500/30",children:m.jsx(V,{className:"w-8 h-8 text-white"})}),m.jsxs("div",{children:[m.jsx("span",{className:"text-3xl font-black "+(g?"text-white":"text-slate-900"),children:"Deep"}),m.jsx("span",{className:"text-3xl font-black bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Strike"})]})]}),m.jsxs("h1",{className:"text-4xl lg:text-5xl font-black mb-4 leading-tight "+(g?"text-white":"text-slate-900"),children:["Start Trading"," ",m.jsx("span",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-rose-600 bg-clip-text text-transparent",children:"Smarter"})]}),m.jsx("p",{className:"text-lg lg:text-xl mb-8 max-w-md "+(g?"text-slate-400":"text-slate-600"),children:"Create your free account and unlock professional-grade options analytics."}),m.jsx("div",{className:"flex flex-col gap-3",children:["Real-time NIFTY & BANKNIFTY data","Advanced Greeks analysis","PCR, Max Pain & IV indicators","Premium trading tools"].map((e,t)=>m.jsxs(z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+.1*t},className:"flex items-center gap-3 "+(g?"text-slate-300":"text-slate-700"),children:[m.jsx(H,{className:"w-6 h-6 text-green-500 flex-shrink-0"}),m.jsx("span",{className:"font-medium",children:e})]},t))})]}),m.jsxs(z.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"w-full max-w-md",children:[m.jsxs("div",{className:"p-8 rounded-3xl shadow-2xl border backdrop-blur-sm "+(g?"bg-slate-900/80 border-slate-800":"bg-white/80 border-slate-200"),children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl mb-4 shadow-lg shadow-purple-500/30",children:m.jsx(M,{className:"w-8 h-8 text-white"})}),m.jsx("h2",{className:"text-2xl font-bold mb-2 "+(g?"text-white":"text-slate-900"),children:"Create Account"}),m.jsx("p",{className:""+(g?"text-slate-400":"text-slate-600"),children:"It's free and takes 10 seconds"})]}),m.jsx(z.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:async()=>{try{s(!0);const a=await ye();if(a){const s=await a.getIdToken(!0);localStorage.setItem("authToken",s);const r={uid:a.uid,email:a.email,displayName:a.displayName,photoURL:a.photoURL,token:s};e(Se(r)),x.success("Account created! Welcome to DeepStrike ðŸš€"),t("/dashboard")}}catch(a){x.error("Registration failed. Please try again.")}finally{s(!1)}},disabled:a,className:"w-full flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-bold text-lg transition-all "+(a?"bg-slate-400 cursor-not-allowed text-white":"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-lg shadow-purple-500/30 hover:shadow-xl"),children:a?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Creating account..."]}):m.jsxs(m.Fragment,{children:[m.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-6 h-6"}),"Sign up with Google"]})}),m.jsxs("div",{className:"flex items-center gap-4 my-6",children:[m.jsx("div",{className:"flex-1 h-px "+(g?"bg-slate-700":"bg-slate-200")}),m.jsx("span",{className:"text-sm "+(g?"text-slate-500":"text-slate-400"),children:"or"}),m.jsx("div",{className:"flex-1 h-px "+(g?"bg-slate-700":"bg-slate-200")})]}),m.jsx("div",{className:"text-center",children:m.jsxs("p",{className:""+(g?"text-slate-400":"text-slate-600"),children:["Already have an account?"," ",m.jsx(h,{to:"/login",className:"font-bold text-purple-500 hover:text-purple-600 transition-colors",children:"Sign in"})]})}),m.jsx("div",{className:"mt-6 pt-6 border-t "+(g?"border-slate-800":"border-slate-100"),children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm "+(g?"text-slate-500":"text-slate-400"),children:[m.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),m.jsx("span",{children:"No credit card required"})]})})]}),m.jsxs("div",{className:"text-center mt-6 text-sm "+(g?"text-slate-500":"text-slate-400"),children:["By signing up, you agree to our"," ",m.jsx("a",{href:"#",className:"text-purple-500 hover:underline",children:"Terms"})," ","&"," ",m.jsx("a",{href:"#",className:"text-purple-500 hover:underline",children:"Privacy"})]})]})]})]})},la=()=>{const{isAuthenticated:e,authLoading:t}=n(e=>e.auth),a=i();return t?m.jsx("div",{className:"flex items-center justify-center min-h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):e?m.jsx(f,{}):(localStorage.setItem("redirectAfterLogin",a.pathname+a.search),m.jsx(g,{to:"/login",state:{from:a},replace:!0}))};class oa extends b.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){}render(){return this.state.hasError?m.jsx("h1",{children:"Something went wrong. Please try again later."}):this.props.children}}const ca=l.createContext(null),da=({children:e})=>{const[t,a]=l.useState(!0),s=l.useCallback(()=>{a(e=>!e)},[]),r=t?64:220;return m.jsx(ca.Provider,{value:{isCollapsed:t,toggleSidebar:s,sidebarWidth:r},children:e})},ua=()=>{const e=l.useContext(ca);if(!e)throw new Error("useSidebar must be used within a SidebarProvider");return e},pa=a.create({baseURL:"http://localhost:8000/api/v1",timeout:3e4,headers:{"Content-Type":"application/json"}});pa.interceptors.request.use(e=>{const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),pa.interceptors.response.use(e=>e,e=>{const{response:t}=e;if(t)switch(t.status){case 401:localStorage.removeItem("authToken"),localStorage.removeItem("user"),"/login"!==window.location.pathname&&(window.location.href="/login");break;case 403:x.error("You do not have permission to perform this action");break;case 404:break;case 500:x.error("Server error. Please try again later.");break;default:t.data?.detail&&x.error(t.data.detail)}else"ECONNABORTED"===e.code?x.error("Request timed out. Please check your connection."):navigator.onLine||x.error("No internet connection");return Promise.reject(e)});const ma=async({unreadOnly:e=!1,limit:t=50}={})=>(await pa.get("/notifications",{params:{unread_only:e,limit:t}})).data,ha=async()=>(await pa.put("/notifications/read-all")).data,xa=()=>{const e=p(),t=r(),a=i(),s=n(e=>e.theme.theme),{isAuthenticated:o,user:c}=n(e=>e.auth),d=n(e=>e.data.data?.spot?.data),{isCollapsed:u,toggleSidebar:x,sidebarWidth:g}=ua(),[f,b]=l.useState(!1),[y,j]=l.useState(0),[v,w]=l.useState([]),[N,k]=l.useState(!1),S=l.useRef(null),_=l.useRef(null);l.useEffect(()=>{const e=async()=>{try{const e=await ma({limit:10});e.success&&(j(e.unread_count||0),w(e.notifications||[]))}catch(e){}};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]);const I=[{title:"Overview",items:[{name:"Dashboard",path:"/dashboard",icon:Y,badge:null}]},{title:"Trading",items:[{name:"Option Chain",path:"/option-chain",icon:J,badge:"Live",badgeColor:"bg-green-500"},{name:"Analytics",path:"/analytics",icon:W,badge:"Pro",badgeColor:"bg-purple-500"},{name:"Historical",path:"/historical",icon:K,badge:null},{name:"Split View",path:"/split-view",icon:q,badge:null}]},{title:"Tools",items:[{name:"Screeners",path:"/screeners",icon:G,badge:"New",badgeColor:"bg-blue-500"},{name:"Calculators",path:"/calculators",icon:X,badge:null},{name:"Position Sizing",path:"/position-sizing",icon:Q,badge:null},{name:"TCA",path:"/tca",icon:Z,badge:null}]}];I.flatMap(e=>e.items),l.useEffect(()=>{const e=e=>{S.current&&!S.current.contains(e.target)&&b(!1),_.current&&!_.current.contains(e.target)&&k(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const A=(new Date).getHours()>=9&&(new Date).getHours()<16;return m.jsxs(z.aside,{initial:{width:g},animate:{width:g},transition:{duration:.3,ease:"easeInOut"},className:`fixed left-0 top-0 h-screen z-50 flex flex-col ${"dark"===s?"bg-gray-900 border-gray-700":"bg-white border-gray-200"} border-r shadow-xl`,children:[m.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:m.jsxs(h,{to:"/",className:"flex items-center gap-2",children:[m.jsx(z.div,{whileHover:{scale:1.05},className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-700 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:m.jsx(V,{className:"w-6 h-6 text-white"})}),m.jsx(F,{children:!u&&m.jsxs(z.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"flex flex-col",children:[m.jsx("span",{className:"font-bold text-lg text-gray-900 dark:text-white leading-tight",children:"Deep"}),m.jsx("span",{className:"font-bold text-lg bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent leading-tight -mt-1",children:"Strike"})]})})]})}),!u&&m.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},className:"px-3 py-2 border-b border-gray-200 dark:border-gray-700",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[m.jsx("div",{className:"w-2 h-2 rounded-full "+(A?"bg-green-500 animate-pulse":"bg-red-500")}),m.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:A?"Market Open":"Market Closed"})]}),d&&m.jsxs("div",{className:"text-xs mt-1 font-medium "+(d.change>=0?"text-green-500":"text-red-500"),children:["NIFTY: ",d.Ltp?.toFixed(2)]})]}),m.jsx("nav",{className:"flex-1 overflow-y-auto py-2 px-2",children:I.map((e,t)=>m.jsxs("div",{className:t>0?"mt-4":"",children:[!u&&m.jsx("div",{className:"px-3 py-1.5 mb-1",children:m.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wider text-gray-400 dark:text-gray-500",children:e.title})}),e.items.map(e=>{const t=e.icon,s=a.pathname===e.path;return m.jsxs(h,{to:e.path,className:"flex items-center gap-3 px-3 py-2.5 mb-0.5 rounded-xl transition-all duration-200 group relative "+(s?"bg-gradient-to-r from-blue-500/10 to-purple-500/10 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50 hover:text-gray-900 dark:hover:text-white"),title:u?e.name:"",children:[s&&m.jsx(z.div,{layoutId:"activeNav",className:"absolute left-0 w-1 h-6 bg-gradient-to-b from-blue-500 to-purple-500 rounded-r-full"}),m.jsx(t,{className:"w-5 h-5 flex-shrink-0 "+(s?"text-blue-600 dark:text-blue-400":"")}),m.jsx(F,{children:!u&&m.jsx(z.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"font-medium text-sm whitespace-nowrap",children:e.name})}),!u&&e.badge&&m.jsx("span",{className:`ml-auto px-1.5 py-0.5 text-[9px] font-bold text-white rounded-full ${e.badgeColor||"bg-green-500"}`,children:e.badge})]},e.path)})]},e.title))}),m.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-2",children:[m.jsxs("div",{className:"relative",ref:_,children:[m.jsxs("button",{onClick:()=>k(!N),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors "+("dark"===s?"hover:bg-gray-800 text-gray-400":"hover:bg-gray-100 text-gray-600"),children:[m.jsxs("div",{className:"relative",children:[y>0?m.jsx(ee,{className:"w-5 h-5 text-blue-500"}):m.jsx(te,{className:"w-5 h-5"}),y>0&&m.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] rounded-full flex items-center justify-center",children:y})]}),!u&&m.jsx("span",{className:"text-sm font-medium",children:"Notifications"})]}),m.jsx(F,{children:N&&!u&&m.jsxs(z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute bottom-full left-0 mb-2 w-80 rounded-xl shadow-2xl border overflow-hidden z-50 "+("dark"===s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[m.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[m.jsx("span",{className:"font-semibold text-sm",children:"Notifications"}),y>0&&m.jsx("button",{onClick:async()=>{try{await ha(),j(0),w(e=>e.map(e=>({...e,is_read:!0})))}catch{}},className:"text-xs text-blue-500 hover:text-blue-600",children:"Mark all read"})]}),m.jsx("div",{className:"max-h-64 overflow-y-auto",children:v.length>0?v.map(e=>m.jsx("div",{className:"p-3 border-b border-gray-100 dark:border-gray-700 last:border-0 "+(e.is_read?"":"bg-blue-50 dark:bg-blue-900/20"),children:m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx("div",{className:"w-2 h-2 rounded-full mt-1.5 flex-shrink-0 "+("success"===e.type?"bg-green-500":"warning"===e.type?"bg-yellow-500":"error"===e.type?"bg-red-500":"price"===e.type?"bg-purple-500":"bg-blue-500")}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-medium truncate",children:e.title}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:e.message})]})]})},e.id)):m.jsxs("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[m.jsx(te,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),m.jsx("p",{className:"text-sm",children:"No notifications"})]})})]})})]}),m.jsxs("button",{onClick:()=>e($e()),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors "+("dark"===s?"hover:bg-gray-800 text-yellow-400":"hover:bg-gray-100 text-gray-600"),children:["dark"===s?m.jsx(ae,{className:"w-5 h-5"}):m.jsx(se,{className:"w-5 h-5"}),!u&&m.jsx("span",{className:"text-sm font-medium",children:"dark"===s?"Light Mode":"Dark Mode"})]}),o&&m.jsxs("div",{className:"relative",ref:S,children:[m.jsxs("button",{onClick:()=>b(!f),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors "+("dark"===s?"hover:bg-gray-800":"hover:bg-gray-100"),children:[m.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:m.jsx("span",{className:"text-white text-sm font-semibold",children:c?.name?.charAt(0)||"S"})}),!u&&m.jsx("span",{className:"text-sm font-medium truncate",children:c?.name||"Shivam"})]}),m.jsx(F,{children:f&&m.jsx(z.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute bottom-full left-0 mb-2 w-48 rounded-lg shadow-xl border "+("dark"===s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:m.jsx("div",{className:"p-2",children:[{icon:re,label:"Profile",action:()=>t("/profile")},{icon:ie,label:"Settings",action:()=>t("/settings")},{icon:ne,label:"Logout",action:()=>{e(Ne()),t("/")}}].map((e,t)=>m.jsxs("button",{onClick:e.action,className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-left text-sm "+("dark"===s?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-700"),children:[m.jsx(e.icon,{className:"w-4 h-4"}),e.label]},t))})})})]}),m.jsx("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-2 rounded-lg transition-colors "+("dark"===s?"hover:bg-gray-800 text-gray-400":"hover:bg-gray-100 text-gray-600"),children:u?m.jsx(le,{className:"w-5 h-5"}):m.jsxs(m.Fragment,{children:[m.jsx(oe,{className:"w-5 h-5"}),m.jsx("span",{className:"text-xs",children:"Collapse"})]})})]})]})},ga=()=>{const e=n(e=>e.toast.toasts),t=n(e=>e.theme?.theme||"light"),a=p(),[s,r]=l.useState(new Set);l.useEffect(()=>{e.forEach(e=>{if(!s.has(e.id)){const t=setTimeout(()=>{a(Ft(e.id))},e.duration||2e3);return()=>clearTimeout(t)}})},[e,a,s]);const i=e=>{const t="w-6 h-6 flex-shrink-0";switch(e){case"success":return m.jsx(H,{className:`${t} text-green-500`});case"error":return m.jsx(pe,{className:`${t} text-red-500`});case"warning":return m.jsx(ue,{className:`${t} text-yellow-500`});case"trading":return m.jsx($,{className:`${t} text-blue-500`});case"notification":return m.jsx(te,{className:`${t} text-purple-500`});case"performance":return m.jsx(U,{className:`${t} text-orange-500`});default:return m.jsx(de,{className:`${t} text-blue-500`})}},o=e=>{const a="backdrop-blur-sm border shadow-xl";if("dark"===t)switch(e){case"success":return`${a} bg-green-900/80 border-green-700/50 text-green-100`;case"error":return`${a} bg-red-900/80 border-red-700/50 text-red-100`;case"warning":return`${a} bg-yellow-900/80 border-yellow-700/50 text-yellow-100`;case"trading":return`${a} bg-blue-900/80 border-blue-700/50 text-blue-100`;case"notification":return`${a} bg-purple-900/80 border-purple-700/50 text-purple-100`;case"performance":return`${a} bg-orange-900/80 border-orange-700/50 text-orange-100`;default:return`${a} bg-gray-800/90 border-gray-600/50 text-gray-100`}else switch(e){case"success":return`${a} bg-green-50/95 border-green-200 text-green-800`;case"error":return`${a} bg-red-50/95 border-red-200 text-red-800`;case"warning":return`${a} bg-yellow-50/95 border-yellow-200 text-yellow-800`;case"trading":return`${a} bg-blue-50/95 border-blue-200 text-blue-800`;case"notification":return`${a} bg-purple-50/95 border-purple-200 text-purple-800`;case"performance":return`${a} bg-orange-50/95 border-orange-200 text-orange-800`;default:return`${a} bg-white/95 border-gray-200 text-gray-800`}},c=e=>{switch(e){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"trading":return"bg-blue-500";case"notification":return"bg-purple-500";case"performance":return"bg-orange-500";default:return"bg-gray-500"}},d={initial:{opacity:0,x:300,scale:.8,rotateY:90},animate:{opacity:1,x:0,scale:1,rotateY:0,transition:{type:"spring",stiffness:300,damping:30,duration:.6}},exit:{opacity:0,x:300,scale:.8,rotateY:-90,transition:{duration:.4,ease:"easeInOut"}},hover:{scale:1.02,y:-2,transition:{duration:.2}}},u={initial:{scaleX:1},animate:{scaleX:0,transition:{duration:5,ease:"linear"}}};return m.jsx(F,{mode:"multiple",children:m.jsx(z.div,{variants:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},initial:"initial",animate:"animate",exit:"exit",className:"fixed top-6 right-6 z-50 space-y-3 max-w-sm w-full",children:e.map((e,n)=>m.jsxs(z.div,{variants:d,initial:"initial",animate:"animate",exit:"exit",whileHover:"hover",layout:!0,onMouseEnter:()=>{return t=e.id,void r(e=>new Set(e).add(t));var t},onMouseLeave:()=>{return t=e.id,void r(e=>{const a=new Set(e);return a.delete(t),a});var t},className:`relative flex items-start p-4 rounded-xl ${o(e.type)} cursor-pointer group overflow-hidden`,role:"alert","aria-live":"polite",style:{zIndex:50-n},children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),!s.has(e.id)&&m.jsx(z.div,{variants:u,initial:"initial",animate:"animate",className:`absolute bottom-0 left-0 h-1 ${c(e.type)} origin-left`,style:{width:"100%"}}),m.jsx(z.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring",stiffness:200},className:"flex-shrink-0 mt-0.5",children:i(e.type)}),m.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[e.title&&m.jsx(z.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-sm font-semibold mb-1",children:e.title}),m.jsx(z.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-sm leading-relaxed",children:e.message}),e.action&&m.jsx(z.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5},onClick:e.action.onClick,className:"mt-2 text-xs font-medium px-3 py-1 rounded-full transition-colors "+("dark"===t?"bg-white/20 hover:bg-white/30 text-white":"bg-black/10 hover:bg-black/20 text-gray-700"),children:e.action.label})]}),m.jsx(z.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.6},whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:()=>a(Ft(e.id)),className:"ml-2 p-1 rounded-full transition-colors "+("dark"===t?"text-gray-400 hover:text-white hover:bg-white/20":"text-gray-400 hover:text-gray-600 hover:bg-black/10"),"aria-label":"Close notification",children:m.jsx(ce,{className:"w-4 h-4"})}),("error"===e.type||"trading"===e.type)&&m.jsx(z.div,{animate:{scale:[1,1.05,1],opacity:[.5,.8,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 rounded-xl border-2 border-current opacity-20 pointer-events-none"})]},e.id))})})},fa=[],ba=e=>e.data.data?.options?.data,ya=e=>e.data.data?.options?.data?.oc,ja=e=>e.data.data?.spot?.data,va=e=>e.data.data?.spot?.data?.ltp||e.data.data?.options?.data?.sltp||0,wa=e=>e.data.data?.fut?.data,Na=e=>e.data.data?.options?.data?.atm_strike,ka=e=>e.data.data?.options?.data?.atmiv,Sa=e=>e.data.data?.options?.data?.max_pain_strike,_a=e=>e.data.data?.options?.data?.pcr,Ia=e=>e.data.data?.options?.data?.dte,Aa=e=>e.data.data?.options?.data?.lot_size||75,Ta=e=>e.data.data?.options?.data?.expiry_list||fa,Ea=e=>e.data.loading,La=e=>e.data.exp_sid,Ca=e=>e.data.sid||"NIFTY",Da=e=>e.auth.isAuthenticated,Ra=e=>e.auth.user,Pa=(e=20)=>t=>{const a=(e=>{const t=ya(e);return t?Object.keys(t).map(e=>parseFloat(e)).sort((e,t)=>e-t):[]})(t),s=Na(t);if(!s||0===a.length)return a;const r=a.findIndex(e=>e>=s);if(-1===r)return a.slice(-e);const i=Math.max(0,r-Math.floor(e/2)),n=Math.min(a.length,i+e);return a.slice(i,n)},Oa=e=>{const t=ba(e);return{calls:t?.total_ce_oi||0,puts:t?.total_pe_oi||0}},za=e=>e.data.symbol,Fa=e=>e.data.sid,Va=y([Ra,e=>e.auth.token,Da,e=>e.auth.authLoading,e=>e.theme.theme,e=>e.theme.isReversed,e=>e.theme.isHighlighting,e=>e.data.data,e=>e.data.exp,Fa,e=>e.data.expDate,e=>e.data.isOc,e=>e.data.isStreaming,e=>e.data.exp_sid],(e,t,a,s,r,i,n,l,o,c,d,u,p,m)=>({user:e,token:t,isAuthenticated:a,authLoading:s,theme:r,isReversed:i,isHighlighting:n,data:l,exp:o,symbol:c,expDate:d,isOc:u,isStreaming:p,exp_sid:m})),$a=[{key:"N",symbol:"NIFTY",label:"NIFTY 50",color:"from-blue-500 to-blue-600"},{key:"B",symbol:"BANKNIFTY",label:"BANK NIFTY",color:"from-emerald-500 to-emerald-600"},{key:"F",symbol:"FINNIFTY",label:"FIN NIFTY",color:"from-violet-500 to-violet-600"},{key:"M",symbol:"MIDCPNIFTY",label:"MIDCAP",color:"from-amber-500 to-amber-600"}],Ua=()=>{const e=p(),t=n(Ca),a=n(Ea),s=n(e=>e.theme.theme),[r,i]=l.useState(!1),[o,c]=l.useState(!1),d="dark"===s,u=l.useCallback(t=>{e(tt({newSid:t})),i(!1)},[e]);return l.useEffect(()=>{const e=e=>{if("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)return;if("`"===e.key||"Escape"===e.key)return e.preventDefault(),void i(e=>!e);const t=$a.find(t=>t.key.toLowerCase()===e.key.toLowerCase());t&&!a&&(e.preventDefault(),u(t.symbol))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[u,a]),l.useEffect(()=>{localStorage.getItem("seenQuickSwitchHint")||(setTimeout(()=>c(!0),3e3),setTimeout(()=>{c(!1),localStorage.setItem("seenQuickSwitchHint","true")},8e3))},[]),m.jsxs(m.Fragment,{children:[m.jsxs(z.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(!0),className:`fixed bottom-6 right-6 z-50 p-4 rounded-2xl shadow-2xl transition-all ${d?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white":"bg-gradient-to-r from-blue-500 to-indigo-500 text-white"} hover:shadow-blue-500/30`,title:"Quick Switch (Press `)",children:[m.jsx($,{className:"w-6 h-6"}),a&&m.jsx("span",{className:"absolute top-0 right-0 w-3 h-3 bg-amber-400 rounded-full animate-ping"})]}),m.jsx(F,{children:o&&m.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:`fixed bottom-24 right-6 z-50 px-4 py-3 rounded-xl shadow-lg ${d?"bg-slate-800 text-white":"bg-white text-slate-900"} border ${d?"border-slate-700":"border-slate-200"}`,children:m.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[m.jsx(me,{className:"w-4 h-4 text-blue-500"}),m.jsxs("span",{children:["Press ",m.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 rounded text-xs font-bold",children:"N"})," ",m.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 rounded text-xs font-bold",children:"B"})," ",m.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 rounded text-xs font-bold",children:"F"})," for quick switch"]})]})})}),m.jsx(F,{children:r&&m.jsxs(m.Fragment,{children:[m.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:()=>i(!1)}),m.jsxs(z.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed bottom-24 right-6 z-50 w-72 rounded-2xl shadow-2xl border overflow-hidden "+(d?"bg-slate-900 border-slate-700":"bg-white border-slate-200"),children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b "+(d?"border-slate-700":"border-slate-100"),children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx($,{className:"w-5 h-5 text-blue-500"}),m.jsx("span",{className:"font-bold "+(d?"text-white":"text-slate-900"),children:"Quick Switch"})]}),m.jsx("button",{onClick:()=>i(!1),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded",children:m.jsx(ce,{className:"w-5 h-5"})})]}),m.jsx("div",{className:"p-2",children:$a.map(e=>m.jsxs("button",{onClick:()=>u(e.symbol),disabled:a,className:`w-full flex items-center gap-3 px-3 py-3 rounded-xl transition-all ${t===e.symbol?`bg-gradient-to-r ${e.color} text-white shadow-lg`:d?"hover:bg-slate-800 text-slate-300":"hover:bg-slate-100 text-slate-700"} ${a?"opacity-50":""}`,children:[m.jsx("kbd",{className:"w-8 h-8 flex items-center justify-center rounded-lg text-sm font-bold "+(t===e.symbol?"bg-white/20":d?"bg-slate-700":"bg-slate-100"),children:e.key}),m.jsxs("div",{className:"flex-1 text-left",children:[m.jsx("div",{className:"font-bold",children:e.symbol}),m.jsx("div",{className:"text-xs "+(t===e.symbol?"opacity-80":"opacity-60"),children:e.label})]}),t===e.symbol&&m.jsx("span",{className:"w-2 h-2 rounded-full bg-white animate-pulse"})]},e.symbol))}),m.jsxs("div",{className:"px-4 py-2 text-xs text-center border-t "+(d?"border-slate-700 text-slate-500":"border-slate-100 text-slate-400"),children:["Press ",m.jsx("kbd",{className:"px-1 bg-slate-100 dark:bg-slate-700 rounded font-bold",children:"`"})," to toggle â€¢ ",m.jsx("kbd",{className:"px-1 bg-slate-100 dark:bg-slate-700 rounded font-bold",children:"Esc"})," to close"]})]})]})})]})},Ba=()=>{const e=n(e=>e.theme.theme),{sidebarWidth:t}=ua(),[a,s]=l.useState(0);l.useEffect(()=>{const e=()=>{s(window.scrollY)};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[]);const r=()=>m.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[m.jsx(z.div,{animate:{x:[0,100,0],y:[0,-100,0]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute -top-40 -left-40 w-80 h-80 bg-gradient-to-r from-blue-400/10 to-purple-600/10 rounded-full blur-3xl"}),m.jsx(z.div,{animate:{x:[0,-100,0],y:[0,100,0]},transition:{duration:25,repeat:1/0,ease:"linear"},className:"absolute -bottom-40 -right-40 w-96 h-96 bg-gradient-to-r from-purple-400/10 to-pink-600/10 rounded-full blur-3xl"})]});return m.jsxs("div",{className:"min-h-screen relative bg-mesh-gradient transition-colors duration-500 "+("dark"===e?"text-white":"text-gray-900"),children:[m.jsx(r,{}),m.jsx(xa,{}),m.jsx(z.div,{initial:"initial",animate:"in",exit:"out",variants:{initial:{opacity:0,y:10},in:{opacity:1,y:0,transition:{duration:.3}},out:{opacity:0,y:-10,transition:{duration:.2}}},className:"relative z-10 min-h-screen transition-all duration-300",style:{marginLeft:t},children:m.jsxs("main",{className:"relative p-2",children:[m.jsx(ga,{}),m.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1,duration:.4},children:m.jsx(f,{})})]})}),m.jsx(Ua,{}),m.jsx(z.div,{className:"fixed top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 transform-gpu z-[60]",style:{scaleX:a/(document.documentElement.scrollHeight-window.innerHeight||1),transformOrigin:"0%"},initial:{scaleX:0}})]})},Ha=()=>m.jsx(da,{children:m.jsx(Ba,{})}),Ma=l.lazy(()=>ge(()=>import("./Dashboard-DJogH1pr.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Ya=l.lazy(()=>ge(()=>import("./Profile-eP1p61hV.js"),__vite__mapDeps([7,1,2,3,5,4,6]))),Ja=l.lazy(()=>ge(()=>import("./Home-CM_p_rP5.js"),__vite__mapDeps([8,1,2,3,4,5,6]))),Wa=l.lazy(()=>ge(()=>import("./About-DGp6Sdqy.js"),__vite__mapDeps([9,1,2,3,10,11,5]))),Ka=l.lazy(()=>ge(()=>import("./Blog-CVlMTOdv.js"),__vite__mapDeps([12,1,2,3,10,11,5]))),qa=l.lazy(()=>ge(()=>import("./Contact-h3AV-ZhI.js"),__vite__mapDeps([13,1,2,3,10,11,5]))),Ga=l.lazy(()=>ge(()=>import("./Tca-Cl1E0gY8.js"),__vite__mapDeps([14,1,2,3,5,4,6]))),Xa=l.lazy(()=>ge(()=>import("./PositionSizing-D3ag_ptN.js"),__vite__mapDeps([15,1,2,3,5,4]))),Qa=l.lazy(()=>ge(()=>import("./OptionChain-CnpcW91-.js"),__vite__mapDeps([16,1,2,3,5,17,10,11,6,4]))),Za=l.lazy(()=>ge(()=>import("./Analytics-g1Ytbi9N.js"),__vite__mapDeps([18,1,2,3,5,6,4]))),es=l.lazy(()=>ge(()=>import("./Historical-DB74jWuw.js"),__vite__mapDeps([19,1,2,3,10,5,6,4]))),ts=l.lazy(()=>ge(()=>import("./SplitView-BmRKNAIw.js"),__vite__mapDeps([20,1,2,3,10,17,5,6,4]))),as=l.lazy(()=>ge(()=>import("./Screeners--60fXnuf.js"),__vite__mapDeps([21,1,2,3,10,5,6,4]))),ss=l.lazy(()=>ge(()=>import("./Calculators-CFI8tjp8.js"),__vite__mapDeps([22,1,2,3,10,5,6,4]))),rs=l.lazy(()=>ge(()=>import("./NotFound-BguSUL37.js"),__vite__mapDeps([23,1,2,3,10,11,5]))),is=l.lazy(()=>ge(()=>import("./Admin-DnlA6wWU.js").then(e=>e.A),__vite__mapDeps([24,1,2,3,10,11,5,4]))),ns=()=>m.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:m.jsxs("div",{className:"flex flex-col items-center gap-3",children:[m.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading..."})]})});function ls(){const e=p(),{isAuthenticated:t,authLoading:s}=n(e=>e.auth),r=n(e=>e.theme.theme);return l.useEffect(()=>{e(ve()),e(e=>{let t=!1;const s=P(be,async s=>{if(t)s||e(_e());else if(t=!0,s)try{const t=await s.getIdToken(),i=Date.now()+33e5,n="http://localhost:8000/api/v1";let l=null;try{const e=await a.post(`${n}/auth/verify`,{id_token:t});l=e.data?.user||e.data?.data?.user,he.log("âœ… Backend verification successful:",l?.email)}catch(r){}const o={uid:s.uid,email:s.email,displayName:s.displayName,photoURL:s.photoURL,token:t,tokenExpiry:i,lastRefresh:(new Date).toISOString(),...l&&{id:l.id,username:l.username,full_name:l.full_name,role:l.role,is_premium:l.is_premium,is_active:l.is_active,is_email_verified:l.is_email_verified,subscription_expires:l.subscription_expires,login_provider:l.login_provider}},c=localStorage.getItem("user")||sessionStorage.getItem("user")?localStorage.getItem("user")?localStorage:sessionStorage:localStorage;c.setItem("user",JSON.stringify(o)),c.setItem("authToken",t),e(Se(o)),je.scheduleTokenRefresh(e)}catch(i){e(Ee())}else e(Ee())},t=>{e(Ee())}),r=O(be,async a=>{if(a&&t)try{const t=await a.getIdToken(),s=Date.now()+33e5,r=localStorage.getItem("user")||sessionStorage.getItem("user");if(r){const a={...JSON.parse(r),token:t,tokenExpiry:s,lastRefresh:(new Date).toISOString()},i=localStorage.getItem("user")?localStorage:sessionStorage;i.setItem("user",JSON.stringify(a)),i.setItem("authToken",t),e(Ie({token:t,expiry:s})),je.scheduleTokenRefresh(e)}}catch(s){}});return()=>{s(),r(),je.cleanup()}}),(async()=>{try{const e="http://localhost:8000/api/v1".replace("/api/v1","");await a.get(`${e}/api/v1/health`)}catch(e){}})()},[e]),s?m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500"})}):m.jsx(j,{children:m.jsx(oa,{children:m.jsx(v,{loading:null,persistor:ra,children:m.jsxs(w,{children:[m.jsx(De,{}),m.jsxs("div",{className:"dark"===r?"dark":"light",children:[m.jsx(N,{position:"top-right"}),m.jsx(l.Suspense,{fallback:m.jsx(ns,{}),children:m.jsxs(k,{children:[m.jsxs(S,{element:m.jsx(Ha,{}),children:[m.jsx(S,{path:"/login",element:t?m.jsx(g,{to:"/dashboard",replace:!0}):m.jsx(ia,{})}),m.jsx(S,{path:"/register",element:t?m.jsx(g,{to:"/dashboard",replace:!0}):m.jsx(na,{})}),m.jsx(S,{path:"/",element:t?m.jsx(g,{to:"/dashboard",replace:!0}):m.jsx(Ja,{})}),m.jsx(S,{path:"/about",element:m.jsx(Wa,{})}),m.jsx(S,{path:"/blog",element:m.jsx(Ka,{})}),m.jsx(S,{path:"/contact",element:m.jsx(qa,{})}),m.jsxs(S,{element:m.jsx(la,{}),children:[m.jsx(S,{path:"/dashboard",element:m.jsx(Ma,{})}),m.jsx(S,{path:"/profile",element:m.jsx(Ya,{})}),m.jsx(S,{path:"/option-chain",element:m.jsx(Qa,{})}),m.jsx(S,{path:"/analytics",element:m.jsx(Za,{})}),m.jsx(S,{path:"/historical",element:m.jsx(es,{})}),m.jsx(S,{path:"/split-view",element:m.jsx(ts,{})}),m.jsx(S,{path:"/screeners",element:m.jsx(as,{})}),m.jsx(S,{path:"/calculators",element:m.jsx(ss,{})}),m.jsx(S,{path:"/position-sizing",element:m.jsx(Xa,{})}),m.jsx(S,{path:"/tca",element:m.jsx(Ga,{})}),m.jsx(S,{path:"/admin",element:m.jsx(is,{})})]})]}),m.jsx(S,{path:"*",element:m.jsx(rs,{})})]})})]})]})})})})}const os=l.createContext(),cs=({children:e})=>{const t=p(),s=l.useRef(null),{user:r,token:i,isAuthenticated:o,authLoading:c,theme:d,isReversed:u,isHighlighting:h,data:x,exp:g,symbol:f,expDate:b,isOc:y,isStreaming:j,exp_sid:v}=n(Va);l.useEffect(()=>(s.current&&clearInterval(s.current),s.current=setInterval(()=>{const e=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");e&&je.isTokenExpired(e)&&t(ve())},3e5),()=>{s.current&&clearInterval(s.current)}),[t]),l.useEffect(()=>{i?a.defaults.headers.common.Authorization=`Bearer ${i}`:delete a.defaults.headers.common.Authorization},[i]);const w=l.useRef(!1);l.useEffect(()=>{he.debug("ðŸ” AppProvider effect check:",{authLoading:c,isAuthenticated:o,isOc:y,symbol:f,initialLoadDone:w.current}),!c&&o&&y&&f&&!w.current&&(w.current=!0,t(tt({newSid:f})))},[t,f,o,c,y]),l.useEffect(()=>{if(!c&&x?.fut?.data?.explist?.length&&y&&!v){const e=x.fut.data.explist[0];e&&t(st(e))}},[t,x?.fut?.data?.explist,y,c,v]),l.useEffect(()=>{if(!c)return y&&o||j&&t(mt()),()=>{j&&t(mt())}},[t,y,o,c,j]);const N={user:r,token:i,isAuthenticated:o,authLoading:c,theme:d,isReversed:u,isHighlighting:h,data:x,exp:g,symbol:f,expDate:b,isOc:y,isStreaming:j,exp_sid:v};return m.jsx(os.Provider,{value:N,children:e})},ds=({children:e})=>m.jsx(cs,{children:e}),us=document.getElementById("root");_.createRoot(us).render(m.jsx(l.StrictMode,{children:m.jsx(I,{store:sa,children:m.jsx(ds,{children:m.jsx(ls,{})})})}));export{st as A,Pa as B,Na as C,ea as D,Xt as E,Kt as F,qt as G,Gt as H,Qt as I,Zt as J,ya as K,_a as L,Oa as M,Sa as N,za as O,Ia as P,ka as Q,Aa as R,ge as _,va as a,Ca as b,wa as c,tt as d,pa as e,Da as f,It as g,At as h,Tt as i,Et as j,Lt as k,Ct as l,Dt as m,he as n,La as o,ba as p,ja as q,Ta as r,Ra as s,Ea as t,nt as u,lt as v,ot as w,Qe as x,Fa as y,Wt as z};
