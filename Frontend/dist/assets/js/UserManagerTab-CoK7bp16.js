import{r as e,aa as s,ah as a,j as t}from"./vendor-61R5RNdl.js";import{a as r}from"./Admin-DnlA6wWU.js";import"./Card-DOfmhbZR.js";import{S as i}from"./Skeleton-54bdQbPe.js";import{ae as l,S as d}from"./ui-icons-BuGoXOaE.js";import"./charts-BVf48S-_.js";import"./index-DpMGw747.js";import"./firebase-Dm1Xd1Ru.js";import"./animations-9kslzpSP.js";const n=()=>{const[n,c]=e.useState([]),[x,o]=e.useState(!0),[m,h]=e.useState(1),[p,g]=e.useState(1),[j,u]=e.useState(0),y="dark"===s(e=>e.theme.theme),b=e.useCallback(async()=>{o(!0);try{const e=await r.listUsers(m,10);c(e.items||e.data||[]),g(e.pages||1),u(e.total||0)}catch(e){a.error("Failed to load users")}finally{o(!1)}},[m]);e.useEffect(()=>{b()},[b]);return x?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(i,{size:"lg"})}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold",children:"User Management"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[j," total users"]})]}),t.jsx("button",{onClick:b,className:"p-2 rounded-lg "+(y?"hover:bg-gray-700":"hover:bg-gray-100"),children:t.jsx(l,{className:"w-5 h-5 "+(x?"animate-spin":"")})})]}),t.jsx("div",{className:"overflow-x-auto rounded-xl border dark:border-gray-700",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:y?"bg-gray-800":"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left py-3 px-4",children:"User"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Role"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Provider"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Last Login"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),t.jsxs("tbody",{children:[n.map(e=>t.jsxs("tr",{className:"border-t "+(y?"border-gray-700":"border-gray-200"),children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[e.profile_image?t.jsx("img",{src:e.profile_image,alt:"",className:"w-8 h-8 rounded-full"}):t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(y?"bg-gray-700":"bg-gray-200"),children:t.jsx(d,{className:"w-4 h-4"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:e.username||e.email?.split("@")[0]}),t.jsx("div",{className:"text-xs text-gray-500",children:e.email})]})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("admin"===e.role?"bg-purple-500 text-white":"premium"===e.role?"bg-yellow-500 text-black":"bg-gray-500 text-white"),children:e.role?.toUpperCase()})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:"text-sm",children:e.login_provider||"email"})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:"px-2 py-1 rounded text-xs "+(e.is_active?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.is_active?"Active":"Inactive"})}),t.jsx("td",{className:"py-3 px-4 text-sm text-gray-500",children:e.last_login?new Date(e.last_login).toLocaleDateString():"Never"}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>(async e=>{const s="admin"===e.role?"user":"admin",t="admin"===s?`Grant admin privileges to ${e.email}?`:`Revoke admin privileges from ${e.email}?`;if(confirm(t))try{await r.updateUser(e.id,{role:s}),a.success(`${e.email} is now ${"admin"===s?"an admin":"a regular user"}`),b()}catch{a.error("Failed to update user role")}})(e),className:"px-3 py-1 rounded text-xs font-medium "+("admin"===e.role?"bg-orange-500 hover:bg-orange-600 text-white":"bg-purple-500 hover:bg-purple-600 text-white"),children:"admin"===e.role?"Revoke Admin":"Make Admin"}),t.jsx("button",{onClick:()=>(async(e,s)=>{try{s?await r.deactivateUser(e):await r.activateUser(e),a.success("User "+(s?"deactivated":"activated")),b()}catch{a.error("Failed to update user status")}})(e.id,e.is_active),className:`px-3 py-1 rounded text-xs ${e.is_active?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"} text-white`,children:e.is_active?"Disable":"Enable"})]})})]},e.id)),0===n.length&&t.jsx("tr",{children:t.jsx("td",{colSpan:"6",className:"py-8 text-center text-gray-500",children:"No users found."})})]})]})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",n.length," of ",j," users"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===m,className:"px-3 py-1 bg-gray-500 text-white rounded disabled:opacity-50",children:"Previous"}),t.jsxs("span",{className:"px-3 py-1",children:["Page ",m," of ",p]}),t.jsx("button",{onClick:()=>h(e=>Math.min(p,e+1)),disabled:m===p,className:"px-3 py-1 bg-gray-500 text-white rounded disabled:opacity-50",children:"Next"})]})]})]})};export{n as default};
