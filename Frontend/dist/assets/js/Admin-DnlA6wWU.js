const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/SystemHealthTab-BXmbf1uf.js","assets/js/vendor-61R5RNdl.js","assets/js/charts-BVf48S-_.js","assets/css/vendor-w23F2EJY.css","assets/js/Card-DOfmhbZR.js","assets/js/Skeleton-54bdQbPe.js","assets/js/ui-icons-BuGoXOaE.js","assets/js/index-DpMGw747.js","assets/js/firebase-Dm1Xd1Ru.js","assets/js/animations-9kslzpSP.js","assets/css/index-Bwjlwb7N.css","assets/js/UserManagerTab-CoK7bp16.js","assets/js/CacheManagerTab-C0HdgvR4.js","assets/js/MonitoringTab-DdoMW2SE.js","assets/js/FeatureFlagsTab-BmKRrlxk.js"])))=>i.map(i=>d[i]);
import{e,_ as a}from"./index-DpMGw747.js";import{a8 as s,aa as t,r as i,j as n,at as r,ah as l}from"./vendor-61R5RNdl.js";import{C as c,B as d}from"./Card-DOfmhbZR.js";import{S as o}from"./Skeleton-54bdQbPe.js";import{H as m,a9 as g,x,as as y,S as u,at as h,au as p,a as j,aa as f,ak as b,N,O as v,al as w}from"./ui-icons-BuGoXOaE.js";import{m as k,A as C}from"./animations-9kslzpSP.js";const _={listConfigs:async(a=null)=>{const s=a?{category:a}:{};return(await e.get("/admin/config",{params:s})).data},getConfig:async a=>(await e.get(`/admin/config/${a}`)).data,createConfig:async a=>(await e.post("/admin/config",a)).data,updateConfig:async(a,s)=>(await e.put(`/admin/config/${a}`,s)).data,deleteConfig:async a=>(await e.delete(`/admin/config/${a}`)).data,listInstruments:async(a=!0)=>(await e.get("/admin/instruments",{params:{active_only:a}})).data,createInstrument:async a=>(await e.post("/admin/instruments",a)).data,updateInstrument:async(a,s)=>(await e.put(`/admin/instruments/${a}`,s)).data,deleteInstrument:async a=>(await e.delete(`/admin/instruments/${a}`)).data,listUsers:async(a=1,s=20,t=null)=>{const i={page:a,page_size:s};t&&(i.search=t);return(await e.get("/users",{params:i})).data},getUser:async a=>(await e.get(`/users/${a}`)).data,updateUser:async(a,s)=>(await e.put(`/users/${a}`,s)).data,deactivateUser:async a=>(await e.post(`/users/${a}/deactivate`)).data,activateUser:async a=>(await e.post(`/users/${a}/activate`)).data,clearCache:async(a=null,s=!1)=>(await e.post("/admin/cache/clear",{pattern:a,clear_all:s})).data,getHealth:async()=>(await e.get("/health")).data,getRuntimeSettings:async()=>(await e.get("/admin/settings/runtime")).data,seedDatabase:async()=>(await e.post("/admin/seed")).data,getSystemMetrics:async()=>(await e.get("/admin/monitoring/system")).data,getWebSocketStats:async()=>(await e.get("/admin/monitoring/websockets")).data,getDatabaseStats:async()=>(await e.get("/admin/monitoring/database")).data,getRedisStats:async()=>(await e.get("/admin/monitoring/redis")).data,getLogs:async(a=null,s=100,t=null)=>{const i={limit:s};a&&(i.level=a),t&&(i.search=t);return(await e.get("/admin/monitoring/logs",{params:i})).data},getFeatureFlags:async()=>(await e.get("/admin/features")).data,toggleFeature:async(a,s)=>(await e.put(`/admin/features/${a}`,{enabled:s})).data},S=i.lazy(()=>a(()=>import("./SystemHealthTab-BXmbf1uf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),A=i.lazy(()=>a(()=>import("./UserManagerTab-CoK7bp16.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,10]))),$=i.lazy(()=>a(()=>import("./CacheManagerTab-C0HdgvR4.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10]))),I=i.lazy(()=>a(()=>import("./MonitoringTab-DdoMW2SE.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,8,9,10]))),z=i.lazy(()=>a(()=>import("./FeatureFlagsTab-BmKRrlxk.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9,10]))),E=()=>{const[e,a]=i.useState([]),[s,r]=i.useState(!0),[d,m]=i.useState(""),[g,y]=i.useState(null),[u,h]=i.useState({}),[p,j]=i.useState(!1),[f,S]=i.useState({key:"",value:"",category:"system",description:"",is_sensitive:!1}),A="dark"===t(e=>e.theme.theme),$=async()=>{r(!0);try{const e=await _.listConfigs(d||null);a(Array.isArray(e)?e:e?.data||[])}catch{l.error("Failed to load configurations")}finally{r(!1)}};i.useEffect(()=>{$()},[d]);return s?n.jsx("div",{className:"flex justify-center py-12",children:n.jsx(o,{size:"lg"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Configuration Manager"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:d,onChange:e=>m(e.target.value),className:"px-3 py-2 rounded-lg border "+(A?"bg-gray-800 border-gray-700":"bg-white border-gray-300"),children:[n.jsx("option",{value:"",children:"All Categories"}),["api","trading","cache","features","system"].map(e=>n.jsx("option",{value:e,children:e},e))]}),n.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:[n.jsx(b,{className:"w-5 h-5"})," Add"]})]})]}),n.jsx(C,{children:p&&n.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>j(!1),children:n.jsxs(k.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:`w-full max-w-md p-6 rounded-2xl ${A?"bg-gray-800":"bg-white"} shadow-2xl`,onClick:e=>e.stopPropagation(),children:[n.jsx("h3",{className:"text-lg font-bold mb-4",children:"Create Configuration"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("input",{value:f.key,onChange:e=>S(a=>({...a,key:e.target.value})),placeholder:"Key *",className:"w-full px-3 py-2 rounded-lg border "+(A?"bg-gray-700 border-gray-600":"border-gray-300")}),n.jsx("input",{value:f.value,onChange:e=>S(a=>({...a,value:e.target.value})),placeholder:"Value *",className:"w-full px-3 py-2 rounded-lg border "+(A?"bg-gray-700 border-gray-600":"border-gray-300")})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-2 rounded-lg "+(A?"bg-gray-700":"bg-gray-100"),children:"Cancel"}),n.jsx("button",{onClick:async()=>{if(f.key&&f.value)try{await _.createConfig({...f,value_type:"string"}),l.success(`Config "${f.key}" created`),j(!1),S({key:"",value:"",category:"system",description:"",is_sensitive:!1}),$()}catch(e){l.error("Failed: "+(e.response?.data?.message||e.message))}else l.error("Key and Value are required")},className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg",children:"Create"})]})]})})}),n.jsx("div",{className:"space-y-3",children:e.map(e=>n.jsx(c,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"font-mono font-bold text-blue-500",children:e.key}),n.jsx("span",{className:"px-2 py-0.5 rounded text-xs "+(A?"bg-gray-700":"bg-gray-100"),children:e.category})]}),g===e.key?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{id:`edit-${e.key}`,defaultValue:e.value,className:"flex-1 px-3 py-2 rounded-lg border "+(A?"bg-gray-800 border-gray-600":"border-gray-300")}),n.jsx("button",{onClick:()=>(async(e,a)=>{try{await _.updateConfig(e,{value:a}),l.success(`Config "${e}" updated`),$(),y(null)}catch{l.error("Failed to update config")}})(e.key,document.getElementById(`edit-${e.key}`).value),className:"p-2 bg-green-500 text-white rounded-lg",children:n.jsx(N,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>y(null),className:"p-2 bg-gray-500 text-white rounded-lg",children:n.jsx(x,{className:"w-5 h-5"})})]}):n.jsx("code",{className:"px-3 py-1 rounded text-sm "+(A?"bg-gray-800":"bg-gray-100"),children:e.is_sensitive&&!u[e.key]?"••••••••":e.value})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>y(e.key),className:"p-2 rounded-lg "+(A?"hover:bg-gray-700":"hover:bg-gray-100"),children:n.jsx(v,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>(async e=>{if(confirm(`Delete config "${e}"?`))try{await _.deleteConfig(e),l.success(`Config "${e}" deleted`),$()}catch{l.error("Failed to delete config")}})(e.key),className:"p-2 rounded-lg text-red-500 hover:bg-red-500/10",children:n.jsx(w,{className:"w-4 h-4"})})]})]})},e.key))})]})},F=()=>(t(e=>e.theme.theme),n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Settings Overview"}),n.jsx(c,{className:"p-6",children:n.jsx("p",{className:"text-gray-500",children:"System settings and configuration overview."})})]})),T=()=>{const[e,a]=i.useState([]),[s,r]=i.useState(!0);return t(e=>e.theme.theme),i.useEffect(()=>{(async()=>{try{const e=await _.listConfigs("api");a(Array.isArray(e)?e:e?.data||[])}catch{l.error("Failed to load API keys")}finally{r(!1)}})()},[]),s?n.jsx("div",{className:"flex justify-center py-12",children:n.jsx(o,{size:"lg"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"API Keys"}),n.jsx("div",{className:"space-y-3",children:e.map(e=>n.jsxs(c,{className:"p-4",children:[n.jsx("div",{className:"font-mono text-blue-500",children:e.key}),n.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"••••••••"})]},e.key))})]})},D=()=>{const[e,a]=i.useState([]),[s,r]=i.useState(!0);return t(e=>e.theme.theme),i.useEffect(()=>{(async()=>{try{const e=await _.listInstruments(!0);a(Array.isArray(e)?e:e?.data||[])}catch{l.error("Failed to load instruments")}finally{r(!1)}})()},[]),s?n.jsx("div",{className:"flex justify-center py-12",children:n.jsx(o,{size:"lg"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h3",{className:"text-lg font-semibold",children:["Instruments (",e.length,")"]}),n.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:e.map(e=>n.jsxs(c,{className:"p-4",children:[n.jsx("div",{className:"font-bold",children:e.symbol}),n.jsx("div",{className:"text-sm text-gray-500",children:e.display_name||e.segment}),n.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Lot: ",e.lot_size]})]},e.id))})]})},P=()=>n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(o,{size:"lg"})}),L=[{id:"health",name:"Health",icon:y},{id:"users",name:"Users",icon:u},{id:"cache",name:"Cache",icon:h},{id:"config",name:"Config",icon:p},{id:"instruments",name:"Instruments",icon:j},{id:"apikeys",name:"API Keys",icon:m},{id:"monitoring",name:"Monitoring",icon:j},{id:"features",name:"Features",icon:f},{id:"settings",name:"Settings",icon:g}],O=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const e=s(),a=t(e=>e.auth.user),l="dark"===t(e=>e.theme.theme),[y,u]=i.useState("health"),[h,p]=i.useState(!0),j=!!a&&("admin"===a?.role||"ADMIN"===a?.role);return i.useEffect(()=>{const e=setTimeout(()=>p(!1),300);return()=>clearTimeout(e)},[]),h?n.jsx("div",{className:"min-h-screen flex items-center justify-center "+(l?"bg-gray-900":"bg-gray-50"),children:n.jsx(o,{size:"lg"})}):a?j?n.jsxs(n.Fragment,{children:[n.jsx(r,{children:n.jsx("title",{children:"Admin Panel | DeepStrike"})}),n.jsxs("div",{className:"min-h-screen "+(l?"bg-gray-900":"bg-gray-50"),children:[n.jsx("div",{className:`sticky top-0 z-40 ${l?"bg-gray-800":"bg-white"} border-b ${l?"border-gray-700":"border-gray-200"} shadow-sm`,children:n.jsxs("div",{className:"px-4 py-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl",children:n.jsx(g,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold",children:"Admin Panel"}),n.jsx("p",{className:"text-sm text-gray-500",children:"System Administration"})]})]}),n.jsx("button",{onClick:()=>e("/dashboard"),className:"p-2 rounded-lg "+(l?"hover:bg-gray-700":"hover:bg-gray-100"),children:n.jsx(x,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-1 scrollbar-hide",children:L.map(e=>{const a=e.icon;return n.jsxs("button",{onClick:()=>u(e.id),className:"flex items-center space-x-2 px-4 py-2.5 rounded-xl text-sm font-medium whitespace-nowrap transition-all "+(y===e.id?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg":""+(l?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200")),children:[n.jsx(a,{className:"w-5 h-5"}),n.jsx("span",{children:e.name})]},e.id)})})]})}),n.jsx(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-6",children:n.jsxs(i.Suspense,{fallback:n.jsx(P,{}),children:["health"===y&&n.jsx(S,{}),"users"===y&&n.jsx(A,{}),"cache"===y&&n.jsx($,{}),"config"===y&&n.jsx(E,{}),"instruments"===y&&n.jsx(D,{}),"apikeys"===y&&n.jsx(T,{}),"monitoring"===y&&n.jsx(I,{}),"features"===y&&n.jsx(z,{}),"settings"===y&&n.jsx(F,{})]})},y)]})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center "+(l?"bg-gray-900":"bg-gray-50"),children:n.jsxs(c,{className:"text-center p-8 max-w-md",children:[n.jsx(m,{className:"w-16 h-16 mx-auto text-red-500 mb-4"}),n.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),n.jsx(d,{onClick:()=>e("/dashboard"),children:"Back to Dashboard"})]})}):n.jsx("div",{className:"min-h-screen flex items-center justify-center "+(l?"bg-gray-900":"bg-gray-50"),children:n.jsxs(c,{className:"text-center p-8 max-w-md",children:[n.jsx(m,{className:"w-16 h-16 mx-auto text-yellow-500 mb-4"}),n.jsx("h2",{className:"text-xl font-bold mb-2",children:"Login Required"}),n.jsx(d,{onClick:()=>e("/login"),children:"Go to Login"})]})})}},Symbol.toStringTag,{value:"Module"}));export{O as A,_ as a};
