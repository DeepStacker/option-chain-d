import{r as e,aa as s,j as a}from"./vendor-61R5RNdl.js";import{a as t}from"./Admin-DnlA6wWU.js";import{C as r}from"./Card-DOfmhbZR.js";import{S as l}from"./Skeleton-54bdQbPe.js";import{ae as i}from"./ui-icons-BuGoXOaE.js";import"./charts-BVf48S-_.js";import"./index-DpMGw747.js";import"./firebase-Dm1Xd1Ru.js";import"./animations-9kslzpSP.js";const n=()=>{const[n,c]=e.useState(null),[d,o]=e.useState(null),[m,x]=e.useState(null),[h,j]=e.useState(!0),[u,g]=e.useState(!1),p="dark"===s(e=>e.theme.theme),y=e.useCallback(async()=>{try{const[e,s,a]=await Promise.all([t.getSystemMetrics(),t.getDatabaseStats(),t.getRedisStats()]);c(Array.isArray(e)?null:e?.data||e),o(Array.isArray(s)?null:s?.data||s),x(Array.isArray(a)?null:a?.data||a)}catch(e){}finally{j(!1)}},[]);e.useEffect(()=>{y()},[y]),e.useEffect(()=>{if(u){const e=setInterval(y,5e3);return()=>clearInterval(e)}},[u,y]);const b=e=>{if(!e)return"N/A";const s=e/1073741824;if(s>=1)return`${s.toFixed(2)} GB`;return`${(e/1048576).toFixed(1)} MB`},N=({title:e,value:s,max:t,unit:l,color:i})=>{const n=t?Math.min(s/t*100,100):s;return a.jsxs(r,{className:"p-4",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:e}),a.jsxs("div",{className:"text-2xl font-bold mb-2",children:["number"==typeof s?s.toFixed(1):s,l]}),a.jsx("div",{className:"h-2 rounded-full "+(p?"bg-gray-700":"bg-gray-200"),children:a.jsx("div",{className:`h-full rounded-full transition-all ${n>80?"bg-red-500":n>50?"bg-yellow-500":i||"bg-green-500"}`,style:{width:`${n}%`}})})]})};return h?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx(l,{size:"lg"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"System Monitoring"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:u,onChange:e=>g(e.target.checked),className:"rounded"}),"Auto-refresh (5s)"]}),a.jsx("button",{onClick:y,className:"p-2 rounded-lg "+(p?"hover:bg-gray-700":"hover:bg-gray-100"),children:a.jsx(i,{className:"w-5 h-5 "+(h?"animate-spin":"")})})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.jsx(N,{title:"CPU Usage",value:n?.cpu?.percent||0,max:100,unit:"%",color:"bg-blue-500"}),a.jsx(N,{title:"Memory Usage",value:n?.memory?.percent||0,max:100,unit:"%",color:"bg-purple-500"}),a.jsx(N,{title:"Disk Usage",value:n?.disk?.percent||0,max:100,unit:"%",color:"bg-orange-500"}),a.jsx(N,{title:"Process Memory",value:b(n?.process?.memory_rss),max:null,unit:"",color:"bg-green-500"})]}),a.jsxs(r,{className:"p-4",children:[a.jsx("h4",{className:"font-semibold mb-3",children:"Database"}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Size:"})," ",b(d?.database_size_bytes)]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Connections:"})," ",d?.active_connections||0]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Tables:"})," ",d?.tables?.length||0]})]})]}),a.jsxs(r,{className:"p-4",children:[a.jsx("h4",{className:"font-semibold mb-3",children:"Redis Cache"}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Status:"})," ",m?.connected?"ðŸŸ¢ Connected":"ðŸ”´ Disconnected"]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Memory:"})," ",m?.used_memory||"N/A"]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Clients:"})," ",m?.connected_clients||0]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Hit Rate:"})," ",m?.hit_rate?`${m.hit_rate}%`:"N/A"]})]})]})]})};export{n as default};
