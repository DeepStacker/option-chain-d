var t=Object.defineProperty,i=(i,e,s)=>((i,e,s)=>e in i?t(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s)(i,"symbol"!=typeof e?e+"":e,s);import{C as e,w as s,x as n,y as h,z as o}from"./vendor-61R5RNdl.js";
/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function r(){}const a=(()=>{let t=0;return()=>t++})();function l(t){return null==t}function c(t){if(Array.isArray&&Array.isArray(t))return!0;const i=Object.prototype.toString.call(t);return"[object"===i.slice(0,7)&&"Array]"===i.slice(-6)}function u(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function d(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function f(t,i){return d(t)?t:i}function p(t,i){return void 0===t?i:t}function g(t,i,e){if(t&&"function"==typeof t.call)return t.apply(e,i)}function m(t,i,e,s){let n,h,o;if(c(t))for(h=t.length,n=0;n<h;n++)i.call(e,t[n],n);else if(u(t))for(o=Object.keys(t),h=o.length,n=0;n<h;n++)i.call(e,t[o[n]],o[n])}function v(t,i){let e,s,n,h;if(!t||!i||t.length!==i.length)return!1;for(e=0,s=t.length;e<s;++e)if(n=t[e],h=i[e],n.datasetIndex!==h.datasetIndex||n.index!==h.index)return!1;return!0}function x(t){if(c(t))return t.map(x);if(u(t)){const i=Object.create(null),e=Object.keys(t),s=e.length;let n=0;for(;n<s;++n)i[e[n]]=x(t[e[n]]);return i}return t}function b(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function _(t,i,e,s){if(!b(t))return;const n=i[t],h=e[t];u(n)&&u(h)?y(n,h,s):i[t]=x(h)}function y(t,i,e){const s=c(i)?i:[i],n=s.length;if(!u(t))return t;const h=(e=e||{}).merger||_;let o;for(let r=0;r<n;++r){if(o=s[r],!u(o))continue;const i=Object.keys(o);for(let s=0,n=i.length;s<n;++s)h(i[s],t,o,e)}return t}function w(t,i){return y(t,i,{merger:M})}function M(t,i,e){if(!b(t))return;const s=i[t],n=e[t];u(s)&&u(n)?w(s,n):Object.prototype.hasOwnProperty.call(i,t)||(i[t]=x(n))}const k={"":t=>t,x:t=>t.x,y:t=>t.y};function S(t,i){const e=k[i]||(k[i]=function(t){const i=function(t){const i=t.split("."),e=[];let s="";for(const n of i)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}(t);return t=>{for(const e of i){if(""===e)break;t=t&&t[e]}return t}}(i));return e(t)}function P(t){return t.charAt(0).toUpperCase()+t.slice(1)}const C=t=>void 0!==t,D=t=>"function"==typeof t,T=(t,i)=>{if(t.size!==i.size)return!1;for(const e of t)if(!i.has(e))return!1;return!0};const E=Math.PI,O=2*E,z=O+E,I=Number.POSITIVE_INFINITY,R=E/180,V=E/2,L=E/4,F=2*E/3,N=Math.log10,A=Math.sign;function W(t,i,e){return Math.abs(t-i)<e}function B(t){const i=Math.round(t);t=W(t,i,t/1e3)?i:t;const e=Math.pow(10,Math.floor(N(t))),s=t/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function Y(t){return!function(t){return"symbol"==typeof t||"object"==typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function H(t){return t*(E/180)}function j(t){if(!d(t))return;let i=1,e=0;for(;Math.round(t*i)/i!==t;)i*=10,e++;return e}function $(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))}function U(t,i){return(t-i+z)%O-E}function J(t){return(t%O+O)%O}function Q(t,i,e,s){const n=J(t),h=J(i),o=J(e),r=J(h-n),a=J(o-n),l=J(n-h),c=J(n-o);return n===h||n===o||s&&h===o||r>a&&l<c}function q(t,i,e){return Math.max(i,Math.min(e,t))}function G(t,i,e,s=1e-6){return t>=Math.min(i,e)-s&&t<=Math.max(i,e)+s}function K(t,i,e){e=e||(e=>t[e]<i);let s,n=t.length-1,h=0;for(;n-h>1;)s=h+n>>1,e(s)?h=s:n=s;return{lo:h,hi:n}}const X=(t,i,e,s)=>K(t,e,s?s=>{const n=t[s][i];return n<e||n===e&&t[s+1][i]===e}:s=>t[s][i]<e),Z=(t,i,e)=>K(t,e,s=>t[s][i]>=e);const tt=["push","pop","shift","splice","unshift"];function it(t,i){const e=t._chartjs;if(!e)return;const s=e.listeners,n=s.indexOf(i);-1!==n&&s.splice(n,1),s.length>0||(tt.forEach(i=>{delete t[i]}),delete t._chartjs)}function et(t){const i=new Set(t);return i.size===t.length?t:Array.from(i)}const st="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function nt(t,i){let e=[],s=!1;return function(...n){e=n,s||(s=!0,st.call(window,()=>{s=!1,t.apply(i,e)}))}}const ht=t=>"start"===t?"left":"end"===t?"right":"center",ot=(t,i,e)=>"start"===t?i:"end"===t?e:(i+e)/2;const rt=t=>0===t||1===t,at=(t,i,e)=>-Math.pow(2,10*(t-=1))*Math.sin((t-i)*O/e),lt=(t,i,e)=>Math.pow(2,-10*t)*Math.sin((t-i)*O/e)+1,ct={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*V),easeOutSine:t=>Math.sin(t*V),easeInOutSine:t=>-.5*(Math.cos(E*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>rt(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>rt(t)?t:at(t,.075,.3),easeOutElastic:t=>rt(t)?t:lt(t,.075,.3),easeInOutElastic(t){const i=.1125;return rt(t)?t:t<.5?.5*at(2*t,i,.45):.5+.5*lt(2*t-1,i,.45)},easeInBack(t){const i=1.70158;return t*t*((i+1)*t-i)},easeOutBack(t){const i=1.70158;return(t-=1)*t*((i+1)*t+i)+1},easeInOutBack(t){let i=1.70158;return(t/=.5)<1?t*t*((1+(i*=1.525))*t-i)*.5:.5*((t-=2)*t*((1+(i*=1.525))*t+i)+2)},easeInBounce:t=>1-ct.easeOutBounce(1-t),easeOutBounce(t){const i=7.5625,e=2.75;return t<1/e?i*t*t:t<2/e?i*(t-=1.5/e)*t+.75:t<2.5/e?i*(t-=2.25/e)*t+.9375:i*(t-=2.625/e)*t+.984375},easeInOutBounce:t=>t<.5?.5*ct.easeInBounce(2*t):.5*ct.easeOutBounce(2*t-1)+.5};function ut(t){if(t&&"object"==typeof t){const i=t.toString();return"[object CanvasPattern]"===i||"[object CanvasGradient]"===i}return!1}function dt(t){return ut(t)?t:new e(t)}function ft(t){return ut(t)?t:new e(t).saturate(.5).darken(.1).hexString()}const pt=["x","y","borderWidth","radius","tension"],gt=["color","borderColor","backgroundColor"];const mt=new Map;function vt(t,i,e){return function(t,i){i=i||{};const e=t+JSON.stringify(i);let s=mt.get(e);return s||(s=new Intl.NumberFormat(t,i),mt.set(e,s)),s}(i,e).format(t)}var xt={formatters:{values:t=>c(t)?t:""+t,numeric(t,i,e){if(0===t)return"0";const s=this.chart.options.locale;let n,h=t;if(e.length>1){const i=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(i<1e-4||i>1e15)&&(n="scientific"),h=function(t,i){let e=i.length>3?i[2].value-i[1].value:i[1].value-i[0].value;Math.abs(e)>=1&&t!==Math.floor(t)&&(e=t-Math.floor(t));return e}(t,e)}const o=N(Math.abs(h)),r=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),a={notation:n,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(a,this.options.ticks.format),vt(t,s,a)}}};const bt=Object.create(null),_t=Object.create(null);function yt(t,i){if(!i)return t;const e=i.split(".");for(let s=0,n=e.length;s<n;++s){const i=e[s];t=t[i]||(t[i]=Object.create(null))}return t}function wt(t,i,e){return"string"==typeof i?y(yt(t,i),e):y(yt(t,""),i)}class Mt{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,i)=>ft(i.backgroundColor),this.hoverBorderColor=(t,i)=>ft(i.borderColor),this.hoverColor=(t,i)=>ft(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return wt(this,t,i)}get(t){return yt(this,t)}describe(t,i){return wt(_t,t,i)}override(t,i){return wt(bt,t,i)}route(t,i,e,s){const n=yt(this,t),h=yt(this,e),o="_"+i;Object.defineProperties(n,{[o]:{value:n[i],writable:!0},[i]:{enumerable:!0,get(){const t=this[o],i=h[s];return u(t)?Object.assign({},i,t):p(t,i)},set(t){this[o]=t}}})}apply(t){t.forEach(t=>t(this))}}var kt=new Mt({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:gt},numbers:{type:"number",properties:pt}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:xt.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function St(t,i,e,s,n){let h=i[n];return h||(h=i[n]=t.measureText(n).width,e.push(n)),h>s&&(s=h),s}function Pt(t,i,e){const s=t.currentDevicePixelRatio,n=0!==e?Math.max(e/2,.5):0;return Math.round((i-n)*s)/s+n}function Ct(t,i){(i||t)&&((i=i||t.getContext("2d")).save(),i.resetTransform(),i.clearRect(0,0,t.width,t.height),i.restore())}function Dt(t,i,e,s){Tt(t,i,e,s,null)}function Tt(t,i,e,s,n){let h,o,r,a,l,c,u,d;const f=i.pointStyle,p=i.rotation,g=i.radius;let m=(p||0)*R;if(f&&"object"==typeof f&&(h=f.toString(),"[object HTMLImageElement]"===h||"[object HTMLCanvasElement]"===h))return t.save(),t.translate(e,s),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:n?t.ellipse(e,s,n/2,g,0,0,O):t.arc(e,s,g,0,O),t.closePath();break;case"triangle":c=n?n/2:g,t.moveTo(e+Math.sin(m)*c,s-Math.cos(m)*g),m+=F,t.lineTo(e+Math.sin(m)*c,s-Math.cos(m)*g),m+=F,t.lineTo(e+Math.sin(m)*c,s-Math.cos(m)*g),t.closePath();break;case"rectRounded":l=.516*g,a=g-l,o=Math.cos(m+L)*a,u=Math.cos(m+L)*(n?n/2-l:a),r=Math.sin(m+L)*a,d=Math.sin(m+L)*(n?n/2-l:a),t.arc(e-u,s-r,l,m-E,m-V),t.arc(e+d,s-o,l,m-V,m),t.arc(e+u,s+r,l,m,m+V),t.arc(e-d,s+o,l,m+V,m+E),t.closePath();break;case"rect":if(!p){a=Math.SQRT1_2*g,c=n?n/2:a,t.rect(e-c,s-a,2*c,2*a);break}m+=L;case"rectRot":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,r=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),t.moveTo(e-u,s-r),t.lineTo(e+d,s-o),t.lineTo(e+u,s+r),t.lineTo(e-d,s+o),t.closePath();break;case"crossRot":m+=L;case"cross":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,r=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),t.moveTo(e-u,s-r),t.lineTo(e+u,s+r),t.moveTo(e+d,s-o),t.lineTo(e-d,s+o);break;case"star":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,r=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),t.moveTo(e-u,s-r),t.lineTo(e+u,s+r),t.moveTo(e+d,s-o),t.lineTo(e-d,s+o),m+=L,u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,r=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),t.moveTo(e-u,s-r),t.lineTo(e+u,s+r),t.moveTo(e+d,s-o),t.lineTo(e-d,s+o);break;case"line":o=n?n/2:Math.cos(m)*g,r=Math.sin(m)*g,t.moveTo(e-o,s-r),t.lineTo(e+o,s+r);break;case"dash":t.moveTo(e,s),t.lineTo(e+Math.cos(m)*(n?n/2:g),s+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),i.borderWidth>0&&t.stroke()}}function Et(t,i,e){return e=e||.5,!i||t&&t.x>i.left-e&&t.x<i.right+e&&t.y>i.top-e&&t.y<i.bottom+e}function Ot(t,i){t.save(),t.beginPath(),t.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),t.clip()}function zt(t){t.restore()}function It(t,i,e,s,n){if(!i)return t.lineTo(e.x,e.y);if("middle"===n){const s=(i.x+e.x)/2;t.lineTo(s,i.y),t.lineTo(s,e.y)}else"after"===n!=!!s?t.lineTo(i.x,e.y):t.lineTo(e.x,i.y);t.lineTo(e.x,e.y)}function Rt(t,i,e,s){if(!i)return t.lineTo(e.x,e.y);t.bezierCurveTo(s?i.cp1x:i.cp2x,s?i.cp1y:i.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function Vt(t,i,e,s,n){if(n.strikethrough||n.underline){const h=t.measureText(s),o=i-h.actualBoundingBoxLeft,r=i+h.actualBoundingBoxRight,a=e-h.actualBoundingBoxAscent,l=e+h.actualBoundingBoxDescent,c=n.strikethrough?(a+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(o,c),t.lineTo(r,c),t.stroke()}}function Lt(t,i){const e=t.fillStyle;t.fillStyle=i.color,t.fillRect(i.left,i.top,i.width,i.height),t.fillStyle=e}function Ft(t,i,e,s,n,h={}){const o=c(i)?i:[i],r=h.strokeWidth>0&&""!==h.strokeColor;let a,u;for(t.save(),t.font=n.string,function(t,i){i.translation&&t.translate(i.translation[0],i.translation[1]),l(i.rotation)||t.rotate(i.rotation),i.color&&(t.fillStyle=i.color),i.textAlign&&(t.textAlign=i.textAlign),i.textBaseline&&(t.textBaseline=i.textBaseline)}(t,h),a=0;a<o.length;++a)u=o[a],h.backdrop&&Lt(t,h.backdrop),r&&(h.strokeColor&&(t.strokeStyle=h.strokeColor),l(h.strokeWidth)||(t.lineWidth=h.strokeWidth),t.strokeText(u,e,s,h.maxWidth)),t.fillText(u,e,s,h.maxWidth),Vt(t,e,s,u,h),s+=Number(n.lineHeight);t.restore()}function Nt(t,i){const{x:e,y:s,w:n,h:h,radius:o}=i;t.arc(e+o.topLeft,s+o.topLeft,o.topLeft,1.5*E,E,!0),t.lineTo(e,s+h-o.bottomLeft),t.arc(e+o.bottomLeft,s+h-o.bottomLeft,o.bottomLeft,E,V,!0),t.lineTo(e+n-o.bottomRight,s+h),t.arc(e+n-o.bottomRight,s+h-o.bottomRight,o.bottomRight,V,0,!0),t.lineTo(e+n,s+o.topRight),t.arc(e+n-o.topRight,s+o.topRight,o.topRight,0,-V,!0),t.lineTo(e+o.topLeft,s)}const At=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Wt=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Bt(t,i){const e=(""+t).match(At);if(!e||"normal"===e[1])return 1.2*i;switch(t=+e[2],e[3]){case"px":return t;case"%":t/=100}return i*t}const Yt=t=>+t||0;function Ht(t,i){const e={},s=u(i),n=s?Object.keys(i):i,h=u(t)?s?e=>p(t[e],t[i[e]]):i=>t[i]:()=>t;for(const o of n)e[o]=Yt(h(o));return e}function jt(t){return Ht(t,{top:"y",right:"x",bottom:"y",left:"x"})}function $t(t){return Ht(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ut(t){const i=jt(t);return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Jt(t,i){t=t||{},i=i||kt.font;let e=p(t.size,i.size);"string"==typeof e&&(e=parseInt(e,10));let s=p(t.style,i.style);s&&!(""+s).match(Wt)&&(s=void 0);const n={family:p(t.family,i.family),lineHeight:Bt(p(t.lineHeight,i.lineHeight),e),size:e,style:s,weight:p(t.weight,i.weight),string:""};return n.string=function(t){return!t||l(t.size)||l(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(n),n}function Qt(t,i,e,s){let n,h,o;for(n=0,h=t.length;n<h;++n)if(o=t[n],void 0!==o&&void 0!==o)return o}function qt(t,i,e){const{min:s,max:n}=t,h=(r=(n-s)/2,"string"==typeof(o=i)&&o.endsWith("%")?parseFloat(o)/100*r:+o);var o,r;const a=(t,i)=>e&&0===t?0:t+i;return{min:a(s,-Math.abs(h)),max:a(n,h)}}function Gt(t,i){return Object.assign(Object.create(t),i)}function Kt(t,i=[""],e,s,n=()=>t[0]){const h=e||t;void 0===s&&(s=ai("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:h,_fallback:s,_getTarget:n,override:e=>Kt([e,...t],i,h,s)};return new Proxy(o,{deleteProperty:(i,e)=>(delete i[e],delete i._keys,delete t[0][e],!0),get:(e,s)=>ei(e,s,()=>function(t,i,e,s){let n;for(const h of i)if(n=ai(ti(h,t),e),void 0!==n)return ii(t,n)?oi(e,s,t,n):n}(s,i,t,e)),getOwnPropertyDescriptor:(t,i)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],i),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,i)=>li(t).includes(i),ownKeys:t=>li(t),set(t,i,e){const s=t._storage||(t._storage=n());return t[i]=s[i]=e,delete t._keys,!0}})}function Xt(t,i,e,s){const n={_cacheable:!1,_proxy:t,_context:i,_subProxy:e,_stack:new Set,_descriptors:Zt(t,s),setContext:i=>Xt(t,i,e,s),override:n=>Xt(t.override(n),i,e,s)};return new Proxy(n,{deleteProperty:(i,e)=>(delete i[e],delete t[e],!0),get:(t,i,e)=>ei(t,i,()=>function(t,i,e){const{_proxy:s,_context:n,_subProxy:h,_descriptors:o}=t;let r=s[i];D(r)&&o.isScriptable(i)&&(r=function(t,i,e,s){const{_proxy:n,_context:h,_subProxy:o,_stack:r}=e;if(r.has(t))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+t);r.add(t);let a=i(h,o||s);r.delete(t),ii(t,a)&&(a=oi(n._scopes,n,t,a));return a}(i,r,t,e));c(r)&&r.length&&(r=function(t,i,e,s){const{_proxy:n,_context:h,_subProxy:o,_descriptors:r}=e;if(void 0!==h.index&&s(t))return i[h.index%i.length];if(u(i[0])){const e=i,s=n._scopes.filter(t=>t!==e);i=[];for(const a of e){const e=oi(s,n,t,a);i.push(Xt(e,h,o&&o[t],r))}}return i}(i,r,t,o.isIndexable));ii(i,r)&&(r=Xt(r,n,h&&h[i],o));return r}(t,i,e)),getOwnPropertyDescriptor:(i,e)=>i._descriptors.allKeys?Reflect.has(t,e)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,e),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(i,e)=>Reflect.has(t,e),ownKeys:()=>Reflect.ownKeys(t),set:(i,e,s)=>(t[e]=s,delete i[e],!0)})}function Zt(t,i={scriptable:!0,indexable:!0}){const{_scriptable:e=i.scriptable,_indexable:s=i.indexable,_allKeys:n=i.allKeys}=t;return{allKeys:n,scriptable:e,indexable:s,isScriptable:D(e)?e:()=>e,isIndexable:D(s)?s:()=>s}}const ti=(t,i)=>t?t+P(i):i,ii=(t,i)=>u(i)&&"adapters"!==t&&(null===Object.getPrototypeOf(i)||i.constructor===Object);function ei(t,i,e){if(Object.prototype.hasOwnProperty.call(t,i)||"constructor"===i)return t[i];const s=e();return t[i]=s,s}function si(t,i,e){return D(t)?t(i,e):t}const ni=(t,i)=>!0===t?i:"string"==typeof t?S(i,t):void 0;function hi(t,i,e,s,n){for(const h of i){const i=ni(e,h);if(i){t.add(i);const h=si(i._fallback,e,n);if(void 0!==h&&h!==e&&h!==s)return h}else if(!1===i&&void 0!==s&&e!==s)return null}return!1}function oi(t,i,e,s){const n=i._rootScopes,h=si(i._fallback,e,s),o=[...t,...n],r=new Set;r.add(s);let a=ri(r,o,e,h||e,s);return null!==a&&((void 0===h||h===e||(a=ri(r,o,h,a,s),null!==a))&&Kt(Array.from(r),[""],n,h,()=>function(t,i,e){const s=t._getTarget();i in s||(s[i]={});const n=s[i];if(c(n)&&u(e))return e;return n||{}}(i,e,s)))}function ri(t,i,e,s,n){for(;e;)e=hi(t,i,e,s,n);return e}function ai(t,i){for(const e of i){if(!e)continue;const i=e[t];if(void 0!==i)return i}}function li(t){let i=t._keys;return i||(i=t._keys=function(t){const i=new Set;for(const e of t)for(const t of Object.keys(e).filter(t=>!t.startsWith("_")))i.add(t);return Array.from(i)}(t._scopes)),i}const ci=Number.EPSILON||1e-14,ui=(t,i)=>i<t.length&&!t[i].skip&&t[i],di=t=>"x"===t?"y":"x";function fi(t,i,e,s){const n=t.skip?i:t,h=i,o=e.skip?i:e,r=$(h,n),a=$(o,h);let l=r/(r+a),c=a/(r+a);l=isNaN(l)?0:l,c=isNaN(c)?0:c;const u=s*l,d=s*c;return{previous:{x:h.x-u*(o.x-n.x),y:h.y-u*(o.y-n.y)},next:{x:h.x+d*(o.x-n.x),y:h.y+d*(o.y-n.y)}}}function pi(t,i="x"){const e=di(i),s=t.length,n=Array(s).fill(0),h=Array(s);let o,r,a,l=ui(t,0);for(o=0;o<s;++o)if(r=a,a=l,l=ui(t,o+1),a){if(l){const t=l[i]-a[i];n[o]=0!==t?(l[e]-a[e])/t:0}h[o]=r?l?A(n[o-1])!==A(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}!function(t,i,e){const s=t.length;let n,h,o,r,a,l=ui(t,0);for(let c=0;c<s-1;++c)a=l,l=ui(t,c+1),a&&l&&(W(i[c],0,ci)?e[c]=e[c+1]=0:(n=e[c]/i[c],h=e[c+1]/i[c],r=Math.pow(n,2)+Math.pow(h,2),r<=9||(o=3/Math.sqrt(r),e[c]=n*o*i[c],e[c+1]=h*o*i[c])))}(t,n,h),function(t,i,e="x"){const s=di(e),n=t.length;let h,o,r,a=ui(t,0);for(let l=0;l<n;++l){if(o=r,r=a,a=ui(t,l+1),!r)continue;const n=r[e],c=r[s];o&&(h=(n-o[e])/3,r[`cp1${e}`]=n-h,r[`cp1${s}`]=c-h*i[l]),a&&(h=(a[e]-n)/3,r[`cp2${e}`]=n+h,r[`cp2${s}`]=c+h*i[l])}}(t,h,i)}function gi(t,i,e){return Math.max(Math.min(t,e),i)}function mi(t,i,e,s,n){let h,o,r,a;if(i.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===i.cubicInterpolationMode)pi(t,n);else{let e=s?t[t.length-1]:t[0];for(h=0,o=t.length;h<o;++h)r=t[h],a=fi(e,r,t[Math.min(h+1,o-(s?0:1))%o],i.tension),r.cp1x=a.previous.x,r.cp1y=a.previous.y,r.cp2x=a.next.x,r.cp2y=a.next.y,e=r}i.capBezierPoints&&function(t,i){let e,s,n,h,o,r=Et(t[0],i);for(e=0,s=t.length;e<s;++e)o=h,h=r,r=e<s-1&&Et(t[e+1],i),h&&(n=t[e],o&&(n.cp1x=gi(n.cp1x,i.left,i.right),n.cp1y=gi(n.cp1y,i.top,i.bottom)),r&&(n.cp2x=gi(n.cp2x,i.left,i.right),n.cp2y=gi(n.cp2y,i.top,i.bottom)))}(t,e)}function vi(){return"undefined"!=typeof window&&"undefined"!=typeof document}function xi(t){let i=t.parentNode;return i&&"[object ShadowRoot]"===i.toString()&&(i=i.host),i}function bi(t,i,e){let s;return"string"==typeof t?(s=parseInt(t,10),-1!==t.indexOf("%")&&(s=s/100*i.parentNode[e])):s=t,s}const _i=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const yi=["top","right","bottom","left"];function wi(t,i,e){const s={};e=e?"-"+e:"";for(let n=0;n<4;n++){const h=yi[n];s[h]=parseFloat(t[i+"-"+h+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function Mi(t,i){if("native"in t)return t;const{canvas:e,currentDevicePixelRatio:s}=i,n=_i(e),h="border-box"===n.boxSizing,o=wi(n,"padding"),r=wi(n,"border","width"),{x:a,y:l,box:c}=function(t,i){const e=t.touches,s=e&&e.length?e[0]:t,{offsetX:n,offsetY:h}=s;let o,r,a=!1;if(((t,i,e)=>(t>0||i>0)&&(!e||!e.shadowRoot))(n,h,t.target))o=n,r=h;else{const t=i.getBoundingClientRect();o=s.clientX-t.left,r=s.clientY-t.top,a=!0}return{x:o,y:r,box:a}}(t,e),u=o.left+(c&&r.left),d=o.top+(c&&r.top);let{width:f,height:p}=i;return h&&(f-=o.width+r.width,p-=o.height+r.height),{x:Math.round((a-u)/f*e.width/s),y:Math.round((l-d)/p*e.height/s)}}const ki=t=>Math.round(10*t)/10;function Si(t,i,e,s){const n=_i(t),h=wi(n,"margin"),o=bi(n.maxWidth,t,"clientWidth")||I,r=bi(n.maxHeight,t,"clientHeight")||I,a=function(t,i,e){let s,n;if(void 0===i||void 0===e){const h=t&&xi(t);if(h){const t=h.getBoundingClientRect(),o=_i(h),r=wi(o,"border","width"),a=wi(o,"padding");i=t.width-a.width-r.width,e=t.height-a.height-r.height,s=bi(o.maxWidth,h,"clientWidth"),n=bi(o.maxHeight,h,"clientHeight")}else i=t.clientWidth,e=t.clientHeight}return{width:i,height:e,maxWidth:s||I,maxHeight:n||I}}(t,i,e);let{width:l,height:c}=a;if("content-box"===n.boxSizing){const t=wi(n,"border","width"),i=wi(n,"padding");l-=i.width+t.width,c-=i.height+t.height}l=Math.max(0,l-h.width),c=Math.max(0,s?l/s:c-h.height),l=ki(Math.min(l,o,a.maxWidth)),c=ki(Math.min(c,r,a.maxHeight)),l&&!c&&(c=ki(l/2));return(void 0!==i||void 0!==e)&&s&&a.height&&c>a.height&&(c=a.height,l=ki(Math.floor(c*s))),{width:l,height:c}}function Pi(t,i,e){const s=i||1,n=ki(t.height*s),h=ki(t.width*s);t.height=ki(t.height),t.width=ki(t.width);const o=t.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==s||o.height!==n||o.width!==h)&&(t.currentDevicePixelRatio=s,o.height=n,o.width=h,t.ctx.setTransform(s,0,0,s,0,0),!0)}const Ci=function(){let t=!1;try{const i={get passive(){return t=!0,!1}};vi()&&(window.addEventListener("test",null,i),window.removeEventListener("test",null,i))}catch(i){}return t}();function Di(t,i){const e=function(t,i){return _i(t).getPropertyValue(i)}(t,i),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Ti(t,i,e,s){return{x:t.x+e*(i.x-t.x),y:t.y+e*(i.y-t.y)}}function Ei(t,i,e,s){return{x:t.x+e*(i.x-t.x),y:"middle"===s?e<.5?t.y:i.y:"after"===s?e<1?t.y:i.y:e>0?i.y:t.y}}function Oi(t,i,e,s){const n={x:t.cp2x,y:t.cp2y},h={x:i.cp1x,y:i.cp1y},o=Ti(t,n,e),r=Ti(n,h,e),a=Ti(h,i,e),l=Ti(o,r,e),c=Ti(r,a,e);return Ti(l,c,e)}function zi(t,i,e){return t?function(t,i){return{x:e=>t+t+i-e,setWidth(t){i=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,i)=>t-i,leftForLtr:(t,i)=>t-i}}(i,e):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,i)=>t+i,leftForLtr:(t,i)=>t}}function Ii(t,i){let e,s;"ltr"!==i&&"rtl"!==i||(e=t.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",i,"important"),t.prevTextDirection=s)}function Ri(t,i){void 0!==i&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",i[0],i[1]))}function Vi(t){return"angle"===t?{between:Q,compare:U,normalize:J}:{between:G,compare:(t,i)=>t-i,normalize:t=>t}}function Li({start:t,end:i,count:e,loop:s,style:n}){return{start:t%e,end:i%e,loop:s&&(i-t+1)%e==0,style:n}}function Fi(t,i,e){if(!e)return[t];const{property:s,start:n,end:h}=e,o=i.length,{compare:r,between:a,normalize:l}=Vi(s),{start:c,end:u,loop:d,style:f}=function(t,i,e){const{property:s,start:n,end:h}=e,{between:o,normalize:r}=Vi(s),a=i.length;let l,c,{start:u,end:d,loop:f}=t;if(f){for(u+=a,d+=a,l=0,c=a;l<c&&o(r(i[u%a][s]),n,h);++l)u--,d--;u%=a,d%=a}return d<u&&(d+=a),{start:u,end:d,loop:f,style:t.style}}(t,i,e),p=[];let g,m,v,x=!1,b=null;const _=()=>x||a(n,v,g)&&0!==r(n,v),y=()=>!x||0===r(h,g)||a(h,v,g);for(let w=c,M=c;w<=u;++w)m=i[w%o],m.skip||(g=l(m[s]),g!==v&&(x=a(g,n,h),null===b&&_()&&(b=0===r(g,n)?w:M),null!==b&&y()&&(p.push(Li({start:b,end:w,loop:d,count:o,style:f})),b=null),M=w,v=g));return null!==b&&p.push(Li({start:b,end:u,loop:d,count:o,style:f})),p}function Ni(t,i){const e=[],s=t.segments;for(let n=0;n<s.length;n++){const h=Fi(s[n],t.points,i);h.length&&e.push(...h)}return e}function Ai(t,i,e,s){return s&&s.setContext&&e?function(t,i,e,s){const n=t._chart.getContext(),h=Wi(t.options),{_datasetIndex:o,options:{spanGaps:r}}=t,a=e.length,l=[];let c=h,u=i[0].start,d=u;function f(t,i,s,n){const h=r?-1:1;if(t!==i){for(t+=a;e[t%a].skip;)t-=h;for(;e[i%a].skip;)i+=h;t%a!==i%a&&(l.push({start:t%a,end:i%a,loop:s,style:n}),c=n,u=i%a)}}for(const p of i){u=r?u:p.start;let t,i=e[u%a];for(d=u+1;d<=p.end;d++){const h=e[d%a];t=Wi(s.setContext(Gt(n,{type:"segment",p0:i,p1:h,p0DataIndex:(d-1)%a,p1DataIndex:d%a,datasetIndex:o}))),Bi(t,c)&&f(u,d-1,p.loop,c),i=h,c=t}u<d-1&&f(u,d-1,p.loop,c)}return l}(t,i,e,s):i}function Wi(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Bi(t,i){if(!i)return!1;const e=[],s=function(t,i){return ut(i)?(e.includes(i)||e.push(i),e.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(i,s)}function Yi(t,i,e){return t.options.clip?t[e]:i[e]}function Hi(t,i){const e=i._clip;if(e.disabled)return!1;const s=function(t,i){const{xScale:e,yScale:s}=t;return e&&s?{left:Yi(e,i,"left"),right:Yi(e,i,"right"),top:Yi(s,i,"top"),bottom:Yi(s,i,"bottom")}:i}(i,t.chartArea);return{left:!1===e.left?0:s.left-(!0===e.left?0:e.left),right:!1===e.right?t.width:s.right+(!0===e.right?0:e.right),top:!1===e.top?0:s.top-(!0===e.top?0:e.top),bottom:!1===e.bottom?t.height:s.bottom+(!0===e.bottom?0:e.bottom)}}
/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class ji{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,e,s){const n=i.listeners[s],h=i.duration;n.forEach(s=>s({chart:t,initial:i.initial,numSteps:h,currentStep:Math.min(e-i.start,h)}))}_refresh(){this._request||(this._running=!0,this._request=st.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((e,s)=>{if(!e.running||!e.items.length)return;const n=e.items;let h,o=n.length-1,r=!1;for(;o>=0;--o)h=n[o],h._active?(h._total>e.duration&&(e.duration=h._total),h.tick(t),r=!0):(n[o]=n[n.length-1],n.pop());r&&(s.draw(),this._notify(s,e,t,"progress")),n.length||(e.running=!1,this._notify(s,e,t,"complete"),e.initial=!1),i+=n.length}),this._lastDate=t,0===i&&(this._running=!1)}_getAnims(t){const i=this._charts;let e=i.get(t);return e||(e={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,e)),e}listen(t,i,e){this._getAnims(t).listeners[i].push(e)}add(t,i){i&&i.length&&this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){const i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((t,i)=>Math.max(t,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const i=this._charts.get(t);return!!(i&&i.running&&i.items.length)}stop(t){const i=this._charts.get(t);if(!i||!i.items.length)return;const e=i.items;let s=e.length-1;for(;s>=0;--s)e[s].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var $i=new ji;const Ui="transparent",Ji={boolean:(t,i,e)=>e>.5?i:t,color(t,i,e){const s=dt(t||Ui),n=s.valid&&dt(i||Ui);return n&&n.valid?n.mix(s,e).hexString():i},number:(t,i,e)=>t+(i-t)*e};class Qi{constructor(t,i,e,s){const n=i[e];s=Qt([t.to,s,n,t.from]);const h=Qt([t.from,n,s]);this._active=!0,this._fn=t.fn||Ji[t.type||typeof h],this._easing=ct[t.easing]||ct.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=e,this._from=h,this._to=s,this._promises=void 0}active(){return this._active}update(t,i,e){if(this._active){this._notify(!1);const s=this._target[this._prop],n=e-this._start,h=this._duration-n;this._start=e,this._duration=Math.floor(Math.max(h,t.duration)),this._total+=n,this._loop=!!t.loop,this._to=Qt([t.to,i,s,t.from]),this._from=Qt([t.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const i=t-this._start,e=this._duration,s=this._prop,n=this._from,h=this._loop,o=this._to;let r;if(this._active=n!==o&&(h||i<e),!this._active)return this._target[s]=o,void this._notify(!0);i<0?this._target[s]=n:(r=i/e%2,r=h&&r>1?2-r:r,r=this._easing(Math.min(1,Math.max(0,r))),this._target[s]=this._fn(n,o,r))}wait(){const t=this._promises||(this._promises=[]);return new Promise((i,e)=>{t.push({res:i,rej:e})})}_notify(t){const i=t?"res":"rej",e=this._promises||[];for(let s=0;s<e.length;s++)e[s][i]()}}class qi{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!u(t))return;const i=Object.keys(kt.animation),e=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const n=t[s];if(!u(n))return;const h={};for(const t of i)h[t]=n[t];(c(n.properties)&&n.properties||[s]).forEach(t=>{t!==s&&e.has(t)||e.set(t,h)})})}_animateOptions(t,i){const e=i.options,s=function(t,i){if(!i)return;let e=t.options;if(!e)return void(t.options=i);e.$shared&&(t.options=e=Object.assign({},e,{$shared:!1,$animations:{}}));return e}(t,e);if(!s)return[];const n=this._createAnimations(s,e);return e.$shared&&function(t,i){const e=[],s=Object.keys(i);for(let n=0;n<s.length;n++){const i=t[s[n]];i&&i.active()&&e.push(i.wait())}return Promise.all(e)}(t.options.$animations,e).then(()=>{t.options=e},()=>{}),n}_createAnimations(t,i){const e=this._properties,s=[],n=t.$animations||(t.$animations={}),h=Object.keys(i),o=Date.now();let r;for(r=h.length-1;r>=0;--r){const a=h[r];if("$"===a.charAt(0))continue;if("options"===a){s.push(...this._animateOptions(t,i));continue}const l=i[a];let c=n[a];const u=e.get(a);if(c){if(u&&c.active()){c.update(u,l,o);continue}c.cancel()}u&&u.duration?(n[a]=c=new Qi(u,t,a,l),s.push(c)):t[a]=l}return s}update(t,i){if(0===this._properties.size)return void Object.assign(t,i);const e=this._createAnimations(t,i);return e.length?($i.add(this._chart,e),!0):void 0}}function Gi(t,i){const e=t&&t.options||{},s=e.reverse,n=void 0===e.min?i:0,h=void 0===e.max?i:0;return{start:s?h:n,end:s?n:h}}function Ki(t,i){const e=[],s=t._getSortedDatasetMetas(i);let n,h;for(n=0,h=s.length;n<h;++n)e.push(s[n].index);return e}function Xi(t,i,e,s={}){const n=t.keys,h="single"===s.mode;let o,r,a,l;if(null===i)return;let c=!1;for(o=0,r=n.length;o<r;++o){if(a=+n[o],a===e){if(c=!0,s.all)continue;break}l=t.values[a],d(l)&&(h||0===i||A(i)===A(l))&&(i+=l)}return c||s.all?i:0}function Zi(t,i){const e=t&&t.options.stacked;return e||void 0===e&&void 0!==i.stack}function te(t,i,e){const s=t[i]||(t[i]={});return s[e]||(s[e]={})}function ie(t,i,e,s){for(const n of i.getMatchingVisibleMetas(s).reverse()){const i=t[n.index];if(e&&i>0||!e&&i<0)return n.index}return null}function ee(t,i){const{chart:e,_cachedMeta:s}=t,n=e._stacks||(e._stacks={}),{iScale:h,vScale:o,index:r}=s,a=h.axis,l=o.axis,c=function(t,i,e){return`${t.id}.${i.id}.${e.stack||e.type}`}(h,o,s),u=i.length;let d;for(let f=0;f<u;++f){const t=i[f],{[a]:e,[l]:h}=t;d=(t._stacks||(t._stacks={}))[l]=te(n,c,e),d[r]=h,d._top=ie(d,o,!0,s.type),d._bottom=ie(d,o,!1,s.type);(d._visualValues||(d._visualValues={}))[r]=h}}function se(t,i){const e=t.scales;return Object.keys(e).filter(t=>e[t].axis===i).shift()}function ne(t,i){const e=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){i=i||t._parsed;for(const t of i){const i=t._stacks;if(!i||void 0===i[s]||void 0===i[s][e])return;delete i[s][e],void 0!==i[s]._visualValues&&void 0!==i[s]._visualValues[e]&&delete i[s]._visualValues[e]}}}const he=t=>"reset"===t||"none"===t,oe=(t,i)=>i?t:Object.assign({},t);class re{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Zi(t.vScale,t),this.addElements(),this.options.fill&&this.chart.isPluginEnabled("filler")}updateIndex(t){this.index!==t&&ne(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,e=this.getDataset(),s=(t,i,e,s)=>"x"===t?i:"r"===t?s:e,n=i.xAxisID=p(e.xAxisID,se(t,"x")),h=i.yAxisID=p(e.yAxisID,se(t,"y")),o=i.rAxisID=p(e.rAxisID,se(t,"r")),r=i.indexAxis,a=i.iAxisID=s(r,n,h,o),l=i.vAxisID=s(r,h,n,o);i.xScale=this.getScaleForId(n),i.yScale=this.getScaleForId(h),i.rScale=this.getScaleForId(o),i.iScale=this.getScaleForId(a),i.vScale=this.getScaleForId(l)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&it(this._data,this),t._stacked&&ne(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),e=this._data;if(u(i)){const t=this._cachedMeta;this._data=function(t,i){const{iScale:e,vScale:s}=i,n="x"===e.axis?"x":"y",h="x"===s.axis?"x":"y",o=Object.keys(t),r=new Array(o.length);let a,l,c;for(a=0,l=o.length;a<l;++a)c=o[a],r[a]={[n]:c,[h]:t[c]};return r}(i,t)}else if(e!==i){if(e){it(e,this);const t=this._cachedMeta;ne(t),t._parsed=[]}i&&Object.isExtensible(i)&&(n=this,(s=i)._chartjs?s._chartjs.listeners.push(n):(Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),tt.forEach(t=>{const i="_onData"+P(t),e=s[t];Object.defineProperty(s,t,{configurable:!0,enumerable:!1,value(...t){const n=e.apply(this,t);return s._chartjs.listeners.forEach(e=>{"function"==typeof e[i]&&e[i](...t)}),n}})}))),this._syncList=[],this._data=i}var s,n}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,e=this.getDataset();let s=!1;this._dataCheck();const n=i._stacked;i._stacked=Zi(i.vScale,i),i.stack!==e.stack&&(s=!0,ne(i),i.stack=e.stack),this._resyncElements(t),(s||n!==i._stacked)&&(ee(this,i._parsed),i._stacked=Zi(i.vScale,i))}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),e=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(e,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:e,_data:s}=this,{iScale:n,_stacked:h}=e,o=n.axis;let r,a,l,d=0===t&&i===s.length||e._sorted,f=t>0&&e._parsed[t-1];if(!1===this._parsing)e._parsed=s,e._sorted=!0,l=s;else{l=c(s[t])?this.parseArrayData(e,s,t,i):u(s[t])?this.parseObjectData(e,s,t,i):this.parsePrimitiveData(e,s,t,i);const n=()=>null===a[o]||f&&a[o]<f[o];for(r=0;r<i;++r)e._parsed[r+t]=a=l[r],d&&(n()&&(d=!1),f=a);e._sorted=d}h&&ee(this,l)}parsePrimitiveData(t,i,e,s){const{iScale:n,vScale:h}=t,o=n.axis,r=h.axis,a=n.getLabels(),l=n===h,c=new Array(s);let u,d,f;for(u=0,d=s;u<d;++u)f=u+e,c[u]={[o]:l||n.parse(a[f],f),[r]:h.parse(i[f],f)};return c}parseArrayData(t,i,e,s){const{xScale:n,yScale:h}=t,o=new Array(s);let r,a,l,c;for(r=0,a=s;r<a;++r)l=r+e,c=i[l],o[r]={x:n.parse(c[0],l),y:h.parse(c[1],l)};return o}parseObjectData(t,i,e,s){const{xScale:n,yScale:h}=t,{xAxisKey:o="x",yAxisKey:r="y"}=this._parsing,a=new Array(s);let l,c,u,d;for(l=0,c=s;l<c;++l)u=l+e,d=i[u],a[l]={x:n.parse(S(d,o),u),y:h.parse(S(d,r),u)};return a}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,e){const s=this.chart,n=this._cachedMeta,h=i[t.axis];return Xi({keys:Ki(s,!0),values:i._stacks[t.axis]._visualValues},h,n.index,{mode:e})}updateRangeFromParsed(t,i,e,s){const n=e[i.axis];let h=null===n?NaN:n;const o=s&&e._stacks[i.axis];s&&o&&(s.values=o,h=Xi(s,n,this._cachedMeta.index)),t.min=Math.min(t.min,h),t.max=Math.max(t.max,h)}getMinMax(t,i){const e=this._cachedMeta,s=e._parsed,n=e._sorted&&t===e.iScale,h=s.length,o=this._getOtherScale(t),r=((t,i,e)=>t&&!i.hidden&&i._stacked&&{keys:Ki(e,!0),values:null})(i,e,this.chart),a={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:l,max:c}=function(t){const{min:i,max:e,minDefined:s,maxDefined:n}=t.getUserBounds();return{min:s?i:Number.NEGATIVE_INFINITY,max:n?e:Number.POSITIVE_INFINITY}}(o);let u,f;function p(){f=s[u];const i=f[o.axis];return!d(f[t.axis])||l>i||c<i}for(u=0;u<h&&(p()||(this.updateRangeFromParsed(a,t,f,r),!n));++u);if(n)for(u=h-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(a,t,f,r);break}return a}getAllParsedValues(t){const i=this._cachedMeta._parsed,e=[];let s,n,h;for(s=0,n=i.length;s<n;++s)h=i[s][t.axis],d(h)&&e.push(h);return e}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,e=i.iScale,s=i.vScale,n=this.getParsed(t);return{label:e?""+e.getLabelForValue(n[e.axis]):"",value:s?""+s.getLabelForValue(n[s.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=function(t){let i,e,s,n;return u(t)?(i=t.top,e=t.right,s=t.bottom,n=t.left):i=e=s=n=t,{top:i,right:e,bottom:s,left:n,disabled:!1===t}}(p(this.options.clip,function(t,i,e){if(!1===e)return!1;const s=Gi(t,e),n=Gi(i,e);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this.chart,e=this._cachedMeta,s=e.data||[],n=i.chartArea,h=[],o=this._drawStart||0,r=this._drawCount||s.length-o,a=this.options.drawActiveElementsOnTop;let l;for(e.dataset&&e.dataset.draw(t,n,o,r),l=o;l<o+r;++l){const i=s[l];i.hidden||(i.active&&a?h.push(i):i.draw(t,n))}for(l=0;l<h.length;++l)h[l].draw(t,n)}getStyle(t,i){const e=i?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(e):this.resolveDataElementOptions(t||0,e)}getContext(t,i,e){const s=this.getDataset();let n;if(t>=0&&t<this._cachedMeta.data.length){const i=this._cachedMeta.data[t];n=i.$context||(i.$context=function(t,i,e){return Gt(t,{active:!1,dataIndex:i,parsed:void 0,raw:void 0,element:e,index:i,mode:"default",type:"data"})}(this.getContext(),t,i)),n.parsed=this.getParsed(t),n.raw=s.data[t],n.index=n.dataIndex=t}else n=this.$context||(this.$context=function(t,i){return Gt(t,{active:!1,dataset:void 0,datasetIndex:i,index:i,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=s,n.index=n.datasetIndex=this.index;return n.active=!!i,n.mode=e,n}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",e){const s="active"===i,n=this._cachedDataOpts,h=t+"-"+i,o=n[h],r=this.enableOptionSharing&&C(e);if(o)return oe(o,r);const a=this.chart.config,l=a.datasetElementScopeKeys(this._type,t),c=s?[`${t}Hover`,"hover",t,""]:[t,""],u=a.getOptionScopes(this.getDataset(),l),d=Object.keys(kt.elements[t]),f=a.resolveNamedOptions(u,d,()=>this.getContext(e,s,i),c);return f.$shared&&(f.$shared=r,n[h]=Object.freeze(oe(f,r))),f}_resolveAnimations(t,i,e){const s=this.chart,n=this._cachedDataOpts,h=`animation-${i}`,o=n[h];if(o)return o;let r;if(!1!==s.options.animation){const s=this.chart.config,n=s.datasetAnimationScopeKeys(this._type,i),h=s.getOptionScopes(this.getDataset(),n);r=s.createResolver(h,this.getContext(t,e,i))}const a=new qi(s,r&&r.animations);return r&&r._cacheable&&(n[h]=Object.freeze(a)),a}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||he(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const e=this.resolveDataElementOptions(t,i),s=this._sharedOptions,n=this.getSharedOptions(e),h=this.includeOptions(i,n)||n!==s;return this.updateSharedOptions(n,i,e),{sharedOptions:n,includeOptions:h}}updateElement(t,i,e,s){he(s)?Object.assign(t,e):this._resolveAnimations(i,s).update(t,e)}updateSharedOptions(t,i,e){t&&!he(i)&&this._resolveAnimations(void 0,i).update(t,e)}_setStyle(t,i,e,s){t.active=s;const n=this.getStyle(i,s);this._resolveAnimations(i,e,s).update(t,{options:!s&&this.getSharedOptions(n)||n})}removeHoverStyle(t,i,e){this._setStyle(t,e,"active",!1)}setHoverStyle(t,i,e){this._setStyle(t,e,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,e=this._cachedMeta.data;for(const[o,r,a]of this._syncList)this[o](r,a);this._syncList=[];const s=e.length,n=i.length,h=Math.min(n,s);h&&this.parse(0,h),n>s?this._insertElements(s,n-s,t):n<s&&this._removeElements(n,s-n)}_insertElements(t,i,e=!0){const s=this._cachedMeta,n=s.data,h=t+i;let o;const r=t=>{for(t.length+=i,o=t.length-1;o>=h;o--)t[o]=t[o-i]};for(r(n),o=t;o<h;++o)n[o]=new this.dataElementType;this._parsing&&r(s._parsed),this.parse(t,i),e&&this.updateElements(n,t,i,"reset")}updateElements(t,i,e,s){}_removeElements(t,i){const e=this._cachedMeta;if(this._parsing){const s=e._parsed.splice(t,i);e._stacked&&ne(e,s)}e.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,e,s]=t;this[i](e,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const e=arguments.length-2;e&&this._sync(["_insertElements",t,e])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ae(t){const i=t.iScale,e=function(t,i){if(!t._cache.$bar){const e=t.getMatchingVisibleMetas(i);let s=[];for(let i=0,n=e.length;i<n;i++)s=s.concat(e[i].controller.getAllParsedValues(t));t._cache.$bar=et(s.sort((t,i)=>t-i))}return t._cache.$bar}(i,t.type);let s,n,h,o,r=i._length;const a=()=>{32767!==h&&-32768!==h&&(C(o)&&(r=Math.min(r,Math.abs(h-o)||r)),o=h)};for(s=0,n=e.length;s<n;++s)h=i.getPixelForValue(e[s]),a();for(o=void 0,s=0,n=i.ticks.length;s<n;++s)h=i.getPixelForTick(s),a();return r}function le(t,i,e,s){return c(t)?function(t,i,e,s){const n=e.parse(t[0],s),h=e.parse(t[1],s),o=Math.min(n,h),r=Math.max(n,h);let a=o,l=r;Math.abs(o)>Math.abs(r)&&(a=r,l=o),i[e.axis]=l,i._custom={barStart:a,barEnd:l,start:n,end:h,min:o,max:r}}(t,i,e,s):i[e.axis]=e.parse(t,s),i}function ce(t,i,e,s){const n=t.iScale,h=t.vScale,o=n.getLabels(),r=n===h,a=[];let l,c,u,d;for(l=e,c=e+s;l<c;++l)d=i[l],u={},u[n.axis]=r||n.parse(o[l],l),a.push(le(d,u,h,l));return a}function ue(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function de(t,i,e,s){let n=i.borderSkipped;const h={};if(!n)return void(t.borderSkipped=h);if(!0===n)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:r,reverse:a,top:l,bottom:c}=function(t){let i,e,s,n,h;return t.horizontal?(i=t.base>t.x,e="left",s="right"):(i=t.base<t.y,e="bottom",s="top"),i?(n="end",h="start"):(n="start",h="end"),{start:e,end:s,reverse:i,top:n,bottom:h}}(t);"middle"===n&&e&&(t.enableBorderRadius=!0,(e._top||0)===s?n=l:(e._bottom||0)===s?n=c:(h[fe(c,o,r,a)]=!0,n=l)),h[fe(n,o,r,a)]=!0,t.borderSkipped=h}function fe(t,i,e,s){var n,h,o;return s?(o=e,t=pe(t=(n=t)===(h=i)?o:n===o?h:n,e,i)):t=pe(t,i,e),t}function pe(t,i,e){return"start"===t?i:"end"===t?e:t}function ge(t,{inflateAmount:i},e){t.inflateAmount="auto"===i?1===e?.33:0:i}i(re,"defaults",{}),i(re,"datasetElementType",null),i(re,"dataElementType",null);class me extends re{parsePrimitiveData(t,i,e,s){return ce(t,i,e,s)}parseArrayData(t,i,e,s){return ce(t,i,e,s)}parseObjectData(t,i,e,s){const{iScale:n,vScale:h}=t,{xAxisKey:o="x",yAxisKey:r="y"}=this._parsing,a="x"===n.axis?o:r,l="x"===h.axis?o:r,c=[];let u,d,f,p;for(u=e,d=e+s;u<d;++u)p=i[u],f={},f[n.axis]=n.parse(S(p,a),u),c.push(le(S(p,l),f,h,u));return c}updateRangeFromParsed(t,i,e,s){super.updateRangeFromParsed(t,i,e,s);const n=e._custom;n&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,n.min),t.max=Math.max(t.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:e,vScale:s}=i,n=this.getParsed(t),h=n._custom,o=ue(h)?"["+h.start+", "+h.end+"]":""+s.getLabelForValue(n[s.axis]);return{label:""+e.getLabelForValue(n[e.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,e,s){const n="reset"===s,{index:h,_cachedMeta:{vScale:o}}=this,r=o.getBasePixel(),a=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(i,s);for(let f=i;f<i+e;f++){const i=this.getParsed(f),e=n||l(i[o.axis])?{base:r,head:r}:this._calculateBarValuePixels(f),p=this._calculateBarIndexPixels(f,c),g=(i._stacks||{})[o.axis],m={horizontal:a,base:e.base,enableBorderRadius:!g||ue(i._custom)||h===g._top||h===g._bottom,x:a?e.head:p.center,y:a?p.center:e.head,height:a?p.size:Math.abs(e.size),width:a?Math.abs(e.size):p.size};d&&(m.options=u||this.resolveDataElementOptions(f,t[f].active?"active":s));const v=m.options||t[f].options;de(m,v,g,h),ge(m,v,c.ratio),this.updateElement(t[f],f,m,s)}}_getStacks(t,i){const{iScale:e}=this._cachedMeta,s=e.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),n=e.options.stacked,h=[],o=this._cachedMeta.controller.getParsed(i),r=o&&o[e.axis],a=t=>{const i=t._parsed.find(t=>t[e.axis]===r),s=i&&i[t.vScale.axis];if(l(s)||isNaN(s))return!0};for(const l of s)if((void 0===i||!a(l))&&((!1===n||-1===h.indexOf(l.stack)||void 0===n&&void 0===l.stack)&&h.push(l.stack),l.index===t))break;return h.length||h.push(void 0),h}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(t).filter(e=>t[e].axis===i).shift()}_getAxis(){const t={},i=this.getFirstScaleIdForIndexAxis();for(const e of this.chart.data.datasets)t[p("x"===this.chart.options.indexAxis?e.xAxisID:e.yAxisID,i)]=!0;return Object.keys(t)}_getStackIndex(t,i,e){const s=this._getStacks(t,e),n=void 0!==i?s.indexOf(i):-1;return-1===n?s.length-1:n}_getRuler(){const t=this.options,i=this._cachedMeta,e=i.iScale,s=[];let n,h;for(n=0,h=i.data.length;n<h;++n)s.push(e.getPixelForValue(this.getParsed(n)[e.axis],n));const o=t.barThickness;return{min:o||ae(i),pixels:s,start:e._startPixel,end:e._endPixel,stackCount:this._getStackCount(),scale:e,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:e,index:s},options:{base:n,minBarLength:h}}=this,o=n||0,r=this.getParsed(t),a=r._custom,c=ue(a);let u,d,f=r[i.axis],p=0,g=e?this.applyStack(i,r,e):f;g!==f&&(p=g-f,g=f),c&&(f=a.barStart,g=a.barEnd-a.barStart,0!==f&&A(f)!==A(a.barEnd)&&(p=0),p+=f);const m=l(n)||c?p:n;let v=i.getPixelForValue(m);if(u=this.chart.getDataVisibility(t)?i.getPixelForValue(p+g):v,d=u-v,Math.abs(d)<h){d=function(t,i,e){return 0!==t?A(t):(i.isHorizontal()?1:-1)*(i.min>=e?1:-1)}(d,i,o)*h,f===o&&(v-=d/2);const t=i.getPixelForDecimal(0),n=i.getPixelForDecimal(1),a=Math.min(t,n),l=Math.max(t,n);v=Math.max(Math.min(v,l),a),u=v+d,e&&!c&&(r._stacks[i.axis]._visualValues[s]=i.getValueForPixel(u)-i.getValueForPixel(v))}if(v===i.getPixelForValue(o)){const t=A(d)*i.getLineWidthForValue(o)/2;v+=t,d-=t}return{size:d,base:v,head:u,center:u+d/2}}_calculateBarIndexPixels(t,i){const e=i.scale,s=this.options,n=s.skipNull,h=p(s.maxBarThickness,1/0);let o,r;const a=this._getAxisCount();if(i.grouped){const e=n?this._getStackCount(t):i.stackCount,c="flex"===s.barThickness?function(t,i,e,s){const n=i.pixels,h=n[t];let o=t>0?n[t-1]:null,r=t<n.length-1?n[t+1]:null;const a=e.categoryPercentage;null===o&&(o=h-(null===r?i.end-i.start:r-h)),null===r&&(r=h+h-o);const l=h-(h-Math.min(o,r))/2*a;return{chunk:Math.abs(r-o)/2*a/s,ratio:e.barPercentage,start:l}}(t,i,s,e*a):function(t,i,e,s){const n=e.barThickness;let h,o;return l(n)?(h=i.min*e.categoryPercentage,o=e.barPercentage):(h=n*s,o=1),{chunk:h/s,ratio:o,start:i.pixels[t]-h/2}}(t,i,s,e*a),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(p(u,this.getFirstScaleIdForIndexAxis())),f=this._getStackIndex(this.index,this._cachedMeta.stack,n?t:void 0)+d;o=c.start+c.chunk*f+c.chunk/2,r=Math.min(h,c.chunk*c.ratio)}else o=e.getPixelForValue(this.getParsed(t)[e.axis],t),r=Math.min(h,i.min*i.ratio);return{base:o-r/2,head:o+r/2,center:o,size:r}}draw(){const t=this._cachedMeta,i=t.vScale,e=t.data,s=e.length;let n=0;for(;n<s;++n)null===this.getParsed(n)[i.axis]||e[n].hidden||e[n].draw(this._ctx)}}i(me,"id","bar"),i(me,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),i(me,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ve extends re{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const i=this._cachedMeta,{dataset:e,data:s=[],_dataset:n}=i,h=this.chart._animationsDisabled;let{start:o,count:r}=function(t,i,e){const s=i.length;let n=0,h=s;if(t._sorted){const{iScale:o,vScale:r,_parsed:a}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:p,maxDefined:g}=o.getUserBounds();if(p){if(n=Math.min(X(a,u,d).lo,e?s:X(i,u,o.getPixelForValue(d)).lo),c){const t=a.slice(0,n+1).reverse().findIndex(t=>!l(t[r.axis]));n-=Math.max(0,t)}n=q(n,0,s-1)}if(g){let t=Math.max(X(a,o.axis,f,!0).hi+1,e?0:X(i,u,o.getPixelForValue(f),!0).hi+1);if(c){const i=a.slice(t-1).findIndex(t=>!l(t[r.axis]));t+=Math.max(0,i)}h=q(t,n,s)-n}else h=s-n}return{start:n,count:h}}(i,s,h);this._drawStart=o,this._drawCount=r,function(t){const{xScale:i,yScale:e,_scaleRanges:s}=t,n={xmin:i.min,xmax:i.max,ymin:e.min,ymax:e.max};if(!s)return t._scaleRanges=n,!0;const h=s.xmin!==i.min||s.xmax!==i.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,n),h}(i)&&(o=0,r=s.length),e._chart=this.chart,e._datasetIndex=this.index,e._decimated=!!n._decimated,e.points=s;const a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0),a.segment=this.options.segment,this.updateElement(e,void 0,{animated:!h,options:a},t),this.updateElements(s,o,r,t)}updateElements(t,i,e,s){const n="reset"===s,{iScale:h,vScale:o,_stacked:r,_dataset:a}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,s),d=h.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=Y(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||n||"none"===s,x=i+e,b=t.length;let _=i>0&&this.getParsed(i-1);for(let y=0;y<b;++y){const e=t[y],p=v?e:{};if(y<i||y>=x){p.skip=!0;continue}const b=this.getParsed(y),w=l(b[f]),M=p[d]=h.getPixelForValue(b[d],y),k=p[f]=n||w?o.getBasePixel():o.getPixelForValue(r?this.applyStack(o,b,r):b[f],y);p.skip=isNaN(M)||isNaN(k)||w,p.stop=y>0&&Math.abs(b[d]-_[d])>m,g&&(p.parsed=b,p.raw=a.data[y]),u&&(p.options=c||this.resolveDataElementOptions(y,e.active?"active":s)),v||this.updateElement(e,y,p,s),_=b}}getMaxOverflow(){const t=this._cachedMeta,i=t.dataset,e=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return e;const n=s[0].size(this.resolveDataElementOptions(0)),h=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(e,n,h)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function xe(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}i(ve,"id","line"),i(ve,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),i(ve,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class be{constructor(t){i(this,"options"),this.options=t||{}}static override(t){Object.assign(be.prototype,t)}init(){}formats(){return xe()}parse(){return xe()}format(){return xe()}add(){return xe()}diff(){return xe()}startOf(){return xe()}endOf(){return xe()}}var _e=be;function ye(t,i,e,s){const{controller:n,data:h,_sorted:o}=t,r=n._cachedMeta.iScale,a=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(r&&i===r.axis&&"r"!==i&&o&&h.length){const o=r._reversePixels?Z:X;if(!s){const s=o(h,i,e);if(a){const{vScale:i}=n._cachedMeta,{_parsed:e}=t,h=e.slice(0,s.lo+1).reverse().findIndex(t=>!l(t[i.axis]));s.lo-=Math.max(0,h);const o=e.slice(s.hi).findIndex(t=>!l(t[i.axis]));s.hi+=Math.max(0,o)}return s}if(n._sharedOptions){const t=h[0],s="function"==typeof t.getRange&&t.getRange(i);if(s){const t=o(h,i,e-s),n=o(h,i,e+s);return{lo:t.lo,hi:n.hi}}}}return{lo:0,hi:h.length-1}}function we(t,i,e,s,n){const h=t.getSortedVisibleDatasetMetas(),o=e[i];for(let r=0,a=h.length;r<a;++r){const{index:t,data:e}=h[r],{lo:a,hi:l}=ye(h[r],i,o,n);for(let i=a;i<=l;++i){const n=e[i];n.skip||s(n,t,i)}}}function Me(t,i,e,s,n){const h=[];if(!n&&!t.isPointInArea(i))return h;return we(t,e,i,function(e,o,r){(n||Et(e,t.chartArea,0))&&e.inRange(i.x,i.y,s)&&h.push({element:e,datasetIndex:o,index:r})},!0),h}function ke(t,i,e,s){let n=[];return we(t,e,i,function(t,e,h){const{startAngle:o,endAngle:r}=t.getProps(["startAngle","endAngle"],s),{angle:a}=function(t,i){const e=i.x-t.x,s=i.y-t.y,n=Math.sqrt(e*e+s*s);let h=Math.atan2(s,e);return h<-.5*E&&(h+=O),{angle:h,distance:n}}(t,{x:i.x,y:i.y});Q(a,o,r)&&n.push({element:t,datasetIndex:e,index:h})}),n}function Se(t,i,e,s,n,h){let o=[];const r=function(t){const i=-1!==t.indexOf("x"),e=-1!==t.indexOf("y");return function(t,s){const n=i?Math.abs(t.x-s.x):0,h=e?Math.abs(t.y-s.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(h,2))}}(e);let a=Number.POSITIVE_INFINITY;return we(t,e,i,function(e,l,c){const u=e.inRange(i.x,i.y,n);if(s&&!u)return;const d=e.getCenterPoint(n);if(!(!!h||t.isPointInArea(d))&&!u)return;const f=r(i,d);f<a?(o=[{element:e,datasetIndex:l,index:c}],a=f):f===a&&o.push({element:e,datasetIndex:l,index:c})}),o}function Pe(t,i,e,s,n,h){return h||t.isPointInArea(i)?"r"!==e||s?Se(t,i,e,s,n,h):ke(t,i,e,n):[]}function Ce(t,i,e,s,n){const h=[],o="x"===e?"inXRange":"inYRange";let r=!1;return we(t,e,i,(t,s,a)=>{t[o]&&t[o](i[e],n)&&(h.push({element:t,datasetIndex:s,index:a}),r=r||t.inRange(i.x,i.y,n))}),s&&!r?[]:h}var De={modes:{index(t,i,e,s){const n=Mi(i,t),h=e.axis||"x",o=e.includeInvisible||!1,r=e.intersect?Me(t,n,h,s,o):Pe(t,n,h,!1,s,o),a=[];return r.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const i=r[0].index,e=t.data[i];e&&!e.skip&&a.push({element:e,datasetIndex:t.index,index:i})}),a):[]},dataset(t,i,e,s){const n=Mi(i,t),h=e.axis||"xy",o=e.includeInvisible||!1;let r=e.intersect?Me(t,n,h,s,o):Pe(t,n,h,!1,s,o);if(r.length>0){const i=r[0].datasetIndex,e=t.getDatasetMeta(i).data;r=[];for(let t=0;t<e.length;++t)r.push({element:e[t],datasetIndex:i,index:t})}return r},point:(t,i,e,s)=>Me(t,Mi(i,t),e.axis||"xy",s,e.includeInvisible||!1),nearest(t,i,e,s){const n=Mi(i,t),h=e.axis||"xy",o=e.includeInvisible||!1;return Pe(t,n,h,e.intersect,s,o)},x:(t,i,e,s)=>Ce(t,Mi(i,t),"x",e.intersect,s),y:(t,i,e,s)=>Ce(t,Mi(i,t),"y",e.intersect,s)}};const Te=["left","top","right","bottom"];function Ee(t,i){return t.filter(t=>t.pos===i)}function Oe(t,i){return t.filter(t=>-1===Te.indexOf(t.pos)&&t.box.axis===i)}function ze(t,i){return t.sort((t,e)=>{const s=i?e:t,n=i?t:e;return s.weight===n.weight?s.index-n.index:s.weight-n.weight})}function Ie(t,i){const e=function(t){const i={};for(const e of t){const{stack:t,pos:s,stackWeight:n}=e;if(!t||!Te.includes(s))continue;const h=i[t]||(i[t]={count:0,placed:0,weight:0,size:0});h.count++,h.weight+=n}return i}(t),{vBoxMaxWidth:s,hBoxMaxHeight:n}=i;let h,o,r;for(h=0,o=t.length;h<o;++h){r=t[h];const{fullSize:o}=r.box,a=e[r.stack],l=a&&r.stackWeight/a.weight;r.horizontal?(r.width=l?l*s:o&&i.availableWidth,r.height=n):(r.width=s,r.height=l?l*n:o&&i.availableHeight)}return e}function Re(t,i,e,s){return Math.max(t[e],i[e])+Math.max(t[s],i[s])}function Ve(t,i){t.top=Math.max(t.top,i.top),t.left=Math.max(t.left,i.left),t.bottom=Math.max(t.bottom,i.bottom),t.right=Math.max(t.right,i.right)}function Le(t,i,e,s){const{pos:n,box:h}=e,o=t.maxPadding;if(!u(n)){e.size&&(t[n]-=e.size);const i=s[e.stack]||{size:0,count:1};i.size=Math.max(i.size,e.horizontal?h.height:h.width),e.size=i.size/i.count,t[n]+=e.size}h.getPadding&&Ve(o,h.getPadding());const r=Math.max(0,i.outerWidth-Re(o,t,"left","right")),a=Math.max(0,i.outerHeight-Re(o,t,"top","bottom")),l=r!==t.w,c=a!==t.h;return t.w=r,t.h=a,e.horizontal?{same:l,other:c}:{same:c,other:l}}function Fe(t,i){const e=i.maxPadding;function s(t){const s={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{s[t]=Math.max(i[t],e[t])}),s}return s(t?["left","right"]:["top","bottom"])}function Ne(t,i,e,s){const n=[];let h,o,r,a,l,c;for(h=0,o=t.length,l=0;h<o;++h){r=t[h],a=r.box,a.update(r.width||i.w,r.height||i.h,Fe(r.horizontal,i));const{same:o,other:u}=Le(i,e,r,s);l|=o&&n.length,c=c||u,a.fullSize||n.push(r)}return l&&Ne(n,i,e,s)||c}function Ae(t,i,e,s,n){t.top=e,t.left=i,t.right=i+s,t.bottom=e+n,t.width=s,t.height=n}function We(t,i,e,s){const n=e.padding;let{x:h,y:o}=i;for(const r of t){const t=r.box,a=s[r.stack]||{placed:0,weight:1},l=r.stackWeight/a.weight||1;if(r.horizontal){const s=i.w*l,h=a.size||t.height;C(a.start)&&(o=a.start),t.fullSize?Ae(t,n.left,o,e.outerWidth-n.right-n.left,h):Ae(t,i.left+a.placed,o,s,h),a.start=o,a.placed+=s,o=t.bottom}else{const s=i.h*l,o=a.size||t.width;C(a.start)&&(h=a.start),t.fullSize?Ae(t,h,n.top,o,e.outerHeight-n.bottom-n.top):Ae(t,h,i.top+a.placed,o,s),a.start=h,a.placed+=s,h=t.right}}i.x=h,i.y=o}var Be={addBox(t,i){t.boxes||(t.boxes=[]),i.fullSize=i.fullSize||!1,i.position=i.position||"top",i.weight=i.weight||0,i._layers=i._layers||function(){return[{z:0,draw(t){i.draw(t)}}]},t.boxes.push(i)},removeBox(t,i){const e=t.boxes?t.boxes.indexOf(i):-1;-1!==e&&t.boxes.splice(e,1)},configure(t,i,e){i.fullSize=e.fullSize,i.position=e.position,i.weight=e.weight},update(t,i,e,s){if(!t)return;const n=Ut(t.options.layout.padding),h=Math.max(i-n.width,0),o=Math.max(e-n.height,0),r=function(t){const i=function(t){const i=[];let e,s,n,h,o,r;for(e=0,s=(t||[]).length;e<s;++e)n=t[e],({position:h,options:{stack:o,stackWeight:r=1}}=n),i.push({index:e,box:n,pos:h,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&h+o,stackWeight:r});return i}(t),e=ze(i.filter(t=>t.box.fullSize),!0),s=ze(Ee(i,"left"),!0),n=ze(Ee(i,"right")),h=ze(Ee(i,"top"),!0),o=ze(Ee(i,"bottom")),r=Oe(i,"x"),a=Oe(i,"y");return{fullSize:e,leftAndTop:s.concat(h),rightAndBottom:n.concat(a).concat(o).concat(r),chartArea:Ee(i,"chartArea"),vertical:s.concat(n).concat(a),horizontal:h.concat(o).concat(r)}}(t.boxes),a=r.vertical,l=r.horizontal;m(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});const c=a.reduce((t,i)=>i.box.options&&!1===i.box.options.display?t:t+1,0)||1,u=Object.freeze({outerWidth:i,outerHeight:e,padding:n,availableWidth:h,availableHeight:o,vBoxMaxWidth:h/2/c,hBoxMaxHeight:o/2}),d=Object.assign({},n);Ve(d,Ut(s));const f=Object.assign({maxPadding:d,w:h,h:o,x:n.left,y:n.top},n),p=Ie(a.concat(l),u);Ne(r.fullSize,f,u,p),Ne(a,f,u,p),Ne(l,f,u,p)&&Ne(a,f,u,p),function(t){const i=t.maxPadding;function e(e){const s=Math.max(i[e]-t[e],0);return t[e]+=s,s}t.y+=e("top"),t.x+=e("left"),e("right"),e("bottom")}(f),We(r.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,We(r.rightAndBottom,f,u,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},m(r.chartArea,i=>{const e=i.box;Object.assign(e,t.chartArea),e.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Ye{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,e){}removeEventListener(t,i,e){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,e,s){return i=Math.max(0,i||t.width),e=e||t.height,{width:i,height:Math.max(0,s?Math.floor(i/s):e)}}isAttached(t){return!0}updateConfig(t){}}class He extends Ye{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const je="$chartjs",$e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ue=t=>null===t||""===t;const Je=!!Ci&&{passive:!0};function Qe(t,i,e){t&&t.canvas&&t.canvas.removeEventListener(i,e,Je)}function qe(t,i){for(const e of t)if(e===i||e.contains(i))return!0}function Ge(t,i,e){const s=t.canvas,n=new MutationObserver(t=>{let i=!1;for(const e of t)i=i||qe(e.addedNodes,s),i=i&&!qe(e.removedNodes,s);i&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function Ke(t,i,e){const s=t.canvas,n=new MutationObserver(t=>{let i=!1;for(const e of t)i=i||qe(e.removedNodes,s),i=i&&!qe(e.addedNodes,s);i&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}const Xe=new Map;let Ze=0;function ts(){const t=window.devicePixelRatio;t!==Ze&&(Ze=t,Xe.forEach((i,e)=>{e.currentDevicePixelRatio!==t&&i()}))}function is(t,i,e){const s=t.canvas,n=s&&xi(s);if(!n)return;const h=nt((t,i)=>{const s=n.clientWidth;e(t,i),s<n.clientWidth&&e()},window),o=new ResizeObserver(t=>{const i=t[0],e=i.contentRect.width,s=i.contentRect.height;0===e&&0===s||h(e,s)});return o.observe(n),function(t,i){Xe.size||window.addEventListener("resize",ts),Xe.set(t,i)}(t,h),o}function es(t,i,e){e&&e.disconnect(),"resize"===i&&function(t){Xe.delete(t),Xe.size||window.removeEventListener("resize",ts)}(t)}function ss(t,i,e){const s=t.canvas,n=nt(i=>{null!==t.ctx&&e(function(t,i){const e=$e[t.type]||t.type,{x:s,y:n}=Mi(t,i);return{type:e,chart:i,native:t,x:void 0!==s?s:null,y:void 0!==n?n:null}}(i,t))},t);return function(t,i,e){t&&t.addEventListener(i,e,Je)}(s,i,n),n}class ns extends Ye{acquireContext(t,i){const e=t&&t.getContext&&t.getContext("2d");return e&&e.canvas===t?(function(t,i){const e=t.style,s=t.getAttribute("height"),n=t.getAttribute("width");if(t[je]={initial:{height:s,width:n,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Ue(n)){const i=Di(t,"width");void 0!==i&&(t.width=i)}if(Ue(s))if(""===t.style.height)t.height=t.width/(i||2);else{const i=Di(t,"height");void 0!==i&&(t.height=i)}}(t,i),e):null}releaseContext(t){const i=t.canvas;if(!i[je])return!1;const e=i[je].initial;["height","width"].forEach(t=>{const s=e[t];l(s)?i.removeAttribute(t):i.setAttribute(t,s)});const s=e.style||{};return Object.keys(s).forEach(t=>{i.style[t]=s[t]}),i.width=i.width,delete i[je],!0}addEventListener(t,i,e){this.removeEventListener(t,i);const s=t.$proxies||(t.$proxies={}),n={attach:Ge,detach:Ke,resize:is}[i]||ss;s[i]=n(t,i,e)}removeEventListener(t,i){const e=t.$proxies||(t.$proxies={}),s=e[i];if(!s)return;({attach:es,detach:es,resize:es}[i]||Qe)(t,i,s),e[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,e,s){return Si(t,i,e,s)}isAttached(t){const i=t&&xi(t);return!(!i||!i.isConnected)}}class hs{constructor(){i(this,"x"),i(this,"y"),i(this,"active",!1),i(this,"options"),i(this,"$animations")}tooltipPosition(t){const{x:i,y:e}=this.getProps(["x","y"],t);return{x:i,y:e}}hasValue(){return Y(this.x)&&Y(this.y)}getProps(t,i){const e=this.$animations;if(!i||!e)return this;const s={};return t.forEach(t=>{s[t]=e[t]&&e[t].active()?e[t]._to:this[t]}),s}}function os(t,i){const e=t.options.ticks,s=function(t){const i=t.options.offset,e=t._tickSize(),s=t._length/e+(i?0:1),n=t._maxLength/e;return Math.floor(Math.min(s,n))}(t),n=Math.min(e.maxTicksLimit||s,s),h=e.major.enabled?function(t){const i=[];let e,s;for(e=0,s=t.length;e<s;e++)t[e].major&&i.push(e);return i}(i):[],o=h.length,r=h[0],a=h[o-1],c=[];if(o>n)return function(t,i,e,s){let n,h=0,o=e[0];for(s=Math.ceil(s),n=0;n<t.length;n++)n===o&&(i.push(t[n]),h++,o=e[h*s])}(i,c,h,o/n),c;const u=function(t,i,e){const s=function(t){const i=t.length;let e,s;if(i<2)return!1;for(s=t[0],e=1;e<i;++e)if(t[e]-t[e-1]!==s)return!1;return s}(t),n=i.length/e;if(!s)return Math.max(n,1);const h=function(t){const i=[],e=Math.sqrt(t);let s;for(s=1;s<e;s++)t%s===0&&(i.push(s),i.push(t/s));return e===(0|e)&&i.push(e),i.sort((t,i)=>t-i).pop(),i}(s);for(let o=0,r=h.length-1;o<r;o++){const t=h[o];if(t>n)return t}return Math.max(n,1)}(h,i,n);if(o>0){let t,e;const s=o>1?Math.round((a-r)/(o-1)):null;for(rs(i,c,u,l(s)?0:r-s,r),t=0,e=o-1;t<e;t++)rs(i,c,u,h[t],h[t+1]);return rs(i,c,u,a,l(s)?i.length:a+s),c}return rs(i,c,u),c}function rs(t,i,e,s,n){const h=p(s,0),o=Math.min(p(n,t.length),t.length);let r,a,l,c=0;for(e=Math.ceil(e),n&&(r=n-s,e=r/Math.floor(r/e)),l=h;l<0;)c++,l=Math.round(h+c*e);for(a=Math.max(h,0);a<o;a++)a===l&&(i.push(t[a]),c++,l=Math.round(h+c*e))}i(hs,"defaults",{}),i(hs,"defaultRoutes");const as=(t,i,e)=>"top"===i||"left"===i?t[i]+e:t[i]-e,ls=(t,i)=>Math.min(i||t,t);function cs(t,i){const e=[],s=t.length/i,n=t.length;let h=0;for(;h<n;h+=s)e.push(t[Math.floor(h)]);return e}function us(t,i,e){const s=t.ticks.length,n=Math.min(i,s-1),h=t._startPixel,o=t._endPixel,r=1e-6;let a,l=t.getPixelForTick(n);if(!(e&&(a=1===s?Math.max(l-h,o-l):0===i?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(n-1))/2,l+=n<i?a:-a,l<h-r||l>o+r)))return l}function ds(t){return t.drawTicks?t.tickLength:0}function fs(t,i){if(!t.display)return 0;const e=Jt(t.font,i),s=Ut(t.padding);return(c(t.text)?t.text.length:1)*e.lineHeight+s.height}function ps(t,i,e){let s=ht(t);return(e&&"right"!==i||!e&&"right"===i)&&(s=(t=>"left"===t?"right":"right"===t?"left":t)(s)),s}class gs extends hs{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:e,_suggestedMax:s}=this;return t=f(t,Number.POSITIVE_INFINITY),i=f(i,Number.NEGATIVE_INFINITY),e=f(e,Number.POSITIVE_INFINITY),s=f(s,Number.NEGATIVE_INFINITY),{min:f(t,e),max:f(i,s),minDefined:d(t),maxDefined:d(i)}}getMinMax(t){let i,{min:e,max:s,minDefined:n,maxDefined:h}=this.getUserBounds();if(n&&h)return{min:e,max:s};const o=this.getMatchingVisibleMetas();for(let r=0,a=o.length;r<a;++r)i=o[r].controller.getMinMax(this,t),n||(e=Math.min(e,i.min)),h||(s=Math.max(s,i.max));return e=h&&e>s?s:e,s=n&&e>s?e:s,{min:f(e,f(s,e)),max:f(s,f(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){g(this.options.beforeUpdate,[this])}update(t,i,e){const{beginAtZero:s,grace:n,ticks:h}=this.options,o=h.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=e=Object.assign({left:0,right:0,top:0,bottom:0},e),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+e.left+e.right:this.height+e.top+e.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=qt(this,n,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const r=o<this.ticks.length;this._convertTicksToLabels(r?cs(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),h.display&&(h.autoSkip||"auto"===h.source)&&(this.ticks=os(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),r&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,i,e=this.options.reverse;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){g(this.options.afterUpdate,[this])}beforeSetDimensions(){g(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){g(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),g(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){g(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const i=this.options.ticks;let e,s,n;for(e=0,s=t.length;e<s;e++)n=t[e],n.label=g(i.callback,[n.value,e,t],this)}afterTickToLabelConversion(){g(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){g(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,i=t.ticks,e=ls(this.ticks.length,t.ticks.maxTicksLimit),s=i.minRotation||0,n=i.maxRotation;let h,o,r,a=s;if(!this._isVisible()||!i.display||s>=n||e<=1||!this.isHorizontal())return void(this.labelRotation=s);const l=this._getLabelSizes(),c=l.widest.width,u=l.highest.height,d=q(this.chart.width-c,0,this.maxWidth);h=t.offset?this.maxWidth/e:d/(e-1),c+6>h&&(h=d/(e-(t.offset?.5:1)),o=this.maxHeight-ds(t.grid)-i.padding-fs(t.title,this.chart.options.font),r=Math.sqrt(c*c+u*u),a=Math.min(Math.asin(q((l.highest.height+6)/h,-1,1)),Math.asin(q(o/r,-1,1))-Math.asin(q(u/r,-1,1)))*(180/E),a=Math.max(s,Math.min(n,a))),this.labelRotation=a}afterCalculateLabelRotation(){g(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){g(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:i,options:{ticks:e,title:s,grid:n}}=this,h=this._isVisible(),o=this.isHorizontal();if(h){const h=fs(s,i.options.font);if(o?(t.width=this.maxWidth,t.height=ds(n)+h):(t.height=this.maxHeight,t.width=ds(n)+h),e.display&&this.ticks.length){const{first:i,last:s,widest:n,highest:h}=this._getLabelSizes(),r=2*e.padding,a=H(this.labelRotation),l=Math.cos(a),c=Math.sin(a);if(o){const i=e.mirror?0:c*n.width+l*h.height;t.height=Math.min(this.maxHeight,t.height+i+r)}else{const i=e.mirror?0:l*n.width+c*h.height;t.width=Math.min(this.maxWidth,t.width+i+r)}this._calculatePadding(i,s,c,l)}}this._handleMargins(),o?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,e,s){const{ticks:{align:n,padding:h},position:o}=this.options,r=0!==this.labelRotation,a="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,l=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,u=0;r?a?(c=s*t.width,u=e*i.height):(c=e*t.height,u=s*i.width):"start"===n?u=i.width:"end"===n?c=t.width:"inner"!==n&&(c=t.width/2,u=i.width/2),this.paddingLeft=Math.max((c-o+h)*this.width/(this.width-o),0),this.paddingRight=Math.max((u-l+h)*this.width/(this.width-l),0)}else{let e=i.height/2,s=t.height/2;"start"===n?(e=0,s=t.height):"end"===n&&(e=i.height,s=0),this.paddingTop=e+h,this.paddingBottom=s+h}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){g(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:i}=this.options;return"top"===i||"bottom"===i||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let i,e;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),i=0,e=t.length;i<e;i++)l(t[i].label)&&(t.splice(i,1),e--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const i=this.options.ticks.sampleSize;let e=this.ticks;i<e.length&&(e=cs(e,i)),this._labelSizes=t=this._computeLabelSizes(e,e.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,e){const{ctx:s,_longestTextCache:n}=this,h=[],o=[],r=Math.floor(i/ls(i,e));let a,u,d,f,p,g,v,x,b,_,y,w=0,M=0;for(a=0;a<i;a+=r){if(f=t[a].label,p=this._resolveTickFontOptions(a),s.font=g=p.string,v=n[g]=n[g]||{data:{},gc:[]},x=p.lineHeight,b=_=0,l(f)||c(f)){if(c(f))for(u=0,d=f.length;u<d;++u)y=f[u],l(y)||c(y)||(b=St(s,v.data,v.gc,b,y),_+=x)}else b=St(s,v.data,v.gc,b,f),_=x;h.push(b),o.push(_),w=Math.max(b,w),M=Math.max(_,M)}!function(t,i){m(t,t=>{const e=t.gc,s=e.length/2;let n;if(s>i){for(n=0;n<s;++n)delete t.data[e[n]];e.splice(0,s)}})}(n,i);const k=h.indexOf(w),S=o.indexOf(M),P=t=>({width:h[t]||0,height:o[t]||0});return{first:P(0),last:P(i-1),widest:P(k),highest:P(S),widths:h,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const i=this._startPixel+t*this._length;return q(this._alignToPixels?Pt(this.chart,i,0):i,-32768,32767)}getDecimalForPixel(t){const i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){const i=this.ticks||[];if(t>=0&&t<i.length){const e=i[t];return e.$context||(e.$context=function(t,i,e){return Gt(t,{tick:e,index:i,type:"tick"})}(this.getContext(),t,e))}return this.$context||(this.$context=Gt(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,i=H(this.labelRotation),e=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),n=this._getLabelSizes(),h=t.autoSkipPadding||0,o=n?n.widest.width+h:0,r=n?n.highest.height+h:0;return this.isHorizontal()?r*e>o*s?o/e:r/s:r*s<o*e?r/e:o/s}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const i=this.axis,e=this.chart,s=this.options,{grid:n,position:h,border:o}=s,r=n.offset,a=this.isHorizontal(),l=this.ticks.length+(r?1:0),c=ds(n),d=[],f=o.setContext(this.getContext()),g=f.display?f.width:0,m=g/2,v=function(t){return Pt(e,t,g)};let x,b,_,y,w,M,k,S,P,C,D,T;if("top"===h)x=v(this.bottom),M=this.bottom-c,S=x-m,C=v(t.top)+m,T=t.bottom;else if("bottom"===h)x=v(this.top),C=t.top,T=v(t.bottom)-m,M=x+m,S=this.top+c;else if("left"===h)x=v(this.right),w=this.right-c,k=x-m,P=v(t.left)+m,D=t.right;else if("right"===h)x=v(this.left),P=t.left,D=v(t.right)-m,w=x+m,k=this.left+c;else if("x"===i){if("center"===h)x=v((t.top+t.bottom)/2+.5);else if(u(h)){const t=Object.keys(h)[0],i=h[t];x=v(this.chart.scales[t].getPixelForValue(i))}C=t.top,T=t.bottom,M=x+m,S=M+c}else if("y"===i){if("center"===h)x=v((t.left+t.right)/2);else if(u(h)){const t=Object.keys(h)[0],i=h[t];x=v(this.chart.scales[t].getPixelForValue(i))}w=x-m,k=w-c,P=t.left,D=t.right}const E=p(s.ticks.maxTicksLimit,l),O=Math.max(1,Math.ceil(l/E));for(b=0;b<l;b+=O){const t=this.getContext(b),i=n.setContext(t),s=o.setContext(t),h=i.lineWidth,l=i.color,c=s.dash||[],u=s.dashOffset,f=i.tickWidth,p=i.tickColor,g=i.tickBorderDash||[],m=i.tickBorderDashOffset;_=us(this,b,r),void 0!==_&&(y=Pt(e,_,h),a?w=k=P=D=y:M=S=C=T=y,d.push({tx1:w,ty1:M,tx2:k,ty2:S,x1:P,y1:C,x2:D,y2:T,width:h,color:l,borderDash:c,borderDashOffset:u,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=l,this._borderValue=x,d}_computeLabelItems(t){const i=this.axis,e=this.options,{position:s,ticks:n}=e,h=this.isHorizontal(),o=this.ticks,{align:r,crossAlign:a,padding:l,mirror:d}=n,f=ds(e.grid),p=f+l,g=d?-l:p,m=-H(this.labelRotation),v=[];let x,b,_,y,w,M,k,S,P,C,D,T,E="middle";if("top"===s)M=this.bottom-g,k=this._getXAxisLabelAlignment();else if("bottom"===s)M=this.top+g,k=this._getXAxisLabelAlignment();else if("left"===s){const t=this._getYAxisLabelAlignment(f);k=t.textAlign,w=t.x}else if("right"===s){const t=this._getYAxisLabelAlignment(f);k=t.textAlign,w=t.x}else if("x"===i){if("center"===s)M=(t.top+t.bottom)/2+p;else if(u(s)){const t=Object.keys(s)[0],i=s[t];M=this.chart.scales[t].getPixelForValue(i)+p}k=this._getXAxisLabelAlignment()}else if("y"===i){if("center"===s)w=(t.left+t.right)/2-p;else if(u(s)){const t=Object.keys(s)[0],i=s[t];w=this.chart.scales[t].getPixelForValue(i)}k=this._getYAxisLabelAlignment(f).textAlign}"y"===i&&("start"===r?E="top":"end"===r&&(E="bottom"));const O=this._getLabelSizes();for(x=0,b=o.length;x<b;++x){_=o[x],y=_.label;const t=n.setContext(this.getContext(x));S=this.getPixelForTick(x)+n.labelOffset,P=this._resolveTickFontOptions(x),C=P.lineHeight,D=c(y)?y.length:1;const i=D/2,e=t.color,r=t.textStrokeColor,l=t.textStrokeWidth;let u,f=k;if(h?(w=S,"inner"===k&&(f=x===b-1?this.options.reverse?"left":"right":0===x?this.options.reverse?"right":"left":"center"),T="top"===s?"near"===a||0!==m?-D*C+C/2:"center"===a?-O.highest.height/2-i*C+C:-O.highest.height+C/2:"near"===a||0!==m?C/2:"center"===a?O.highest.height/2-i*C:O.highest.height-D*C,d&&(T*=-1),0===m||t.showLabelBackdrop||(w+=C/2*Math.sin(m))):(M=S,T=(1-D)*C/2),t.showLabelBackdrop){const i=Ut(t.backdropPadding),e=O.heights[x],s=O.widths[x];let n=T-i.top,h=0-i.left;switch(E){case"middle":n-=e/2;break;case"bottom":n-=e}switch(k){case"center":h-=s/2;break;case"right":h-=s;break;case"inner":x===b-1?h-=s:x>0&&(h-=s/2)}u={left:h,top:n,width:s+i.width,height:e+i.height,color:t.backdropColor}}v.push({label:y,font:P,textOffset:T,options:{rotation:m,color:e,strokeColor:r,strokeWidth:l,textAlign:f,textBaseline:E,translation:[w,M],backdrop:u}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:i}=this.options;if(-H(this.labelRotation))return"top"===t?"left":"right";let e="center";return"start"===i.align?e="left":"end"===i.align?e="right":"inner"===i.align&&(e="inner"),e}_getYAxisLabelAlignment(t){const{position:i,ticks:{crossAlign:e,mirror:s,padding:n}}=this.options,h=t+n,o=this._getLabelSizes().widest.width;let r,a;return"left"===i?s?(a=this.right+n,"near"===e?r="left":"center"===e?(r="center",a+=o/2):(r="right",a+=o)):(a=this.right-h,"near"===e?r="right":"center"===e?(r="center",a-=o/2):(r="left",a=this.left)):"right"===i?s?(a=this.left+n,"near"===e?r="right":"center"===e?(r="center",a-=o/2):(r="left",a-=o)):(a=this.left+h,"near"===e?r="left":"center"===e?(r="center",a+=o/2):(r="right",a=this.right)):r="right",{textAlign:r,x:a}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,i=this.options.position;return"left"===i||"right"===i?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===i||"bottom"===i?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:i},left:e,top:s,width:n,height:h}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(e,s,n,h),t.restore())}getLineWidthForValue(t){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const e=this.ticks.findIndex(i=>i.value===t);if(e>=0){return i.setContext(this.getContext(e)).lineWidth}return 0}drawGrid(t){const i=this.options.grid,e=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let n,h;const o=(t,i,s)=>{s.width&&s.color&&(e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(i.x,i.y),e.stroke(),e.restore())};if(i.display)for(n=0,h=s.length;n<h;++n){const t=s[n];i.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),i.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:i,options:{border:e,grid:s}}=this,n=e.setContext(this.getContext()),h=e.display?n.width:0;if(!h)return;const o=s.setContext(this.getContext(0)).lineWidth,r=this._borderValue;let a,l,c,u;this.isHorizontal()?(a=Pt(t,this.left,h)-h/2,l=Pt(t,this.right,o)+o/2,c=u=r):(c=Pt(t,this.top,h)-h/2,u=Pt(t,this.bottom,o)+o/2,a=l=r),i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.beginPath(),i.moveTo(a,c),i.lineTo(l,u),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,e=this._computeLabelArea();e&&Ot(i,e);const s=this.getLabelItems(t);for(const n of s){const t=n.options,e=n.font;Ft(i,n.label,0,n.textOffset,e,t)}e&&zt(i)}drawTitle(){const{ctx:t,options:{position:i,title:e,reverse:s}}=this;if(!e.display)return;const n=Jt(e.font),h=Ut(e.padding),o=e.align;let r=n.lineHeight/2;"bottom"===i||"center"===i||u(i)?(r+=h.bottom,c(e.text)&&(r+=n.lineHeight*(e.text.length-1))):r+=h.top;const{titleX:a,titleY:l,maxWidth:d,rotation:f}=function(t,i,e,s){const{top:n,left:h,bottom:o,right:r,chart:a}=t,{chartArea:l,scales:c}=a;let d,f,p,g=0;const m=o-n,v=r-h;if(t.isHorizontal()){if(f=ot(s,h,r),u(e)){const t=Object.keys(e)[0],s=e[t];p=c[t].getPixelForValue(s)+m-i}else p="center"===e?(l.bottom+l.top)/2+m-i:as(t,e,i);d=r-h}else{if(u(e)){const t=Object.keys(e)[0],s=e[t];f=c[t].getPixelForValue(s)-v+i}else f="center"===e?(l.left+l.right)/2-v+i:as(t,e,i);p=ot(s,o,n),g="left"===e?-V:V}return{titleX:f,titleY:p,maxWidth:d,rotation:g}}(this,r,i,o);Ft(t,e.text,0,0,n,{color:e.color,maxWidth:d,rotation:f,textAlign:ps(o,i,s),textBaseline:"middle",translation:[a,l]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,i=t.ticks&&t.ticks.z||0,e=p(t.grid&&t.grid.z,-1),s=p(t.border&&t.border.z,0);return this._isVisible()&&this.draw===gs.prototype.draw?[{z:e,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:t=>{this.drawLabels(t)}}]:[{z:i,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const i=this.chart.getSortedVisibleDatasetMetas(),e=this.axis+"AxisID",s=[];let n,h;for(n=0,h=i.length;n<h;++n){const h=i[n];h[e]!==this.id||t&&h.type!==t||s.push(h)}return s}_resolveTickFontOptions(t){return Jt(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ms{constructor(t,i,e){this.type=t,this.scope=i,this.override=e,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const i=Object.getPrototypeOf(t);let e;(function(t){return"id"in t&&"defaults"in t})(i)&&(e=this.register(i));const s=this.items,n=t.id,h=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+t);return n in s||(s[n]=t,function(t,i,e){const s=y(Object.create(null),[e?kt.get(e):{},kt.get(i),t.defaults]);kt.set(i,s),t.defaultRoutes&&function(t,i){Object.keys(i).forEach(e=>{const s=e.split("."),n=s.pop(),h=[t].concat(s).join("."),o=i[e].split("."),r=o.pop(),a=o.join(".");kt.route(h,n,a,r)})}(i,t.defaultRoutes);t.descriptors&&kt.describe(i,t.descriptors)}(t,h,e),this.override&&kt.override(t.id,t.overrides)),h}get(t){return this.items[t]}unregister(t){const i=this.items,e=t.id,s=this.scope;e in i&&delete i[e],s&&e in kt[s]&&(delete kt[s][e],this.override&&delete bt[e])}}class vs{constructor(){this.controllers=new ms(re,"datasets",!0),this.elements=new ms(hs,"elements"),this.plugins=new ms(Object,"plugins"),this.scales=new ms(gs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,e){[...i].forEach(i=>{const s=e||this._getRegistryForType(i);e||s.isForType(i)||s===this.plugins&&i.id?this._exec(t,s,i):m(i,i=>{const s=e||this._getRegistryForType(i);this._exec(t,s,i)})})}_exec(t,i,e){const s=P(t);g(e["before"+s],[],e),i[t](e),g(e["after"+s],[],e)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){const e=this._typedRegistries[i];if(e.isForType(t))return e}return this.plugins}_get(t,i,e){const s=i.get(t);if(void 0===s)throw new Error('"'+t+'" is not a registered '+e+".");return s}}var xs=new vs;class bs{constructor(){this._init=void 0}notify(t,i,e,s){if("beforeInit"===i&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),void 0===this._init)return;const n=s?this._descriptors(t).filter(s):this._descriptors(t),h=this._notify(n,t,i,e);return"afterDestroy"===i&&(this._notify(n,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),h}_notify(t,i,e,s){s=s||{};for(const n of t){const t=n.plugin;if(!1===g(t[e],[i,s,n.options],t)&&s.cancelable)return!1}return!0}invalidate(){l(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){const e=t&&t.config,s=p(e.options&&e.options.plugins,{}),n=function(t){const i={},e=[],s=Object.keys(xs.plugins.items);for(let h=0;h<s.length;h++)e.push(xs.getPlugin(s[h]));const n=t.plugins||[];for(let h=0;h<n.length;h++){const t=n[h];-1===e.indexOf(t)&&(e.push(t),i[t.id]=!0)}return{plugins:e,localIds:i}}(e);return!1!==s||i?function(t,{plugins:i,localIds:e},s,n){const h=[],o=t.getContext();for(const r of i){const i=r.id,a=_s(s[i],n);null!==a&&h.push({plugin:r,options:ys(t.config,{plugin:r,local:e[i]},a,o)})}return h}(t,n,s,i):[]}_notifyStateChanges(t){const i=this._oldCache||[],e=this._cache,s=(t,i)=>t.filter(t=>!i.some(i=>t.plugin.id===i.plugin.id));this._notify(s(i,e),t,"stop"),this._notify(s(e,i),t,"start")}}function _s(t,i){return i||!1!==t?!0===t?{}:t:null}function ys(t,{plugin:i,local:e},s,n){const h=t.pluginScopeKeys(i),o=t.getOptionScopes(s,h);return e&&i.defaults&&o.push(i.defaults),t.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ws(t,i){const e=kt.datasets[t]||{};return((i.datasets||{})[t]||{}).indexAxis||i.indexAxis||e.indexAxis||"x"}function Ms(t){if("x"===t||"y"===t||"r"===t)return t}function ks(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function Ss(t,...i){if(Ms(t))return t;for(const e of i){const i=e.axis||ks(e.position)||t.length>1&&Ms(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Ps(t,i,e){if(e[i+"AxisID"]===t)return{axis:i}}function Cs(t,i){const e=bt[t.type]||{scales:{}},s=i.scales||{},n=ws(t.type,i),h=Object.create(null);return Object.keys(s).forEach(i=>{const o=s[i];if(!u(o))return;if(o._proxy)return;const r=Ss(i,o,function(t,i){if(i.data&&i.data.datasets){const e=i.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(e.length)return Ps(t,"x",e[0])||Ps(t,"y",e[0])}return{}}(i,t),kt.scales[o.type]),a=function(t,i){return t===i?"_index_":"_value_"}(r,n),l=e.scales||{};h[i]=w(Object.create(null),[{axis:r},o,l[r],l[a]])}),t.data.datasets.forEach(e=>{const n=e.type||t.type,o=e.indexAxis||ws(n,i),r=(bt[n]||{}).scales||{};Object.keys(r).forEach(t=>{const i=function(t,i){let e=t;return"_index_"===t?e=i:"_value_"===t&&(e="x"===i?"y":"x"),e}(t,o),n=e[i+"AxisID"]||i;h[n]=h[n]||Object.create(null),w(h[n],[{axis:i},s[n],r[t]])})}),Object.keys(h).forEach(t=>{const i=h[t];w(i,[kt.scales[i.type],kt.scale])}),h}function Ds(t){const i=t.options||(t.options={});i.plugins=p(i.plugins,{}),i.scales=Cs(t,i)}function Ts(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Es=new Map,Os=new Set;function zs(t,i){let e=Es.get(t);return e||(e=i(),Es.set(t,e),Os.add(e)),e}const Is=(t,i,e)=>{const s=S(i,e);void 0!==s&&t.add(s)};class Rs{constructor(t){this._config=function(t){return(t=t||{}).data=Ts(t.data),Ds(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ts(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Ds(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return zs(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return zs(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return zs(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){const i=t.id;return zs(`${this.type}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){const e=this._scopeCache;let s=e.get(t);return s&&!i||(s=new Map,e.set(t,s)),s}getOptionScopes(t,i,e){const{options:s,type:n}=this,h=this._cachedScopes(t,e),o=h.get(i);if(o)return o;const r=new Set;i.forEach(i=>{t&&(r.add(t),i.forEach(i=>Is(r,t,i))),i.forEach(t=>Is(r,s,t)),i.forEach(t=>Is(r,bt[n]||{},t)),i.forEach(t=>Is(r,kt,t)),i.forEach(t=>Is(r,_t,t))});const a=Array.from(r);return 0===a.length&&a.push(Object.create(null)),Os.has(i)&&h.set(i,a),a}chartOptionScopes(){const{options:t,type:i}=this;return[t,bt[i]||{},kt.datasets[i]||{},{type:i},kt,_t]}resolveNamedOptions(t,i,e,s=[""]){const n={$shared:!0},{resolver:h,subPrefixes:o}=Vs(this._resolverCache,t,s);let r=h;if(function(t,i){const{isScriptable:e,isIndexable:s}=Zt(t);for(const n of i){const i=e(n),h=s(n),o=(h||i)&&t[n];if(i&&(D(o)||Ls(o))||h&&c(o))return!0}return!1}(h,i)){n.$shared=!1;r=Xt(h,e=D(e)?e():e,this.createResolver(t,e,o))}for(const a of i)n[a]=r[a];return n}createResolver(t,i,e=[""],s){const{resolver:n}=Vs(this._resolverCache,t,e);return u(i)?Xt(n,i,void 0,s):n}}function Vs(t,i,e){let s=t.get(i);s||(s=new Map,t.set(i,s));const n=e.join();let h=s.get(n);if(!h){h={resolver:Kt(i,e),subPrefixes:e.filter(t=>!t.toLowerCase().includes("hover"))},s.set(n,h)}return h}const Ls=t=>u(t)&&Object.getOwnPropertyNames(t).some(i=>D(t[i]));const Fs=["top","bottom","left","right","chartArea"];function Ns(t,i){return"top"===t||"bottom"===t||-1===Fs.indexOf(t)&&"x"===i}function As(t,i){return function(e,s){return e[t]===s[t]?e[i]-s[i]:e[t]-s[t]}}function Ws(t){const i=t.chart,e=i.options.animation;i.notifyPlugins("afterRender"),g(e&&e.onComplete,[t],i)}function Bs(t){const i=t.chart,e=i.options.animation;g(e&&e.onProgress,[t],i)}function Ys(t){return vi()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Hs={},js=t=>{const i=Ys(t);return Object.values(Hs).filter(t=>t.canvas===i).pop()};function $s(t,i,e){const s=Object.keys(t);for(const n of s){const s=+n;if(s>=i){const h=t[n];delete t[n],(e>0||s>i)&&(t[s+e]=h)}}}class Us{static register(...t){xs.add(...t),Js()}static unregister(...t){xs.remove(...t),Js()}constructor(t,i){const e=this.config=new Rs(i),s=Ys(t),n=js(s);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const h=e.createResolver(e.chartOptionScopes(),this.getContext());this.platform=new(e.platform||function(t){return!vi()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?He:ns}(s)),this.platform.updateConfig(e);const o=this.platform.acquireContext(s,h.aspectRatio),r=o&&o.canvas,l=r&&r.height,c=r&&r.width;this.id=a(),this.ctx=o,this.canvas=r,this.width=c,this.height=l,this._options=h,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bs,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,i){let e;return function(...s){return i?(clearTimeout(e),e=setTimeout(t,i,s)):t.apply(this,s),i}}(t=>this.update(t),h.resizeDelay||0),this._dataChanges=[],Hs[this.id]=this,o&&r&&($i.listen(this,"complete",Ws),$i.listen(this,"progress",Bs),this._initialize(),this.attached&&this.update())}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:i},width:e,height:s,_aspectRatio:n}=this;return l(t)?i&&n?n:s?e/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return xs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Pi(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ct(this.canvas,this.ctx),this}stop(){return $i.stop(this),this}resize(t,i){$i.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){const e=this.options,s=this.canvas,n=e.maintainAspectRatio&&this.aspectRatio,h=this.platform.getMaximumSize(s,t,i,n),o=e.devicePixelRatio||this.platform.getDevicePixelRatio(),r=this.width?"resize":"attach";this.width=h.width,this.height=h.height,this._aspectRatio=this.aspectRatio,Pi(this,o,!0)&&(this.notifyPlugins("resize",{size:h}),g(e.onResize,[this,h],this),this.attached&&this._doResize(r)&&this.render())}ensureScalesHaveIDs(){m(this.options.scales||{},(t,i)=>{t.id=i})}buildOrUpdateScales(){const t=this.options,i=t.scales,e=this.scales,s=Object.keys(e).reduce((t,i)=>(t[i]=!1,t),{});let n=[];i&&(n=n.concat(Object.keys(i).map(t=>{const e=i[t],s=Ss(t,e),n="r"===s,h="x"===s;return{options:e,dposition:n?"chartArea":h?"bottom":"left",dtype:n?"radialLinear":h?"category":"linear"}}))),m(n,i=>{const n=i.options,h=n.id,o=Ss(h,n),r=p(n.type,i.dtype);void 0!==n.position&&Ns(n.position,o)===Ns(i.dposition)||(n.position=i.dposition),s[h]=!0;let a=null;if(h in e&&e[h].type===r)a=e[h];else{a=new(xs.getScale(r))({id:h,type:r,ctx:this.ctx,chart:this}),e[a.id]=a}a.init(n,t)}),m(s,(t,i)=>{t||delete e[i]}),m(e,t=>{Be.configure(this,t,t.options),Be.addBox(this,t)})}_updateMetasets(){const t=this._metasets,i=this.data.datasets.length,e=t.length;if(t.sort((t,i)=>t.index-i.index),e>i){for(let t=i;t<e;++t)this._destroyDatasetMeta(t);t.splice(i,e-i)}this._sortedMetasets=t.slice(0).sort(As("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((t,e)=>{0===i.filter(i=>i===t._dataset).length&&this._destroyDatasetMeta(e)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let e,s;for(this._removeUnreferencedMetasets(),e=0,s=i.length;e<s;e++){const s=i[e];let n=this.getDatasetMeta(e);const h=s.type||this.config.type;if(n.type&&n.type!==h&&(this._destroyDatasetMeta(e),n=this.getDatasetMeta(e)),n.type=h,n.indexAxis=s.indexAxis||ws(h,this.options),n.order=s.order||0,n.index=e,n.label=""+s.label,n.visible=this.isDatasetVisible(e),n.controller)n.controller.updateIndex(e),n.controller.linkScales();else{const i=xs.getController(h),{datasetElementType:s,dataElementType:o}=kt.datasets[h];Object.assign(i,{dataElementType:xs.getElement(o),datasetElementType:s&&xs.getElement(s)}),n.controller=new i(this,e),t.push(n.controller)}}return this._updateMetasets(),t}_resetElements(){m(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const i=this.config;i.update();const e=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!e.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let h=0;for(let a=0,l=this.data.datasets.length;a<l;a++){const{controller:t}=this.getDatasetMeta(a),i=!s&&-1===n.indexOf(t);t.buildOrUpdateElements(i),h=Math.max(+t.getMaxOverflow(),h)}h=this._minPadding=e.layout.autoPadding?h:0,this._updateLayout(h),s||m(n,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(As("z","_idx"));const{_active:o,_lastEvent:r}=this;r?this._eventHandler(r,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){m(this.scales,t=>{Be.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,i=new Set(Object.keys(this._listeners)),e=new Set(t.events);T(i,e)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(const{method:e,start:s,count:n}of i){$s(t,s,"_removeElements"===e?-n:n)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const i=this.data.datasets.length,e=i=>new Set(t.filter(t=>t[0]===i).map((t,i)=>i+","+t.splice(1).join(","))),s=e(0);for(let n=1;n<i;n++)if(!T(s,e(n)))return;return Array.from(s).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Be.update(this,this.width,this.height,t);const i=this.chartArea,e=i.width<=0||i.height<=0;this._layers=[],m(this.boxes,t=>{e&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,i)=>{t._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let i=0,e=this.data.datasets.length;i<e;++i)this._updateDataset(i,D(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){const e=this.getDatasetMeta(t),s={meta:e,index:t,mode:i,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(e.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&($i.has(this)?this.attached&&!$i.running(this)&&$i.start(this):(this.draw(),Ws({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,i)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const i=this._sortedMetasets,e=[];let s,n;for(s=0,n=i.length;s<n;++s){const n=i[s];t&&!n.visible||e.push(n)}return e}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const i=this.ctx,e={meta:t,index:t.index,cancelable:!0},s=Hi(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",e)&&(s&&Ot(i,s),t.controller.draw(),s&&zt(i),e.cancelable=!1,this.notifyPlugins("afterDatasetDraw",e))}isPointInArea(t){return Et(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,e,s){const n=De.modes[i];return"function"==typeof n?n(this,t,e,s):[]}getDatasetMeta(t){const i=this.data.datasets[t],e=this._metasets;let s=e.filter(t=>t&&t._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},e.push(s)),s}getContext(){return this.$context||(this.$context=Gt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const i=this.data.datasets[t];if(!i)return!1;const e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!i.hidden}setDatasetVisibility(t,i){this.getDatasetMeta(t).hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,e){const s=e?"show":"hide",n=this.getDatasetMeta(t),h=n.controller._resolveAnimations(void 0,s);C(i)?(n.data[i].hidden=!e,this.update()):(this.setDatasetVisibility(t,e),h.update(n,{visible:e}),this.update(i=>i.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){const i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),$i.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ct(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Hs[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,i=this.platform,e=(e,s)=>{i.addEventListener(this,e,s),t[e]=s},s=(t,i,e)=>{t.offsetX=i,t.offsetY=e,this._eventHandler(t)};m(this.options.events,t=>e(t,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,i=this.platform,e=(e,s)=>{i.addEventListener(this,e,s),t[e]=s},s=(e,s)=>{t[e]&&(i.removeEventListener(this,e,s),delete t[e])},n=(t,i)=>{this.canvas&&this.resize(t,i)};let h;const o=()=>{s("attach",o),this.attached=!0,this.resize(),e("resize",n),e("detach",h)};h=()=>{this.attached=!1,s("resize",n),this._stop(),this._resize(0,0),e("attach",o)},i.isAttached(this.canvas)?o():h()}unbindEvents(){m(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},m(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,e){const s=e?"set":"remove";let n,h,o,r;for("dataset"===i&&(n=this.getDatasetMeta(t[0].datasetIndex),n.controller["_"+s+"DatasetHoverStyle"]()),o=0,r=t.length;o<r;++o){h=t[o];const i=h&&this.getDatasetMeta(h.datasetIndex).controller;i&&i[s+"HoverStyle"](h.element,h.datasetIndex,h.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const i=this._active||[],e=t.map(({datasetIndex:t,index:i})=>{const e=this.getDatasetMeta(t);if(!e)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:e.data[i],index:i}});!v(e,i)&&(this._active=e,this._lastEvent=null,this._updateHoverStyles(e,i))}notifyPlugins(t,i,e){return this._plugins.notify(this,t,i,e)}isPluginEnabled(t){return 1===this._plugins._cache.filter(i=>i.plugin.id===t).length}_updateHoverStyles(t,i,e){const s=this.options.hover,n=(t,i)=>t.filter(t=>!i.some(i=>t.datasetIndex===i.datasetIndex&&t.index===i.index)),h=n(i,t),o=e?t:n(t,i);h.length&&this.updateHoverStyle(h,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(t,i){const e={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=i=>(i.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",e,s))return;const n=this._handleEvent(t,i,e.inChartArea);return e.cancelable=!1,this.notifyPlugins("afterEvent",e,s),(n||e.changed)&&this.render(),this}_handleEvent(t,i,e){const{_active:s=[],options:n}=this,h=i,o=this._getActiveElements(t,s,e,h),r=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),a=function(t,i,e,s){return e&&"mouseout"!==t.type?s?i:t:null}(t,this._lastEvent,e,r);e&&(this._lastEvent=null,g(n.onHover,[t,o,this],this),r&&g(n.onClick,[t,o,this],this));const l=!v(o,s);return(l||i)&&(this._active=o,this._updateHoverStyles(o,s,i)),this._lastEvent=a,l}_getActiveElements(t,i,e,s){if("mouseout"===t.type)return[];if(!e)return i;const n=this.options.hover;return this.getElementsAtEventForMode(t,n.mode,n,s)}}function Js(){return m(Us.instances,t=>t._plugins.invalidate())}function Qs(t,i,e=i){t.lineCap=p(e.borderCapStyle,i.borderCapStyle),t.setLineDash(p(e.borderDash,i.borderDash)),t.lineDashOffset=p(e.borderDashOffset,i.borderDashOffset),t.lineJoin=p(e.borderJoinStyle,i.borderJoinStyle),t.lineWidth=p(e.borderWidth,i.borderWidth),t.strokeStyle=p(e.borderColor,i.borderColor)}function qs(t,i,e){t.lineTo(e.x,e.y)}function Gs(t,i,e={}){const s=t.length,{start:n=0,end:h=s-1}=e,{start:o,end:r}=i,a=Math.max(n,o),l=Math.min(h,r),c=n<o&&h<o||n>r&&h>r;return{count:s,start:a,loop:i.loop,ilen:l<a&&!c?s+l-a:l-a}}function Ks(t,i,e,s){const{points:n,options:h}=i,{count:o,start:r,loop:a,ilen:l}=Gs(n,e,s),c=function(t){return t.stepped?It:t.tension||"monotone"===t.cubicInterpolationMode?Rt:qs}(h);let u,d,f,{move:p=!0,reverse:g}=s||{};for(u=0;u<=l;++u)d=n[(r+(g?l-u:u))%o],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):c(t,f,d,g,h.stepped),f=d);return a&&(d=n[(r+(g?l:0))%o],c(t,f,d,g,h.stepped)),!!a}function Xs(t,i,e,s){const n=i.points,{count:h,start:o,ilen:r}=Gs(n,e,s),{move:a=!0,reverse:l}=s||{};let c,u,d,f,p,g,m=0,v=0;const x=t=>(o+(l?r-t:t))%h,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(a&&(u=n[x(0)],t.moveTo(u.x,u.y)),c=0;c<=r;++c){if(u=n[x(c)],u.skip)continue;const i=u.x,e=u.y,s=0|i;s===d?(e<f?f=e:e>p&&(p=e),m=(v*m+i)/++v):(b(),t.lineTo(i,e),d=s,v=0,f=p=e),g=e}b()}function Zs(t){const i=t.options,e=i.borderDash&&i.borderDash.length;return!(t._decimated||t._loop||i.tension||"monotone"===i.cubicInterpolationMode||i.stepped||e)?Xs:Ks}i(Us,"defaults",kt),i(Us,"instances",Hs),i(Us,"overrides",bt),i(Us,"registry",xs),i(Us,"version","4.5.1"),i(Us,"getChart",js);const tn="function"==typeof Path2D;function en(t,i,e,s){tn&&!i.options.segment?function(t,i,e,s){let n=i._path;n||(n=i._path=new Path2D,i.path(n,e,s)&&n.closePath()),Qs(t,i.options),t.stroke(n)}(t,i,e,s):function(t,i,e,s){const{segments:n,options:h}=i,o=Zs(i);for(const r of n)Qs(t,h,r.style),t.beginPath(),o(t,i,r,{start:e,end:e+s-1})&&t.closePath(),t.stroke()}(t,i,e,s)}class sn extends hs{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){const e=this.options;if((e.tension||"monotone"===e.cubicInterpolationMode)&&!e.stepped&&!this._pointsUpdated){const s=e.spanGaps?this._loop:this._fullLoop;mi(this._points,e,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,i){const e=t.points,s=t.options.spanGaps,n=e.length;if(!n)return[];const h=!!t._loop,{start:o,end:r}=function(t,i,e,s){let n=0,h=i-1;if(e&&!s)for(;n<i&&!t[n].skip;)n++;for(;n<i&&t[n].skip;)n++;for(n%=i,e&&(h+=n);h>n&&t[h%i].skip;)h--;return h%=i,{start:n,end:h}}(e,n,h,s);return Ai(t,!0===s?[{start:o,end:r,loop:h}]:function(t,i,e,s){const n=t.length,h=[];let o,r=i,a=t[i];for(o=i+1;o<=e;++o){const e=t[o%n];e.skip||e.stop?a.skip||(s=!1,h.push({start:i%n,end:(o-1)%n,loop:s}),i=r=e.stop?o:null):(r=o,a.skip&&(i=o)),a=e}return null!==r&&h.push({start:i%n,end:r%n,loop:s}),h}(e,o,r<o?r+n:r,!!t._fullLoop&&0===o&&r===n-1),e,i)}(this,this.options.segment))}first(){const t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){const t=this.segments,i=this.points,e=t.length;return e&&i[t[e-1].end]}interpolate(t,i){const e=this.options,s=t[i],n=this.points,h=Ni(this,{property:i,start:s,end:s});if(!h.length)return;const o=[],r=function(t){return t.stepped?Ei:t.tension||"monotone"===t.cubicInterpolationMode?Oi:Ti}(e);let a,l;for(a=0,l=h.length;a<l;++a){const{start:l,end:c}=h[a],u=n[l],d=n[c];if(u===d){o.push(u);continue}const f=r(u,d,Math.abs((s-u[i])/(d[i]-u[i])),e.stepped);f[i]=t[i],o.push(f)}return 1===o.length?o[0]:o}pathSegment(t,i,e){return Zs(this)(t,this,i,e)}path(t,i,e){const s=this.segments,n=Zs(this);let h=this._loop;i=i||0,e=e||this.points.length-i;for(const o of s)h&=n(t,this,o,{start:i,end:i+e-1});return!!h}draw(t,i,e,s){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(t.save(),en(t,this,e,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function nn(t,i,e,s){const n=t.options,{[e]:h}=t.getProps([e],s);return Math.abs(i-h)<n.radius+n.hitRadius}i(sn,"id","line"),i(sn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),i(sn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),i(sn,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t});class hn extends hs{constructor(t){super(),i(this,"parsed"),i(this,"skip"),i(this,"stop"),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,e){const s=this.options,{x:n,y:h}=this.getProps(["x","y"],e);return Math.pow(t-n,2)+Math.pow(i-h,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return nn(this,t,"x",i)}inYRange(t,i){return nn(this,t,"y",i)}getCenterPoint(t){const{x:i,y:e}=this.getProps(["x","y"],t);return{x:i,y:e}}size(t){let i=(t=t||this.options||{}).radius||0;i=Math.max(i,i&&t.hoverRadius||0);return 2*(i+(i&&t.borderWidth||0))}draw(t,i){const e=this.options;this.skip||e.radius<.1||!Et(this,i,this.size(e)/2)||(t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,t.fillStyle=e.backgroundColor,Dt(t,e,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function on(t,i){const{x:e,y:s,base:n,width:h,height:o}=t.getProps(["x","y","base","width","height"],i);let r,a,l,c,u;return t.horizontal?(u=o/2,r=Math.min(e,n),a=Math.max(e,n),l=s-u,c=s+u):(u=h/2,r=e-u,a=e+u,l=Math.min(s,n),c=Math.max(s,n)),{left:r,top:l,right:a,bottom:c}}function rn(t,i,e,s){return t?0:q(i,e,s)}function an(t){const i=on(t),e=i.right-i.left,s=i.bottom-i.top,n=function(t,i,e){const s=t.options.borderWidth,n=t.borderSkipped,h=jt(s);return{t:rn(n.top,h.top,0,e),r:rn(n.right,h.right,0,i),b:rn(n.bottom,h.bottom,0,e),l:rn(n.left,h.left,0,i)}}(t,e/2,s/2),h=function(t,i,e){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,h=$t(n),o=Math.min(i,e),r=t.borderSkipped,a=s||u(n);return{topLeft:rn(!a||r.top||r.left,h.topLeft,0,o),topRight:rn(!a||r.top||r.right,h.topRight,0,o),bottomLeft:rn(!a||r.bottom||r.left,h.bottomLeft,0,o),bottomRight:rn(!a||r.bottom||r.right,h.bottomRight,0,o)}}(t,e/2,s/2);return{outer:{x:i.left,y:i.top,w:e,h:s,radius:h},inner:{x:i.left+n.l,y:i.top+n.t,w:e-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,h.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,h.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,h.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,h.bottomRight-Math.max(n.b,n.r))}}}}function ln(t,i,e,s){const n=null===i,h=null===e,o=t&&!(n&&h)&&on(t,s);return o&&(n||G(i,o.left,o.right))&&(h||G(e,o.top,o.bottom))}function cn(t,i){t.rect(i.x,i.y,i.w,i.h)}function un(t,i,e={}){const s=t.x!==e.x?-i:0,n=t.y!==e.y?-i:0,h=(t.x+t.w!==e.x+e.w?i:0)-s,o=(t.y+t.h!==e.y+e.h?i:0)-n;return{x:t.x+s,y:t.y+n,w:t.w+h,h:t.h+o,radius:t.radius}}i(hn,"id","point"),i(hn,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),i(hn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class dn extends hs{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:i,options:{borderColor:e,backgroundColor:s}}=this,{inner:n,outer:h}=an(this),o=(r=h.radius).topLeft||r.topRight||r.bottomLeft||r.bottomRight?Nt:cn;var r;t.save(),h.w===n.w&&h.h===n.h||(t.beginPath(),o(t,un(h,i,n)),t.clip(),o(t,un(n,-i,h)),t.fillStyle=e,t.fill("evenodd")),t.beginPath(),o(t,un(n,i)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,i,e){return ln(this,t,i,e)}inXRange(t,i){return ln(this,t,null,i)}inYRange(t,i){return ln(this,null,t,i)}getCenterPoint(t){const{x:i,y:e,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],t);return{x:n?(i+s)/2:i,y:n?e:(e+s)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}function fn(t,i,e,s){if(s)return;let n=i[t],h=e[t];return"angle"===t&&(n=J(n),h=J(h)),{property:t,start:n,end:h}}function pn(t,i,e){for(;i>t;i--){const t=e[i];if(!isNaN(t.x)&&!isNaN(t.y))break}return i}function gn(t,i,e,s){return t&&i?s(t[e],i[e]):t?t[e]:i?i[e]:0}function mn(t,i){let e=[],s=!1;return c(t)?(s=!0,e=t):e=function(t,i){const{x:e=null,y:s=null}=t||{},n=i.points,h=[];return i.segments.forEach(({start:t,end:i})=>{i=pn(t,i,n);const o=n[t],r=n[i];null!==s?(h.push({x:o.x,y:s}),h.push({x:r.x,y:s})):null!==e&&(h.push({x:e,y:o.y}),h.push({x:e,y:r.y}))}),h}(t,i),e.length?new sn({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function vn(t){return t&&!1!==t.fill}function xn(t,i,e){let s=t[i].fill;const n=[i];let h;if(!e)return s;for(;!1!==s&&-1===n.indexOf(s);){if(!d(s))return s;if(h=t[s],!h)return!1;if(h.visible)return s;n.push(s),s=h.fill}return!1}function bn(t,i,e){const s=function(t){const i=t.options,e=i.fill;let s=p(e&&e.target,e);void 0===s&&(s=!!i.backgroundColor);if(!1===s||null===s)return!1;if(!0===s)return"origin";return s}(t);if(u(s))return!isNaN(s.value)&&s;let n=parseFloat(s);return d(n)&&Math.floor(n)===n?function(t,i,e,s){"-"!==t&&"+"!==t||(e=i+e);if(e===i||e<0||e>=s)return!1;return e}(s[0],i,n,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function _n(t,i,e){const s=[];for(let n=0;n<e.length;n++){const h=e[n],{first:o,last:r,point:a}=yn(h,i,"x");if(!(!a||o&&r))if(o)s.unshift(a);else if(t.push(a),!r)break}t.push(...s)}function yn(t,i,e){const s=t.interpolate(i,e);if(!s)return{};const n=s[e],h=t.segments,o=t.points;let r=!1,a=!1;for(let l=0;l<h.length;l++){const t=h[l],i=o[t.start][e],s=o[t.end][e];if(G(n,i,s)){r=n===i,a=n===s;break}}return{first:r,last:a,point:s}}i(dn,"id","bar"),i(dn,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),i(dn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class wn{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,i,e){const{x:s,y:n,radius:h}=this;return i=i||{start:0,end:O},t.arc(s,n,h,i.end,i.start,!0),!e.bounds}interpolate(t){const{x:i,y:e,radius:s}=this,n=t.angle;return{x:i+Math.cos(n)*s,y:e+Math.sin(n)*s,angle:n}}}function Mn(t){const{chart:i,fill:e,line:s}=t;if(d(e))return function(t,i){const e=t.getDatasetMeta(i),s=e&&t.isDatasetVisible(i);return s?e.dataset:null}(i,e);if("stack"===e)return function(t){const{scale:i,index:e,line:s}=t,n=[],h=s.segments,o=s.points,r=function(t,i){const e=[],s=t.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){const t=s[n];if(t.index===i)break;t.hidden||e.unshift(t.dataset)}return e}(i,e);r.push(mn({x:null,y:i.bottom},s));for(let a=0;a<h.length;a++){const t=h[a];for(let i=t.start;i<=t.end;i++)_n(n,o[i],r)}return new sn({points:n,options:{}})}(t);if("shape"===e)return!0;const n=function(t){const i=t.scale||{};if(i.getPointPositionForValue)return function(t){const{scale:i,fill:e}=t,s=i.options,n=i.getLabels().length,h=s.reverse?i.max:i.min,o=function(t,i,e){let s;return s="start"===t?e:"end"===t?i.options.reverse?i.min:i.max:u(t)?t.value:i.getBaseValue(),s}(e,i,h),r=[];if(s.grid.circular){const t=i.getPointPositionForValue(0,h);return new wn({x:t.x,y:t.y,radius:i.getDistanceFromCenterForValue(o)})}for(let a=0;a<n;++a)r.push(i.getPointPositionForValue(a,o));return r}(t);return function(t){const{scale:i={},fill:e}=t,s=function(t,i){let e=null;return"start"===t?e=i.bottom:"end"===t?e=i.top:u(t)?e=i.getPixelForValue(t.value):i.getBasePixel&&(e=i.getBasePixel()),e}(e,i);if(d(s)){const t=i.isHorizontal();return{x:t?s:null,y:t?null:s}}return null}(t)}(t);return n instanceof wn?n:mn(n,s)}function kn(t,i,e){const s=Mn(i),{chart:n,index:h,line:o,scale:r,axis:a}=i,l=o.options,c=l.fill,u=l.backgroundColor,{above:d=u,below:f=u}=c||{},p=n.getDatasetMeta(h),g=Hi(n,p);s&&o.points.length&&(Ot(t,e),function(t,i){const{line:e,target:s,above:n,below:h,area:o,scale:r,clip:a}=i,l=e._loop?"angle":i.axis;t.save();let c=h;h!==n&&("x"===l?(Sn(t,s,o.top),Cn(t,{line:e,target:s,color:n,scale:r,property:l,clip:a}),t.restore(),t.save(),Sn(t,s,o.bottom)):"y"===l&&(Pn(t,s,o.left),Cn(t,{line:e,target:s,color:h,scale:r,property:l,clip:a}),t.restore(),t.save(),Pn(t,s,o.right),c=n));Cn(t,{line:e,target:s,color:c,scale:r,property:l,clip:a}),t.restore()}(t,{line:o,target:s,above:d,below:f,area:e,scale:r,axis:a,clip:g}),zt(t))}function Sn(t,i,e){const{segments:s,points:n}=i;let h=!0,o=!1;t.beginPath();for(const r of s){const{start:s,end:a}=r,l=n[s],c=n[pn(s,a,n)];h?(t.moveTo(l.x,l.y),h=!1):(t.lineTo(l.x,e),t.lineTo(l.x,l.y)),o=!!i.pathSegment(t,r,{move:o}),o?t.closePath():t.lineTo(c.x,e)}t.lineTo(i.first().x,e),t.closePath(),t.clip()}function Pn(t,i,e){const{segments:s,points:n}=i;let h=!0,o=!1;t.beginPath();for(const r of s){const{start:s,end:a}=r,l=n[s],c=n[pn(s,a,n)];h?(t.moveTo(l.x,l.y),h=!1):(t.lineTo(e,l.y),t.lineTo(l.x,l.y)),o=!!i.pathSegment(t,r,{move:o}),o?t.closePath():t.lineTo(e,c.y)}t.lineTo(e,i.first().y),t.closePath(),t.clip()}function Cn(t,i){const{line:e,target:s,property:n,color:h,scale:o,clip:r}=i,a=function(t,i,e){const s=t.segments,n=t.points,h=i.points,o=[];for(const r of s){let{start:t,end:s}=r;s=pn(t,s,n);const a=fn(e,n[t],n[s],r.loop);if(!i.segments){o.push({source:r,target:a,start:n[t],end:n[s]});continue}const l=Ni(i,a);for(const i of l){const t=fn(e,h[i.start],h[i.end],i.loop),s=Fi(r,n,t);for(const n of s)o.push({source:n,target:i,start:{[e]:gn(a,t,"start",Math.max)},end:{[e]:gn(a,t,"end",Math.min)}})}}return o}(e,s,n);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:i=h}={}}=l,a=!0!==s;t.save(),t.fillStyle=i,Dn(t,o,r,a&&fn(n,u,d)),t.beginPath();const f=!!e.pathSegment(t,l);let p;if(a){f?t.closePath():Tn(t,s,d,n);const i=!!s.pathSegment(t,c,{move:f,reverse:!0});p=f&&i,p||Tn(t,s,u,n)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function Dn(t,i,e,s){const n=i.chart.chartArea,{property:h,start:o,end:r}=s||{};if("x"===h||"y"===h){let i,s,a,l;"x"===h?(i=o,s=n.top,a=r,l=n.bottom):(i=n.left,s=o,a=n.right,l=r),t.beginPath(),e&&(i=Math.max(i,e.left),a=Math.min(a,e.right),s=Math.max(s,e.top),l=Math.min(l,e.bottom)),t.rect(i,s,a-i,l-s),t.clip()}}function Tn(t,i,e,s){const n=i.interpolate(e,s);n&&t.lineTo(n.x,n.y)}var En={id:"filler",afterDatasetsUpdate(t,i,e){const s=(t.data.datasets||[]).length,n=[];let h,o,r,a;for(o=0;o<s;++o)h=t.getDatasetMeta(o),r=h.dataset,a=null,r&&r.options&&r instanceof sn&&(a={visible:t.isDatasetVisible(o),index:o,fill:bn(r,o,s),chart:t,axis:h.controller.options.indexAxis,scale:h.vScale,line:r}),h.$filler=a,n.push(a);for(o=0;o<s;++o)a=n[o],a&&!1!==a.fill&&(a.fill=xn(n,o,e.propagate))},beforeDraw(t,i,e){const s="beforeDraw"===e.drawTime,n=t.getSortedVisibleDatasetMetas(),h=t.chartArea;for(let o=n.length-1;o>=0;--o){const i=n[o].$filler;i&&(i.line.updateControlPoints(h,i.axis),s&&i.fill&&kn(t.ctx,i,h))}},beforeDatasetsDraw(t,i,e){if("beforeDatasetsDraw"!==e.drawTime)return;const s=t.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){const i=s[n].$filler;vn(i)&&kn(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,i,e){const s=i.meta.$filler;vn(s)&&"beforeDatasetDraw"===e.drawTime&&kn(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const On=(t,i)=>{let{boxHeight:e=i,boxWidth:s=i}=t;return t.usePointStyle&&(e=Math.min(e,i),s=t.pointStyleWidth||Math.min(s,i)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(i,e)}};class zn extends hs{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,e){this.maxWidth=t,this.maxHeight=i,this._margins=e,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let i=g(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(i=>t.filter(i,this.chart.data))),t.sort&&(i=i.sort((i,e)=>t.sort(i,e,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:t,ctx:i}=this;if(!t.display)return void(this.width=this.height=0);const e=t.labels,s=Jt(e.font),n=s.size,h=this._computeTitleHeight(),{boxWidth:o,itemHeight:r}=On(e,n);let a,l;i.font=s.string,this.isHorizontal()?(a=this.maxWidth,l=this._fitRows(h,n,o,r)+10):(l=this.maxHeight,a=this._fitCols(h,s,o,r)+10),this.width=Math.min(a,t.maxWidth||this.maxWidth),this.height=Math.min(l,t.maxHeight||this.maxHeight)}_fitRows(t,i,e,s){const{ctx:n,maxWidth:h,options:{labels:{padding:o}}}=this,r=this.legendHitBoxes=[],a=this.lineWidths=[0],l=s+o;let c=t;n.textAlign="left",n.textBaseline="middle";let u=-1,d=-l;return this.legendItems.forEach((t,f)=>{const p=e+i/2+n.measureText(t.text).width;(0===f||a[a.length-1]+p+2*o>h)&&(c+=l,a[a.length-(f>0?0:1)]=0,d+=l,u++),r[f]={left:0,top:d,row:u,width:p,height:s},a[a.length-1]+=p+o}),c}_fitCols(t,i,e,s){const{ctx:n,maxHeight:h,options:{labels:{padding:o}}}=this,r=this.legendHitBoxes=[],a=this.columnSizes=[],l=h-t;let c=o,u=0,d=0,f=0,p=0;return this.legendItems.forEach((t,h)=>{const{itemWidth:g,itemHeight:m}=function(t,i,e,s,n){const h=function(t,i,e,s){let n=t.text;n&&"string"!=typeof n&&(n=n.reduce((t,i)=>t.length>i.length?t:i));return i+e.size/2+s.measureText(n).width}(s,t,i,e),o=function(t,i,e){let s=t;"string"!=typeof i.text&&(s=In(i,e));return s}(n,s,i.lineHeight);return{itemWidth:h,itemHeight:o}}(e,i,n,t,s);h>0&&d+m+2*o>l&&(c+=u+o,a.push({width:u,height:d}),f+=u+o,p++,u=d=0),r[h]={left:f,top:d,col:p,width:g,height:m},u=Math.max(u,g),d+=m+o}),c+=u,a.push({width:u,height:d}),c}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:e,labels:{padding:s},rtl:n}}=this,h=zi(n,this.left,this.width);if(this.isHorizontal()){let n=0,o=ot(e,this.left+s,this.right-this.lineWidths[n]);for(const r of i)n!==r.row&&(n=r.row,o=ot(e,this.left+s,this.right-this.lineWidths[n])),r.top+=this.top+t+s,r.left=h.leftForLtr(h.x(o),r.width),o+=r.width+s}else{let n=0,o=ot(e,this.top+t+s,this.bottom-this.columnSizes[n].height);for(const r of i)r.col!==n&&(n=r.col,o=ot(e,this.top+t+s,this.bottom-this.columnSizes[n].height)),r.top=o,r.left+=this.left+s,r.left=h.leftForLtr(h.x(r.left),r.width),o+=r.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Ot(t,this),this._draw(),zt(t)}}_draw(){const{options:t,columnSizes:i,lineWidths:e,ctx:s}=this,{align:n,labels:h}=t,o=kt.color,r=zi(t.rtl,this.left,this.width),a=Jt(h.font),{padding:l}=h,c=a.size,u=c/2;let d;this.drawTitle(),s.textAlign=r.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=a.string;const{boxWidth:f,boxHeight:g,itemHeight:m}=On(h,c),v=this.isHorizontal(),x=this._computeTitleHeight();d=v?{x:ot(n,this.left+l,this.right-e[0]),y:this.top+l+x,line:0}:{x:this.left+l,y:ot(n,this.top+x+l,this.bottom-i[0].height),line:0},Ii(this.ctx,t.textDirection);const b=m+l;this.legendItems.forEach((_,y)=>{s.strokeStyle=_.fontColor,s.fillStyle=_.fontColor;const w=s.measureText(_.text).width,M=r.textAlign(_.textAlign||(_.textAlign=h.textAlign)),k=f+u+w;let S=d.x,P=d.y;r.setWidth(this.width),v?y>0&&S+k+l>this.right&&(P=d.y+=b,d.line++,S=d.x=ot(n,this.left+l,this.right-e[d.line])):y>0&&P+b>this.bottom&&(S=d.x=S+i[d.line].width+l,d.line++,P=d.y=ot(n,this.top+x+l,this.bottom-i[d.line].height));if(function(t,i,e){if(isNaN(f)||f<=0||isNaN(g)||g<0)return;s.save();const n=p(e.lineWidth,1);if(s.fillStyle=p(e.fillStyle,o),s.lineCap=p(e.lineCap,"butt"),s.lineDashOffset=p(e.lineDashOffset,0),s.lineJoin=p(e.lineJoin,"miter"),s.lineWidth=n,s.strokeStyle=p(e.strokeStyle,o),s.setLineDash(p(e.lineDash,[])),h.usePointStyle){const o={radius:g*Math.SQRT2/2,pointStyle:e.pointStyle,rotation:e.rotation,borderWidth:n},a=r.xPlus(t,f/2);Tt(s,o,a,i+u,h.pointStyleWidth&&f)}else{const h=i+Math.max((c-g)/2,0),o=r.leftForLtr(t,f),a=$t(e.borderRadius);s.beginPath(),Object.values(a).some(t=>0!==t)?Nt(s,{x:o,y:h,w:f,h:g,radius:a}):s.rect(o,h,f,g),s.fill(),0!==n&&s.stroke()}s.restore()}(r.x(S),P,_),S=((t,i,e,s)=>t===(s?"left":"right")?e:"center"===t?(i+e)/2:i)(M,S+f+u,v?S+k:this.right,t.rtl),function(t,i,e){Ft(s,e.text,t,i+m/2,a,{strikethrough:e.hidden,textAlign:r.textAlign(e.textAlign)})}(r.x(S),P,_),v)d.x+=k+l;else if("string"!=typeof _.text){const t=a.lineHeight;d.y+=In(_,t)+l}else d.y+=b}),Ri(this.ctx,t.textDirection)}drawTitle(){const t=this.options,i=t.title,e=Jt(i.font),s=Ut(i.padding);if(!i.display)return;const n=zi(t.rtl,this.left,this.width),h=this.ctx,o=i.position,r=e.size/2,a=s.top+r;let l,c=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),l=this.top+a,c=ot(t.align,c,this.right-u);else{const i=this.columnSizes.reduce((t,i)=>Math.max(t,i.height),0);l=a+ot(t.align,this.top,this.bottom-i-t.labels.padding-this._computeTitleHeight())}const d=ot(o,c,c+u);h.textAlign=n.textAlign(ht(o)),h.textBaseline="middle",h.strokeStyle=i.color,h.fillStyle=i.color,h.font=e.string,Ft(h,i.text,d,l,e)}_computeTitleHeight(){const t=this.options.title,i=Jt(t.font),e=Ut(t.padding);return t.display?i.lineHeight+e.height:0}_getLegendItemAt(t,i){let e,s,n;if(G(t,this.left,this.right)&&G(i,this.top,this.bottom))for(n=this.legendHitBoxes,e=0;e<n.length;++e)if(s=n[e],G(t,s.left,s.left+s.width)&&G(i,s.top,s.top+s.height))return this.legendItems[e];return null}handleEvent(t){const i=this.options;if(!function(t,i){if(("mousemove"===t||"mouseout"===t)&&(i.onHover||i.onLeave))return!0;if(i.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,i))return;const e=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const h=this._hoveredItem,o=(n=e,null!==(s=h)&&null!==n&&s.datasetIndex===n.datasetIndex&&s.index===n.index);h&&!o&&g(i.onLeave,[t,h,this],this),this._hoveredItem=e,e&&!o&&g(i.onHover,[t,e,this],this)}else e&&g(i.onClick,[t,e,this],this);var s,n}}function In(t,i){return i*(t.text?t.text.length:0)}var Rn={id:"legend",_element:zn,start(t,i,e){const s=t.legend=new zn({ctx:t.ctx,options:e,chart:t});Be.configure(t,s,e),Be.addBox(t,s)},stop(t){Be.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,i,e){const s=t.legend;Be.configure(t,s,e),s.options=e},afterUpdate(t){const i=t.legend;i.buildLabels(),i.adjustHitBoxes()},afterEvent(t,i){i.replay||t.legend.handleEvent(i.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,i,e){const s=i.datasetIndex,n=e.chart;n.isDatasetVisible(s)?(n.hide(s),i.hidden=!0):(n.show(s),i.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const i=t.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:n,color:h,useBorderRadius:o,borderRadius:r}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const a=t.controller.getStyle(e?0:void 0),l=Ut(a.borderWidth);return{text:i[t.index].label,fillStyle:a.backgroundColor,fontColor:h,hidden:!t.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:s||a.pointStyle,rotation:a.rotation,textAlign:n||a.textAlign,borderRadius:o&&(r||a.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Vn extends hs{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){const e=this.options;if(this.left=0,this.top=0,!e.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=i;const s=c(e.text)?e.text.length:1;this._padding=Ut(e.padding);const n=s*Jt(e.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:i,left:e,bottom:s,right:n,options:h}=this,o=h.align;let r,a,l,c=0;return this.isHorizontal()?(a=ot(o,e,n),l=i+t,r=n-e):("left"===h.position?(a=e+t,l=ot(o,s,i),c=-.5*E):(a=n-t,l=ot(o,i,s),c=.5*E),r=s-i),{titleX:a,titleY:l,maxWidth:r,rotation:c}}draw(){const t=this.ctx,i=this.options;if(!i.display)return;const e=Jt(i.font),s=e.lineHeight/2+this._padding.top,{titleX:n,titleY:h,maxWidth:o,rotation:r}=this._drawArgs(s);Ft(t,i.text,0,0,e,{color:i.color,maxWidth:o,rotation:r,textAlign:ht(i.align),textBaseline:"middle",translation:[n,h]})}}var Ln={id:"title",_element:Vn,start(t,i,e){!function(t,i){const e=new Vn({ctx:t.ctx,options:i,chart:t});Be.configure(t,e,i),Be.addBox(t,e),t.titleBlock=e}(t,e)},stop(t){const i=t.titleBlock;Be.removeBox(t,i),delete t.titleBlock},beforeUpdate(t,i,e){const s=t.titleBlock;Be.configure(t,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fn={average(t){if(!t.length)return!1;let i,e,s=new Set,n=0,h=0;for(i=0,e=t.length;i<e;++i){const e=t[i].element;if(e&&e.hasValue()){const t=e.tooltipPosition();s.add(t.x),n+=t.y,++h}}if(0===h||0===s.size)return!1;return{x:[...s].reduce((t,i)=>t+i)/s.size,y:n/h}},nearest(t,i){if(!t.length)return!1;let e,s,n,h=i.x,o=i.y,r=Number.POSITIVE_INFINITY;for(e=0,s=t.length;e<s;++e){const s=t[e].element;if(s&&s.hasValue()){const t=$(i,s.getCenterPoint());t<r&&(r=t,n=s)}}if(n){const t=n.tooltipPosition();h=t.x,o=t.y}return{x:h,y:o}}};function Nn(t,i){return i&&(c(i)?Array.prototype.push.apply(t,i):t.push(i)),t}function An(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Wn(t,i){const{element:e,datasetIndex:s,index:n}=i,h=t.getDatasetMeta(s).controller,{label:o,value:r}=h.getLabelAndValue(n);return{chart:t,label:o,parsed:h.getParsed(n),raw:t.data.datasets[s].data[n],formattedValue:r,dataset:h.getDataset(),dataIndex:n,datasetIndex:s,element:e}}function Bn(t,i){const e=t.chart.ctx,{body:s,footer:n,title:h}=t,{boxWidth:o,boxHeight:r}=i,a=Jt(i.bodyFont),l=Jt(i.titleFont),c=Jt(i.footerFont),u=h.length,d=n.length,f=s.length,p=Ut(i.padding);let g=p.height,v=0,x=s.reduce((t,i)=>t+i.before.length+i.lines.length+i.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,u&&(g+=u*l.lineHeight+(u-1)*i.titleSpacing+i.titleMarginBottom),x){g+=f*(i.displayColors?Math.max(r,a.lineHeight):a.lineHeight)+(x-f)*a.lineHeight+(x-1)*i.bodySpacing}d&&(g+=i.footerMarginTop+d*c.lineHeight+(d-1)*i.footerSpacing);let b=0;const _=function(t){v=Math.max(v,e.measureText(t).width+b)};return e.save(),e.font=l.string,m(t.title,_),e.font=a.string,m(t.beforeBody.concat(t.afterBody),_),b=i.displayColors?o+2+i.boxPadding:0,m(s,t=>{m(t.before,_),m(t.lines,_),m(t.after,_)}),b=0,e.font=c.string,m(t.footer,_),e.restore(),v+=p.width,{width:v,height:g}}function Yn(t,i,e,s){const{x:n,width:h}=e,{width:o,chartArea:{left:r,right:a}}=t;let l="center";return"center"===s?l=n<=(r+a)/2?"left":"right":n<=h/2?l="left":n>=o-h/2&&(l="right"),function(t,i,e,s){const{x:n,width:h}=s,o=e.caretSize+e.caretPadding;return"left"===t&&n+h+o>i.width||"right"===t&&n-h-o<0||void 0}(l,t,i,e)&&(l="center"),l}function Hn(t,i,e){const s=e.yAlign||i.yAlign||function(t,i){const{y:e,height:s}=i;return e<s/2?"top":e>t.height-s/2?"bottom":"center"}(t,e);return{xAlign:e.xAlign||i.xAlign||Yn(t,i,e,s),yAlign:s}}function jn(t,i,e,s){const{caretSize:n,caretPadding:h,cornerRadius:o}=t,{xAlign:r,yAlign:a}=e,l=n+h,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=$t(o);let p=function(t,i){let{x:e,width:s}=t;return"right"===i?e-=s:"center"===i&&(e-=s/2),e}(i,r);const g=function(t,i,e){let{y:s,height:n}=t;return"top"===i?s+=e:s-="bottom"===i?n+e:n/2,s}(i,a,l);return"center"===a?"left"===r?p+=l:"right"===r&&(p-=l):"left"===r?p-=Math.max(c,d)+n:"right"===r&&(p+=Math.max(u,f)+n),{x:q(p,0,s.width-i.width),y:q(g,0,s.height-i.height)}}function $n(t,i,e){const s=Ut(e.padding);return"center"===i?t.x+t.width/2:"right"===i?t.x+t.width-s.right:t.x+s.left}function Un(t){return Nn([],An(t))}function Jn(t,i){const e=i&&i.dataset&&i.dataset.tooltip&&i.dataset.tooltip.callbacks;return e?t.override(e):t}const Qn={beforeTitle:r,title(t){if(t.length>0){const i=t[0],e=i.chart.data.labels,s=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return i.dataset.label||"";if(i.label)return i.label;if(s>0&&i.dataIndex<s)return e[i.dataIndex]}return""},afterTitle:r,beforeBody:r,beforeLabel:r,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let i=t.dataset.label||"";i&&(i+=": ");const e=t.formattedValue;return l(e)||(i+=e),i},labelColor(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:r,afterBody:r,beforeFooter:r,footer:r,afterFooter:r};function qn(t,i,e,s){const n=t[i].call(e,s);return void 0===n?Qn[i].call(e,s):n}class Gn extends hs{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,e=this.options.setContext(this.getContext()),s=e.enabled&&i.options.animation&&e.animations,n=new qi(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),i=this,e=this._tooltipItems,Gt(t,{tooltip:i,tooltipItems:e,type:"tooltip"})));var t,i,e}getTitle(t,i){const{callbacks:e}=i,s=qn(e,"beforeTitle",this,t),n=qn(e,"title",this,t),h=qn(e,"afterTitle",this,t);let o=[];return o=Nn(o,An(s)),o=Nn(o,An(n)),o=Nn(o,An(h)),o}getBeforeBody(t,i){return Un(qn(i.callbacks,"beforeBody",this,t))}getBody(t,i){const{callbacks:e}=i,s=[];return m(t,t=>{const i={before:[],lines:[],after:[]},n=Jn(e,t);Nn(i.before,An(qn(n,"beforeLabel",this,t))),Nn(i.lines,qn(n,"label",this,t)),Nn(i.after,An(qn(n,"afterLabel",this,t))),s.push(i)}),s}getAfterBody(t,i){return Un(qn(i.callbacks,"afterBody",this,t))}getFooter(t,i){const{callbacks:e}=i,s=qn(e,"beforeFooter",this,t),n=qn(e,"footer",this,t),h=qn(e,"afterFooter",this,t);let o=[];return o=Nn(o,An(s)),o=Nn(o,An(n)),o=Nn(o,An(h)),o}_createItems(t){const i=this._active,e=this.chart.data,s=[],n=[],h=[];let o,r,a=[];for(o=0,r=i.length;o<r;++o)a.push(Wn(this.chart,i[o]));return t.filter&&(a=a.filter((i,s,n)=>t.filter(i,s,n,e))),t.itemSort&&(a=a.sort((i,s)=>t.itemSort(i,s,e))),m(a,i=>{const e=Jn(t.callbacks,i);s.push(qn(e,"labelColor",this,i)),n.push(qn(e,"labelPointStyle",this,i)),h.push(qn(e,"labelTextColor",this,i))}),this.labelColors=s,this.labelPointStyles=n,this.labelTextColors=h,this.dataPoints=a,a}update(t,i){const e=this.options.setContext(this.getContext()),s=this._active;let n,h=[];if(s.length){const t=Fn[e.position].call(this,s,this._eventPosition);h=this._createItems(e),this.title=this.getTitle(h,e),this.beforeBody=this.getBeforeBody(h,e),this.body=this.getBody(h,e),this.afterBody=this.getAfterBody(h,e),this.footer=this.getFooter(h,e);const i=this._size=Bn(this,e),o=Object.assign({},t,i),r=Hn(this.chart,e,o),a=jn(e,o,r,this.chart);this.xAlign=r.xAlign,this.yAlign=r.yAlign,n={opacity:1,x:a.x,y:a.y,width:i.width,height:i.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=h,this.$context=void 0,n&&this._resolveAnimations().update(this,n),t&&e.external&&e.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,e,s){const n=this.getCaretPosition(t,e,s);i.lineTo(n.x1,n.y1),i.lineTo(n.x2,n.y2),i.lineTo(n.x3,n.y3)}getCaretPosition(t,i,e){const{xAlign:s,yAlign:n}=this,{caretSize:h,cornerRadius:o}=e,{topLeft:r,topRight:a,bottomLeft:l,bottomRight:c}=$t(o),{x:u,y:d}=t,{width:f,height:p}=i;let g,m,v,x,b,_;return"center"===n?(b=d+p/2,"left"===s?(g=u,m=g-h,x=b+h,_=b-h):(g=u+f,m=g+h,x=b-h,_=b+h),v=g):(m="left"===s?u+Math.max(r,l)+h:"right"===s?u+f-Math.max(a,c)-h:this.caretX,"top"===n?(x=d,b=x-h,g=m-h,v=m+h):(x=d+p,b=x+h,g=m+h,v=m-h),_=x),{x1:g,x2:m,x3:v,y1:x,y2:b,y3:_}}drawTitle(t,i,e){const s=this.title,n=s.length;let h,o,r;if(n){const a=zi(e.rtl,this.x,this.width);for(t.x=$n(this,e.titleAlign,e),i.textAlign=a.textAlign(e.titleAlign),i.textBaseline="middle",h=Jt(e.titleFont),o=e.titleSpacing,i.fillStyle=e.titleColor,i.font=h.string,r=0;r<n;++r)i.fillText(s[r],a.x(t.x),t.y+h.lineHeight/2),t.y+=h.lineHeight+o,r+1===n&&(t.y+=e.titleMarginBottom-o)}}_drawColorBox(t,i,e,s,n){const h=this.labelColors[e],o=this.labelPointStyles[e],{boxHeight:r,boxWidth:a}=n,l=Jt(n.bodyFont),c=$n(this,"left",n),d=s.x(c),f=r<l.lineHeight?(l.lineHeight-r)/2:0,p=i.y+f;if(n.usePointStyle){const i={radius:Math.min(a,r)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},e=s.leftForLtr(d,a)+a/2,l=p+r/2;t.strokeStyle=n.multiKeyBackground,t.fillStyle=n.multiKeyBackground,Dt(t,i,e,l),t.strokeStyle=h.borderColor,t.fillStyle=h.backgroundColor,Dt(t,i,e,l)}else{t.lineWidth=u(h.borderWidth)?Math.max(...Object.values(h.borderWidth)):h.borderWidth||1,t.strokeStyle=h.borderColor,t.setLineDash(h.borderDash||[]),t.lineDashOffset=h.borderDashOffset||0;const i=s.leftForLtr(d,a),e=s.leftForLtr(s.xPlus(d,1),a-2),o=$t(h.borderRadius);Object.values(o).some(t=>0!==t)?(t.beginPath(),t.fillStyle=n.multiKeyBackground,Nt(t,{x:i,y:p,w:a,h:r,radius:o}),t.fill(),t.stroke(),t.fillStyle=h.backgroundColor,t.beginPath(),Nt(t,{x:e,y:p+1,w:a-2,h:r-2,radius:o}),t.fill()):(t.fillStyle=n.multiKeyBackground,t.fillRect(i,p,a,r),t.strokeRect(i,p,a,r),t.fillStyle=h.backgroundColor,t.fillRect(e,p+1,a-2,r-2))}t.fillStyle=this.labelTextColors[e]}drawBody(t,i,e){const{body:s}=this,{bodySpacing:n,bodyAlign:h,displayColors:o,boxHeight:r,boxWidth:a,boxPadding:l}=e,c=Jt(e.bodyFont);let u=c.lineHeight,d=0;const f=zi(e.rtl,this.x,this.width),p=function(e){i.fillText(e,f.x(t.x+d),t.y+u/2),t.y+=u+n},g=f.textAlign(h);let v,x,b,_,y,w,M;for(i.textAlign=h,i.textBaseline="middle",i.font=c.string,t.x=$n(this,g,e),i.fillStyle=e.bodyColor,m(this.beforeBody,p),d=o&&"right"!==g?"center"===h?a/2+l:a+2+l:0,_=0,w=s.length;_<w;++_){for(v=s[_],x=this.labelTextColors[_],i.fillStyle=x,m(v.before,p),b=v.lines,o&&b.length&&(this._drawColorBox(i,t,_,f,e),u=Math.max(c.lineHeight,r)),y=0,M=b.length;y<M;++y)p(b[y]),u=c.lineHeight;m(v.after,p)}d=0,u=c.lineHeight,m(this.afterBody,p),t.y-=n}drawFooter(t,i,e){const s=this.footer,n=s.length;let h,o;if(n){const r=zi(e.rtl,this.x,this.width);for(t.x=$n(this,e.footerAlign,e),t.y+=e.footerMarginTop,i.textAlign=r.textAlign(e.footerAlign),i.textBaseline="middle",h=Jt(e.footerFont),i.fillStyle=e.footerColor,i.font=h.string,o=0;o<n;++o)i.fillText(s[o],r.x(t.x),t.y+h.lineHeight/2),t.y+=h.lineHeight+e.footerSpacing}}drawBackground(t,i,e,s){const{xAlign:n,yAlign:h}=this,{x:o,y:r}=t,{width:a,height:l}=e,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=$t(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(o+c,r),"top"===h&&this.drawCaret(t,i,e,s),i.lineTo(o+a-u,r),i.quadraticCurveTo(o+a,r,o+a,r+u),"center"===h&&"right"===n&&this.drawCaret(t,i,e,s),i.lineTo(o+a,r+l-f),i.quadraticCurveTo(o+a,r+l,o+a-f,r+l),"bottom"===h&&this.drawCaret(t,i,e,s),i.lineTo(o+d,r+l),i.quadraticCurveTo(o,r+l,o,r+l-d),"center"===h&&"left"===n&&this.drawCaret(t,i,e,s),i.lineTo(o,r+c),i.quadraticCurveTo(o,r,o+c,r),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,e=this.$animations,s=e&&e.x,n=e&&e.y;if(s||n){const e=Fn[t.position].call(this,this._active,this._eventPosition);if(!e)return;const h=this._size=Bn(this,t),o=Object.assign({},e,this._size),r=Hn(i,t,o),a=jn(t,o,r,i);s._to===a.x&&n._to===a.y||(this.xAlign=r.xAlign,this.yAlign=r.yAlign,this.width=h.width,this.height=h.height,this.caretX=e.x,this.caretY=e.y,this._resolveAnimations().update(this,a))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let e=this.opacity;if(!e)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},n={x:this.x,y:this.y};e=Math.abs(e)<.001?0:e;const h=Ut(i.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&o&&(t.save(),t.globalAlpha=e,this.drawBackground(n,t,s,i),Ii(t,i.textDirection),n.y+=h.top,this.drawTitle(n,t,i),this.drawBody(n,t,i),this.drawFooter(n,t,i),Ri(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const e=this._active,s=t.map(({datasetIndex:t,index:i})=>{const e=this.chart.getDatasetMeta(t);if(!e)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:e.data[i],index:i}}),n=!v(e,s),h=this._positionChanged(s,i);(n||h)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,e=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,n=this._active||[],h=this._getActiveElements(t,n,i,e),o=this._positionChanged(h,t),r=i||!v(h,n)||o;return r&&(this._active=h,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),r}_getActiveElements(t,i,e,s){const n=this.options;if("mouseout"===t.type)return[];if(!s)return i.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));const h=this.chart.getElementsAtEventForMode(t,n.mode,n,e);return n.reverse&&h.reverse(),h}_positionChanged(t,i){const{caretX:e,caretY:s,options:n}=this,h=Fn[n.position].call(this,t,i);return!1!==h&&(e!==h.x||s!==h.y)}}i(Gn,"positioners",Fn);var Kn={id:"tooltip",_element:Gn,positioners:Fn,afterInit(t,i,e){e&&(t.tooltip=new Gn({chart:t,options:e}))},beforeUpdate(t,i,e){t.tooltip&&t.tooltip.initialize(e)},reset(t,i,e){t.tooltip&&t.tooltip.initialize(e)},afterDraw(t){const i=t.tooltip;if(i&&i._willRender()){const e={tooltip:i};if(!1===t.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0}))return;i.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",e)}},afterEvent(t,i){if(t.tooltip){const e=i.replay;t.tooltip.handleEvent(i.event,e,i.inChartArea)&&(i.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,i)=>i.bodyFont.size,boxWidth:(t,i)=>i.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Qn},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Xn(t,i,e,s){const n=t.indexOf(i);if(-1===n)return((t,i,e,s)=>("string"==typeof i?(e=t.push(i)-1,s.unshift({index:e,label:i})):isNaN(i)&&(e=null),e))(t,i,e,s);return n!==t.lastIndexOf(i)?e:n}function Zn(t){const i=this.getLabels();return t>=0&&t<i.length?i[t]:t}class th extends gs{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const i=this._addedLabels;if(i.length){const t=this.getLabels();for(const{index:e,label:s}of i)t[e]===s&&t.splice(e,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(l(t))return null;const e=this.getLabels();return((t,i)=>null===t?null:q(Math.round(t),0,i))(i=isFinite(i)&&e[i]===t?i:Xn(e,t,p(i,t),this._addedLabels),e.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:e,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(e=0),i||(s=this.getLabels().length-1)),this.min=e,this.max=s}buildTicks(){const t=this.min,i=this.max,e=this.options.offset,s=[];let n=this.getLabels();n=0===t&&i===n.length-1?n:n.slice(t,i+1),this._valueRange=Math.max(n.length-(e?0:1),1),this._startValue=this.min-(e?.5:0);for(let h=t;h<=i;h++)s.push({value:h});return s}getLabelForValue(t){return Zn.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function ih(t,i){const e=[],{bounds:s,step:n,min:h,max:o,precision:r,count:a,maxTicks:c,maxDigits:u,includeBounds:d}=t,f=n||1,p=c-1,{min:g,max:m}=i,v=!l(h),x=!l(o),b=!l(a),_=(m-g)/(u+1);let y,w,M,k,S=B((m-g)/p/f)*f;if(S<1e-14&&!v&&!x)return[{value:g},{value:m}];k=Math.ceil(m/S)-Math.floor(g/S),k>p&&(S=B(k*S/p/f)*f),l(r)||(y=Math.pow(10,r),S=Math.ceil(S*y)/y),"ticks"===s?(w=Math.floor(g/S)*S,M=Math.ceil(m/S)*S):(w=g,M=m),v&&x&&n&&function(t,i){const e=Math.round(t);return e-i<=t&&e+i>=t}((o-h)/n,S/1e3)?(k=Math.round(Math.min((o-h)/S,c)),S=(o-h)/k,w=h,M=o):b?(w=v?h:w,M=x?o:M,k=a-1,S=(M-w)/k):(k=(M-w)/S,k=W(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const P=Math.max(j(S),j(w));y=Math.pow(10,l(r)?P:r),w=Math.round(w*y)/y,M=Math.round(M*y)/y;let C=0;for(v&&(d&&w!==h?(e.push({value:h}),w<h&&C++,W(Math.round((w+C*S)*y)/y,h,eh(h,_,t))&&C++):w<h&&C++);C<k;++C){const t=Math.round((w+C*S)*y)/y;if(x&&t>o)break;e.push({value:t})}return x&&d&&M!==o?e.length&&W(e[e.length-1].value,o,eh(o,_,t))?e[e.length-1].value=o:e.push({value:o}):x&&M!==o||e.push({value:M}),e}function eh(t,i,{horizontal:e,minRotation:s}){const n=H(s),h=(e?Math.sin(n):Math.cos(n))||.001,o=.75*i*(""+t).length;return Math.min(i/h,o)}i(th,"id","category"),i(th,"defaults",{ticks:{callback:Zn}});class sh extends gs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return l(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:i,maxDefined:e}=this.getUserBounds();let{min:s,max:n}=this;const h=t=>s=i?s:t,o=t=>n=e?n:t;if(t){const t=A(s),i=A(n);t<0&&i<0?o(0):t>0&&i>0&&h(0)}if(s===n){let i=0===n?1:Math.abs(.05*n);o(n+i),t||h(s-i)}this.min=s,this.max=n}getTickLimit(){const t=this.options.ticks;let i,{maxTicksLimit:e,stepSize:s}=t;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,i=t.ticks;let e=this.getTickLimit();e=Math.max(2,e);const s=ih({maxTicks:e,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:!1!==i.includeBounds},this._range||this);return"ticks"===t.bounds&&function(t,i,e){let s,n,h;for(s=0,n=t.length;s<n;s++)h=t[s][e],isNaN(h)||(i.min=Math.min(i.min,h),i.max=Math.max(i.max,h))}(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const t=this.ticks;let i=this.min,e=this.max;if(super.configure(),this.options.offset&&t.length){const s=(e-i)/Math.max(t.length-1,1)/2;i-=s,e+=s}this._startValue=i,this._endValue=e,this._valueRange=e-i}getLabelForValue(t){return vt(t,this.chart.options.locale,this.options.ticks.format)}}class nh extends sh{determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=d(t)?t:0,this.max=d(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),i=t?this.width:this.height,e=H(this.options.ticks.minRotation),s=(t?Math.sin(e):Math.cos(e))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,n.lineHeight/s))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}i(nh,"id","linear"),i(nh,"defaults",{ticks:{callback:xt.formatters.numeric}});const hh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},oh=Object.keys(hh);function rh(t,i){return t-i}function ah(t,i){if(l(i))return null;const e=t._adapter,{parser:s,round:n,isoWeekday:h}=t._parseOpts;let o=i;return"function"==typeof s&&(o=s(o)),d(o)||(o="string"==typeof s?e.parse(o,s):e.parse(o)),null===o?null:(n&&(o="week"!==n||!Y(h)&&!0!==h?e.startOf(o,n):e.startOf(o,"isoWeek",h)),+o)}function lh(t,i,e,s){const n=oh.length;for(let h=oh.indexOf(t);h<n-1;++h){const t=hh[oh[h]],n=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((e-i)/(n*t.size))<=s)return oh[h]}return oh[n-1]}function ch(t,i,e){if(e){if(e.length){const{lo:s,hi:n}=K(e,i);t[e[s]>=i?e[s]:e[n]]=!0}}else t[i]=!0}function uh(t,i,e){const s=[],n={},h=i.length;let o,r;for(o=0;o<h;++o)r=i[o],n[r]=o,s.push({value:r,major:!1});return 0!==h&&e?function(t,i,e,s){const n=t._adapter,h=+n.startOf(i[0].value,s),o=i[i.length-1].value;let r,a;for(r=h;r<=o;r=+n.add(r,1,s))a=e[r],a>=0&&(i[a].major=!0);return i}(t,s,n,e):s}class dh extends gs{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){const e=t.time||(t.time={}),s=this._adapter=new _e(t.adapters.date);s.init(i),w(e.displayFormats,s.formats()),this._parseOpts={parser:e.parser,round:e.round,isoWeekday:e.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return void 0===t?null:ah(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,e=t.time.unit||"day";let{min:s,max:n,minDefined:h,maxDefined:o}=this.getUserBounds();function r(t){h||isNaN(t.min)||(s=Math.min(s,t.min)),o||isNaN(t.max)||(n=Math.max(n,t.max))}h&&o||(r(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||r(this.getMinMax(!1))),s=d(s)&&!isNaN(s)?s:+i.startOf(Date.now(),e),n=d(n)&&!isNaN(n)?n:+i.endOf(Date.now(),e)+1,this.min=Math.min(s,n-1),this.max=Math.max(s+1,n)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],e=t[t.length-1]),{min:i,max:e}}buildTicks(){const t=this.options,i=t.time,e=t.ticks,s="labels"===e.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const n=this.min,h=function(t,i,e){let s=0,n=t.length;for(;s<n&&t[s]<i;)s++;for(;n>s&&t[n-1]>e;)n--;return s>0||n<t.length?t.slice(s,n):t}(s,n,this.max);return this._unit=i.unit||(e.autoSkip?lh(i.minUnit,this.min,this.max,this._getLabelCapacity(n)):function(t,i,e,s,n){for(let h=oh.length-1;h>=oh.indexOf(e);h--){const e=oh[h];if(hh[e].common&&t._adapter.diff(n,s,e)>=i-1)return e}return oh[e?oh.indexOf(e):0]}(this,h.length,i.minUnit,this.min,this.max)),this._majorUnit=e.major.enabled&&"year"!==this._unit?function(t){for(let i=oh.indexOf(t)+1,e=oh.length;i<e;++i)if(hh[oh[i]].common)return oh[i]}(this._unit):void 0,this.initOffsets(s),t.reverse&&h.reverse(),uh(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i,e,s=0,n=0;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),s=1===t.length?1-i:(this.getDecimalForValue(t[1])-i)/2,e=this.getDecimalForValue(t[t.length-1]),n=1===t.length?e:(e-this.getDecimalForValue(t[t.length-2]))/2);const h=t.length<3?.5:.25;s=q(s,0,h),n=q(n,0,h),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const t=this._adapter,i=this.min,e=this.max,s=this.options,n=s.time,h=n.unit||lh(n.minUnit,i,e,this._getLabelCapacity(i)),o=p(s.ticks.stepSize,1),r="week"===h&&n.isoWeekday,a=Y(r)||!0===r,l={};let c,u,d=i;if(a&&(d=+t.startOf(d,"isoWeek",r)),d=+t.startOf(d,a?"day":h),t.diff(e,i,h)>1e5*o)throw new Error(i+" and "+e+" are too far apart with stepSize of "+o+" "+h);const f="data"===s.ticks.source&&this.getDataTimestamps();for(c=d,u=0;c<e;c=+t.add(c,o,h),u++)ch(l,c,f);return c!==e&&"ticks"!==s.bounds&&1!==u||ch(l,c,f),Object.keys(l).sort(rh).map(t=>+t)}getLabelForValue(t){const i=this._adapter,e=this.options.time;return e.tooltipFormat?i.format(t,e.tooltipFormat):i.format(t,e.displayFormats.datetime)}format(t,i){const e=this.options.time.displayFormats,s=this._unit,n=i||e[s];return this._adapter.format(t,n)}_tickFormatFunction(t,i,e,s){const n=this.options,h=n.ticks.callback;if(h)return g(h,[t,i,e],this);const o=n.time.displayFormats,r=this._unit,a=this._majorUnit,l=r&&o[r],c=a&&o[a],u=e[i],d=a&&c&&u&&u.major;return this._adapter.format(t,s||(d?c:l))}generateTickLabels(t){let i,e,s;for(i=0,e=t.length;i<e;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,e=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+e)*i.factor)}getValueForPixel(t){const i=this._offsets,e=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+e*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,e=this.ctx.measureText(t).width,s=H(this.isHorizontal()?i.maxRotation:i.minRotation),n=Math.cos(s),h=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:e*n+o*h,h:e*h+o*n}}_getLabelCapacity(t){const i=this.options.time,e=i.displayFormats,s=e[i.unit]||e.millisecond,n=this._tickFormatFunction(t,0,uh(this,[t],this._majorUnit),s),h=this._getLabelSize(n),o=Math.floor(this.isHorizontal()?this.width/h.w:this.height/h.h)-1;return o>0?o:1}getDataTimestamps(){let t,i,e=this._cache.data||[];if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const t=this._cache.labels||[];let i,e;if(t.length)return t;const s=this.getLabels();for(i=0,e=s.length;i<e;++i)t.push(ah(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return et(t.sort(rh))}}function fh(t,i,e){let s,n,h,o,r=0,a=t.length-1;e?(i>=t[r].pos&&i<=t[a].pos&&({lo:r,hi:a}=X(t,"pos",i)),({pos:s,time:h}=t[r]),({pos:n,time:o}=t[a])):(i>=t[r].time&&i<=t[a].time&&({lo:r,hi:a}=X(t,"time",i)),({time:s,pos:h}=t[r]),({time:n,pos:o}=t[a]));const l=n-s;return l?h+(o-h)*(i-s)/l:h}i(dh,"id","time"),i(dh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class ph extends dh{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=fh(i,this.min),this._tableRange=fh(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:i,max:e}=this,s=[],n=[];let h,o,r,a,l;for(h=0,o=t.length;h<o;++h)a=t[h],a>=i&&a<=e&&s.push(a);if(s.length<2)return[{time:i,pos:0},{time:e,pos:1}];for(h=0,o=s.length;h<o;++h)l=s[h+1],r=s[h-1],a=s[h],Math.round((l+r)/2)!==a&&n.push({time:a,pos:h/(o-1)});return n}_generate(){const t=this.min,i=this.max;let e=super.getDataTimestamps();return e.includes(t)&&e.length||e.splice(0,0,t),e.includes(i)&&1!==e.length||e.push(i),e.sort((t,i)=>t-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const i=this.getDataTimestamps(),e=this.getLabelTimestamps();return t=i.length&&e.length?this.normalize(i.concat(e)):i.length?i:e,t=this._cache.all=t,t}getDecimalForValue(t){return(fh(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const i=this._offsets,e=this.getDecimalForPixel(t)/i.factor-i.end;return fh(this._table,e*this._tableRange+this._minPos,!0)}}i(ph,"id","timeseries"),i(ph,"defaults",dh.defaults);
/*!
 * @license
 * TradingView Lightweight Charts v5.0.9
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */
const gh={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var mh,vh,xh;function bh(t,i){const e={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[i];t.setLineDash(e)}function _h(t,i,e,s){t.beginPath();const n=t.lineWidth%2?.5:0;t.moveTo(e,i+n),t.lineTo(s,i+n),t.stroke()}function yh(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function wh(t){if(void 0===t)throw new Error("Value is undefined");return t}function Mh(t){if(null===t)throw new Error("Value is null");return t}function kh(t){return Mh(wh(t))}(xh=mh||(mh={}))[xh.Simple=0]="Simple",xh[xh.WithSteps=1]="WithSteps",xh[xh.Curved=2]="Curved",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(vh||(vh={}));class Sh{constructor(){this.t=[]}i(t,i,e){const s={h:t,l:i,o:!0===e};this.t.push(s)}_(t){const i=this.t.findIndex(i=>t===i.h);i>-1&&this.t.splice(i,1)}u(t){this.t=this.t.filter(i=>i.l!==t)}p(t,i,e){const s=[...this.t];this.t=this.t.filter(t=>!t.o),s.forEach(s=>s.h(t,i,e))}v(){return this.t.length>0}m(){this.t=[]}}function Ph(t,...i){for(const e of i)for(const i in e)void 0!==e[i]&&Object.prototype.hasOwnProperty.call(e,i)&&!["__proto__","constructor","prototype"].includes(i)&&("object"!=typeof e[i]||void 0===t[i]||Array.isArray(e[i])?t[i]=e[i]:Ph(t[i],e[i]));return t}function Ch(t){return"number"==typeof t&&isFinite(t)}function Dh(t){return"number"==typeof t&&t%1==0}function Th(t){return"string"==typeof t}function Eh(t){return"boolean"==typeof t}function Oh(t){const i=t;if(!i||"object"!=typeof i)return i;let e,s,n;for(s in e=Array.isArray(i)?[]:{},i)i.hasOwnProperty(s)&&(n=i[s],e[s]=n&&"object"==typeof n?Oh(n):n);return e}function zh(t){return null!==t}function Ih(t){return null===t?void 0:t}const Rh="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Vh(t,i,e){return void 0===i&&(i=Rh),`${e=void 0!==e?`${e} `:""}${t}px ${i}`}class Lh{constructor(t){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=t}N(){const t=this.M,i=this.F(),e=this.W();return t.P===i&&t.T===e||(t.P=i,t.T=e,t.k=Vh(i,e),t.A=2.5/12*i,t.V=t.A,t.B=i/12*t.C,t.I=i/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Fh(t){return t<0?0:t>255?255:Math.round(t)||0}function Nh(t){return.199*t[0]+.687*t[1]+.114*t[2]}class Ah{constructor(t,i){this.q=new Map,this.Y=t,i&&(this.q=i)}j(t,i){if("transparent"===t)return t;const e=this.K(t),s=e[3];return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${i*s})`}X(t){const i=this.K(t);return{Z:`rgb(${i[0]}, ${i[1]}, ${i[2]})`,G:Nh(i)>160?"black":"white"}}J(t){return Nh(this.K(t))}tt(t,i,e){const[s,n,h,o]=this.K(t),[r,a,l,c]=this.K(i),u=[Fh(s+e*(r-s)),Fh(n+e*(a-n)),Fh(h+e*(l-h)),(d=o+e*(c-o),d<=0||d>1?Math.min(Math.max(d,0),1):Math.round(1e4*d)/1e4)];var d;return`rgba(${u[0]}, ${u[1]}, ${u[2]}, ${u[3]})`}K(t){const i=this.q.get(t);if(i)return i;const e=function(t){const i=document.createElement("div");i.style.display="none",document.body.appendChild(i),i.style.color=t;const e=window.getComputedStyle(i).color;return document.body.removeChild(i),e}(t).match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!e){if(this.Y.length)for(const i of this.Y){const e=i(t);if(e)return this.q.set(t,e),e}throw new Error(`Failed to parse color: ${t}`)}const s=[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),e[4]?parseFloat(e[4]):1];return this.q.set(t,s),s}}class Wh{constructor(){this.it=[]}st(t){this.it=t}nt(t,i,e){this.it.forEach(s=>{s.nt(t,i,e)})}}class Bh{nt(t,i,e){t.useBitmapCoordinateSpace(t=>this.et(t,i,e))}}class Yh extends Bh{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:i,verticalPixelRatio:e}){if(null===this.rt||null===this.rt.lt)return;const s=this.rt.lt,n=this.rt,h=Math.max(1,Math.floor(i))%2/2,o=o=>{t.beginPath();for(let r=s.to-1;r>=s.from;--r){const s=n.ot[r],a=Math.round(s._t*i)+h,l=s.ut*e,c=o*e+h;t.moveTo(a,l),t.arc(a,l,c,0,2*Math.PI)}t.fill()};n.ct>0&&(t.fillStyle=n.dt,o(n.ft+n.ct)),t.fillStyle=n.vt,o(n.ft)}}function Hh(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const jh={from:0,to:1};class $h{constructor(t,i,e){this.Mt=new Wh,this.bt=[],this.St=[],this.xt=!0,this.O=t,this.Ct=i,this.Pt=e,this.Mt.st(this.bt)}yt(t){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){const t=this.Pt.Dt();t.length!==this.bt.length&&(this.St=t.map(Hh),this.bt=this.St.map(t=>{const i=new Yh;return i.ht(t),i}),this.Mt.st(this.bt))}Rt(){const t=2===this.Ct.N().mode||!this.Ct.Vt(),i=this.Pt.Bt(),e=this.Ct.It(),s=this.O.Et();this.kt(),i.forEach((i,n)=>{const h=this.St[n],o=i.At(e),r=i.zt();!t&&null!==o&&i.Vt()&&null!==r?(h.vt=o.Lt,h.ft=o.ft,h.ct=o.Ot,h.ot[0].gt=o.gt,h.ot[0].ut=i.Ft().Nt(o.gt,r.Wt),h.dt=o.Ht??this.O.Ut(h.ot[0].ut/i.Ft().$t()),h.ot[0].wt=e,h.ot[0]._t=s.qt(e),h.lt=jh):h.lt=null})}}class Uh extends Bh{constructor(t){super(),this.Yt=t}et({context:t,bitmapSize:i,horizontalPixelRatio:e,verticalPixelRatio:s}){if(null===this.Yt)return;const n=this.Yt.jt.Vt,h=this.Yt.Kt.Vt;if(!n&&!h)return;const o=Math.round(this.Yt._t*e),r=Math.round(this.Yt.ut*s);t.lineCap="butt",n&&o>=0&&(t.lineWidth=Math.floor(this.Yt.jt.ct*e),t.strokeStyle=this.Yt.jt.R,t.fillStyle=this.Yt.jt.R,bh(t,this.Yt.jt.Xt),function(t,i,e,s){t.beginPath();const n=t.lineWidth%2?.5:0;t.moveTo(i+n,0),t.lineTo(i+n,s),t.stroke()}(t,o,0,i.height)),h&&r>=0&&(t.lineWidth=Math.floor(this.Yt.Kt.ct*s),t.strokeStyle=this.Yt.Kt.R,t.fillStyle=this.Yt.Kt.R,bh(t,this.Yt.Kt.Xt),_h(t,r,0,i.width))}}class Jh{constructor(t,i){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new Uh(this.Zt),this.Jt=t,this.Pt=i}yt(){this.xt=!0}Tt(t){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const t=this.Jt.Vt(),i=this.Pt.Qt().N().crosshair,e=this.Zt;if(2===i.mode)return e.Kt.Vt=!1,void(e.jt.Vt=!1);e.Kt.Vt=t&&this.Jt.ti(this.Pt),e.jt.Vt=t&&this.Jt.ii(),e.Kt.ct=i.horzLine.width,e.Kt.Xt=i.horzLine.style,e.Kt.R=i.horzLine.color,e.jt.ct=i.vertLine.width,e.jt.Xt=i.vertLine.style,e.jt.R=i.vertLine.color,e._t=this.Jt.si(),e.ut=this.Jt.ni()}}function Qh(t,i,e,s,n,h){t.fillRect(i+h,e,s-2*h,h),t.fillRect(i+h,e+n-h,s-2*h,h),t.fillRect(i,e,h,n),t.fillRect(i+s-h,e,h,n)}function qh(t,i,e,s,n,h){t.save(),t.globalCompositeOperation="copy",t.fillStyle=h,t.fillRect(i,e,s,n),t.restore()}function Gh(t,i,e,s,n,h){t.beginPath(),t.roundRect?t.roundRect(i,e,s,n,h):(t.lineTo(i+s-h[1],e),0!==h[1]&&t.arcTo(i+s,e,i+s,e+h[1],h[1]),t.lineTo(i+s,e+n-h[2]),0!==h[2]&&t.arcTo(i+s,e+n,i+s-h[2],e+n,h[2]),t.lineTo(i+h[3],e+n),0!==h[3]&&t.arcTo(i,e+n,i,e+n-h[3],h[3]),t.lineTo(i,e+h[0]),0!==h[0]&&t.arcTo(i,e,i+h[0],e,h[0]))}function Kh(t,i,e,s,n,h,o=0,r=[0,0,0,0],a=""){if(t.save(),!o||!a||a===h)return Gh(t,i,e,s,n,r),t.fillStyle=h,t.fill(),void t.restore();const l=o/2;var c;Gh(t,i+l,e+l,s-o,n-o,(c=-l,r.map(t=>0===t?t:t+c))),"transparent"!==h&&(t.fillStyle=h,t.fill()),"transparent"!==a&&(t.lineWidth=o,t.strokeStyle=a,t.closePath(),t.stroke()),t.restore()}function Xh(t,i,e,s,n,h,o){t.save(),t.globalCompositeOperation="copy";const r=t.createLinearGradient(0,0,0,n);r.addColorStop(0,h),r.addColorStop(1,o),t.fillStyle=r,t.fillRect(i,e,s,n),t.restore()}class Zh{constructor(t,i){this.ht(t,i)}ht(t,i){this.Yt=t,this.ei=i}$t(t,i){return this.Yt.Vt?t.P+t.A+t.V:0}nt(t,i,e,s){if(!this.Yt.Vt||0===this.Yt.ri.length)return;const n=this.Yt.R,h=this.ei.Z,o=t.useBitmapCoordinateSpace(t=>{const o=t.context;o.font=i.k;const r=this.hi(t,i,e,s),a=r.ai;return r.li?Kh(o,a.oi,a._i,a.ui,a.ci,h,a.di,[a.ft,0,0,a.ft],h):Kh(o,a.fi,a._i,a.ui,a.ci,h,a.di,[0,a.ft,a.ft,0],h),this.Yt.pi&&(o.fillStyle=n,o.fillRect(a.fi,a.mi,a.wi-a.fi,a.gi)),this.Yt.Mi&&(o.fillStyle=i.D,o.fillRect(r.li?a.bi-a.di:0,a._i,a.di,a.Si-a._i)),r});t.useMediaCoordinateSpace(({context:t})=>{const e=o.xi;t.font=i.k,t.textAlign=o.li?"right":"left",t.textBaseline="middle",t.fillStyle=n,t.fillText(this.Yt.ri,e.Ci,(e._i+e.Si)/2+e.Pi)})}hi(t,i,e,s){const{context:n,bitmapSize:h,mediaSize:o,horizontalPixelRatio:r,verticalPixelRatio:a}=t,l=this.Yt.pi||!this.Yt.yi?i.C:0,c=this.Yt.ki?i.S:0,u=i.A+this.ei.Ti,d=i.V+this.ei.Ri,f=i.B,p=i.I,g=this.Yt.ri,m=i.P,v=e.Di(n,g),x=Math.ceil(e.Vi(n,g)),b=m+u+d,_=i.S+f+p+x+l,y=Math.max(1,Math.floor(a));let w=Math.round(b*a);w%2!=y%2&&(w+=1);const M=c>0?Math.max(1,Math.floor(c*r)):0,k=Math.round(_*r),S=Math.round(l*r),P=this.ei.Bi??this.ei.Ii,C=Math.round(P*a)-Math.floor(.5*a),D=Math.floor(C+y/2-w/2),T=D+w,E="right"===s,O=E?o.width-c:c,z=E?h.width-M:M;let I,R,V;return E?(I=z-k,R=z-S,V=O-l-f-c):(I=z+k,R=z+S,V=O+l+f),{li:E,ai:{_i:D,mi:C,Si:T,ui:k,ci:w,ft:2*r,di:M,oi:I,fi:z,wi:R,gi:y,bi:h.width},xi:{_i:D/a,Si:T/a,Ci:V,Pi:v}}}}class to{constructor(t){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(t||Zh)(this.Ai,this.Ei),this.Oi=new(t||Zh)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(t,i=!1){return Math.max(this.Li.$t(t,i),this.Oi.$t(t,i))}Fi(){return this.Ei.Bi||0}Wi(t){this.Ei.Bi=t}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(t){return this.Ni(),this.Ai.pi=this.Ai.pi&&t.N().ticksVisible,this.zi.pi=this.zi.pi&&t.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class io extends to{constructor(t,i,e){super(),this.Jt=t,this.Yi=i,this.ji=e}qi(t,i,e){if(t.Vt=!1,2===this.Jt.N().mode)return;const s=this.Jt.N().horzLine;if(!s.labelVisible)return;const n=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||null===n)return;const h=this.Yi.Xi().X(s.labelBackgroundColor);e.Z=h.Z,t.R=h.G;const o=2/12*this.Yi.P();e.Ti=o,e.Ri=o;const r=this.ji(this.Yi);e.Ii=r.Ii,t.ri=this.Yi.Zi(r.gt,n),t.Vt=!0}}const eo=/[1-9]/g;class so{constructor(){this.Yt=null}ht(t){this.Yt=t}nt(t,i){if(null===this.Yt||!1===this.Yt.Vt||0===this.Yt.ri.length)return;const e=t.useMediaCoordinateSpace(({context:t})=>(t.font=i.k,Math.round(i.Gi.Vi(t,Mh(this.Yt).ri,eo))));if(e<=0)return;const s=i.Ji,n=e+2*s,h=n/2,o=this.Yt.Qi;let r=this.Yt.Ii,a=Math.floor(r-h)+.5;a<0?(r+=Math.abs(0-a),a=Math.floor(r-h)+.5):a+n>o&&(r-=Math.abs(o-(a+n)),a=Math.floor(r-h)+.5);const l=a+n,c=Math.ceil(0+i.S+i.C+i.A+i.P+i.V);t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:e,verticalPixelRatio:s})=>{const n=Mh(this.Yt);t.fillStyle=n.Z;const h=Math.round(a*e),o=Math.round(0*s),r=Math.round(l*e),u=Math.round(c*s),d=Math.round(2*e);if(t.beginPath(),t.moveTo(h,o),t.lineTo(h,u-d),t.arcTo(h,u,h+d,u,d),t.lineTo(r-d,u),t.arcTo(r,u,r,u-d,d),t.lineTo(r,o),t.fill(),n.pi){const h=Math.round(n.Ii*e),r=o,a=Math.round((r+i.C)*s);t.fillStyle=n.R;const l=Math.max(1,Math.floor(e)),c=Math.floor(.5*e);t.fillRect(h-c,r,l,a-r)}}),t.useMediaCoordinateSpace(({context:t})=>{const e=Mh(this.Yt),n=0+i.S+i.C+i.A+i.P/2;t.font=i.k,t.textAlign="left",t.textBaseline="middle",t.fillStyle=e.R;const h=i.Gi.Di(t,"Apr0");t.translate(a+s,n+h),t.fillText(e.ri,0,0)})}}class no{constructor(t,i,e){this.xt=!0,this.Gt=new so,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=t,this.ts=i,this.ji=e}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const t=this.Zt;if(t.Vt=!1,2===this.Ct.N().mode)return;const i=this.Ct.N().vertLine;if(!i.labelVisible)return;const e=this.ts.Et();if(e.Ki())return;t.Qi=e.Qi();const s=this.ji();if(null===s)return;t.Ii=s.Ii;const n=e.ss(this.Ct.It());t.ri=e.ns(Mh(n)),t.Vt=!0;const h=this.ts.Xi().X(i.labelBackgroundColor);t.Z=h.Z,t.R=h.G,t.pi=e.N().ticksVisible}}class ho{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(t){this.rs=t}Ft(){return this.es}_s(t){this.es=t}us(t){return[]}cs(){return[]}Vt(){return!0}}var oo;!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"}(oo||(oo={}));class ro extends ho{constructor(t,i){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=t,this.Ps=i,this.ys=((t,i)=>e=>{const s=i(),n=t();if(e===Mh(this.Pt).ks())return{gt:n,Ii:s};{const t=Mh(e.zt());return{gt:e.Ts(s,t),Ii:s}}})(()=>this.ds,()=>this.Ss);const e=((t,i)=>()=>{const e=this.ts.Et().Rs(t()),s=i();return e&&Number.isFinite(s)?{wt:e,Ii:s}:null})(()=>this.fs,()=>this.si());this.Ds=new no(this,t,e)}N(){return this.Ps}Vs(t,i){this.xs=t,this.Cs=i}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(t,i,e){this.ws||(this.ws=!0),this.ps=!0,this.zs(t,i,e)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(t){let i=this.gs.get(t);i||(i=new Jh(this,t),this.gs.set(t,i));let e=this.Ms.get(t);return e||(e=new $h(this.ts,this,t),this.Ms.set(t,e)),[i,e]}ti(t){return t===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(t,i){this.ps&&this.Pt===t||this.vs.clear();const e=[];return this.Pt===t&&e.push(this.Hs(this.vs,i,this.ys)),e}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(t=>{this.gs.get(t)?.yt(),this.Ms.get(t)?.yt()}),this.vs.forEach(t=>t.yt()),this.Ds.yt()}qs(t){return t&&!t.ks().Ki()?t.ks():null}zs(t,i,e){this.Ys(t,i,e)&&this.Ns()}Ys(t,i,e){const s=this.bs,n=this.Ss,h=this.ds,o=this.fs,r=this.Pt,a=this.qs(e);this.fs=t,this.bs=isNaN(t)?NaN:this.ts.Et().qt(t),this.Pt=e;const l=null!==a?a.zt():null;return null!==a&&null!==l?(this.ds=i,this.Ss=a.Nt(i,l)):(this.ds=NaN,this.Ss=NaN),s!==this.bs||n!==this.Ss||o!==this.fs||h!==this.ds||r!==this.Pt}Os(){const t=this.ts.js().map(t=>t.Xs().Ks()).filter(zh),i=0===t.length?null:Math.max(...t);this.fs=null!==i?i:NaN}Hs(t,i,e){let s=t.get(i);return void 0===s&&(s=new io(this,i,e),t.set(i,s)),s}}function ao(t){return"left"===t||"right"===t}class lo{constructor(t){this.Zs=new Map,this.Gs=[],this.Js=t}Qs(t,i){const e=(s=this.Zs.get(t),n=i,void 0===s?n:{tn:Math.max(s.tn,n.tn),sn:s.sn||n.sn});var s,n;this.Zs.set(t,e)}nn(){return this.Js}en(t){const i=this.Zs.get(t);return void 0===i?{tn:this.Js}:{tn:Math.max(this.Js,i.tn),sn:i.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(t){this.hn(),this.Gs=[{an:1,Wt:t}]}_n(t){this.un(),this.Gs.push({an:5,Wt:t})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(t){this.hn(),this.Gs.push({an:2,Wt:t})}fn(t){this.hn(),this.Gs.push({an:3,Wt:t})}pn(){return this.Gs}vn(t){for(const i of t.Gs)this.mn(i);this.Js=Math.max(this.Js,t.Js),t.Zs.forEach((t,i)=>{this.Qs(i,t)})}static wn(){return new lo(2)}static gn(){return new lo(3)}mn(t){switch(t.an){case 0:this.rn();break;case 1:this.ln(t.Wt);break;case 2:this.dn(t.Wt);break;case 3:this.fn(t.Wt);break;case 4:this.cn();break;case 5:this._n(t.Wt);break;case 6:this.un()}}un(){const t=this.Gs.findIndex(t=>5===t.an);-1!==t&&this.Gs.splice(t,1)}}class co{formatTickmarks(t){return t.map(t=>this.format(t))}}function uo(t,i){if(!Ch(t))return"n/a";if(!Dh(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");return 0===i?t.toString():("0000000000000000"+t.toString()).slice(-i)}class fo extends co{constructor(t,i){if(super(),i||(i=1),Ch(t)&&Dh(t)||(t=100),t<0)throw new TypeError("invalid base");this.Yi=t,this.Mn=i,this.bn()}format(t){const i=t<0?"":"";return t=Math.abs(t),i+this.Sn(t)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let t=this.Yi;for(;t>1;)t/=10,this.xn++}}Sn(t){const i=this.Yi/this.Mn;let e=Math.floor(t),s="";const n=void 0!==this.xn?this.xn:NaN;if(i>1){let h=+(Math.round(t*i)-e*i).toFixed(this.xn);h>=i&&(h-=i,e+=1),s="."+uo(+h.toFixed(this.xn)*this.Mn,n)}else e=Math.round(e*i)/i,n>0&&(s="."+uo(0,n));return e.toFixed(0)+s}}class po extends fo{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class go extends co{constructor(t){super(),this.Cn=t}format(t){let i="";return t<0&&(i="-",t=-t),t<995?i+this.Pn(t):t<999995?i+this.Pn(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Pn(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Pn(t/1e9)+"B")}Pn(t){let i;const e=Math.pow(10,this.Cn);return i=(t=Math.round(t*e)/e)>=1e-15&&t<1?t.toFixed(this.Cn).replace(/\.?0+$/,""):String(t),i.replace(/(\.[1-9]*)0+$/,(t,i)=>i)}}const mo=/[2-9]/g;class vo{constructor(t=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=t}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(t,i,e){return this.In(t,i,e).width}Di(t,i,e){const s=this.In(t,i,e);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}In(t,i,e){const s=e||mo,n=String(i).replace(s,"0");if(this.Dn.has(n))return wh(this.Dn.get(n)).En;if(this.yn===this.Vn){const t=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(t),this.Tn++,this.yn--}t.save(),t.textBaseline="middle";const h=t.measureText(n);return t.restore(),0===h.width&&i.length||(this.Dn.set(n,{En:h,An:this.kn}),this.Rn[this.kn]=n,this.yn++,this.kn++),h}}class xo{constructor(t){this.zn=null,this.M=null,this.Ln="right",this.On=t}Nn(t,i,e){this.zn=t,this.M=i,this.Ln=e}nt(t){null!==this.M&&null!==this.zn&&this.zn.nt(t,this.M,this.On,this.Ln)}}class bo{constructor(t,i,e){this.Fn=t,this.On=new vo(50),this.Wn=i,this.O=e,this.F=-1,this.Gt=new xo(this.On)}Tt(){const t=this.O.Hn(this.Wn);if(null===t)return null;const i=t.Un(this.Wn)?t.$n():this.Wn.Ft();if(null===i)return null;const e=t.qn(i);if("overlay"===e)return null;const s=this.O.Yn();return s.P!==this.F&&(this.F=s.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),s,e),this.Gt}}class _o extends Bh{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}jn(t,i){if(!this.Yt?.Vt)return null;const{ut:e,ct:s,Kn:n}=this.Yt;return i>=e-s-7&&i<=e+s+7?{Xn:this.Yt,Kn:n}:null}et({context:t,bitmapSize:i,horizontalPixelRatio:e,verticalPixelRatio:s}){if(null===this.Yt)return;if(!1===this.Yt.Vt)return;const n=Math.round(this.Yt.ut*s);n<0||n>i.height||(t.lineCap="butt",t.strokeStyle=this.Yt.R,t.lineWidth=Math.floor(this.Yt.ct*e),bh(t,this.Yt.Xt),_h(t,n,0,i.width))}}class yo{constructor(t){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new _o,this.xt=!0,this.Jn=t,this.Qn=t.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class wo extends yo{constructor(t){super(t)}te(){this.Zn.Vt=!1;const t=this.Jn.Ft(),i=t.ie().ie;if(2!==i&&3!==i)return;const e=this.Jn.N();if(!e.baseLineVisible||!this.Jn.Vt())return;const s=this.Jn.zt();null!==s&&(this.Zn.Vt=!0,this.Zn.ut=t.Nt(s.Wt,s.Wt),this.Zn.R=e.baseLineColor,this.Zn.ct=e.baseLineWidth,this.Zn.Xt=e.baseLineStyle)}}class Mo extends Bh{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}se(){return this.Yt}et({context:t,horizontalPixelRatio:i,verticalPixelRatio:e}){const s=this.Yt;if(null===s)return;const n=Math.max(1,Math.floor(i)),h=n%2/2,o=Math.round(s.ne.x*i)+h,r=s.ne.y*e;t.fillStyle=s.ee,t.beginPath();const a=Math.max(2,1.5*s.re)*i;t.arc(o,r,a,0,2*Math.PI,!1),t.fill(),t.fillStyle=s.he,t.beginPath(),t.arc(o,r,s.ft*i,0,2*Math.PI,!1),t.fill(),t.lineWidth=n,t.strokeStyle=s.ae,t.beginPath(),t.arc(o,r,s.ft*i+n/2,0,2*Math.PI,!1),t.stroke()}}const ko=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class So{constructor(t){this.Gt=new Mo,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=t}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),2===this.ge.N().lastPriceAnimation){const t=performance.now(),i=this.we-t;if(i>0)return void(i<650&&(this.we+=2600));this.me=t,this.we=t+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return 0!==this.ge.N().lastPriceAnimation}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const t=this.ge.Qt().Et(),i=t.Pe(),e=this.ge.zt();if(null===i||null===e)return;const s=this.ge.ye(!0);if(s.ke||!i.Te(s.Re))return;const n={x:t.qt(s.Re),y:this.ge.Ft().Nt(s.gt,e.Wt)},h=s.R,o=this.ge.N().lineWidth,r=this.De(this.Ve(),h);this.Gt.ht({ee:h,re:o,he:r.he,ae:r.ae,ft:r.ft,ne:n})}Ce(){const t=this.Gt.se();if(null!==t){const i=this.De(this.Ve(),t.ee);t.he=i.he,t.ae=i.ae,t.ft=i.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(t,i,e,s){const n=e+(s-e)*i;return this.ge.Qt().Xi().j(t,n)}De(t,i){const e=t%2600/2600;let s;for(const a of ko)if(e>=a.le&&e<=a.oe){s=a;break}yh(void 0!==s,"Last price animation internal logic error");const n=(e-s.le)/(s.oe-s.le);return{he:this.Be(i,n,s.ce,s.de),ae:this.Be(i,n,s.fe,s.pe),ft:(h=n,o=s._e,r=s.ue,o+(r-o)*h)};var h,o,r}}class Po extends yo{constructor(t){super(t)}te(){const t=this.Zn;t.Vt=!1;const i=this.Jn.N();if(!i.priceLineVisible||!this.Jn.Vt())return;const e=this.Jn.ye(0===i.priceLineSource);e.ke||(t.Vt=!0,t.ut=e.Ii,t.R=this.Jn.Ie(e.R),t.ct=i.priceLineWidth,t.Xt=i.priceLineStyle)}}class Co extends to{constructor(t){super(),this.Jt=t}qi(t,i,e){t.Vt=!1,i.Vt=!1;const s=this.Jt;if(!s.Vt())return;const n=s.N(),h=n.lastValueVisible,o=""!==s.Ee(),r=0===n.seriesLastValueMode,a=s.ye(!1);if(a.ke)return;h&&(t.ri=this.Ae(a,h,r),t.Vt=0!==t.ri.length),(o||r)&&(i.ri=this.ze(a,h,o,r),i.Vt=i.ri.length>0);const l=s.Ie(a.R),c=this.Jt.Qt().Xi().X(l);e.Z=c.Z,e.Ii=a.Ii,i.Ht=s.Qt().Ut(a.Ii/s.Ft().$t()),t.Ht=l,t.R=c.G,i.R=c.G}ze(t,i,e,s){let n="";const h=this.Jt.Ee();return e&&0!==h.length&&(n+=`${h} `),i&&s&&(n+=this.Jt.Ft().Le()?t.Oe:t.Ne),n.trim()}Ae(t,i,e){return i?e?this.Jt.Ft().Le()?t.Ne:t.Oe:t.ri:""}}function Do(t,i,e,s){const n=Number.isFinite(i),h=Number.isFinite(e);return n&&h?t(i,e):n||h?n?i:e:s}class To{constructor(t,i){this.Fe=t,this.We=i}He(t){return null!==t&&this.Fe===t.Fe&&this.We===t.We}Ue(){return new To(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(t){return null===t?this:new To(Do(Math.min,this.$e(),t.$e(),-1/0),Do(Math.max,this.qe(),t.qe(),1/0))}je(t){if(!Ch(t))return;if(0===this.We-this.Fe)return;const i=.5*(this.We+this.Fe);let e=this.We-i,s=this.Fe-i;e*=t,s*=t,this.We=i+e,this.Fe=i+s}Ke(t){Ch(t)&&(this.We+=t,this.Fe+=t)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(t){return null===t?null:new To(t.minValue,t.maxValue)}}class Eo{constructor(t,i){this.Ge=t,this.Je=i||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:null===this.Ge?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(t){return null===t?null:new Eo(To.Ze(t.priceRange),t.margins)}}class Oo extends yo{constructor(t,i){super(t),this.ir=i}te(){const t=this.Zn;t.Vt=!1;const i=this.ir.N();if(!this.Jn.Vt()||!i.lineVisible)return;const e=this.ir.sr();null!==e&&(t.Vt=!0,t.ut=e,t.R=i.color,t.ct=i.lineWidth,t.Xt=i.lineStyle,t.Kn=this.ir.N().id)}}class zo extends to{constructor(t,i){super(),this.ge=t,this.ir=i}qi(t,i,e){t.Vt=!1,i.Vt=!1;const s=this.ir.N(),n=s.axisLabelVisible,h=""!==s.title,o=this.ge;if(!n||!o.Vt())return;const r=this.ir.sr();if(null===r)return;h&&(i.ri=s.title,i.Vt=!0),i.Ht=o.Qt().Ut(r/o.Ft().$t()),t.ri=this.nr(s.price),t.Vt=!0;const a=this.ge.Qt().Xi().X(s.axisLabelColor||s.color);e.Z=a.Z;const l=s.axisLabelTextColor||a.G;t.R=l,i.R=l,e.Ii=r}nr(t){const i=this.ge.zt();return null===i?"":this.ge.Ft().Zi(t,i.Wt)}}class Io{constructor(t,i){this.ge=t,this.Ps=i,this.er=new Oo(t,this),this.Fn=new zo(t,this),this.rr=new bo(this.Fn,t,t.Qt())}hr(t){Ph(this.Ps,t),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){const t=this.ge,i=t.Ft();if(t.Qt().Et().Ki()||i.Ki())return null;const e=t.zt();return null===e?null:i.Nt(this.Ps.price,e.Wt)}}class Ro extends ho{constructor(t){super(),this.ts=t}Qt(){return this.ts}}const Vo={Bar:(t,i,e,s)=>{const n=i.upColor,h=i.downColor,o=Mh(t(e,s)),r=kh(o.Wt[0])<=kh(o.Wt[3]);return{cr:o.R??(r?n:h)}},Candlestick:(t,i,e,s)=>{const n=i.upColor,h=i.downColor,o=i.borderUpColor,r=i.borderDownColor,a=i.wickUpColor,l=i.wickDownColor,c=Mh(t(e,s)),u=kh(c.Wt[0])<=kh(c.Wt[3]);return{cr:c.R??(u?n:h),dr:c.Ht??(u?o:r),pr:c.vr??(u?a:l)}},Custom:(t,i,e,s)=>({cr:Mh(t(e,s)).R??i.color}),Area:(t,i,e,s)=>{const n=Mh(t(e,s));return{cr:n.vt??i.lineColor,vt:n.vt??i.lineColor,mr:n.mr??i.topColor,wr:n.wr??i.bottomColor}},Baseline:(t,i,e,s)=>{const n=Mh(t(e,s));return{cr:n.Wt[3]>=i.baseValue.price?i.topLineColor:i.bottomLineColor,gr:n.gr??i.topLineColor,Mr:n.Mr??i.bottomLineColor,br:n.br??i.topFillColor1,Sr:n.Sr??i.topFillColor2,Cr:n.Cr??i.bottomFillColor1,Pr:n.Pr??i.bottomFillColor2}},Line:(t,i,e,s)=>{const n=Mh(t(e,s));return{cr:n.R??i.color,vt:n.R??i.color}},Histogram:(t,i,e,s)=>({cr:Mh(t(e,s)).R??i.color})};class Lo{constructor(t){this.yr=(t,i)=>void 0!==i?i.Wt:this.ge.Xs().kr(t),this.ge=t,this.Tr=Vo[t.Rr()]}Dr(t,i){return this.Tr(this.yr,this.ge.N(),t,i)}}function Fo(t,i,e,s,n=0,h=i.length){let o=h-n;for(;0<o;){const h=o>>1,r=n+h;s(i[r],e)===t?(n=r+1,o-=h+1):o=h}return n}const No=Fo.bind(null,!0),Ao=Fo.bind(null,!1);var Wo;!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(Wo||(Wo={}));const Bo=30;class Yo{constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return 0===this.zr()}Te(t){return null!==this.Nr(t,0)}kr(t){return this.Fr(t)}Fr(t,i=0){const e=this.Nr(t,i);return null===e?null:{...this.Wr(e),Re:this.Or(e)}}Hr(){return this.Vr}Ur(t,i,e){if(this.Ki())return null;let s=null;for(const n of e)s=Ho(s,this.$r(t,i,n));return s}ht(t){this.Ir.clear(),this.Br.clear(),this.Vr=t,this.Er=t.map(t=>t.Re)}qr(){return this.Er}Or(t){return this.Vr[t].Re}Wr(t){return this.Vr[t]}Nr(t,i){const e=this.Yr(t);if(null===e&&0!==i)switch(i){case-1:return this.jr(t);case 1:return this.Kr(t);default:throw new TypeError("Unknown search mode")}return e}jr(t){let i=this.Xr(t);return i>0&&(i-=1),i!==this.Vr.length&&this.Or(i)<t?i:null}Kr(t){const i=this.Zr(t);return i!==this.Vr.length&&t<this.Or(i)?i:null}Yr(t){const i=this.Xr(t);return i===this.Vr.length||t<this.Vr[i].Re?null:i}Xr(t){return No(this.Vr,t,(t,i)=>t.Re<i)}Zr(t){return Ao(this.Vr,t,(t,i)=>t.Re>i)}Gr(t,i,e){let s=null;for(let n=t;n<i;n++){const t=this.Vr[n].Wt[e];Number.isNaN(t)||(null===s?s={Jr:t,Qr:t}:(t<s.Jr&&(s.Jr=t),t>s.Qr&&(s.Qr=t)))}return s}$r(t,i,e){if(this.Ki())return null;let s=null;const n=Mh(this.Lr()),h=Mh(this.Ks()),o=Math.max(t,n),r=Math.min(i,h),a=Math.ceil(o/Bo)*Bo,l=Math.max(a,Math.floor(r/Bo)*Bo);{const t=this.Xr(o),n=this.Zr(Math.min(r,a,i));s=Ho(s,this.Gr(t,n,e))}let c=this.Br.get(e);void 0===c&&(c=new Map,this.Br.set(e,c));for(let u=Math.max(a+1,o);u<l;u+=Bo){const t=Math.floor(u/Bo);let i=c.get(t);if(void 0===i){const s=this.Xr(t*Bo),n=this.Zr((t+1)*Bo-1);i=this.Gr(s,n,e),c.set(t,i)}s=Ho(s,i)}{const t=this.Xr(l),i=this.Zr(r);s=Ho(s,this.Gr(t,i,e))}return s}}function Ho(t,i){return null===t?i:null===i?t:{Jr:Math.min(t.Jr,i.Jr),Qr:Math.max(t.Qr,i.Qr)}}const jo={setLineStyle:bh};class $o{constructor(t){this.th=t}nt(t,i,e){this.th.draw(t,jo)}ih(t,i,e){this.th.drawBackground?.(t,jo)}}class Uo{constructor(t){this.Dn=null,this.sh=t}Tt(){const t=this.sh.renderer();if(null===t)return null;if(this.Dn?.nh===t)return this.Dn.eh;const i=new $o(t);return this.Dn={nh:t,eh:i},i}rh(){return this.sh.zOrder?.()??"normal"}}class Jo{constructor(t){this.hh=null,this.ah=t}oh(){return this.ah}Ns(){this.ah.updateAllViews?.()}Fs(){const t=this.ah.paneViews?.()??[];if(this.hh?.nh===t)return this.hh.eh;const i=t.map(t=>new Uo(t));return this.hh={nh:t,eh:i},i}jn(t,i){return this.ah.hitTest?.(t,i)??null}}let Qo=class extends Jo{us(){return[]}};class qo{constructor(t){this.th=t}nt(t,i,e){this.th.draw(t,jo)}ih(t,i,e){this.th.drawBackground?.(t,jo)}}class Go{constructor(t){this.Dn=null,this.sh=t}Tt(){const t=this.sh.renderer();if(null===t)return null;if(this.Dn?.nh===t)return this.Dn.eh;const i=new qo(t);return this.Dn={nh:t,eh:i},i}rh(){return this.sh.zOrder?.()??"normal"}}function Ko(t){return{ri:t.text(),Ii:t.coordinate(),Bi:t.fixedCoordinate?.(),R:t.textColor(),Z:t.backColor(),Vt:t.visible?.()??!0,pi:t.tickVisible?.()??!0}}class Xo{constructor(t,i){this.Gt=new so,this._h=t,this.uh=i}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...Ko(this._h)}),this.Gt}}class Zo extends to{constructor(t,i){super(),this._h=t,this.Yi=i}qi(t,i,e){const s=Ko(this._h);e.Z=s.Z,t.R=s.R;const n=2/12*this.Yi.P();e.Ti=n,e.Ri=n,e.Ii=s.Ii,e.Bi=s.Bi,t.ri=s.ri,t.Vt=s.Vt,t.pi=s.pi}}class tr extends Jo{constructor(t,i){super(t),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=i}cs(){const t=this.ah.timeAxisViews?.()??[];if(this.dh?.nh===t)return this.dh.eh;const i=this.ge.Qt().Et(),e=t.map(t=>new Xo(t,i));return this.dh={nh:t,eh:e},e}Ws(){const t=this.ah.priceAxisViews?.()??[];if(this.fh?.nh===t)return this.fh.eh;const i=this.ge.Ft(),e=t.map(t=>new Zo(t,i));return this.fh={nh:t,eh:e},e}wh(){const t=this.ah.priceAxisPaneViews?.()??[];if(this.ph?.nh===t)return this.ph.eh;const i=t.map(t=>new Go(t));return this.ph={nh:t,eh:i},i}gh(){const t=this.ah.timeAxisPaneViews?.()??[];if(this.mh?.nh===t)return this.mh.eh;const i=t.map(t=>new Go(t));return this.mh={nh:t,eh:i},i}Mh(t,i){return this.ah.autoscaleInfo?.(t,i)??null}}function ir(t,i,e,s){t.forEach(t=>{i(t).forEach(t=>{t.rh()===e&&s.push(t)})})}function er(t){return t.Fs()}function sr(t){return t.wh()}function nr(t){return t.gh()}const hr=["Area","Line","Baseline"];class or extends Ro{constructor(t,i,e,s,n){super(t),this.Yt=new Yo,this.er=new Po(this),this.bh=[],this.Sh=new wo(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=e,this.kh=i;const h=new Co(this);this.vs=[h],this.rr=new bo(h,this,t),hr.includes(this.kh)&&(this.xh=new So(this)),this.Th(),this.sh=s(this,this.Qt(),n)}m(){null!==this.Ph&&clearTimeout(this.Ph)}Ie(t){return this.Ps.priceLineColor||t}ye(t){const i={ke:!0},e=this.Ft();if(this.Qt().Et().Ki()||e.Ki()||this.Yt.Ki())return i;const s=this.Qt().Et().Pe(),n=this.zt();if(null===s||null===n)return i;let h,o;if(t){const t=this.Yt.Ar();if(null===t)return i;h=t,o=t.Re}else{const t=this.Yt.Fr(s.bi(),-1);if(null===t)return i;if(h=this.Yt.kr(t.Re),null===h)return i;o=t.Re}const r=h.Wt[3],a=this.Rh().Dr(o,{Wt:h}),l=e.Nt(r,n.Wt);return{ke:!1,gt:r,ri:e.Zi(r,n.Wt),Oe:e.Dh(r),Ne:e.Vh(r,n.Wt),R:a.cr,Ii:l,Re:o}}Rh(){return null!==this.Ch||(this.Ch=new Lo(this)),this.Ch}N(){return this.Ps}hr(t){const i=t.priceScaleId;void 0!==i&&i!==this.Ps.priceScaleId&&this.Qt().Bh(this,i),Ph(this.Ps,t),void 0!==t.priceFormat&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(t,i){this.Yt.ht(t),this.sh.yt("data"),null!==this.xh&&(i&&i.zh?this.xh.be():0===t.length&&this.xh.Me());const e=this.Qt().Hn(this);this.Qt().Lh(e),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(t){const i=new Io(this,t);return this.bh.push(i),this.Qt().Eh(this),i}Nh(t){const i=this.bh.indexOf(t);-1!==i&&this.bh.splice(i,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){const t=this.Wh();return null===t?null:{Wt:t.Wt[3],Hh:t.wt}}Wh(){const t=this.Qt().Et().Pe();if(null===t)return null;const i=t.Uh();return this.Yt.Fr(i,1)}Xs(){return this.Yt}$h(t){const i=this.Yt.kr(t);return null===i?null:"Bar"===this.kh||"Candlestick"===this.kh||"Custom"===this.kh?{qh:i.Wt[0],Yh:i.Wt[1],jh:i.Wt[2],Kh:i.Wt[3]}:i.Wt[3]}Xh(t){const i=[];ir(this.yh,er,"top",i);const e=this.xh;return null!==e&&e.Vt()?(null===this.Ph&&e.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),e.Se(),i.unshift(e),i):i}Fs(){const t=[];this.Gh()||t.push(this.Sh),t.push(this.sh,this.er);const i=this.bh.map(t=>t.lr());return t.push(...i),ir(this.yh,er,"normal",t),t}Jh(){return this.Qh(er,"bottom")}ta(t){return this.Qh(sr,t)}ia(t){return this.Qh(nr,t)}sa(t,i){return this.yh.map(e=>e.jn(t,i)).filter(t=>null!==t)}us(){return[this.rr,...this.bh.map(t=>t._r())]}Ws(t,i){if(i!==this.es&&!this.Gh())return[];const e=[...this.vs];for(const s of this.bh)e.push(s.ur());return this.yh.forEach(t=>{e.push(...t.Ws())}),e}cs(){const t=[];return this.yh.forEach(i=>{t.push(...i.cs())}),t}Mh(t,i){if(void 0!==this.Ps.autoscaleInfoProvider){const e=this.Ps.autoscaleInfoProvider(()=>{const e=this.na(t,i);return null===e?null:e.Xe()});return Eo.Ze(e)}return this.na(t,i)}nh(){const t=this.Ps.priceFormat;return t.base??1/t.minMove}ea(){return this.ra}Ns(){this.sh.yt();for(const t of this.vs)t.yt();for(const t of this.bh)t.yt();this.er.yt(),this.Sh.yt(),this.xh?.yt(),this.yh.forEach(t=>t.Ns())}Ft(){return Mh(super.Ft())}At(t){if("Line"!==this.kh&&"Area"!==this.kh&&"Baseline"!==this.kh||!this.Ps.crosshairMarkerVisible)return null;const i=this.Yt.kr(t);return null===i?null:{gt:i.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(t)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(t){this.yh.push(new tr(t,this))}ua(t){this.yh=this.yh.filter(i=>i.oh()!==t)}ca(){if("Custom"===this.kh)return t=>this.sh.da(t)}fa(){if("Custom"===this.kh)return t=>this.sh.pa(t)}va(){return this.Yt.qr()}Gh(){return!ao(this.Ft().ma())}na(t,i){if(!Dh(t)||!Dh(i)||this.Yt.Ki())return null;const e="Line"===this.kh||"Area"===this.kh||"Baseline"===this.kh||"Histogram"===this.kh?[3]:[2,1],s=this.Yt.Ur(t,i,e);let n=null!==s?new To(s.Jr,s.Qr):null,h=null;if("Histogram"===this.Rr()){const t=this.Ps.base,i=new To(t,t);n=null!==n?n.vn(i):i}return this.yh.forEach(e=>{const s=e.Mh(t,i);if(s?.priceRange){const t=new To(s.priceRange.minValue,s.priceRange.maxValue);n=null!==n?n.vn(t):t}s?.margins&&(h=s.margins)}),new Eo(n,h)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBorderColor;if(0!==t.length)return t}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(t){switch(this.kh){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBackgroundColor;if(0!==t.length)return t}}return this.Rh().Dr(t).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const t=this.Ps.priceFormat.formatter;this.ra={format:t,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(i=>i.map(t))};break}case"volume":this.ra=new go(this.Ps.priceFormat.precision);break;case"percent":this.ra=new po(this.Ps.priceFormat.precision);break;default:{const t=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new fo(t,this.Ps.priceFormat.minMove*t)}}null!==this.es&&this.es.wa()}Qh(t,i){const e=[];return ir(this.yh,t,i,e),e}}const rr=[3],ar=[0,1,2,3];class lr{constructor(t){this.Ps=t}ga(t,i,e){let s=t;if(0===this.Ps.mode)return s;const n=e.ks(),h=n.zt();if(null===h)return s;const o=n.Nt(t,h),r=e.Ma().filter(t=>t instanceof or).reduce((t,s)=>{if(e.Un(s)||!s.Vt())return t;const n=s.Ft(),h=s.Xs();if(n.Ki()||!h.Te(i))return t;const o=h.kr(i);if(null===o)return t;const r=kh(s.zt()),a=3===this.Ps.mode?ar:rr;return t.concat(a.map(t=>n.Nt(o.Wt[t],r.Wt)))},[]);if(0===r.length)return s;r.sort((t,i)=>Math.abs(t-o)-Math.abs(i-o));const a=r[0];return s=n.Ts(a,h),s}}function cr(t,i,e){return Math.min(Math.max(t,i),e)}function ur(t,i,e){return i-t<=e}class dr extends Bh{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}et({context:t,bitmapSize:i,horizontalPixelRatio:e,verticalPixelRatio:s}){if(null===this.Yt)return;const n=Math.max(1,Math.floor(e));var h,o;t.lineWidth=n,o=()=>{const h=Mh(this.Yt);if(h.ba){t.strokeStyle=h.Sa,bh(t,h.xa),t.beginPath();for(const s of h.Ca){const h=Math.round(s.Pa*e);t.moveTo(h,-n),t.lineTo(h,i.height+n)}t.stroke()}if(h.ya){t.strokeStyle=h.ka,bh(t,h.Ta),t.beginPath();for(const e of h.Ra){const h=Math.round(e.Pa*s);t.moveTo(-n,h),t.lineTo(i.width+n,h)}t.stroke()}},(h=t).save(),h.lineWidth%2&&h.translate(.5,.5),o(),h.restore()}}class fr{constructor(t){this.Gt=new dr,this.xt=!0,this.Pt=t}yt(){this.xt=!0}Tt(){if(this.xt){const t=this.Pt.Qt().N().grid,i={ya:t.horzLines.visible,ba:t.vertLines.visible,ka:t.horzLines.color,Sa:t.vertLines.color,Ta:t.horzLines.style,xa:t.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map(t=>({Pa:t.coord}))};this.Gt.ht(i),this.xt=!1}return this.Gt}}class pr{constructor(t){this.sh=new fr(t)}lr(){return this.sh}}const gr={Va:4,Ba:1e-4};function mr(t,i){const e=100*(t-i)/i;return i<0?-e:e}function vr(t,i){const e=mr(t.$e(),i),s=mr(t.qe(),i);return new To(e,s)}function xr(t,i){const e=100*(t-i)/i+100;return i<0?-e:e}function br(t,i){const e=xr(t.$e(),i),s=xr(t.qe(),i);return new To(e,s)}function _r(t,i){const e=Math.abs(t);if(e<1e-15)return 0;const s=Math.log10(e+i.Ba)+i.Va;return t<0?-s:s}function yr(t,i){const e=Math.abs(t);if(e<1e-15)return 0;const s=Math.pow(10,e-i.Va)-i.Ba;return t<0?-s:s}function wr(t,i){if(null===t)return null;const e=_r(t.$e(),i),s=_r(t.qe(),i);return new To(e,s)}function Mr(t,i){if(null===t)return null;const e=yr(t.$e(),i),s=yr(t.qe(),i);return new To(e,s)}function kr(t){if(null===t)return gr;const i=Math.abs(t.qe()-t.$e());if(i>=1||i<1e-15)return gr;const e=Math.ceil(Math.abs(Math.log10(i))),s=gr.Va+e;return{Va:s,Ba:1/Math.pow(10,s)}}class Sr{constructor(t,i){if(this.Ia=t,this.Ea=i,function(t){if(t<0)return!1;if(t>1e18)return!0;for(let i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let t=this.Ia;1!==t;){if(t%2==0)this.Aa.push(2),t/=2;else{if(t%5!=0)throw new Error("unexpected base");this.Aa.push(2,2.5),t/=5}if(this.Aa.length>100)throw new Error("something wrong with base")}}}za(t,i,e){const s=0===this.Ia?0:1/this.Ia;let n=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-i)))),h=0,o=this.Ea[0];for(;;){const t=ur(n,s,1e-14)&&n>s+1e-14,i=ur(n,e*o,1e-14),r=ur(n,1,1e-14);if(!(t&&i&&r))break;n/=o,o=this.Ea[++h%this.Ea.length]}if(n<=s+1e-14&&(n=s),n=Math.max(1,n),this.Aa.length>0&&(r=n,Math.abs(r-1)<1e-14))for(h=0,o=this.Aa[0];ur(n,e*o,1e-14)&&n>s+1e-14;)n/=o,o=this.Aa[++h%this.Aa.length];var r;return n}}class Pr{constructor(t,i,e,s){this.La=[],this.Yi=t,this.Ia=i,this.Oa=e,this.Na=s}za(t,i){if(t<i)throw new Error("high < low");const e=this.Yi.$t(),s=(t-i)*this.Fa()/e,n=new Sr(this.Ia,[2,2.5,2]),h=new Sr(this.Ia,[2,2,2.5]),o=new Sr(this.Ia,[2.5,2,2]),r=[];return r.push(n.za(t,i,s),h.za(t,i,s),o.za(t,i,s)),function(t){if(t.length<1)throw Error("array is empty");let i=t[0];for(let e=1;e<t.length;++e)t[e]<i&&(i=t[e]);return i}(r)}Wa(){const t=this.Yi,i=t.zt();if(null===i)return void(this.La=[]);const e=t.$t(),s=this.Oa(e-1,i),n=this.Oa(0,i),h=this.Yi.N().entireTextOnly?this.Ha()/2:0,o=h,r=e-1-h,a=Math.max(s,n),l=Math.min(s,n);if(a===l)return void(this.La=[]);const c=this.za(a,l);if(this.Ua(i,c,a,l,o,r),t.$a()&&this.qa(c,l,a)){const t=this.Yi.Ya();this.ja(i,c,o,r,t,2*t)}const u=this.La.map(t=>t.Ka),d=this.Yi.Xa(u);for(let f=0;f<this.La.length;f++)this.La[f].Za=d[f]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(t,i,e,s,n,h){const o=this.La,r=this.Yi;let a=e%i;a+=a<0?i:0;const l=e>=s?1:-1;let c=null,u=0;for(let d=e-a;d>s;d-=i){const e=this.Na(d,t,!0);null!==c&&Math.abs(e-c)<this.Fa()||e<n||e>h||(u<o.length?(o[u].Pa=e,o[u].Za=r.Ga(d),o[u].Ka=d):o.push({Pa:e,Za:r.Ga(d),Ka:d}),u++,c=e,r.Ja()&&(i=this.za(d*l,s)))}o.length=u}ja(t,i,e,s,n,h){const o=this.La,r=this.Qa(t,e,n,h),a=this.Qa(t,s,-h,-n),l=this.Na(0,t,!0)-this.Na(i,t,!0);o.length>0&&o[0].Pa-r.Pa<l/2&&o.shift(),o.length>0&&a.Pa-o[o.length-1].Pa<l/2&&o.pop(),o.unshift(r),o.push(a)}Qa(t,i,e,s){const n=(e+s)/2,h=this.Oa(i+e,t),o=this.Oa(i+s,t),r=Math.min(h,o),a=Math.max(h,o),l=Math.max(.1,this.za(a,r)),c=this.Oa(i+n,t),u=c-c%l,d=this.Na(u,t,!0);return{Za:this.Yi.Ga(u),Pa:d,Ka:u}}qa(t,i,e){let s=kh(this.Yi.Qe());return this.Yi.Ja()&&(s=Mr(s,this.Yi.tl())),s.$e()-i<t&&e-s.qe()<t}}function Cr(t){return t.slice().sort((t,i)=>Mh(t.hs())-Mh(i.hs()))}var Dr;!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(Dr||(Dr={}));const Tr=new po,Er=new fo(100,1);class Or{constructor(t,i,e,s,n){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new Sh,this.ul=new Sh,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=Er,this.wl=kr(null),this.gl=t,this.Ps=i,this.Ml=e,this.bl=s,this.Sl=n,this.xl=new Pr(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(t){if(Ph(this.Ps,t),this.wa(),void 0!==t.mode&&this.yl({ie:t.mode}),void 0!==t.scaleMargins){const i=wh(t.scaleMargins.top),e=wh(t.scaleMargins.bottom);if(i<0||i>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${i}`);if(e<0||e>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${e}`);if(i+e>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${i+e}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return 1===this.Ps.mode}Le(){return 2===this.Ps.mode}Dl(){return 3===this.Ps.mode}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(t){const i=this.ie();let e=null;void 0!==t.sn&&(this.Ps.autoScale=t.sn),void 0!==t.ie&&(this.Ps.mode=t.ie,2!==t.ie&&3!==t.ie||(this.Ps.autoScale=!0),this.el.rl=!1),1===i.ie&&t.ie!==i.ie&&(function(t,i){if(null===t)return!1;const e=yr(t.$e(),i),s=yr(t.qe(),i);return isFinite(e)&&isFinite(s)}(this.Ge,this.wl)?(e=Mr(this.Ge,this.wl),null!==e&&this.Bl(e)):this.Ps.autoScale=!0),1===t.ie&&t.ie!==i.ie&&(e=wr(this.Ge,this.wl),null!==e&&this.Bl(e));const s=i.ie!==this.Ps.mode;s&&(2===i.ie||this.Le())&&this.wa(),s&&(3===i.ie||this.Dl())&&this.wa(),void 0!==t.Vl&&i.Vl!==t.Vl&&(this.Ps.invertScale=t.Vl,this.Il()),this.ul.p(i,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(t){this.il!==t&&(this.il=t,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;const t=this.$t()-this.Ll()-this.Ol();return this.sl=t,t}Qe(){return this.Nl(),this.Ge}Bl(t,i){const e=this.Ge;(i||null===e&&null!==t||null!==e&&!e.He(t))&&(this.pl=null,this.Ge=t)}Fl(t){this.Bl(t),this.Wl(null!==t)}Ki(){return this.Nl(),0===this.il||!this.Ge||this.Ge.Ki()}Hl(t){return this.Vl()?t:this.$t()-1-t}Nt(t,i){return this.Le()?t=mr(t,i):this.Dl()&&(t=xr(t,i)),this.Pl(t,i)}Ul(t,i,e){this.Nl();const s=this.Ol(),n=Mh(this.Qe()),h=n.$e(),o=n.qe(),r=this.zl()-1,a=this.Vl(),l=r/(o-h),c=void 0===e?0:e.from,u=void 0===e?t.length:e.to,d=this.$l();for(let f=c;f<u;f++){const e=t[f],n=e.gt;if(isNaN(n))continue;let o=n;null!==d&&(o=d(e.gt,i));const r=s+l*(o-h),c=a?r:this.il-1-r;e.ut=c}}ql(t,i,e){this.Nl();const s=this.Ol(),n=Mh(this.Qe()),h=n.$e(),o=n.qe(),r=this.zl()-1,a=this.Vl(),l=r/(o-h),c=void 0===e?0:e.from,u=void 0===e?t.length:e.to,d=this.$l();for(let f=c;f<u;f++){const e=t[f];let n=e.qh,o=e.Yh,r=e.jh,c=e.Kh;null!==d&&(n=d(e.qh,i),o=d(e.Yh,i),r=d(e.jh,i),c=d(e.Kh,i));let u=s+l*(n-h),p=a?u:this.il-1-u;e.Yl=p,u=s+l*(o-h),p=a?u:this.il-1-u,e.jl=p,u=s+l*(r-h),p=a?u:this.il-1-u,e.Kl=p,u=s+l*(c-h),p=a?u:this.il-1-u,e.Xl=p}}Ts(t,i){const e=this.Cl(t,i);return this.Zl(e,i)}Zl(t,i){let e=t;return this.Le()?(s=e,(n=i)<0&&(s=-s),e=s/100*n+n):this.Dl()&&(e=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(e,i)),e;var s,n}Ma(){return this.cl}Dt(){return this.fl||(this.fl=Cr(this.cl)),this.fl}Gl(t){-1===this.cl.indexOf(t)&&(this.cl.push(t),this.wa(),this.Jl())}Ql(t){const i=this.cl.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.cl.splice(i,1),0===this.cl.length&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let t=null;for(const i of this.cl){const e=i.zt();null!==e&&(null===t||e.Hh<t.Hh)&&(t=e)}return null===t?null:t.Wt}Vl(){return this.Ps.invertScale}Da(){const t=null===this.zt();if(null!==this.pl&&(t||this.pl.io===t))return this.pl.Da;this.xl.Wa();const i=this.xl.Da();return this.pl={Da:i,io:t},this._l.p(),i}so(){return this._l}no(t){this.Le()||this.Dl()||null===this.vl&&null===this.nl&&(this.Ki()||(this.vl=this.il-t,this.nl=Mh(this.Qe()).Ue()))}eo(t){if(this.Le()||this.Dl())return;if(null===this.vl)return;this.yl({sn:!1}),(t=this.il-t)<0&&(t=0);let i=(this.vl+.2*(this.il-1))/(t+.2*(this.il-1));const e=Mh(this.nl).Ue();i=Math.max(i,.1),e.je(i),this.Bl(e)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(t){this.Tl()||null===this.ml&&null===this.nl&&(this.Ki()||(this.ml=t,this.nl=Mh(this.Qe()).Ue()))}ao(t){if(this.Tl())return;if(null===this.ml)return;const i=Mh(this.Qe()).Ye()/(this.zl()-1);let e=t-this.ml;this.Vl()&&(e*=-1);const s=e*i,n=Mh(this.nl).Ue();n.Ke(s),this.Bl(n,!0),this.pl=null}lo(){this.Tl()||null!==this.ml&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(t,i){switch(this.Ps.mode){case 2:return this.oo(mr(t,i));case 3:return this.ea().format(xr(t,i));default:return this.nr(t)}}Ga(t){switch(this.Ps.mode){case 2:return this.oo(t);case 3:return this.ea().format(t);default:return this.nr(t)}}Xa(t){switch(this.Ps.mode){case 2:return this._o(t);case 3:return this.ea().formatTickmarks(t);default:return this.uo(t)}}Dh(t){return this.nr(t,Mh(this.dl).ea())}Vh(t,i){return t=mr(t,i),this.oo(t,Tr)}co(){return this.cl}do(t){this.el={hl:t,rl:!1}}Ns(){this.cl.forEach(t=>t.Ns())}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let t=1/0;this.dl=null;for(const e of this.cl)e.hs()<t&&(t=e.hs(),this.dl=e);let i=100;null!==this.dl&&(i=Math.round(this.dl.nh())),this.ra=Er,this.Le()?(this.ra=Tr,i=100):this.Dl()?(this.ra=new fo(100,1),i=100):null!==this.dl&&(this.ra=this.dl.ea()),this.xl=new Pr(this,i,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return null===this.dl||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(t){this.al=t}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(t,i){if(this.Nl(),this.Ki())return 0;t=this.Ja()&&t?_r(t,this.wl):t;const e=Mh(this.Qe()),s=this.Ol()+(this.zl()-1)*(t-e.$e())/e.Ye();return this.Hl(s)}Cl(t,i){if(this.Nl(),this.Ki())return 0;const e=this.Hl(t),s=Mh(this.Qe()),n=s.$e()+s.Ye()*((e-this.Ol())/(this.zl()-1));return this.Ja()?yr(n,this.wl):n}Il(){this.pl=null,this.xl.Wa()}po(){if(this.Rl()&&!this.Tl())return;const t=this.el.hl;if(null===t)return;let i=null;const e=this.co();let s=0,n=0;for(const r of e){if(!r.Vt())continue;const e=r.zt();if(null===e)continue;const h=r.Mh(t.Uh(),t.bi());let o=h&&h.Qe();if(null!==o){switch(this.Ps.mode){case 1:o=wr(o,this.wl);break;case 2:o=vr(o,e.Wt);break;case 3:o=br(o,e.Wt)}if(i=null===i?o:i.vn(Mh(o)),null!==h){const t=h.tr();null!==t&&(s=Math.max(s,t.above),n=Math.max(n,t.below))}}}if(this.$a()&&(s=Math.max(s,this.Ya()),n=Math.max(n,this.Ya())),s===this.ll&&n===this.ol||(this.ll=s,this.ol=n,this.pl=null,this.kl()),null!==i){if(i.$e()===i.qe()){const t=5*this.fo();this.Ja()&&(i=Mr(i,this.wl)),i=new To(i.$e()-t,i.qe()+t),this.Ja()&&(i=wr(i,this.wl))}if(this.Ja()){const t=Mr(i,this.wl),e=kr(t);if(h=e,o=this.wl,h.Va!==o.Va||h.Ba!==o.Ba){const s=null!==this.nl?Mr(this.nl,this.wl):null;this.wl=e,i=wr(t,e),null!==s&&(this.nl=wr(s,e))}}this.Bl(i)}else null===this.Ge&&(this.Bl(new To(-.5,.5)),this.wl=kr(null));var h,o}$l(){return this.Le()?mr:this.Dl()?xr:this.Ja()?t=>_r(t,this.wl):null}vo(t,i,e){return void 0===i?(void 0===e&&(e=this.ea()),e.format(t)):i(t)}mo(t,i,e){return void 0===i?(void 0===e&&(e=this.ea()),e.formatTickmarks(t)):i(t)}nr(t,i){return this.vo(t,this.bl.priceFormatter,i)}uo(t,i){const e=this.bl.priceFormatter;return this.mo(t,this.bl.tickmarksPriceFormatter??(e?t=>t.map(e):void 0),i)}oo(t,i){return this.vo(t,this.bl.percentageFormatter,i)}_o(t,i){const e=this.bl.percentageFormatter;return this.mo(t,this.bl.tickmarksPercentageFormatter??(e?t=>t.map(e):void 0),i)}}function zr(t){return t instanceof or}class Ir{constructor(t,i){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new Sh,this.yh=[],this.uh=t,this.ts=i,this.Co=new pr(this);const e=i.N();this.Po=this.yo("left",e.leftPriceScale),this.ko=this.yo("right",e.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(e)}Ro(t){if(t.leftPriceScale&&this.Po.hr(t.leftPriceScale),t.rightPriceScale&&this.ko.hr(t.rightPriceScale),t.localization&&(this.Po.wa(),this.ko.wa()),t.overlayPriceScales){const i=Array.from(this.wo.values());for(const e of i){const i=Mh(e[0].Ft());i.hr(t.overlayPriceScales),t.localization&&i.wa()}}}Do(t){switch(t){case"left":return this.Po;case"right":return this.ko}return this.wo.has(t)?wh(this.wo.get(t))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach(t=>{t.m&&t.m()}),this.yh=this.yh.filter(t=>{const i=t.oh();return i.detached&&i.detached(),!1}),this.xo.p()}Bo(){return this.bo}Io(t){this.bo=t}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(t){this.Mo=t,this.Ao()}Al(t){this.il=t,this.Po.Al(t),this.ko.Al(t),this.cl.forEach(i=>{if(this.Un(i)){const e=i.Ft();null!==e&&e.Al(t)}}),this.Ao()}zo(t){this.So=t}Lo(){return this.So}Oo(){return this.cl.filter(zr)}Ma(){return this.cl}Un(t){const i=t.Ft();return null===i||this.Po!==i&&this.ko!==i}Gl(t,i,e){this.No(t,i,e?t.hs():this.cl.length)}Ql(t,i){const e=this.cl.indexOf(t);yh(-1!==e,"removeDataSource: invalid data source"),this.cl.splice(e,1),i||this.cl.forEach((t,i)=>t.ls(i));const s=Mh(t.Ft()).ma();if(this.wo.has(s)){const i=wh(this.wo.get(s)),e=i.indexOf(t);-1!==e&&(i.splice(e,1),0===i.length&&this.wo.delete(s))}const n=t.Ft();n&&n.Ma().indexOf(t)>=0&&(n.Ql(t),this.Fo(n)),this.fl=null}qn(t){return t===this.Po?"left":t===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(t,i){t.no(i)}$o(t,i){t.eo(i),this.Ao()}qo(t){t.ro()}Yo(t,i){t.ho(i)}jo(t,i){t.ao(i),this.Ao()}Ko(t){t.lo()}Ao(){this.cl.forEach(t=>{t.Ns()})}ks(){let t=null;return this.ts.N().rightPriceScale.visible&&0!==this.ko.Ma().length?t=this.ko:this.ts.N().leftPriceScale.visible&&0!==this.Po.Ma().length?t=this.Po:0!==this.cl.length&&(t=this.cl[0].Ft()),null===t&&(t=this.ko),t}$n(){let t=null;return this.ts.N().rightPriceScale.visible?t=this.ko:this.ts.N().leftPriceScale.visible&&(t=this.Po),t}Fo(t){null!==t&&t.Tl()&&this.Xo(t)}Zo(t){const i=this.uh.Pe();t.yl({sn:!0}),null!==i&&t.do(i),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach(t=>{this.Un(t)&&this.Fo(t.Ft())}),this.Ao(),this.ts.ar()}Dt(){return null===this.fl&&(this.fl=Cr(this.cl)),this.fl}Qo(t,i){i=cr(i,0,this.cl.length-1);const e=this.cl.indexOf(t);yh(-1!==e,"setSeriesOrder: invalid data source"),this.cl.splice(e,1),this.cl.splice(i,0,t),this.cl.forEach((t,i)=>t.ls(i)),this.fl=null;for(const s of[this.Po,this.ko])s.Jl(),s.wa();this.ts.ar()}Bt(){return this.Dt().filter(zr)}t_(){return this.xo}i_(){return this.Co}_a(t){this.yh.push(new Qo(t))}ua(t){this.yh=this.yh.filter(i=>i.oh()!==t),t.detached&&t.detached(),this.ts.ar()}s_(){return this.yh}sa(t,i){return this.yh.map(e=>e.jn(t,i)).filter(t=>null!==t)}Xo(t){const i=t.co();if(i&&i.length>0&&!this.uh.Ki()){const i=this.uh.Pe();null!==i&&t.do(i)}t.Ns()}No(t,i,e){let s=this.Do(i);if(null===s&&(s=this.yo(i,this.ts.N().overlayPriceScales)),this.cl.splice(e,0,t),!ao(i)){const e=this.wo.get(i)||[];e.push(t),this.wo.set(i,e)}t.ls(e),s.Gl(t),t._s(s),this.Fo(s),this.fl=null}To(t,i,e){i.ie!==e.ie&&this.Xo(t)}yo(t,i){const e={visible:!0,autoScale:!0,...Oh(i)},s=new Or(t,e,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return s.Al(this.$t()),s}}function Rr(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function Vr(t,i,e,s){for(const n of t){const t=n.Tt(s);if(null!==t&&t.jn){const s=t.jn(i,e);if(null!==s)return{a_:n,e_:s}}}return null}function Lr(t){return void 0!==t.Fs}function Fr(t,i,e){const s=[t,...t.Dt()],n=function(t,i,e){let s,n;for(const r of t){const t=r.sa?.(i,e)??[];for(const i of t)h=i.zOrder,o=s?.zOrder,(!o||"top"===h&&"top"!==o||"normal"===h&&"bottom"===o)&&(s=i,n=r)}var h,o;return s&&n?{r_:s,n_:n}:null}(s,i,e);if("top"===n?.r_.zOrder)return Rr(n);for(const h of s){if(n&&n.n_===h&&"bottom"!==n.r_.zOrder&&!n.r_.isBackground)return Rr(n);if(Lr(h)){const s=Vr(h.Fs(t),i,e,t);if(null!==s)return{n_:h,a_:s.a_,e_:s.e_}}if(n&&n.n_===h&&"bottom"!==n.r_.zOrder&&n.r_.isBackground)return Rr(n)}return n?.r_?Rr(n):null}class Nr{constructor(t,i,e=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=t,this.o_=i,this.Vn=e}__(t){const i=t.time,e=this.o_.cacheKey(i),s=this.Dn.get(e);if(void 0!==s)return s.u_;if(this.yn===this.Vn){const t=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(wh(t)),this.Tn++,this.yn--}const n=this.l_(t);return this.Dn.set(e,{u_:n,An:this.kn}),this.Rn.set(this.kn,e),this.yn++,this.kn++,n}}class Ar{constructor(t,i){yh(t<=i,"right should be >= left"),this.c_=t,this.d_=i}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(t){return this.c_<=t&&t<=this.d_}He(t){return this.c_===t.Uh()&&this.d_===t.bi()}}function Wr(t,i){return null===t||null===i?t===i:t.He(i)}class Br{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(t){this.v_=t,this.Dn=null}w_(t,i){this.g_(i),this.Dn=null;for(let e=i;e<t.length;++e){const i=t[e];let s=this.p_.get(i.timeWeight);void 0===s&&(s=[],this.p_.set(i.timeWeight,s)),s.push({index:e,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}M_(t,i,e,s,n){const h=Math.ceil(i/t);return null!==this.Dn&&this.Dn.b_===h&&n===this.Dn.S_&&e===this.Dn.x_||(this.Dn={S_:n,x_:e,Da:this.C_(h,e,s),b_:h}),this.Dn.Da}g_(t){if(0===t)return void this.p_.clear();const i=[];this.p_.forEach((e,s)=>{t<=e[0].index?i.push(s):e.splice(No(e,t,i=>i.index<t),1/0)});for(const e of i)this.p_.delete(e)}C_(t,i,e){let s=[];const n=t=>!i||e.has(t.index);for(const h of Array.from(this.p_.keys()).sort((t,i)=>i-t)){if(!this.p_.get(h))continue;const i=s;s=[];const e=i.length;let o=0;const r=wh(this.p_.get(h)),a=r.length;let l=1/0,c=-1/0;for(let h=0;h<a;h++){const a=r[h],u=a.index;for(;o<e;){const t=i[o],e=t.index;if(!(e<u&&n(t))){l=e;break}o++,s.push(t),c=e,l=1/0}if(l-u>=t&&u-c>=t&&n(a))s.push(a),c=u;else if(this.v_)return i}for(;o<e;o++)n(i[o])&&s.push(i[o])}return s}}class Yr{constructor(t){this.P_=t}y_(){return null===this.P_?null:new Ar(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new Yr(null)}}function Hr(t,i){return t.weight>i.weight?t:i}class jr{constructor(t,i,e,s){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new Br,this.B_=new Map,this.I_=Yr.T_(),this.E_=!0,this.A_=new Sh,this.z_=new Sh,this.L_=new Sh,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=i,this.bl=e,this.U_=i.rightOffset,this.q_=i.barSpacing,this.ts=t,this.Y_(i),this.o_=s,this.j_(),this.V_.m_(i.uniformDistribution),this.K_()}N(){return this.Ps}X_(t){Ph(this.bl,t),this.Z_(),this.j_()}hr(t,i){Ph(this.Ps,t),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),void 0!==t.barSpacing&&this.ts.dn(t.barSpacing),void 0!==t.rightOffset&&this.ts.fn(t.rightOffset),this.Y_(t),void 0===t.minBarSpacing&&void 0===t.maxBarSpacing||this.ts.dn(t.barSpacing??this.q_),void 0!==t.ignoreWhitespaceIndices&&t.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(t){return this.D_[t]?.time??null}ss(t){return this.D_[t]??null}Q_(t,i){if(this.D_.length<1)return null;if(this.o_.key(t)>this.o_.key(this.D_[this.D_.length-1].time))return i?this.D_.length-1:null;const e=No(this.D_,this.o_.key(t),(t,i)=>this.o_.key(t.time)<i);return this.o_.key(t)<this.o_.key(this.D_[e].time)?i?e:null:e}Ki(){return 0===this.Mo||0===this.D_.length||null===this.R_}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){const t=this.Pe();if(null===t)return null;const i={from:t.Uh(),to:t.bi()};return this.eu(i)}eu(t){const i=Math.round(t.from),e=Math.round(t.to),s=Mh(this.ru()),n=Mh(this.hu());return{from:Mh(this.ss(Math.max(s,i))),to:Mh(this.ss(Math.min(n,e)))}}au(t){return{from:Mh(this.Q_(t.from,!0)),to:Mh(this.Q_(t.to,!0))}}Qi(){return this.Mo}Eo(t){if(!isFinite(t)||t<=0)return;if(this.Mo===t)return;const i=this.su(),e=this.Mo;if(this.Mo=t,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&0!==e){const i=this.q_*t/e;this.q_=i}if(this.Ps.fixLeftEdge&&null!==i&&i.Uh()<=0){const i=e-t;this.U_-=Math.round(i/this.q_)+1,this.E_=!0}this.lu(),this.ou()}qt(t){if(this.Ki()||!Dh(t))return 0;const i=this._u()+this.U_-t;return this.Mo-(i+.5)*this.q_-1}uu(t,i){const e=this._u(),s=void 0===i?0:i.from,n=void 0===i?t.length:i.to;for(let h=s;h<n;h++){const i=t[h].wt,s=e+this.U_-i,n=this.Mo-(s+.5)*this.q_-1;t[h]._t=n}}cu(t,i){const e=Math.ceil(this.du(t));return i&&this.Ps.ignoreWhitespaceIndices&&!this.fu(e)?this.pu(e):e}fn(t){this.E_=!0,this.U_=t,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(t){const i=this.q_;if(this.wu(t),void 0!==this.Ps.rightOffsetPixels&&0!==i){const t=this.U_*i/this.q_;this.U_=t}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(null!==this.N_)return this.N_;const t=this.q_,i=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),e=Math.round(i/t),s=Mh(this.Pe()),n=Math.max(s.Uh(),s.Uh()-e),h=Math.max(s.bi(),s.bi()-e),o=this.V_.M_(t,i,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),r=this.ru()+e,a=this.hu()-e,l=this.Mu(),c=this.Ps.fixLeftEdge||l,u=this.Ps.fixRightEdge||l;let d=0;for(const f of o){if(!(n<=f.index&&f.index<=h))continue;let t;d<this.H_.length?(t=this.H_[d],t.coord=this.qt(f.index),t.label=this.bu(f),t.weight=f.weight):(t={needAlignCoordinate:!1,coord:this.qt(f.index),label:this.bu(f),weight:f.weight},this.H_.push(t)),this.q_>i/2&&!l?t.needAlignCoordinate=!1:t.needAlignCoordinate=c&&f.index<=r||u&&f.index>=a,d++}return this.H_.length=d,this.N_=this.H_,this.H_}Su(){let t;this.E_=!0,this.dn(this.Ps.barSpacing),t=void 0!==this.Ps.rightOffsetPixels?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(t)}xu(t){this.E_=!0,this.R_=t,this.ou(),this.G_()}Cu(t,i){const e=this.du(t),s=this.mu(),n=s+i*(s/10);this.dn(n),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(e-this.du(t)))}no(t){this.ml&&this.lo(),null===this.vl&&null===this.O_&&(this.Ki()||(this.vl=t,this.Pu()))}eo(t){if(null===this.O_)return;const i=cr(this.Mo-t,0,this.Mo),e=cr(this.Mo-Mh(this.vl),0,this.Mo);0!==i&&0!==e&&this.dn(this.O_.mu*i/e)}ro(){null!==this.vl&&(this.vl=null,this.yu())}ho(t){null===this.ml&&null===this.O_&&(this.Ki()||(this.ml=t,this.Pu()))}ao(t){if(null===this.ml)return;const i=(this.ml-t)/this.mu();this.U_=Mh(this.O_).gu+i,this.E_=!0,this.ou()}lo(){null!==this.ml&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(t,i=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const e=this.U_,s=performance.now();this.ts._n({Ru:t=>(t-s)/i>=1,Du:n=>{const h=(n-s)/i;return h>=1?t:e+(t-e)*h}})}yt(t,i){this.E_=!0,this.D_=t,this.V_.w_(t,i),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(t,i){const e=t.f_(),s=i&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-s)/e),this.U_=t.bi()-this._u(),i&&(this.U_=s?s/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){const t=this.ru(),i=this.hu();null!==t&&null!==i&&this.Eu(new Ar(t,i),!0)}zu(t){const i=new Ar(t.from,t.to);this.Eu(i)}ns(t){return void 0!==this.bl.timeFormatter?this.bl.timeFormatter(t.originalTime):this.o_.formatHorzItem(t.time)}K_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const t=this.ts.js();for(const i of t)for(const t of i.va())this.F_.set(t,!0);this.W_++}Mu(){const t=this.ts.N().handleScroll,i=this.ts.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||i.axisDoubleClickReset.time||i.axisPressedMouseMove.time||i.mouseWheel||i.pinch)}ru(){return 0===this.D_.length?null:0}hu(){return 0===this.D_.length?null:this.D_.length-1}Lu(t){return(this.Mo-1-t)/this.q_}du(t){const i=this.Lu(t),e=this._u()+this.U_-i;return Math.round(1e6*e)/1e6}wu(t){const i=this.q_;this.q_=t,this.lu(),i!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(Yr.T_());const t=this._u(),i=this.Mo/this.q_,e=this.U_+t,s=new Ar(e-i+1,e);this.Nu(new Yr(s))}lu(){const t=cr(this.q_,this.Fu(),this.Wu());this.q_!==t&&(this.q_=t,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&0!==this.D_.length?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){const t=this.Hu();null!==t&&this.U_<t&&(this.U_=t,this.E_=!0);const i=this.Uu();this.U_>i&&(this.U_=i,this.E_=!0)}Hu(){const t=this.ru(),i=this.R_;return null===t||null===i?null:t-i-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(t){let i=this.B_.get(t.weight);return void 0===i&&(i=new Nr(t=>this.$u(t),this.o_),this.B_.set(t.weight,i)),i.__(t)}$u(t){return this.o_.formatTickmark(t,this.bl)}Nu(t){const i=this.I_;this.I_=t,Wr(i.y_(),this.I_.y_())||this.A_.p(),Wr(i.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;const t=this.ru();if(null===t)return;const i=this.Pe();if(null===i)return;const e=i.Uh()-t;if(e<0){const t=this.U_-e-1;this.fn(t)}this.lu()}J_(){this.ou(),this.lu()}fu(t){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(t)||!1}pu(t){const i=function*(t){const i=Math.round(t),e=i<t;let s=1;for(;;)e?(yield i+s,yield i-s):(yield i-s,yield i+s),s++}(t),e=this.hu();for(;e;){const t=i.next().value;if(this.F_.get(t))return t;if(t<0||t>e)break}return t}Y_(t){if(void 0!==t.rightOffsetPixels){const i=t.rightOffsetPixels/(t.barSpacing||this.q_);this.ts.fn(i)}}}var $r,Ur,Jr,Qr,qr;!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}($r||($r={}));class Gr{constructor(t,i,e){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new Sh,this.Xu=new Sh,this.Zu=null,this.Gu=t,this.Ps=i,this.o_=e,this.Sl=new Ah(this.Ps.layout.colorParsers),this.Ju=new Lh(this),this.uh=new jr(this,i.timeScale,this.Ps.localization,e),this.Ct=new ro(this,i.crosshair),this.Qu=new lr(i.crosshair),i.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc(lo.gn())}ar(){this.rc(lo.wn())}Zh(){this.rc(new lo(1))}Eh(t){const i=this.hc(t);this.rc(i)}ac(){return this.ju}lc(t){if(this.ju?.n_===t?.n_&&this.ju?.e_?.Kn===t?.e_?.Kn)return;const i=this.ju;this.ju=t,null!==i&&this.Eh(i.n_),null!==t&&t.n_!==i?.n_&&this.Eh(t.n_)}N(){return this.Ps}hr(t){Ph(this.Ps,t),this.qu.forEach(i=>i.Ro(t)),void 0!==t.timeScale&&this.uh.hr(t.timeScale),void 0!==t.localization&&this.uh.X_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(t,i,e=0){const s=this.qu[e];if(void 0===s)return;if("left"===t)return Ph(this.Ps,{leftPriceScale:i}),s.Ro({leftPriceScale:i}),this.Ku.p(),void this.Ih();if("right"===t)return Ph(this.Ps,{rightPriceScale:i}),s.Ro({rightPriceScale:i}),this.Ku.p(),void this.Ih();const n=this._c(t,e);null!==n&&(n.Ft.hr(i),this.Ku.p())}_c(t,i){const e=this.qu[i];if(void 0===e)return null;const s=e.Do(t);return null!==s?{Us:e,Ft:s}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(t,i){t.Al(i),this.vu()}Eo(t){this.Mo=t,this.uh.Eo(this.Mo),this.qu.forEach(i=>i.Eo(t)),this.vu()}fc(t){1!==this.qu.length&&(yh(t>=0&&t<this.qu.length,"Invalid pane index"),this.qu.splice(t,1),this.Ih())}vc(t,i){if(this.qu.length<2)return;yh(t>=0&&t<this.qu.length,"Invalid pane index");const e=this.qu[t],s=this.qu.reduce((t,i)=>t+i.Bo(),0),n=this.qu.reduce((t,i)=>t+i.$t(),0),h=n-30*(this.qu.length-1);i=Math.min(h,Math.max(30,i));const o=s/n,r=e.$t();e.Io(i*o);let a=i-r,l=this.qu.length-1;for(const c of this.qu)if(c!==e){const t=Math.min(h,Math.max(30,c.$t()-a/l));a-=c.$t()-t,l-=1;const i=t*o;c.Io(i)}this.Ih()}mc(t,i){yh(t>=0&&t<this.qu.length&&i>=0&&i<this.qu.length,"Invalid pane index");const e=this.qu[t],s=this.qu[i];this.qu[t]=s,this.qu[i]=e,this.Ih()}wc(t,i){if(yh(t>=0&&t<this.qu.length&&i>=0&&i<this.qu.length,"Invalid pane index"),t===i)return;const[e]=this.qu.splice(t,1);this.qu.splice(i,0,e),this.Ih()}Uo(t,i,e){t.Uo(i,e)}$o(t,i,e){t.$o(i,e),this.Ah(),this.rc(this.gc(t,2))}qo(t,i){t.qo(i),this.rc(this.gc(t,2))}Yo(t,i,e){i.Tl()||t.Yo(i,e)}jo(t,i,e){i.Tl()||(t.jo(i,e),this.Ah(),this.rc(this.gc(t,2)))}Ko(t,i){i.Tl()||(t.Ko(i),this.rc(this.gc(t,2)))}Zo(t,i){t.Zo(i),this.rc(this.gc(t,2))}Mc(t){this.uh.no(t)}bc(t,i){const e=this.Et();if(e.Ki()||0===i)return;const s=e.Qi();t=Math.max(1,Math.min(t,s)),e.Cu(t,i),this.vu()}Sc(t){this.xc(0),this.Cc(t),this.Pc()}yc(t){this.uh.eo(t),this.vu()}kc(){this.uh.ro(),this.ar()}xc(t){this.uh.ho(t)}Cc(t){this.uh.ao(t),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(t,i,e,s,n){this.Ct.Vs(t,i);let h=NaN,o=this.uh.cu(t,!0);const r=this.uh.Pe();null!==r&&(o=Math.min(Math.max(r.Uh(),o),r.bi()));const a=s.ks(),l=a.zt();if(null!==l&&(h=a.Ts(i,l)),h=this.Qu.ga(h,o,s),this.Ct.As(o,h,s),this.Zh(),!n){const n=Fr(s,t,i);this.lc(n&&{n_:n.n_,e_:n.e_,h_:n.h_||null}),this.Xu.p(this.Ct.It(),{x:t,y:i},e)}}Rc(t,i,e){const s=e.ks(),n=s.zt(),h=s.Nt(t,Mh(n)),o=this.uh.Q_(i,!0),r=this.uh.qt(Mh(o));this.Tc(r,h,null,e,!0)}Dc(t){this.uc().Ls(),this.Zh(),t||this.Xu.p(null,null,null)}Ah(){const t=this.Ct.Us();if(null!==t){const i=this.Ct.Is(),e=this.Ct.Es();this.Tc(i,e,null,t)}this.Ct.Ns()}Vc(t,i,e){const s=this.uh.Rs(0);void 0!==i&&void 0!==e&&this.uh.yt(i,e);const n=this.uh.Rs(0),h=this.uh._u(),o=this.uh.Pe();if(null!==o&&null!==s&&null!==n){const i=o.Te(h),r=this.o_.key(s)>this.o_.key(n),a=null!==t&&t>h&&!r,l=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,c=i&&(!(void 0===e)||l)&&this.uh.N().shiftVisibleRangeOnNewBar;if(a&&!c){const i=t-h;this.uh.fn(this.uh.gu()-i)}}this.uh.xu(t)}Lh(t){null!==t&&t.Jo()}Hn(t){if(t instanceof Ir)return t;const i=this.qu.find(i=>i.Dt().includes(t));return void 0===i?null:i}vu(){this.qu.forEach(t=>t.Jo()),this.Ah()}m(){this.qu.forEach(t=>t.m()),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(t,i){const e=this.tc(i);this.Ec(t,e),this.Yu.push(t),1===this.Yu.length?this.Ih():this.ar()}Ac(t){const i=this.Hn(t),e=this.Yu.indexOf(t);yh(-1!==e,"Series not found");const s=Mh(i);this.Yu.splice(e,1),s.Ql(t),t.m&&t.m(),this.uh.K_(),this.zc(s)}Bh(t,i){const e=Mh(this.Hn(t));e.Ql(t,!0),e.Gl(t,i,!0)}Au(){const t=lo.wn();t.rn(),this.rc(t)}Lc(t){const i=lo.wn();i.ln(t),this.rc(i)}cn(){const t=lo.wn();t.cn(),this.rc(t)}dn(t){const i=lo.wn();i.dn(t),this.rc(i)}fn(t){const i=lo.wn();i.fn(t),this.rc(i)}_n(t){const i=lo.wn();i._n(t),this.rc(i)}hn(){const t=lo.wn();t.hn(),this.rc(t)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(t,i){if(yh(i>=0,"Index should be greater or equal to 0"),i===this.Fc(t))return;const e=Mh(this.Hn(t));e.Ql(t);const s=this.tc(i);this.Ec(t,s),0===e.Ma().length&&this.zc(e),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(t){const i=this.ec,e=this.sc;if(i===e)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.Zu||this.Zu.mr!==e||this.Zu.wr!==i)this.Zu={mr:e,wr:i,Hc:new Map};else{const i=this.Zu.Hc.get(t);if(void 0!==i)return i}const s=this.Sl.tt(e,i,t/100);return this.Zu.Hc.set(t,s),s}Uc(t){return this.qu.indexOf(t)}Xi(){return this.Sl}$c(){return this.qc()}qc(t){const i=new Ir(this.uh,this);this.qu.push(i);const e=t??this.qu.length-1,s=lo.gn();return s.Qs(e,{tn:0,sn:!0}),this.rc(s),i}tc(t){return yh(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.qu.length,t))<this.qu.length?this.qu[t]:this.qc(t)}Fc(t){return this.qu.findIndex(i=>i.Oo().includes(t))}gc(t,i){const e=new lo(i);if(null!==t){const s=this.qu.indexOf(t);e.Qs(s,{tn:i})}return e}hc(t,i){return void 0===i&&(i=2),this.gc(this.Hn(t),i)}rc(t){this.Gu&&this.Gu(t),this.qu.forEach(t=>t.i_().lr().yt())}Ec(t,i){const e=t.N().priceScaleId,s=void 0!==e?e:this.Oc();i.Gl(t,s),ao(s)||t.hr(t.N())}nc(t){const i=this.Ps.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color}zc(t){!t.Lo()&&0===t.Ma().length&&this.qu.length>1&&this.qu.splice(this.Uc(t),1)}}function Kr(t){if(t>=1)return 0;let i=0;for(;i<8;i++){const e=Math.round(t);if(Math.abs(e-t)<1e-8)return i;t*=10}return i}function Xr(t){return!Ch(t)&&!Th(t)}function Zr(t){return Ch(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(Ur||(Ur={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Jr||(Jr={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Qr||(Qr={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(qr||(qr={}));const ta=t=>t.getUTCFullYear();class ia{constructor(t="yyyy-MM-dd",i="default"){this.Yc=t,this.jc=i}__(t){return function(t,i,e){return i.replace(/yyyy/g,(s=t,uo(ta(s),4))).replace(/yy/g,(t=>uo(ta(t)%100,2))(t)).replace(/MMMM/g,((t,i)=>new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(t,e)).replace(/MMM/g,((t,i)=>new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(t,e)).replace(/MM/g,(t=>uo(t.getUTCMonth()+1,2))(t)).replace(/dd/g,(t=>uo(t.getUTCDate(),2))(t));var s}(t,this.Yc,this.jc)}}class ea{constructor(t){this.Kc=t||"%h:%m:%s"}__(t){return this.Kc.replace("%h",uo(t.getUTCHours(),2)).replace("%m",uo(t.getUTCMinutes(),2)).replace("%s",uo(t.getUTCSeconds(),2))}}const sa={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class na{constructor(t={}){const i={...sa,...t};this.Qc=new ia(i.Xc,i.Jc),this.td=new ea(i.Zc),this.sd=i.Gc}__(t){return`${this.Qc.__(t)}${this.sd}${this.td.__(t)}`}}function ha(t){return 60*t*60*1e3}function oa(t){return 60*t*1e3}const ra=[{nd:1e3,ed:10},{nd:oa(1),ed:20},{nd:oa(5),ed:21},{nd:oa(30),ed:22},{nd:ha(1),ed:30},{nd:ha(3),ed:31},{nd:ha(6),ed:32},{nd:ha(12),ed:33}];function aa(t,i){if(t.getUTCFullYear()!==i.getUTCFullYear())return 70;if(t.getUTCMonth()!==i.getUTCMonth())return 60;if(t.getUTCDate()!==i.getUTCDate())return 50;for(let e=ra.length-1;e>=0;--e)if(Math.floor(i.getTime()/ra[e].nd)!==Math.floor(t.getTime()/ra[e].nd))return ra[e].ed;return 0}function la(t){let i=t;if(Th(t)&&(i=ua(t)),!Xr(i))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(i.year,i.month-1,i.day,0,0,0,0));return{rd:Math.round(e.getTime()/1e3),hd:i}}function ca(t){if(!Zr(t))throw new Error("time must be of type isUTCTimestamp");return{rd:t}}function ua(t){const i=new Date(t);if(isNaN(i.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function da(t){Th(t.time)&&(t.time=ua(t.time))}class fa{options(){return this.Ps}setOptions(t){this.Ps=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?t.forEach(da):da(t)}createConverterToInternalObj(t){return Mh(0===(i=t).length?null:Xr(i[0].time)||Th(i[0].time)?la:ca);var i}key(t){return"object"==typeof t&&"rd"in t?t.rd:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const i=t;return void 0===i.hd?new Date(1e3*i.rd).getTime():new Date(Date.UTC(i.hd.year,i.hd.month-1,i.hd.day)).getTime()}convertHorzItemToInternal(t){return Zr(i=t)?ca(i):Xr(i)?la(i):la(ua(i));var i}updateFormatter(t){if(!this.Ps)return;const i=t.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new na({Xc:i,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:t.locale}):this.ad=new ia(i,t.locale)}formatHorzItem(t){const i=t;return this.ad.__(new Date(1e3*i.rd))}formatTickmark(t,i){const e=function(t,i,e){switch(t){case 0:case 10:return i?e?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return i?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),s=this.Ps.timeScale;if(void 0!==s.tickMarkFormatter){const n=s.tickMarkFormatter(t.originalTime,e,i.locale);if(null!==n)return n}return function(t,i,e){const s={};switch(i){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}const n=void 0===t.hd?new Date(1e3*t.rd):new Date(Date.UTC(t.hd.year,t.hd.month-1,t.hd.day));return new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()).toLocaleString(e,s)}(t.time,e,i.locale)}maxTickMarkWeight(t){let i=t.reduce(Hr,t[0]).weight;return i>30&&i<50&&(i=30),i}fillWeightsForPoints(t,i){!function(t,i=0){if(0===t.length)return;let e=0===i?null:t[i-1].time.rd,s=null!==e?new Date(1e3*e):null,n=0;for(let h=i;h<t.length;++h){const i=t[h],o=new Date(1e3*i.time.rd);null!==s&&(i.timeWeight=aa(o,s)),n+=i.time.rd-(e||i.time.rd),e=i.time.rd,s=o}if(0===i&&t.length>1){const i=Math.ceil(n/(t.length-1)),e=new Date(1e3*(t[0].time.rd-i));t[0].timeWeight=aa(new Date(1e3*t[0].time.rd),e)}}(t,i)}static ld(t){return Ph({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const pa="undefined"!=typeof window;function ga(){return!!pa&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function ma(){return!!pa&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function va(t){return t+t%2}class xa{constructor(t,i,e){this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!ma(),this.Ld=t=>{this.Od(t)},this.Nd=t=>{if(this.Fd(t)){const i=this.Wd(t);if(++this.dd,this.fd&&this.dd>1){const{Hd:e}=this.Ud(ya(t),this.pd);e<30&&!this.Sd&&this.$d(i,this.Yd.qd),this.jd()}}else{const i=this.Wd(t);if(++this.od,this._d&&this.od>1){const{Hd:e}=this.Ud(ya(t),this.ud);e<5&&!this.bd&&this.Kd(i,this.Yd.Xd),this.Zd()}}},this.Gd=t,this.Yd=i,this.Ps=e,this.Jd()}m(){null!==this.xd&&(this.xd(),this.xd=null),null!==this.Cd&&(this.Cd(),this.Cd=null),null!==this.yd&&(this.yd(),this.yd=null),null!==this.kd&&(this.kd(),this.kd=null),null!==this.Td&&(this.Td(),this.Td=null),null!==this.Pd&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(t){this.yd&&this.yd();const i=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",i)},this.Gd.addEventListener("mousemove",i),this.Fd(t))return;const e=this.Wd(t);this.Kd(e,this.Yd.sf),this.zd=!0}Zd(){null!==this._d&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}jd(){null!==this.fd&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}if(t){if(this.Id||null!==this.gd)return;if(this.Fd(t))return;const i=this.Wd(t);this.Kd(i,this.Yd.nf),this.zd=!0}ef(t){const i=Ma(t.changedTouches,Mh(this.Ad));if(null===i)return;if(this.Ed=wa(t),null!==this.Rd)return;if(this.Bd)return;this.Vd=!0;const e=this.Ud(ya(i),Mh(this.gd)),{rf:s,hf:n,Hd:h}=e;if(this.Md||!(h<5)){if(!this.Md){const t=.5*s,i=n>=t&&!this.Ps.af(),e=t>n&&!this.Ps.lf();i||e||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){const e=this.Wd(t,i);this.$d(e,this.Yd._f),_a(t)}}}uf(t){if(0!==t.button)return;const i=this.Ud(ya(t),Mh(this.wd)),{Hd:e}=i;if(e>=5&&(this.bd=!0,this.Zd()),this.bd){const i=this.Wd(t);this.Kd(i,this.Yd.cf)}}Ud(t,i){const e=Math.abs(i._t-t._t),s=Math.abs(i.ut-t.ut);return{rf:e,hf:s,Hd:e+s}}df(t){let i=Ma(t.changedTouches,Mh(this.Ad));if(null===i&&0===t.touches.length&&(i=t.changedTouches[0]),null===i)return;this.Ad=null,this.Ed=wa(t),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);const e=this.Wd(t,i);if(this.$d(e,this.Yd.ff),++this.dd,this.fd&&this.dd>1){const{Hd:t}=this.Ud(ya(i),this.pd);t<30&&!this.Sd&&this.$d(e,this.Yd.qd),this.jd()}else this.Sd||(this.$d(e,this.Yd.pf),this.Yd.pf&&_a(t));0===this.dd&&_a(t),0===t.touches.length&&this.md&&(this.md=!1,_a(t))}Od(t){if(0!==t.button)return;const i=this.Wd(t);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),ga()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(t))if(this.Kd(i,this.Yd.vf),++this.od,this._d&&this.od>1){const{Hd:e}=this.Ud(ya(t),this.ud);e<5&&!this.bd&&this.Kd(i,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(i,this.Yd.mf)}Qd(){null!==this.vd&&(clearTimeout(this.vd),this.vd=null)}wf(t){if(null!==this.Ad)return;const i=t.changedTouches[0];this.Ad=i.identifier,this.Ed=wa(t);const e=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=ya(i),this.Td&&(this.Td(),this.Td=null);{const i=this.ef.bind(this),s=this.df.bind(this);this.Td=()=>{e.removeEventListener("touchmove",i),e.removeEventListener("touchend",s)},e.addEventListener("touchmove",i,{passive:!1}),e.addEventListener("touchend",s,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,t),240)}const s=this.Wd(t,i);this.$d(s,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=ya(i))}bf(t){if(0!==t.button)return;const i=this.Gd.ownerDocument.documentElement;ga()&&i.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=ya(t),this.kd&&(this.kd(),this.kd=null);{const t=this.uf.bind(this),e=this.Od.bind(this);this.kd=()=>{i.removeEventListener("mousemove",t),i.removeEventListener("mouseup",e)},i.addEventListener("mousemove",t),i.addEventListener("mouseup",e)}if(this.Id=!0,this.Fd(t))return;const e=this.Wd(t);this.Kd(e,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=ya(t))}Jd(){this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{const t=this.Gd.ownerDocument,i=t=>{this.Yd.xf&&(t.composed&&this.Gd.contains(t.composedPath()[0])||t.target&&this.Gd.contains(t.target)||this.Yd.xf())};this.Cd=()=>{t.removeEventListener("touchstart",i)},this.xd=()=>{t.removeEventListener("mousedown",i)},t.addEventListener("mousedown",i),t.addEventListener("touchstart",i,{passive:!0})}ma()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),function(t){pa&&void 0!==window.chrome&&t.addEventListener("mousedown",t=>{if(1===t.button)return t.preventDefault(),!1})}(this.Gd),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",()=>{},{passive:!1})}Pf(){void 0===this.Yd.yf&&void 0===this.Yd.kf&&void 0===this.Yd.Tf||(this.Gd.addEventListener("touchstart",t=>this.Rf(t.touches),{passive:!0}),this.Gd.addEventListener("touchmove",t=>{if(2===t.touches.length&&null!==this.Rd&&void 0!==this.Yd.kf){const i=ba(t.touches[0],t.touches[1])/this.Dd;this.Yd.kf(this.Rd,i),_a(t)}},{passive:!1}),this.Gd.addEventListener("touchend",t=>{this.Rf(t.touches)}))}Rf(t){1===t.length&&(this.Vd=!1),2!==t.length||this.Vd||this.md?this.Df():this.Vf(t)}Vf(t){const i=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,ut:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.Dd=ba(t[0],t[1]),void 0!==this.Yd.yf&&this.Yd.yf(),this.Qd()}Df(){null!==this.Rd&&(this.Rd=null,void 0!==this.Yd.Tf&&this.Yd.Tf())}Cf(t){if(this.yd&&this.yd(),this.Fd(t))return;if(!this.zd)return;const i=this.Wd(t);this.Kd(i,this.Yd.Bf),this.zd=!ma()}gf(t){const i=Ma(t.touches,Mh(this.Ad));if(null===i)return;const e=this.Wd(t,i);this.$d(e,this.Yd.If),this.Sd=!0,this.md=!0}Fd(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:wa(t)<this.Ed+500}$d(t,i){i&&i.call(this.Yd,t)}Kd(t,i){i&&i.call(this.Yd,t)}Wd(t,i){const e=i||t,s=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,localX:e.clientX-s.left,localY:e.clientY-s.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Ef:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,Af:t.type,zf:e.target,a_:t.view,Lf:()=>{"touchstart"!==t.type&&_a(t)}}}}function ba(t,i){const e=t.clientX-i.clientX,s=t.clientY-i.clientY;return Math.sqrt(e*e+s*s)}function _a(t){t.cancelable&&t.preventDefault()}function ya(t){return{_t:t.pageX,ut:t.pageY}}function wa(t){return t.timeStamp||performance.now()}function Ma(t,i){for(let e=0;e<t.length;++e)if(t[e].identifier===i)return t[e];return null}class ka{constructor(t,i,e){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=t,this.Uf=t.$f()[i],this.qf=t.$f()[e],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){null!==this.Nf&&this.Nf.m()}Zf(){return this.Yf}Gf(){return s({width:this.Uf.Gf().width,height:1})}Jf(){return s({width:this.Uf.Jf().width,height:1*window.devicePixelRatio})}Qf(t,i,e){const s=this.Jf();t.fillStyle=this.Hf.N().layout.panes.separatorColor,t.fillRect(i,e,s.width,s.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(null!==this.Of&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),null!==this.Nf&&(this.Nf.m(),this.Nf=null)))}Xf(){const t=document.createElement("div"),i=t.style;i.position="fixed",i.display="none",i.zIndex="49",i.top="0",i.left="0",i.width="100%",i.height="100%",i.cursor="row-resize",this.jf.appendChild(t);const e=document.createElement("div"),s=e.style;s.position="absolute",s.zIndex="50",s.top="-4px",s.height="9px",s.width="100%",s.backgroundColor="",s.cursor="row-resize",this.jf.appendChild(e);const n={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new xa(e,n,{af:()=>!1,lf:()=>!0}),this.Of={ip:e,tp:t}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(t){null!==this.Of&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(t){null!==this.Of&&null===this.Wf&&(this.Of.ip.style.backgroundColor="")}ep(t){if(null===this.Of)return;const i=this.Uf.ap().Bo()+this.qf.ap().Bo(),e=i/(this.Uf.Gf().height+this.qf.Gf().height),s=30*e;i<=2*s||(this.Wf={lp:t.pageY,op:this.Uf.ap().Bo(),_p:i-s,up:i,cp:e,dp:s},this.Of.tp.style.display="block")}rp(t){const i=this.Wf;if(null===i)return;const e=(t.pageY-i.lp)*i.cp,s=cr(i.op+e,i.dp,i._p);this.Uf.ap().Io(s),this.qf.ap().Io(i.up-s),this.Hf.Qt().Ih()}hp(t){null!==this.Wf&&null!==this.Of&&(this.Wf=null,this.Of.tp.style.display="none")}}function Sa(t,i){return t.fp-i.fp}function Pa(t,i,e){const s=(t.fp-i.fp)/(t.wt-i.wt);return Math.sign(s)*Math.min(Math.abs(s),e)}class Ca{constructor(t,i,e,s){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=t,this.xp=i,this.Cp=e,this.Mn=s}Pp(t,i){if(null!==this.pp){if(this.pp.wt===i)return void(this.pp.fp=t);if(Math.abs(this.pp.fp-t)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:i,fp:t}}le(t,i){if(null===this.pp||null===this.vp)return;if(i-this.pp.wt>50)return;let e=0;const s=Pa(this.pp,this.vp,this.xp),n=Sa(this.pp,this.vp),h=[s],o=[n];if(e+=n,null!==this.mp){const t=Pa(this.vp,this.mp,this.xp);if(Math.sign(t)===Math.sign(s)){const i=Sa(this.vp,this.mp);if(h.push(t),o.push(i),e+=i,null!==this.wp){const t=Pa(this.mp,this.wp,this.xp);if(Math.sign(t)===Math.sign(s)){const i=Sa(this.mp,this.wp);h.push(t),o.push(i),e+=i}}}}let r=0;for(let a=0;a<h.length;++a)r+=o[a]/e*h[a];Math.abs(r)<this.Sp||(this.gp={fp:t,wt:i},this.bp=r,this.Mp=function(t,i){const e=Math.log(i);return Math.log(1*e/-t)/e}(Math.abs(r),this.Cp))}Du(t){const i=Mh(this.gp),e=t-i.wt;return i.fp+this.bp*(Math.pow(this.Cp,e)-1)/Math.log(this.Cp)}Ru(t){return null===this.gp||this.yp(t)===this.Mp}yp(t){const i=t-Mh(this.gp).wt;return Math.min(i,this.Mp)}}class Da{constructor(t,i){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=t,this.Vp=i,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){const t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark","dark"===this.Rp),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function Ta(t,i){const e=Mh(t.ownerDocument).createElement("canvas");t.appendChild(e);const s=o(e,{options:{allowResizeObserver:!0},transform:(t,i)=>({width:Math.max(t.width,i.width),height:Math.max(t.height,i.height)})});return s.resizeCanvasElement(i),s}function Ea(t){t.width=1,t.height=1,t.getContext("2d")?.clearRect(0,0,1,1)}function Oa(t,i,e,s){t.ih&&t.ih(i,e,s)}function za(t,i,e,s){t.nt(i,e,s)}function Ia(t,i,e,s){const n=t(e,s);for(const h of n){const t=h.Tt(s);null!==t&&i(t)}}function Ra(t,i){return e=>void 0===e.Ft||(e.Ft()?.ma()??"")!==i?[]:e.ta?.(t)??[]}function Va(t,i,e,s){if(!t.length)return;let n=0;const h=t[0].$t(s,!0);let o=1===i?e/2-(t[0].Fi()-h/2):t[0].Fi()-h/2-e/2;o=Math.max(0,o);for(let r=1;r<t.length;r++){const h=t[r],a=t[r-1],l=a.$t(s,!1),c=h.Fi(),u=a.Fi();if(1===i?c>u-l:c<u+l){const s=u-l*i;h.Wi(s);const r=s-i*l/2;if((1===i?r<0:r>e)&&o>0){const s=1===i?-1-r:r-e,h=Math.min(s,o);for(let e=n;e<t.length;e++)t[e].Wi(t[e].Fi()+i*h);o-=h}}else n=r,o=1===i?u-l-c:c-(u+l)}}class La{constructor(t,i,e,n){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new vo(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=t,this.Ps=i,this.Ml=i.layout,this.Ju=e,this.jp="left"===n,this.Kp=Ra("normal",n),this.Xp=Ra("top",n),this.Zp=Ra("bottom",n),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=Ta(this.jf,s({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const h=this.Gp.canvasElement;h.style.position="absolute",h.style.zIndex="1",h.style.left="0",h.style.top="0",this.Jp=Ta(this.jf,s({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const o=this.Jp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const r={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new xa(this.Jp.canvasElement,r,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),Ea(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Ea(this.Gp.canvasElement),this.Gp.dispose(),null!==this.Yi&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){const t=this.Ju.N();return this.Wp!==t.k&&(this.Fp.Bn(),this.Wp=t.k),t}nv(){if(null===this.Yi)return 0;let t=0;const i=this.sv(),e=Mh(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));e.save();const s=this.Yi.Da();e.font=this.ev(),s.length>0&&(t=Math.max(this.Fp.Vi(e,s[0].Za),this.Fp.Vi(e,s[s.length-1].Za)));const n=this.rv();for(let a=n.length;a--;){const i=this.Fp.Vi(e,n[a].ri());i>t&&(t=i)}const h=this.Yi.zt();if(null!==h&&null!==this.Op&&2!==(o=this.Ps.crosshair).mode&&o.horzLine.visible&&o.horzLine.labelVisible){const i=this.Yi.Ts(1,h),s=this.Yi.Ts(this.Op.height-2,h);t=Math.max(t,this.Fp.Vi(e,this.Yi.Zi(Math.floor(Math.min(i,s))+.11111111111111,h)),this.Fp.Vi(e,this.Yi.Zi(Math.ceil(Math.max(i,s))-.11111111111111,h)))}var o;e.restore();const r=t||34;return va(Math.ceil(i.S+i.C+i.B+i.I+5+r))}hv(t){null!==this.Op&&n(this.Op,t)||(this.Op=t,this.Up=!0,this.Gp.resizeCanvasElement(t),this.Jp.resizeCanvasElement(t),this.Up=!1,this.jf.style.width=`${t.width}px`,this.jf.style.height=`${t.height}px`)}av(){return Mh(this.Op).width}_s(t){this.Yi!==t&&(null!==this.Yi&&this.Yi.so().u(this),this.Yi=t,t.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){const t=this.Pt.ap();this.Pt.qp().Qt().Zo(t,Mh(this.Ft()))}lv(t){if(null===this.Op)return;const i={colorSpace:this.Pt.qp().N().layout.colorSpace};if(1!==t){this.ov(),this.Gp.applySuggestedBitmapSize();const t=h(this.Gp,i);null!==t&&(t.useBitmapCoordinateSpace(t=>{this._v(t),this.uv(t)}),this.Pt.cv(t,this.Zp),this.dv(t),this.Pt.cv(t,this.Kp),this.fv(t))}this.Jp.applySuggestedBitmapSize();const e=h(this.Jp,i);null!==e&&(e.useBitmapCoordinateSpace(({context:t,bitmapSize:i})=>{t.clearRect(0,0,i.width,i.height)}),this.pv(e),this.Pt.cv(e,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(t,i,e,s){const n=this.Jf();if(n.width>0&&n.height>0&&(t.drawImage(this.Gp.canvasElement,i,e),s)){const s=this.Jp.canvasElement;t.drawImage(s,i,e)}}yt(){this.Yi?.Da()}ep(t){if(null===this.Yi||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const i=this.Pt.qp().Qt(),e=this.Pt.ap();this.Np=!0,i.Uo(e,this.Yi,t.localY)}rp(t){if(null===this.Yi||!this.Ps.handleScale.axisPressedMouseMove.price)return;const i=this.Pt.qp().Qt(),e=this.Pt.ap(),s=this.Yi;i.$o(e,s,t.localY)}Qp(){if(null===this.Yi||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.qp().Qt(),i=this.Pt.ap(),e=this.Yi;this.Np&&(this.Np=!1,t.qo(i,e))}hp(t){if(null===this.Yi||!this.Ps.handleScale.axisPressedMouseMove.price)return;const i=this.Pt.qp().Qt(),e=this.Pt.ap();this.Np=!1,i.qo(e,this.Yi)}tv(t){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(t){null!==this.Yi&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(t){this.vv(0)}rv(){const t=[],i=null===this.Yi?void 0:this.Yi;return(e=>{for(let s=0;s<e.length;++s){const n=e[s].Ws(this.Pt.ap(),i);for(let i=0;i<n.length;i++)t.push(n[i])}})(this.Pt.ap().Dt()),t}_v({context:t,bitmapSize:i}){const{width:e,height:s}=i,n=this.Pt.ap().Qt(),h=n.$(),o=n.Wc();h===o?qh(t,0,0,e,s,h):Xh(t,0,0,e,s,h,o)}uv({context:t,bitmapSize:i,horizontalPixelRatio:e}){if(null===this.Op||null===this.Yi||!this.Yi.N().borderVisible)return;t.fillStyle=this.Yi.N().borderColor;const s=Math.max(1,Math.floor(this.sv().S*e));let n;n=this.jp?i.width-s:0,t.fillRect(n,0,s,i.height)}dv(t){if(null===this.Op||null===this.Yi)return;const i=this.Yi.Da(),e=this.Yi.N(),s=this.sv(),n=this.jp?this.Op.width-s.C:0;e.borderVisible&&e.ticksVisible&&t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:h,verticalPixelRatio:o})=>{t.fillStyle=e.borderColor;const r=Math.max(1,Math.floor(o)),a=Math.floor(.5*o),l=Math.round(s.C*h);t.beginPath();for(const e of i)t.rect(Math.floor(n*h),Math.round(e.Pa*o)-a,l,r);t.fill()}),t.useMediaCoordinateSpace(({context:t})=>{t.font=this.ev(),t.fillStyle=e.textColor??this.Ml.textColor,t.textAlign=this.jp?"right":"left",t.textBaseline="middle";const h=this.jp?Math.round(n-s.B):Math.round(n+s.C+s.B),o=i.map(i=>this.Fp.Di(t,i.Za));for(let e=i.length;e--;){const s=i[e];t.fillText(s.Za,h,s.Pa+o[e])}})}ov(){if(null===this.Op||null===this.Yi)return;let t=this.Op.height/2;const i=[],e=this.Yi.Dt().slice(),s=this.Pt.ap(),n=this.sv();this.Yi===s.$n()&&this.Pt.ap().Dt().forEach(t=>{s.Un(t)&&e.push(t)});const h=this.Yi.Ma()[0],o=this.Yi;e.forEach(e=>{const n=e.Ws(s,o);n.forEach(t=>{t.Wi(null),t.Hi()&&i.push(t)}),h===e&&n.length>0&&(t=n[0].Ii())}),i.forEach(t=>t.Wi(t.Ii())),this.Yi.N().alignLabels&&this.mv(i,n,t)}mv(t,i,e){if(null===this.Op)return;const s=t.filter(t=>t.Ii()<=e),n=t.filter(t=>t.Ii()>e);s.sort((t,i)=>i.Ii()-t.Ii()),s.length&&n.length&&n.push(s[0]),n.sort((t,i)=>t.Ii()-i.Ii());for(const h of t){const t=Math.floor(h.$t(i)/2),e=h.Ii();e>-t&&e<t&&h.Wi(t),e>this.Op.height-t&&e<this.Op.height+t&&h.Wi(this.Op.height-t)}Va(s,1,this.Op.height,i),Va(n,-1,this.Op.height,i)}fv(t){if(null===this.Op)return;const i=this.rv(),e=this.sv(),s=this.jp?"right":"left";i.forEach(i=>{i.Ui()&&i.Tt(Mh(this.Yi)).nt(t,e,this.Fp,s)})}pv(t){if(null===this.Op||null===this.Yi)return;const i=this.Pt.qp().Qt(),e=[],s=this.Pt.ap(),n=i.uc().Ws(s,this.Yi);n.length&&e.push(n);const h=this.sv(),o=this.jp?"right":"left";e.forEach(i=>{i.forEach(i=>{i.Tt(Mh(this.Yi)).nt(t,h,this.Fp,o)})})}vv(t){this.jf.style.cursor=1===t?"ns-resize":"default"}_l(){const t=this.nv();this.Hp<t&&this.Pt.qp().Qt().Ih(),this.Hp=t}ev(){return Vh(this.Ml.fontSize,this.Ml.fontFamily)}}function Fa(t,i){return t.Jh?.(i)??[]}function Na(t,i){return t.Fs?.(i)??[]}function Aa(t,i){return t.us?.(i)??[]}function Wa(t,i){return t.Xh?.(i)??[]}class Ba{constructor(t,i){this.Op=s({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new Sh,this.Cv=new Sh,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||null===this.Vv||this.ts().ar()},this.Yp=()=>{this.Up||null===this.Vv||this.ts().ar()},this.Vp=t,this.Vv=i,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(e),this.Gp=Ta(e,s({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const n=this.Gp.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jp=Ta(e,s({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const h=this.Jp.canvasElement;h.style.position="absolute",h.style.zIndex="2",h.style.left="0",h.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new xa(this.Jp.canvasElement,this,{af:()=>null===this.kv&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>null===this.kv&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){null!==this.wv&&this.wv.m(),null!==this.gv&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),Ea(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Ea(this.Gp.canvasElement),this.Gp.dispose(),null!==this.Vv&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return Mh(this.Vv)}Lv(t){null!==this.Vv&&this.Vv.t_().u(this),this.Vv=t,null!==this.Vv&&this.Vv.t_().i(Ba.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new Da(this.Iv,this.Vp),this.Mv.yt()):(this.Mv?.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(null!==this.Vv&&(this.Ov(),0!==this.ts().js().length)){if(null!==this.wv){const t=this.Vv.Wo();this.wv._s(Mh(t))}if(null!==this.gv){const t=this.Vv.Ho();this.gv._s(Mh(t))}}}Nv(){null!==this.wv&&this.wv.yt(),null!==this.gv&&this.gv.yt()}Bo(){return null!==this.Vv?this.Vv.Bo():0}Io(t){this.Vv&&this.Vv.Io(t)}sf(t){if(!this.Vv)return;this.Fv();const i=t.localX,e=t.localY;this.Wv(i,e,t)}Sf(t){this.Fv(),this.Hv(),this.Wv(t.localX,t.localY,t)}nf(t){if(!this.Vv)return;this.Fv();const i=t.localX,e=t.localY;this.Wv(i,e,t)}mf(t){null!==this.Vv&&(this.Fv(),this.Uv(t))}Xd(t){null!==this.Vv&&this.$v(this.Cv,t)}qd(t){this.Xd(t)}cf(t){this.Fv(),this.qv(t),this.Wv(t.localX,t.localY,t)}vf(t){null!==this.Vv&&(this.Fv(),this.yv=!1,this.Yv(t))}pf(t){null!==this.Vv&&this.Uv(t)}If(t){if(this.yv=!0,null===this.kv){const i={x:t.localX,y:t.localY};this.jv(i,i,t)}}Bf(t){null!==this.Vv&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(t,i){if(!this.Vp.N().handleScale.pinch)return;const e=5*(i-this.Pv);this.Pv=i,this.ts().bc(t._t,e)}Mf(t){this.yv=!1,this.Tv=null!==this.kv,this.Hv();const i=this.ts().uc();null!==this.kv&&i.Vt()&&(this.Rv={x:i.si(),y:i.ni()},this.kv={x:t.localX,y:t.localY})}_f(t){if(null===this.Vv)return;const i=t.localX,e=t.localY;if(null===this.kv)this.qv(t);else{this.Tv=!1;const s=Mh(this.Rv),n=s.x+(i-this.kv.x),h=s.y+(e-this.kv.y);this.Wv(n,h,t)}}ff(t){0===this.qp().N().trackingMode.exitMode&&(this.Tv=!0),this.Gv(),this.Yv(t)}jn(t,i){const e=this.Vv;return null===e?null:Fr(e,t,i)}Jv(t,i){Mh("left"===i?this.wv:this.gv).hv(s({width:t,height:this.Op.height}))}Gf(){return this.Op}hv(t){n(this.Op,t)||(this.Op=t,this.Up=!0,this.Gp.resizeCanvasElement(t),this.Jp.resizeCanvasElement(t),this.Up=!1,this.Iv.style.width=t.width+"px",this.Iv.style.height=t.height+"px")}Qv(){const t=Mh(this.Vv);t.Fo(t.Wo()),t.Fo(t.Ho());for(const i of t.Ma())if(t.Un(i)){const e=i.Ft();null!==e&&t.Fo(e),i.Ns()}for(const i of t.s_())i.Ns()}Jf(){return this.Gp.bitmapSize}Qf(t,i,e,s){const n=this.Jf();if(n.width>0&&n.height>0&&(t.drawImage(this.Gp.canvasElement,i,e),s)){const s=this.Jp.canvasElement;null!==t&&t.drawImage(s,i,e)}}lv(t){if(0===t)return;if(null===this.Vv)return;t>1&&this.Qv(),null!==this.wv&&this.wv.lv(t),null!==this.gv&&this.gv.lv(t);const i={colorSpace:this.Vp.N().layout.colorSpace};if(1!==t){this.Gp.applySuggestedBitmapSize();const t=h(this.Gp,i);null!==t&&(t.useBitmapCoordinateSpace(t=>{this._v(t)}),this.Vv&&(this.tm(t,Fa),this.im(t),this.tm(t,Na),this.tm(t,Aa)))}this.Jp.applySuggestedBitmapSize();const e=h(this.Jp,i);null!==e&&(e.useBitmapCoordinateSpace(({context:t,bitmapSize:i})=>{t.clearRect(0,0,i.width,i.height)}),this.sm(e),this.tm(e,Wa),this.tm(e,Aa))}nm(){return this.wv}rm(){return this.gv}cv(t,i){this.tm(t,i)}Bv(){null!==this.Vv&&this.Vv.t_().u(this),this.Vv=null}Uv(t){this.$v(this.xv,t)}$v(t,i){const e=i.localX,s=i.localY;t.v()&&t.p(this.ts().Et().cu(e),{x:e,y:s},i)}_v({context:t,bitmapSize:i}){const{width:e,height:s}=i,n=this.ts(),h=n.$(),o=n.Wc();h===o?qh(t,0,0,e,s,o):Xh(t,0,0,e,s,h,o)}im(t){const i=Mh(this.Vv),e=i.i_().lr().Tt(i);null!==e&&e.nt(t,!1)}sm(t){this.hm(t,Na,za,this.ts().uc())}tm(t,i){const e=Mh(this.Vv),s=e.Dt(),n=e.s_();for(const h of n)this.hm(t,i,Oa,h);for(const h of s)this.hm(t,i,Oa,h);for(const h of n)this.hm(t,i,za,h);for(const h of s)this.hm(t,i,za,h)}hm(t,i,e,s){const n=Mh(this.Vv),h=n.Qt().ac(),o=null!==h&&h.n_===s,r=null!==h&&o&&void 0!==h.e_?h.e_.Xn:void 0;Ia(i,i=>e(i,t,o,r),s,n)}Ov(){if(null===this.Vv)return;const t=this.Vp,i=this.Vv.Wo().N().visible,e=this.Vv.Ho().N().visible;i||null===this.wv||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),e||null===this.gv||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);const s=t.Qt().Bc();i&&null===this.wv&&(this.wv=new La(this,t.N(),s,"left"),this.Ev.appendChild(this.wv.Zf())),e&&null===this.gv&&(this.gv=new La(this,t.N(),s,"right"),this.Av.appendChild(this.gv.Zf()))}am(t){return t.Ef&&this.yv||null!==this.kv}lm(t){return Math.max(0,Math.min(t,this.Op.width-1))}om(t){return Math.max(0,Math.min(t,this.Op.height-1))}Wv(t,i,e){this.ts().Tc(this.lm(t),this.om(i),e,Mh(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(t,i,e){this.kv=t,this.Tv=!1,this.Wv(i.x,i.y,e);const s=this.ts().uc();this.Rv={x:s.si(),y:s.ni()}}ts(){return this.Vp.Qt()}Yv(t){if(!this.Sv)return;const i=this.ts(),e=this.ap();if(i.Ko(e,e.ks()),this.bv=null,this.Sv=!1,i.Pc(),null!==this.Dv){const t=performance.now(),e=i.Et();this.Dv.le(e.gu(),t),this.Dv.Ru(t)||i._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)Mh(document.activeElement).blur();else{const t=document.getSelection();null!==t&&t.removeAllRanges()}!this.Vv.ks().Ki()&&this.ts().Et().Ki()}}qv(t){if(null===this.Vv)return;const i=this.ts(),e=i.Et();if(e.Ki())return;const s=this.Vp.N(),n=s.handleScroll,h=s.kineticScroll;if((!n.pressedMouseMove||t.Ef)&&(!n.horzTouchDrag&&!n.vertTouchDrag||!t.Ef))return;const o=this.Vv.ks(),r=performance.now();if(null!==this.bv||this.am(t)||(this.bv={x:t.clientX,y:t.clientY,rd:r,_m:t.localX,um:t.localY}),null!==this.bv&&!this.Sv&&(this.bv.x!==t.clientX||this.bv.y!==t.clientY)){if(t.Ef&&h.touch||!t.Ef&&h.mouse){const t=e.mu();this.Dv=new Ca(.2/t,7/t,.997,15/t),this.Dv.Pp(e.gu(),this.bv.rd)}else this.Dv=null;o.Ki()||i.Yo(this.Vv,o,t.localY),i.xc(t.localX),this.Sv=!0}this.Sv&&(o.Ki()||i.jo(this.Vv,o,t.localY),i.Cc(t.localX),null!==this.Dv&&this.Dv.Pp(e.gu(),r))}}class Ya{constructor(t,i,e,n,h){this.xt=!0,this.Op=s({width:0,height:0}),this.$p=()=>this.lv(3),this.jp="left"===t,this.Ju=e.Bc,this.Ps=i,this.dm=n,this.fm=h,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=Ta(this.jf,s({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Ea(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(t){n(this.Op,t)||(this.Op=t,this.Gp.resizeCanvasElement(t),this.jf.style.width=`${t.width}px`,this.jf.style.height=`${t.height}px`,this.xt=!0)}lv(t){if(t<3&&!this.xt)return;if(0===this.Op.width||0===this.Op.height)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();const i=h(this.Gp,{colorSpace:this.Ps.layout.colorSpace});null!==i&&i.useBitmapCoordinateSpace(t=>{this._v(t),this.uv(t)})}Jf(){return this.Gp.bitmapSize}Qf(t,i,e){const s=this.Jf();s.width>0&&s.height>0&&t.drawImage(this.Gp.canvasElement,i,e)}uv({context:t,bitmapSize:i,horizontalPixelRatio:e,verticalPixelRatio:s}){if(!this.dm())return;t.fillStyle=this.Ps.timeScale.borderColor;const n=Math.floor(this.Ju.N().S*e),h=Math.floor(this.Ju.N().S*s),o=this.jp?i.width-n:0;t.fillRect(o,0,n,h)}_v({context:t,bitmapSize:i}){qh(t,0,0,i.width,i.height,this.fm())}}function Ha(t){return i=>i.ia?.(t)??[]}const ja=Ha("normal"),$a=Ha("top"),Ua=Ha("bottom");class Ja{constructor(t,i){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=s({width:0,height:0}),this.gm=new Sh,this.Fp=new vo(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=t,this.o_=i,this.Ps=t.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=Ta(this.Sm,s({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const e=this.Gp.canvasElement;e.style.position="absolute",e.style.zIndex="1",e.style.left="0",e.style.top="0",this.Jp=Ta(this.Sm,s({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const n=this.Jp.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new xa(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),null!==this.pm&&this.pm.m(),null!==this.vm&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),Ea(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Ea(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(t){if(this.wm)return;this.wm=!0;const i=this.Vp.Qt();!i.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&i.Mc(t.localX)}Mf(t){this.Sf(t)}xf(){const t=this.Vp.Qt();!t.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&t.kc())}cf(t){const i=this.Vp.Qt();!i.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&i.yc(t.localX)}_f(t){this.cf(t)}vf(){this.wm=!1;const t=this.Vp.Qt();t.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||t.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(t,i,e){n(this.Op,t)||(this.Op=t,this.Up=!0,this.Gp.resizeCanvasElement(t),this.Jp.resizeCanvasElement(t),this.Up=!1,this.jf.style.width=`${t.width}px`,this.jf.style.height=`${t.height}px`,this.gm.p(t)),null!==this.pm&&this.pm.hv(s({width:i,height:t.height})),null!==this.vm&&this.vm.hv(s({width:e,height:t.height}))}Tm(){const t=this.Rm();return Math.ceil(t.S+t.C+t.P+t.A+t.V+t.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(t,i,e,s){const n=this.Jf();if(n.width>0&&n.height>0&&(t.drawImage(this.Gp.canvasElement,i,e),s)){const s=this.Jp.canvasElement;t.drawImage(s,i,e)}}lv(t){if(0===t)return;const i={colorSpace:this.Ps.colorSpace};if(1!==t){this.Gp.applySuggestedBitmapSize();const e=h(this.Gp,i);null!==e&&(e.useBitmapCoordinateSpace(t=>{this._v(t),this.uv(t),this.Vm(e,Ua)}),this.dv(e),this.Vm(e,ja)),null!==this.pm&&this.pm.lv(t),null!==this.vm&&this.vm.lv(t)}this.Jp.applySuggestedBitmapSize();const e=h(this.Jp,i);null!==e&&(e.useBitmapCoordinateSpace(({context:t,bitmapSize:i})=>{t.clearRect(0,0,i.width,i.height)}),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],e),this.Vm(e,$a))}Vm(t,i){const e=this.Vp.Qt().js();for(const s of e)Ia(i,i=>Oa(i,t,!1,void 0),s,void 0);for(const s of e)Ia(i,i=>za(i,t,!1,void 0),s,void 0)}_v({context:t,bitmapSize:i}){qh(t,0,0,i.width,i.height,this.Vp.Qt().Wc())}uv({context:t,bitmapSize:i,verticalPixelRatio:e}){if(this.Vp.N().timeScale.borderVisible){t.fillStyle=this.Im();const s=Math.max(1,Math.floor(this.Rm().S*e));t.fillRect(0,0,i.width,s)}}dv(t){const i=this.Vp.Qt().Et(),e=i.Da();if(!e||0===e.length)return;const s=this.o_.maxTickMarkWeight(e),n=this.Rm(),h=i.N();h.borderVisible&&h.ticksVisible&&t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:i,verticalPixelRatio:s})=>{t.strokeStyle=this.Im(),t.fillStyle=this.Im();const h=Math.max(1,Math.floor(i)),o=Math.floor(.5*i);t.beginPath();const r=Math.round(n.C*s);for(let n=e.length;n--;){const s=Math.round(e[n].coord*i);t.rect(s-o,0,h,r)}t.fill()}),t.useMediaCoordinateSpace(({context:t})=>{const i=n.S+n.C+n.A+n.P/2;t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.H(),t.font=this.ev();for(const n of e)if(n.weight<s){const e=n.needAlignCoordinate?this.Em(t,n.coord,n.label):n.coord;t.fillText(n.label,e,i)}this.Vp.N().timeScale.allowBoldLabels&&(t.font=this.Am());for(const n of e)if(n.weight>=s){const e=n.needAlignCoordinate?this.Em(t,n.coord,n.label):n.coord;t.fillText(n.label,e,i)}})}Em(t,i,e){const s=this.Fp.Vi(t,e),n=s/2,h=Math.floor(i-n)+.5;return h<0?i+=Math.abs(0-h):h+s>this.Op.width&&(i-=Math.abs(this.Op.width-(h+s))),i}Bm(t,i){const e=this.Rm();for(const s of t)for(const t of s.cs())t.Tt().nt(i,e)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return Vh(this.F(),this.Ps.fontFamily)}Am(){return Vh(this.F(),this.Ps.fontFamily,"bold")}Rm(){null===this.M&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new vo,Dm:0});const t=this.M,i=this.ev();if(t.k!==i){const e=this.F();t.P=e,t.k=i,t.A=3*e/12,t.V=3*e/12,t.Ji=9*e/12,t.L=0,t.Dm=4*e/12,t.Gi.Bn()}return this.M}vv(t){this.jf.style.cursor=1===t?"ew-resize":"default"}xm(){const t=this.Vp.Qt(),i=t.N();i.leftPriceScale.visible||null===this.pm||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),i.rightPriceScale.visible||null===this.vm||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);const e={Bc:this.Vp.Qt().Bc()},s=()=>i.leftPriceScale.borderVisible&&t.Et().N().borderVisible,n=()=>t.Wc();i.leftPriceScale.visible&&null===this.pm&&(this.pm=new Ya("left",i,e,s,n),this.Mm.appendChild(this.pm.Zf())),i.rightPriceScale.visible&&null===this.vm&&(this.vm=new Ya("right",i,e,s,n),this.bm.appendChild(this.vm.Zf()))}}const Qa=!!pa&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!pa&&(navigator?.userAgentData?.platform?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);class qa{constructor(t,i,e){var s;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new Sh,this.Cv=new Sh,this.Xu=new Sh,this.Um=null,this.$m=null,this.Dp=t,this.Ps=i,this.o_=e,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(s=this.kp).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),Ga(this.Ps)&&this.Km(!0),this.ts=new Gr(this.Gu.bind(this),this.Ps,e),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new Ja(this,this.o_),this.qm.appendChild(this.Zm.Zf());const n=i.autoSize&&this.Gm();let h=this.Ps.width,o=this.Ps.height;if(n||0===h||0===o){const i=t.getBoundingClientRect();h=h||i.width,o=o||i.height}this.Jm(h,o),this.Qm(),t.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){this.Km(!1),0!==this.Om&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const t of this.zm)this.qm.removeChild(t.Zf()),t.Xv().u(this),t.Zv().u(this),t.m();this.zm=[];for(const t of this.Lm)this.sw(t);this.Lm=[],Mh(this.Zm).m(),null!==this.kp.parentElement&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(t,i,e=!1){if(this.il===i&&this.Mo===t)return;const n=function(t){const i=Math.floor(t.width),e=Math.floor(t.height);return s({width:i-i%2,height:e-e%2})}(s({width:t,height:i}));this.il=n.height,this.Mo=n.width;const h=this.il+"px",o=this.Mo+"px";Mh(this.kp).style.height=h,Mh(this.kp).style.width=o,this.qm.style.height=h,this.qm.style.width=o,e?this.ew(lo.gn(),performance.now()):this.ts.Ih()}lv(t){void 0===t&&(t=lo.gn());for(let i=0;i<this.zm.length;i++)this.zm[i].lv(t.en(i).tn);this.Ps.timeScale.visible&&this.Zm.lv(t.nn())}hr(t){const i=Ga(this.Ps);this.ts.hr(t);const e=Ga(this.Ps);e!==i&&this.Km(e),t.layout?.panes&&this.rw(),this.tw(),this.hw(t)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(t=!1){null!==this.Wm&&(this.ew(this.Wm,performance.now()),this.Wm=null);const i=this.lw(null),e=document.createElement("canvas");e.width=i.width,e.height=i.height;const s=Mh(e.getContext("2d"));return this.lw(s,t),e}ow(t){return("left"!==t||this._w())&&("right"!==t||this.uw())?0===this.zm.length?0:Mh("left"===t?this.zm[0].nm():this.zm[0].rm()).av():0}cw(){return this.Ps.autoSize&&null!==this.Um}ip(){return this.kp}dw(t){this.$m=t,this.$m?this.ip().style.setProperty("cursor",t):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(t){return wh(this.zm[t]).Gf()}rw(){this.Lm.forEach(t=>{t.yt()})}hw(t){(void 0!==t.autoSize||!this.Um||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.Um&&this.Gm(),!1===t.autoSize&&null!==this.Um&&this.nw(),t.autoSize||void 0===t.width&&void 0===t.height||this.Jm(t.width||this.Mo,t.height||this.il))}lw(t,i){let e=0,n=0;const h=this.zm[0],o=(e,s)=>{let n=0;for(let h=0;h<this.zm.length;h++){const o=this.zm[h],r=Mh("left"===e?o.nm():o.rm()),a=r.Jf();if(null!==t&&r.Qf(t,s,n,i),n+=a.height,h<this.zm.length-1){const i=this.Lm[h],e=i.Jf();null!==t&&i.Qf(t,s,n),n+=e.height}}};this._w()&&(o("left",0),e+=Mh(h.nm()).Jf().width);for(let s=0;s<this.zm.length;s++){const h=this.zm[s],o=h.Jf();if(null!==t&&h.Qf(t,e,n,i),n+=o.height,s<this.zm.length-1){const i=this.Lm[s],h=i.Jf();null!==t&&i.Qf(t,e,n),n+=h.height}}e+=h.Jf().width,this.uw()&&(o("right",e),e+=Mh(h.rm()).Jf().width);const r=(i,e,s)=>{Mh("left"===i?this.Zm.Cm():this.Zm.Pm()).Qf(Mh(t),e,s)};if(this.Ps.timeScale.visible){const e=this.Zm.Jf();if(null!==t){let s=0;this._w()&&(r("left",s,n),s=Mh(h.nm()).Jf().width),this.Zm.Qf(t,s,n,i),s+=e.width,this.uw()&&r("right",s,n)}n+=e.height}return s({width:e,height:n})}mw(){let t=0,i=0,e=0;for(const s of this.zm)this._w()&&(i=Math.max(i,Mh(s.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(e=Math.max(e,Mh(s.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),t+=s.Bo();i=va(i),e=va(e);const n=this.Mo,h=this.il,o=Math.max(n-i-e,0),r=1*this.Lm.length,a=this.Ps.timeScale.visible;let l=a?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0;var c;l=(c=l)+c%2;const u=r+l,d=h<u?0:h-u,f=d/t;let p=0;const g=window.devicePixelRatio||1;for(let m=0;m<this.zm.length;++m){const t=this.zm[m];t.Lv(this.ts.$s()[m]);let n=0,h=0;h=m===this.zm.length-1?Math.ceil((d-p)*g)/g:Math.round(t.Bo()*f*g)/g,n=Math.max(h,2),p+=n,t.hv(s({width:o,height:n})),this._w()&&t.Jv(i,"left"),this.uw()&&t.Jv(e,"right"),t.ap()&&this.ts.dc(t.ap(),n)}this.Zm.km(s({width:a?o:0,height:l}),a?i:0,a?e:0),this.ts.Eo(o),this.Nm!==i&&(this.Nm=i),this.Fm!==e&&(this.Fm=e)}Km(t){t?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return Qa?1/window.devicePixelRatio:1}jm(t){if(!(0!==t.deltaX&&this.Ps.handleScroll.mouseWheel||0!==t.deltaY&&this.Ps.handleScale.mouseWheel))return;const i=this.ww(t),e=i*t.deltaX/100,s=-i*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==s&&this.Ps.handleScale.mouseWheel){const i=Math.sign(s)*Math.min(1,Math.abs(s)),e=t.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(e,i)}0!==e&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*e)}ew(t,i){const e=t.nn();3===e&&this.gw(),3!==e&&2!==e||(this.Mw(t),this.bw(t,i),this.Zm.yt(),this.zm.forEach(t=>{t.Nv()}),3===this.Wm?.nn()&&(this.Wm.vn(t),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,i),t=this.Wm,this.Wm=null)),this.lv(t)}bw(t,i){for(const e of t.pn())this.mn(e,i)}Mw(t){const i=this.ts.$s();for(let e=0;e<i.length;e++)t.en(e).sn&&i[e].Go()}mn(t,i){const e=this.ts.Et();switch(t.an){case 0:e.Au();break;case 1:e.zu(t.Wt);break;case 2:e.dn(t.Wt);break;case 3:e.fn(t.Wt);break;case 4:e.Su();break;case 5:t.Wt.Ru(i)||e.fn(t.Wt.Du(i))}}Gu(t){null!==this.Wm?this.Wm.vn(t):this.Wm=t,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame(t=>{if(this.Hm=!1,this.Om=0,null!==this.Wm){const i=this.Wm;this.Wm=null,this.ew(i,t);for(const e of i.pn())if(5===e.an&&!e.Wt.Ru(t)){this.Qt()._n(e.Wt);break}}}))}gw(){this.Qm()}sw(t){this.qm.removeChild(t.Zf()),t.m()}Qm(){const t=this.ts.$s(),i=t.length,e=this.zm.length;for(let s=i;s<e;s++){const t=wh(this.zm.pop());this.qm.removeChild(t.Zf()),t.Xv().u(this),t.Zv().u(this),t.m();const i=this.Lm.pop();void 0!==i&&this.sw(i)}for(let s=e;s<i;s++){const i=new Ba(this,t[s]);if(i.Xv().i(this.Sw.bind(this,i),this),i.Zv().i(this.xw.bind(this,i),this),this.zm.push(i),s>0){const t=new ka(this,s-1,s);this.Lm.push(t),this.qm.insertBefore(t.Zf(),this.Zm.Zf())}this.qm.insertBefore(i.Zf(),this.Zm.Zf())}for(let s=0;s<i;s++){const i=t[s],e=this.zm[s];e.ap()!==i?e.Lv(i):e.zv()}this.tw(),this.mw()}Cw(t,i,e,s){const n=new Map;let h;if(null!==t&&this.ts.js().forEach(i=>{const e=i.Xs().Fr(t);null!==e&&n.set(i,e)}),null!==t){const i=this.ts.Et().ss(t)?.originalTime;void 0!==i&&(h=i)}const o=this.Qt().ac(),r=null!==o&&o.n_ instanceof or?o.n_:void 0,a=null!==o&&void 0!==o.e_?o.e_.Kn:void 0,l=this.Pw(s);return{yw:h,Re:t??void 0,kw:i??void 0,Tw:-1!==l?l:void 0,Rw:r,Dw:n,Vw:a,Bw:e??void 0}}Pw(t){let i=-1;if(t)i=this.zm.indexOf(t);else{const t=this.Qt().uc().Us();null!==t&&(i=this.Qt().$s().indexOf(t))}return i}Sw(t,i,e,s){this.xv.p(()=>this.Cw(i,e,s,t))}xw(t,i,e,s){this.Cv.p(()=>this.Cw(i,e,s,t))}Xm(t,i,e){this.dw(this.Qt().ac()?.h_??null),this.Xu.p(()=>this.Cw(t,i,e))}tw(){const t=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=t}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver(t=>{const i=t[t.length-1];i&&this.Jm(i.contentRect.width,i.contentRect.height)}),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){null!==this.Um&&this.Um.disconnect(),this.Um=null}}function Ga(t){return Boolean(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function Ka(t,i,e,s){const n=e.value,h={Re:i,wt:t,Wt:[n,n,n,n],yw:s};return void 0!==e.color&&(h.R=e.color),h}function Xa(t,i,e,s){const n=e.value,h={Re:i,wt:t,Wt:[n,n,n,n],yw:s};return void 0!==e.lineColor&&(h.vt=e.lineColor),void 0!==e.topColor&&(h.mr=e.topColor),void 0!==e.bottomColor&&(h.wr=e.bottomColor),h}function Za(t,i,e,s){const n=e.value,h={Re:i,wt:t,Wt:[n,n,n,n],yw:s};return void 0!==e.topLineColor&&(h.gr=e.topLineColor),void 0!==e.bottomLineColor&&(h.Mr=e.bottomLineColor),void 0!==e.topFillColor1&&(h.br=e.topFillColor1),void 0!==e.topFillColor2&&(h.Sr=e.topFillColor2),void 0!==e.bottomFillColor1&&(h.Cr=e.bottomFillColor1),void 0!==e.bottomFillColor2&&(h.Pr=e.bottomFillColor2),h}function tl(t,i,e,s){const n={Re:i,wt:t,Wt:[e.open,e.high,e.low,e.close],yw:s};return void 0!==e.color&&(n.R=e.color),n}function il(t,i,e,s){const n={Re:i,wt:t,Wt:[e.open,e.high,e.low,e.close],yw:s};return void 0!==e.color&&(n.R=e.color),void 0!==e.borderColor&&(n.Ht=e.borderColor),void 0!==e.wickColor&&(n.vr=e.wickColor),n}function el(t,i,e,s,n){const h=wh(n)(e),o=Math.max(...h),r=Math.min(...h),a=h[h.length-1],l=[a,o,r,a],{time:c,color:u,...d}=e;return{Re:i,wt:t,Wt:l,yw:s,se:d,R:u}}function sl(t){return void 0!==t.Wt}function nl(t,i){return void 0!==i.customValues&&(t.Iw=i.customValues),t}function hl(t){return(i,e,s,n,h,o)=>{return r=s,((a=o)?a(r):function(t){return void 0===t.open&&void 0===t.value}(r))?nl({wt:i,Re:e,yw:n},s):nl(t(i,e,s,n,h),s);var r,a}}function ol(t){return{Candlestick:hl(il),Bar:hl(tl),Area:hl(Xa),Baseline:hl(Za),Histogram:hl(Ka),Line:hl(Ka),Custom:hl(el)}[t]}function rl(t){return{Re:0,Ew:new Map,Hh:t}}function al(t,i){if(void 0!==t&&0!==t.length)return{Aw:i.key(t[0].wt),zw:i.key(t[t.length-1].wt)}}function ll(t){let i;return t.forEach(t=>{void 0===i&&(i=t.yw)}),wh(i)}class cl{constructor(t){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=t}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(t,i){let e=0!==this.Lw.size,s=!1;const n=this.Ow.get(t);if(void 0!==n)if(1===this.Ow.size)e=!1,s=!0,this.Lw.clear();else for(const r of this.Fw)r.pointData.Ew.delete(t)&&(s=!0);let h=[];if(0!==i.length){const e=i.map(t=>t.time),n=this.o_.createConverterToInternalObj(i),o=ol(t.Rr()),r=t.ca(),a=t.fa();h=i.map((i,h)=>{const l=n(i.time),c=this.o_.key(l);let u=this.Lw.get(c);void 0===u&&(u=rl(l),this.Lw.set(c,u),s=!0);const d=o(l,u.Re,i,e[h],r,a);return u.Ew.set(t,d),d})}e&&this.Hw(),this.Uw(t,h);let o=-1;if(s){const t=[];this.Lw.forEach(i=>{t.push({timeWeight:0,time:i.Hh,pointData:i,originalTime:ll(i.Ew)})}),t.sort((t,i)=>this.o_.key(t.time)-this.o_.key(i.time)),o=this.$w(t)}return this.qw(t,o,function(t,i,e){const s=al(t,e),n=al(i,e);if(void 0!==s&&void 0!==n)return{Yw:!1,zh:s.zw>=n.zw&&s.Aw>=n.Aw}}(this.Ow.get(t),n,this.o_))}Ac(t){return this.Ww(t,[])}jw(t,i,e){const s=i;var n;void 0===(n=s).yw&&(n.yw=n.time),this.o_.preprocessData(i);const h=this.o_.createConverterToInternalObj([i])(i.time),o=this.Nw.get(t);if(!e&&void 0!==o&&this.o_.key(h)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${h}`);let r=this.Lw.get(this.o_.key(h));if(e&&void 0===r)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const a=void 0===r;void 0===r&&(r=rl(h),this.Lw.set(this.o_.key(h),r));const l=ol(t.Rr()),c=t.ca(),u=t.fa(),d=l(h,r.Re,i,s.yw,c,u);r.Ew.set(t,d),e?this.Kw(t,d,r.Re):this.Xw(t,d);const f={zh:sl(d),Yw:e};if(!a)return this.qw(t,-1,f);const p={timeWeight:0,time:r.Hh,pointData:r,originalTime:ll(r.Ew)},g=No(this.Fw,this.o_.key(p.time),(t,i)=>this.o_.key(t.time)<i);this.Fw.splice(g,0,p);for(let m=g;m<this.Fw.length;++m)ul(this.Fw[m].pointData,m);return this.o_.fillWeightsForPoints(this.Fw,g),this.qw(t,g,f)}Zw(t,i){const e=this.Ow.get(t);if(void 0===e||i<=0)return[[],this.Gw()];i=Math.min(i,e.length);const s=e.splice(-i).reverse();0===e.length?this.Nw.delete(t):this.Nw.set(t,e[e.length-1].wt);for(const n of s){const i=this.Lw.get(this.o_.key(n.wt));if(i&&(i.Ew.delete(t),0===i.Ew.size)){this.Lw.delete(this.o_.key(i.Hh)),this.Fw.splice(i.Re,1);for(let t=i.Re;t<this.Fw.length;++t)ul(this.Fw[t].pointData,t)}}return[s,this.qw(t,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(t,i){let e=this.Ow.get(t);void 0===e&&(e=[],this.Ow.set(t,e));const s=0!==e.length?e[e.length-1]:null;null===s||this.o_.key(i.wt)>this.o_.key(s.wt)?sl(i)&&e.push(i):sl(i)?e[e.length-1]=i:e.splice(-1,1),this.Nw.set(t,i.wt)}Kw(t,i,e){const s=this.Ow.get(t);if(void 0===s)return;const n=No(s,e,(t,i)=>t.Re<i);sl(i)?s[n]=i:s.splice(n,1)}Uw(t,i){0!==i.length?(this.Ow.set(t,i.filter(sl)),this.Nw.set(t,i[i.length-1].wt)):(this.Ow.delete(t),this.Nw.delete(t))}Hw(){for(const t of this.Fw)0===t.pointData.Ew.size&&this.Lw.delete(this.o_.key(t.time))}$w(t){let i=-1;for(let e=0;e<this.Fw.length&&e<t.length;++e){const s=this.Fw[e],n=t[e];if(this.o_.key(s.time)!==this.o_.key(n.time)){i=e;break}n.timeWeight=s.timeWeight,ul(n.pointData,e)}if(-1===i&&this.Fw.length!==t.length&&(i=Math.min(this.Fw.length,t.length)),-1===i)return-1;for(let e=i;e<t.length;++e)ul(t[e].pointData,e);return this.o_.fillWeightsForPoints(t,i),this.Fw=t,i}Jw(){if(0===this.Ow.size)return null;let t=0;return this.Ow.forEach(i=>{0!==i.length&&(t=Math.max(t,i[i.length-1].Re))}),t}qw(t,i,e){const s=this.Gw();if(-1!==i)this.Ow.forEach((i,n)=>{s.Oo.set(n,{se:i,Qw:n===t?e:void 0})}),this.Ow.has(t)||s.Oo.set(t,{se:[],Qw:e}),s.Et.tg=this.Fw,s.Et.ig=i;else{const i=this.Ow.get(t);s.Oo.set(t,{se:i||[],Qw:e})}return s}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function ul(t,i){t.Re=i,t.Ew.forEach(t=>{t.Re=i})}function dl(t,i){return t.wt<i}function fl(t,i){return i<t.wt}class pl{constructor(t,i,e){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=t,this.Qn=i,this.ag=e}yt(t){this.sg=!0,"data"===t&&(this.ng=!0),"options"===t&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),null===this.hg?null:this.og):null}_g(){this.rg=this.rg.map(t=>({...t,...this.Jn.Rh().Dr(t.wt)}))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){const t=this.Jn.Ft(),i=this.Qn.Et();if(this.ug(),i.Ki()||t.Ki())return;const e=i.Pe();if(null===e)return;if(0===this.Jn.Xs().zr())return;const s=this.Jn.zt();null!==s&&(this.hg=function(t,i,e){const s=i.Uh(),n=i.bi(),h=No(t,s,dl),o=Ao(t,n,fl);if(!e)return{from:h,to:o};let r=h,a=o;return h>0&&h<t.length&&t[h].wt>=s&&(r=h-1),o>0&&o<t.length&&t[o-1].wt<=n&&(a=o+1),{from:r,to:a}}(this.rg,e,this.ag),this.fg(t,i,s.Wt),this.pg())}}class gl{constructor(t,i){this.vg=t,this.Yi=i}nt(t,i,e){this.vg.draw(t,this.Yi,i,e)}}class ml extends pl{constructor(t,i,e){super(t,i,!1),this.sh=e,this.og=new gl(this.sh.renderer(),i=>{const e=t.zt();return null===e?null:t.Ft().Nt(i,e.Wt)})}da(t){return this.sh.priceValueBuilder(t)}pa(t){return this.sh.isWhitespace(t)}cg(){const t=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map(i=>({wt:i.Re,_t:NaN,...t.Dr(i.Re),mg:i.se}))}fg(t,i){i.uu(this.rg,Ih(this.hg))}pg(){this.sh.update({bars:this.rg.map(vl),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function vl(t){return{x:t._t,time:t.wt,originalData:t.mg,barColor:t.cr}}const xl={color:"#2196f3"},bl=(t,i,e)=>{const s=kh(e);return new ml(t,i,s)};function _l(t){const i={value:t.Wt[3],time:t.yw};return void 0!==t.Iw&&(i.customValues=t.Iw),i}function yl(t){const i=_l(t);return void 0!==t.R&&(i.color=t.R),i}function wl(t){const i=_l(t);return void 0!==t.vt&&(i.lineColor=t.vt),void 0!==t.mr&&(i.topColor=t.mr),void 0!==t.wr&&(i.bottomColor=t.wr),i}function Ml(t){const i=_l(t);return void 0!==t.gr&&(i.topLineColor=t.gr),void 0!==t.Mr&&(i.bottomLineColor=t.Mr),void 0!==t.br&&(i.topFillColor1=t.br),void 0!==t.Sr&&(i.topFillColor2=t.Sr),void 0!==t.Cr&&(i.bottomFillColor1=t.Cr),void 0!==t.Pr&&(i.bottomFillColor2=t.Pr),i}function kl(t){const i={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.yw};return void 0!==t.Iw&&(i.customValues=t.Iw),i}function Sl(t){const i=kl(t);return void 0!==t.R&&(i.color=t.R),i}function Pl(t){const i=kl(t),{R:e,Ht:s,vr:n}=t;return void 0!==e&&(i.color=e),void 0!==s&&(i.borderColor=s),void 0!==n&&(i.wickColor=n),i}function Cl(t){return{Area:wl,Line:yl,Baseline:Ml,Histogram:yl,Bar:Sl,Candlestick:Pl,Custom:Dl}[t]}function Dl(t){const i=t.yw;return{...t.se,time:i}}const Tl={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},El={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},Ol={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Rh,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},zl={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},Il={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function Rl(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:Ol,crosshair:Tl,grid:El,overlayPriceScales:{...zl},leftPriceScale:{...zl,visible:!1},rightPriceScale:{...zl,visible:!0},timeScale:Il,localization:{locale:pa?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Vl{constructor(t,i,e){this.Hf=t,this.wg=i,this.gg=e??0}applyOptions(t){this.Hf.Qt().oc(this.wg,t,this.gg)}options(){return this.Yi().N()}width(){return ao(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(t){this.setAutoScale(!1),this.Yi().Fl(new To(t.from,t.to))}getVisibleRange(){let t,i,e=this.Yi().Qe();if(null===e)return null;if(this.Yi().Ja()){const s=this.Yi().fo(),n=Kr(s);e=Mr(e,this.Yi().tl()),t=Number((Math.round(e.$e()/s)*s).toFixed(n)),i=Number((Math.round(e.qe()/s)*s).toFixed(n))}else t=e.$e(),i=e.qe();return{from:t,to:i}}setAutoScale(t){this.applyOptions({autoScale:t})}Yi(){return Mh(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class Ll{constructor(t,i,e,s){this.Hf=t,this.Pt=e,this.Mg=i,this.bg=s}getHeight(){return this.Pt.$t()}setHeight(t){const i=this.Hf.Qt(),e=i.Uc(this.Pt);i.vc(e,t)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(t){this.Pt.Io(t),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(t){const i=this.paneIndex();i!==t&&(yh(t>=0&&t<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(i,t))}getSeries(){return this.Pt.Oo().map(t=>this.Mg(t))??[]}getHTMLElement(){const t=this.Hf.$f();return t&&0!==t.length&&t[this.paneIndex()]?t[this.paneIndex()].Zf():null}attachPrimitive(t){this.Pt._a(t),t.attached&&t.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(t){this.Pt.ua(t)}priceScale(t){if(null===this.Pt.Do(t))throw new Error(`Cannot find price scale with id: ${t}`);return new Vl(this.Hf,t,this.paneIndex())}setPreserveEmptyPane(t){this.Pt.zo(t)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(t,i={},e=0){return this.bg.addCustomSeries(t,i,e)}addSeries(t,i={}){return this.bg.addSeries(t,i,this.paneIndex())}}const Fl={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class Nl{constructor(t){this.ir=t}applyOptions(t){this.ir.hr(t)}options(){return this.ir.N()}Sg(){return this.ir}}class Al{constructor(t,i,e,s,n,h){this.xg=new Sh,this.Jn=t,this.Cg=i,this.Pg=e,this.o_=n,this.bg=s,this.yg=h}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(t){const i=this.Jn.zt();return null===i?null:this.Jn.Ft().Nt(t,i.Wt)}coordinateToPrice(t){const i=this.Jn.zt();return null===i?null:this.Jn.Ft().Ts(t,i.Wt)}barsInLogicalRange(t){if(null===t)return null;const i=new Yr(new Ar(t.from,t.to)).y_(),e=this.Jn.Xs();if(e.Ki())return null;const s=e.Fr(i.Uh(),1),n=e.Fr(i.bi(),-1),h=Mh(e.Lr()),o=Mh(e.Ks());if(null!==s&&null!==n&&s.Re>n.Re)return{barsBefore:t.from-h,barsAfter:o-t.to};const r={barsBefore:null===s||s.Re===h?t.from-h:s.Re-h,barsAfter:null===n||n.Re===o?o-t.to:o-n.Re};return null!==s&&null!==n&&(r.from=s.yw,r.to=n.yw),r}setData(t){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,t),this.Tg("full")}update(t,i=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,t,i),this.Tg("update")}pop(t=1){const i=this.Cg.Dg(this.Jn,t);0!==i.length&&this.Tg("update");const e=Cl(this.seriesType());return i.map(t=>e(t))}dataByIndex(t,i){const e=this.Jn.Xs().Fr(t,i);return null===e?null:Cl(this.seriesType())(e)}data(){const t=Cl(this.seriesType());return this.Jn.Xs().Hr().map(i=>t(i))}subscribeDataChanged(t){this.xg.i(t)}unsubscribeDataChanged(t){this.xg._(t)}applyOptions(t){this.Jn.hr(t)}options(){return Oh(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(t){const i=Ph(Oh(Fl),t),e=this.Jn.Oh(i);return new Nl(e)}removePriceLine(t){this.Jn.Nh(t.Sg())}priceLines(){return this.Jn.Fh().map(t=>new Nl(t))}seriesType(){return this.Jn.Rr()}lastValueData(t){const i=this.Jn.ye(t);return i.ke?{noData:!0}:{noData:!1,price:i.gt,color:i.R}}attachPrimitive(t){this.Jn._a(t),t.attached&&t.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(t){this.Jn.ua(t),t.detached&&t.detached(),this.Jn.Qt().Ih()}getPane(){const t=this.Jn,i=Mh(this.Jn.Qt().Hn(t));return this.yg(i)}moveToPane(t){this.Jn.Qt().Nc(this.Jn,t)}seriesOrder(){const t=this.Jn.Qt().Hn(this.Jn);return null===t?-1:t.Oo().indexOf(this.Jn)}setSeriesOrder(t){const i=this.Jn.Qt().Hn(this.Jn);null!==i&&i.Qo(this.Jn,t)}Tg(t){this.xg.v()&&this.xg.p(t)}}class Wl{constructor(t,i,e){this.Vg=new Sh,this.z_=new Sh,this.gm=new Sh,this.ts=t,this.uh=t.Et(),this.Zm=i,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=e}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(t,i){i?this.uh.Tu(t,1e3):this.ts.fn(t)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const t=this.uh.nu();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const i={from:this.o_.convertHorzItemToInternal(t.from),to:this.o_.convertHorzItemToInternal(t.to)},e=this.uh.au(i);this.ts.Lc(e)}getVisibleLogicalRange(){const t=this.uh.su();return null===t?null:{from:t.Uh(),to:t.bi()}}setVisibleLogicalRange(t){yh(t.from<=t.to,"The from index cannot be after the to index."),this.ts.Lc(t)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(t){const i=this.ts.Et();return i.Ki()?null:i.qt(t)}coordinateToLogical(t){return this.uh.Ki()?null:this.uh.cu(t)}timeToIndex(t,i){const e=this.o_.convertHorzItemToInternal(t);return this.uh.Q_(e,i)}timeToCoordinate(t){const i=this.timeToIndex(t,!1);return null===i?null:this.uh.qt(i)}coordinateToTime(t){const i=this.ts.Et(),e=i.cu(t),s=i.ss(e);return null===s?null:s.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(t){this.Vg.i(t)}unsubscribeVisibleTimeRangeChange(t){this.Vg._(t)}subscribeVisibleLogicalRangeChange(t){this.z_.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.z_._(t)}subscribeSizeChange(t){this.gm.i(t)}unsubscribeSizeChange(t){this.gm._(t)}applyOptions(t){this.uh.hr(t)}options(){return{...Oh(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(t){this.gm.p(t.width,t.height)}}function Bl(t){return function(t){if(Eh(t.handleScale)){const i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale){const{axisPressedMouseMove:i,axisDoubleClickReset:e}=t.handleScale;Eh(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),Eh(e)&&(t.handleScale.axisDoubleClickReset={time:e,price:e})}const i=t.handleScroll;Eh(i)&&(t.handleScroll={horzTouchDrag:i,vertTouchDrag:i,mouseWheel:i,pressedMouseMove:i})}(t),t}class Yl{constructor(t,i,e){this.Ag=new Map,this.zg=new Map,this.Lg=new Sh,this.Og=new Sh,this.Ng=new Sh,this.qu=new WeakMap,this.Fg=new cl(i);const s=void 0===e?Oh(Rl()):Ph(Oh(Rl()),Bl(e));this.Wg=i,this.Hf=new qa(t,s,i),this.Hf.Xv().i(t=>{this.Lg.v()&&this.Lg.p(this.Hg(t()))},this),this.Hf.Zv().i(t=>{this.Og.v()&&this.Og.p(this.Hg(t()))},this),this.Hf.cc().i(t=>{this.Ng.v()&&this.Ng.p(this.Hg(t()))},this);const n=this.Hf.Qt();this.Ug=new Wl(n,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(t,i,e){this.autoSizeActive()||this.Hf.Jm(t,i,e)}addCustomSeries(t,i={},e=0){const s=(n=kh(t),{type:"Custom",isBuiltIn:!1,defaultOptions:{...xl,...n.defaultOptions()},$g:bl,qg:n});var n;return this.Yg(s,i,e)}addSeries(t,i={},e=0){return this.Yg(t,i,e)}removeSeries(t){const i=wh(this.Ag.get(t)),e=this.Fg.Ac(i);this.Hf.Qt().Ac(i),this.jg(e),this.Ag.delete(t),this.zg.delete(i)}kg(t,i){this.jg(this.Fg.Ww(t,i))}Rg(t,i,e){this.jg(this.Fg.jw(t,i,e))}Dg(t,i){const[e,s]=this.Fg.Zw(t,i);return 0!==e.length&&this.jg(s),e}subscribeClick(t){this.Lg.i(t)}unsubscribeClick(t){this.Lg._(t)}subscribeCrosshairMove(t){this.Ng.i(t)}unsubscribeCrosshairMove(t){this.Ng._(t)}subscribeDblClick(t){this.Og.i(t)}unsubscribeDblClick(t){this.Og._(t)}priceScale(t,i=0){return new Vl(this.Hf,t,i)}timeScale(){return this.Ug}applyOptions(t){this.Hf.hr(Bl(t))}options(){return this.Hf.N()}takeScreenshot(t=!1,i=!1){let e,s;try{i||(e=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),s=this.Hf.aw(t)}finally{i||void 0===e||this.Hf.Qt().hr({crosshair:{mode:e}})}return s}addPane(t=!1){const i=this.Hf.Qt().$c();return i.zo(t),this.Kg(i)}removePane(t){this.Hf.Qt().fc(t)}swapPanes(t,i){this.Hf.Qt().mc(t,i)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map(t=>this.Kg(t))}paneSize(t=0){const i=this.Hf.pw(t);return{height:i.height,width:i.width}}setCrosshairPosition(t,i,e){const s=this.Ag.get(e);if(void 0===s)return;const n=this.Hf.Qt().Hn(s);null!==n&&this.Hf.Qt().Rc(t,i,n)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(t,i={},e=0){var s;yh(void 0!==t.$g),function(t){if(void 0===t||"custom"===t.type)return;const i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=Kr(i.minMove))}(i.priceFormat),"Candlestick"===t.type&&(void 0!==(s=i).borderColor&&(s.borderUpColor=s.borderColor,s.borderDownColor=s.borderColor),void 0!==s.wickColor&&(s.wickUpColor=s.wickColor,s.wickDownColor=s.wickColor));const n=Ph(Oh(gh),Oh(t.defaultOptions),i),h=t.$g,o=new or(this.Hf.Qt(),t.type,n,h,t.qg);this.Hf.Qt().Ic(o,e);const r=new Al(o,this,this,this,this.Wg,t=>this.Kg(t));return this.Ag.set(r,o),this.zg.set(o,r),r}jg(t){const i=this.Hf.Qt();i.Vc(t.Et._u,t.Et.tg,t.Et.ig),t.Oo.forEach((t,i)=>i.ht(t.se,t.Qw)),i.Et().K_(),i.vu()}Xg(t){return wh(this.zg.get(t))}Hg(t){const i=new Map;t.Dw.forEach((t,e)=>{const s=e.Rr(),n=Cl(s)(t);if("Custom"!==s)yh(function(t){return void 0!==t.open||function(t){return void 0!==t.value}(t)}(n));else{const t=e.fa();yh(!t||!1===t(n))}i.set(this.Xg(e),n)});const e=void 0!==t.Rw&&this.zg.has(t.Rw)?this.Xg(t.Rw):void 0;return{time:t.yw,logical:t.Re,point:t.kw,paneIndex:t.Tw,hoveredSeries:e,hoveredObjectId:t.Vw,seriesData:i,sourceEvent:t.Bw}}Kg(t){let i=this.qu.get(t);return i||(i=new Ll(this.Hf,t=>this.Xg(t),t,this),this.qu.set(t,i)),i}}function Hl(t,i,e){const s=function(t){if(Th(t)){const i=document.getElementById(t);return yh(null!==i,`Cannot find element in DOM with id=${t}`),i}return t}(t),n=new Yl(s,i,e);return i.setOptions(n.options()),n}function jl(t,i){return Hl(t,new fa,fa.ld(i))}class $l extends pl{constructor(t,i){super(t,i,!1)}fg(t,i,e){i.uu(this.rg,Ih(this.hg)),t.ql(this.rg,e,Ih(this.hg))}VM(t,i,e){return{wt:t,qh:i.Wt[0],Yh:i.Wt[1],jh:i.Wt[2],Kh:i.Wt[3],_t:NaN,Yl:NaN,jl:NaN,Kl:NaN,Xl:NaN}}cg(){const t=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map(i=>this.Gg(i.Re,i,t))}}class Ul extends Bh{constructor(){super(...arguments),this.Yt=null,this.yM=0}ht(t){this.Yt=t}et(t){if(null===this.Yt||0===this.Yt.Xs.length||null===this.Yt.lt)return;const{horizontalPixelRatio:i}=t;this.yM=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);const e=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.floor(t*e*i),n=Math.floor(t*i),h=Math.min(s,n);return Math.max(Math.floor(i),h)}(this.Yt.mu,i),this.yM>=2&&Math.floor(i)%2!=this.yM%2&&this.yM--;const e=this.Yt.Xs;this.Yt.BM&&this.IM(t,e,this.Yt.lt),this.Yt.Mi&&this.uv(t,e,this.Yt.lt);const s=this.EM(i);(!this.Yt.Mi||this.yM>2*s)&&this.AM(t,e,this.Yt.lt)}IM(t,i,e){if(null===this.Yt)return;const{context:s,horizontalPixelRatio:n,verticalPixelRatio:h}=t;let o="",r=Math.min(Math.floor(n),Math.floor(this.Yt.mu*n));r=Math.max(Math.floor(n),Math.min(r,this.yM));const a=Math.floor(.5*r);let l=null;for(let c=e.from;c<e.to;c++){const t=i[c];t.pr!==o&&(s.fillStyle=t.pr,o=t.pr);const e=Math.round(Math.min(t.Yl,t.Xl)*h),u=Math.round(Math.max(t.Yl,t.Xl)*h),d=Math.round(t.jl*h),f=Math.round(t.Kl*h);let p=Math.round(n*t._t)-a;const g=p+r-1;null!==l&&(p=Math.max(l+1,p),p=Math.min(p,g));const m=g-p+1;s.fillRect(p,d,m,e-d),s.fillRect(p,u+1,m,f-u),l=g}}EM(t){let i=Math.floor(1*t);this.yM<=2*i&&(i=Math.floor(.5*(this.yM-1)));const e=Math.max(Math.floor(t),i);return this.yM<=2*e?Math.max(Math.floor(t),Math.floor(1*t)):e}uv(t,i,e){if(null===this.Yt)return;const{context:s,horizontalPixelRatio:n,verticalPixelRatio:h}=t;let o="";const r=this.EM(n);let a=null;for(let l=e.from;l<e.to;l++){const t=i[l];t.dr!==o&&(s.fillStyle=t.dr,o=t.dr);let e=Math.round(t._t*n)-Math.floor(.5*this.yM);const c=e+this.yM-1,u=Math.round(Math.min(t.Yl,t.Xl)*h),d=Math.round(Math.max(t.Yl,t.Xl)*h);if(null!==a&&(e=Math.max(a+1,e),e=Math.min(e,c)),this.Yt.mu*n>2*r)Qh(s,e,u,c-e+1,d-u+1,r);else{const t=c-e+1;s.fillRect(e,u,t,d-u+1)}a=c}}AM(t,i,e){if(null===this.Yt)return;const{context:s,horizontalPixelRatio:n,verticalPixelRatio:h}=t;let o="";const r=this.EM(n);for(let a=e.from;a<e.to;a++){const t=i[a];let e=Math.round(Math.min(t.Yl,t.Xl)*h),l=Math.round(Math.max(t.Yl,t.Xl)*h),c=Math.round(t._t*n)-Math.floor(.5*this.yM),u=c+this.yM-1;if(t.cr!==o){const i=t.cr;s.fillStyle=i,o=i}this.Yt.Mi&&(c+=r,e+=r,u-=r,l-=r),e>l||s.fillRect(c,e,u-c+1,l-e+1)}}}class Jl extends $l{constructor(){super(...arguments),this.og=new Ul}Gg(t,i,e){return{...this.VM(t,i,e),...e.Dr(t)}}pg(){const t=this.Jn.N();this.og.ht({Xs:this.rg,mu:this.Qn.Et().mu(),BM:t.wickVisible,Mi:t.borderVisible,lt:this.hg})}}const Ql={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},$g:(t,i)=>new Jl(t,i)};export{me as B,Us as C,ve as L,hn as P,jl as W,th as a,nh as b,sn as c,Kn as d,Rn as e,dn as f,Ql as g,vh as h,En as i,Ln as p};
