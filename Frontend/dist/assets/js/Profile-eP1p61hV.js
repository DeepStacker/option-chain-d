import{af as e,aa as a,r as s,ah as t,j as r}from"./vendor-61R5RNdl.js";import{e as i}from"./index-DpMGw747.js";import{G as l,a as o,p as n,H as d,t as c,i as x,z as m,I as b,J as u,K as g,F as h,L as p,M as y,N as f,x as w,O as j,P as v,Q as N}from"./ui-icons-BuGoXOaE.js";import{m as k,A as S}from"./animations-9kslzpSP.js";import"./charts-BVf48S-_.js";import"./firebase-Dm1Xd1Ru.js";const _=async()=>(await i.get("/profile")).data,P=async e=>(await i.put("/profile",e)).data,C=async e=>(await i.put("/profile/notifications",e)).data,T=async()=>(await i.get("/profile/stats")).data,$=()=>{e();const i=a(e=>e.theme?.theme||"light"),[$,D]=s.useState("profile"),[A,E]=s.useState(!1),[L,H]=s.useState(!1),[R,M]=s.useState({}),[F,I]=s.useState(()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null}),[O,U]=s.useState({username:F?.username||"",email:F?.email||"",phone:F?.phone||"",bio:F?.bio||"",location:F?.location||""}),[J,z]=s.useState({trade_alerts:!0,price_alerts:!0,news_updates:!1,market_analysis:!0,email_notifications:!0,push_notifications:!1}),[V,q]=s.useState({twoFactorEnabled:!1,loginAlerts:!0,sessionTimeout:30}),[B,G]=s.useState({totalTrades:"0",winRate:"0%",totalPnL:"₹0",avgReturn:"0%",riskScore:"Low",activeDays:"0"}),[W,K]=s.useState(!0);s.useEffect(()=>{(async()=>{try{K(!0);const e=await _();if(e.success&&e.data){const a=e.data;I({...a,username:a.username||a.email?.split("@")[0],joinDate:a.created_at?new Date(a.created_at).toLocaleDateString():(new Date).toLocaleDateString()}),U({username:a.username||"",email:a.email||"",phone:a.phone||"",bio:a.bio||"",location:a.location||""}),a.notification_settings&&z(a.notification_settings),a.trading_stats&&G(a.trading_stats)}const a=await T();if(a.success&&a.stats){const e=a.stats;G({totalTrades:e.total_trades?.toLocaleString()||"0",winRate:`${e.win_rate||0}%`,totalPnL:`₹${(e.total_pnl/1e5).toFixed(1)}L`,avgReturn:`${e.avg_return||0}%`,riskScore:e.total_pnl>5e5?"High":e.total_pnl>1e5?"Medium":"Low",activeDays:e.active_days?.toString()||"0"})}}catch(e){}finally{K(!1)}})()},[]);const Q=s.useMemo(()=>[{id:"profile",label:"Profile",icon:l,color:"from-blue-500 to-blue-600"},{id:"trading",label:"Trading Stats",icon:o,color:"from-green-500 to-green-600"},{id:"notifications",label:"Notifications",icon:n,color:"from-purple-500 to-purple-600"},{id:"security",label:"Security",icon:d,color:"from-red-500 to-red-600"},{id:"settings",label:"Settings",icon:c,color:"from-gray-500 to-gray-600"},{id:"history",label:"Activity",icon:x,color:"from-orange-500 to-orange-600"}],[]),Y=s.useMemo(()=>({username:F?.username||"Professional Trader",email:F?.email||"trader@deepstrike.com",phone:F?.phone||"",bio:F?.bio||"Professional options trader with expertise in algorithmic strategies.",location:F?.location||"Bangalore, India",joinDate:F?.joinDate||(new Date).toLocaleDateString(),subscription:F?.subscription_type||"Professional",isVerified:F?.is_email_verified||!1,stats:B}),[F,B]),Z=s.useCallback(()=>{const e={};return O.username.trim()?O.username.length<3&&(e.username="Username must be at least 3 characters"):e.username="Username is required",O.email.trim()?/\S+@\S+\.\S+/.test(O.email)||(e.email="Please enter a valid email address"):e.email="Email is required",O.phone&&!/^[+]?[0-9\s\-()]{10,}$/.test(O.phone)&&(e.phone="Please enter a valid phone number"),M(e),0===Object.keys(e).length},[O]),X=s.useCallback(async()=>{if(Z()){H(!0);try{const e=await P({username:O.username,phone:O.phone,bio:O.bio,location:O.location});if(e.success){const e={...F,...O};localStorage.setItem("user",JSON.stringify(e)),I(e),E(!1),t.success("Profile updated successfully")}else t.error(e.message||"Failed to update profile")}catch(e){const a={...F,...O};localStorage.setItem("user",JSON.stringify(a)),I(a),E(!1),t.success("Profile saved locally")}finally{H(!1)}}else t.error("Please fix the errors before saving")},[O,F,Z]),ee=s.useCallback(()=>{U({username:F?.username||"",email:F?.email||"",phone:F?.phone||"",bio:F?.bio||"",location:F?.location||""}),M({}),E(!1)},[F]),ae=s.useCallback((e,a)=>{U(s=>({...s,[e]:a})),R[e]&&M(a=>({...a,[e]:""}))},[R]),se=s.useCallback(async e=>{const a={...J,[e]:!J[e]};z(a);try{await C(a)}catch(s){}},[J]),te={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},re={hidden:{opacity:0,x:20},visible:{opacity:1,x:0},exit:{opacity:0,x:-20}};return r.jsxs("div",{className:"min-h-screen py-12 px-4 sm:px-6 lg:px-8 "+("dark"===i?"bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950":"bg-gradient-to-br from-slate-50 via-blue-50/30 to-gray-50"),children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute top-32 left-16 w-40 h-40 border border-blue-500/5 rounded-2xl backdrop-blur-3xl"}),r.jsx("div",{className:"absolute bottom-32 right-16 w-32 h-32 border border-green-500/5 rounded-full backdrop-blur-3xl"})]}),r.jsxs(k.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,staggerChildren:.1}}},initial:"hidden",animate:"visible",className:"max-w-7xl mx-auto relative z-10",children:[r.jsx(k.div,{variants:te,className:"text-center mb-12",children:r.jsxs("div",{className:"flex items-center justify-center mb-6",children:[r.jsx("div",{className:`p-4 rounded-2xl ${"dark"===i?"bg-gradient-to-r from-blue-600 to-purple-600":"bg-gradient-to-r from-blue-500 to-purple-500"} shadow-2xl mr-4`,children:r.jsx(l,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl md:text-5xl font-black "+("dark"===i?"text-white":"text-gray-900"),children:"Profile Dashboard"}),r.jsx("p",{className:"text-lg "+("dark"===i?"text-gray-300":"text-gray-600"),children:"Manage your trading account and preferences"})]})]})}),r.jsx(k.div,{variants:te,className:"flex flex-wrap gap-3 mb-8 justify-center lg:justify-start",children:Q.map(e=>{const a=e.icon;return r.jsxs(k.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>D(e.id),className:`flex items-center space-x-3 px-6 py-4 rounded-2xl font-semibold transition-all duration-300 ${$===e.id?`bg-gradient-to-r ${e.color} text-white shadow-2xl`:"dark"===i?"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50 border border-gray-700/50":"bg-white/50 text-gray-700 hover:bg-gray-50 border border-gray-200/50"} backdrop-blur-xl`,children:[r.jsx(a,{className:"w-5 h-5"}),r.jsx("span",{className:"hidden sm:inline",children:e.label})]},e.id)})}),r.jsx(k.div,{variants:te,className:`rounded-3xl shadow-2xl border overflow-hidden ${"dark"===i?"bg-gray-900/50 border-gray-700/50":"bg-white/50 border-gray-200/50"} backdrop-blur-xl p-8`,children:r.jsx(S,{mode:"wait",children:(()=>{switch($){case"profile":return r.jsxs(k.div,{variants:re,initial:"hidden",animate:"visible",exit:"exit",className:"space-y-8",children:[r.jsx("div",{className:`p-8 rounded-3xl border ${"dark"===i?"bg-gray-800/50 border-gray-700/50":"bg-white/50 border-gray-200/50"} backdrop-blur-xl`,children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-6 md:space-y-0 md:space-x-8",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-32 h-32 rounded-3xl flex items-center justify-center text-4xl font-bold shadow-2xl "+("dark"===i?"bg-gradient-to-br from-blue-600 to-purple-600 text-white":"bg-gradient-to-br from-blue-500 to-purple-500 text-white"),children:Y.username.charAt(0).toUpperCase()}),r.jsx(k.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"absolute -bottom-2 -right-2 p-3 bg-blue-600 rounded-2xl text-white hover:bg-blue-700 transition-colors shadow-lg",children:r.jsx(y,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-1",children:A?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("input",{type:"text",value:O.username,onChange:e=>ae("username",e.target.value),className:"text-3xl font-bold bg-transparent border-b-2 focus:outline-none transition-colors "+(R.username?"border-red-500 text-red-500":"dark"===i?"border-gray-600 text-white focus:border-blue-500":"border-gray-300 text-gray-900 focus:border-blue-500"),placeholder:"Enter username"}),R.username&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:R.username})]}),r.jsxs("div",{children:[r.jsx("input",{type:"email",value:O.email,onChange:e=>ae("email",e.target.value),className:"text-lg bg-transparent border-b focus:outline-none transition-colors w-full "+(R.email?"border-red-500 text-red-500":"dark"===i?"border-gray-600 text-gray-400 focus:border-blue-500":"border-gray-300 text-gray-600 focus:border-blue-500"),placeholder:"Enter email"}),R.email&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:R.email})]}),r.jsx("textarea",{value:O.bio,onChange:e=>ae("bio",e.target.value),className:"w-full bg-transparent border rounded-lg p-3 focus:outline-none transition-colors resize-none "+("dark"===i?"border-gray-600 text-gray-300 focus:border-blue-500":"border-gray-300 text-gray-700 focus:border-blue-500"),rows:"3",placeholder:"Tell us about yourself..."})]}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h2",{className:"text-3xl font-bold "+("dark"===i?"text-white":"text-gray-900"),children:Y.username}),Y.isVerified&&r.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1 bg-green-100 dark:bg-green-900/30 rounded-full",children:[r.jsx(d,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{className:"text-green-600 text-sm font-medium",children:"Verified"})]})]}),r.jsx("p",{className:"text-lg mb-3 "+("dark"===i?"text-gray-400":"text-gray-600"),children:Y.email}),r.jsx("p",{className:"text-base leading-relaxed "+("dark"===i?"text-gray-300":"text-gray-700"),children:Y.bio}),r.jsxs("div",{className:"flex items-center space-x-4 mt-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(g,{className:"w-5 h-5 text-blue-500"}),r.jsxs("span",{className:"text-sm "+("dark"===i?"text-gray-400":"text-gray-600"),children:["Joined ",Y.joinDate]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(p,{className:"w-5 h-5 text-yellow-500"}),r.jsxs("span",{className:"text-sm "+("dark"===i?"text-gray-400":"text-gray-600"),children:[Y.subscription," Plan"]})]})]})]})}),r.jsxs("div",{className:"flex flex-col space-y-3",children:[A?r.jsxs(r.Fragment,{children:[r.jsxs(k.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:X,disabled:L,className:"flex items-center space-x-2 px-6 py-3 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition-colors disabled:opacity-50",children:[L?r.jsx(k.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):r.jsx(f,{className:"w-5 h-5"}),r.jsx("span",{children:L?"Saving...":"Save"})]}),r.jsxs(k.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ee,className:"flex items-center space-x-2 px-6 py-3 bg-gray-500 text-white rounded-xl font-semibold hover:bg-gray-600 transition-colors",children:[r.jsx(w,{className:"w-5 h-5"}),r.jsx("span",{children:"Cancel"})]})]}):r.jsxs(k.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>E(!0),className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition-colors",children:[r.jsx(j,{className:"w-5 h-5"}),r.jsx("span",{children:"Edit Profile"})]}),("admin"===F?.role||"ADMIN"===F?.role)&&r.jsxs(k.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.href="/admin",className:"flex items-center space-x-2 px-6 py-3 bg-purple-600 text-white rounded-xl font-semibold hover:bg-purple-700 transition-colors",children:[r.jsx(c,{className:"w-5 h-5"}),r.jsx("span",{children:"Admin Panel"})]})]})]})}),r.jsxs("div",{className:"p-6 rounded-2xl border "+("dark"===i?"bg-gray-800/30 border-gray-700/50":"bg-gray-50/50 border-gray-200/50"),children:[r.jsx("h3",{className:"text-xl font-bold mb-4 "+("dark"===i?"text-white":"text-gray-900"),children:"Contact Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(v,{className:"w-5 h-5 text-blue-500"}),r.jsx("span",{className:"dark"===i?"text-gray-300":"text-gray-700",children:Y.email})]}),Y.phone&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(N,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"dark"===i?"text-gray-300":"text-gray-700",children:Y.phone})]})]})]})]});case"trading":return r.jsx(k.div,{variants:re,initial:"hidden",animate:"visible",exit:"exit",className:"space-y-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(Y.stats).map(([e,a],s)=>{const t={totalTrades:{icon:o,color:"text-blue-500",label:"Total Trades"},winRate:{icon:p,color:"text-green-500",label:"Win Rate"},totalPnL:{icon:h,color:"text-purple-500",label:"Total P&L"},avgReturn:{icon:o,color:"text-orange-500",label:"Avg Return"},riskScore:{icon:d,color:"text-yellow-500",label:"Risk Score"},activeDays:{icon:g,color:"text-indigo-500",label:"Active Days"}}[e],l=t?.icon||o;return r.jsxs(k.div,{variants:te,whileHover:{scale:1.02,y:-5},className:`p-6 rounded-2xl border ${"dark"===i?"bg-gray-800/50 border-gray-700/50":"bg-white/50 border-gray-200/50"} backdrop-blur-xl shadow-lg`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx(l,{className:`w-8 h-8 ${t?.color||"text-gray-500"}`}),r.jsx("span",{className:"text-2xl font-bold "+("dark"===i?"text-white":"text-gray-900"),children:a})]}),r.jsx("div",{className:"text-sm font-medium "+("dark"===i?"text-gray-400":"text-gray-600"),children:t?.label||e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())})]},e)})})});case"notifications":return r.jsxs(k.div,{variants:re,initial:"hidden",animate:"visible",exit:"exit",className:"space-y-6",children:[r.jsx("h3",{className:"text-2xl font-bold mb-6 "+("dark"===i?"text-white":"text-gray-900"),children:"Notification Preferences"}),r.jsx("div",{className:"space-y-4",children:Object.entries(J).map(([e,a])=>{const s={trade_alerts:{label:"Trade Execution Alerts",desc:"Get notified when trades are executed"},price_alerts:{label:"Price Movement Alerts",desc:"Alerts for significant price changes"},news_updates:{label:"Market News Updates",desc:"Latest market news and updates"},market_analysis:{label:"Market Analysis Reports",desc:"Daily and weekly analysis reports"},email_notifications:{label:"Email Notifications",desc:"Receive notifications via email"},push_notifications:{label:"Push Notifications",desc:"Browser push notifications"}}[e]||{label:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),desc:"Notification setting"};return r.jsxs(k.div,{whileHover:{scale:1.01},className:`flex items-center justify-between p-6 rounded-2xl border ${"dark"===i?"bg-gray-800/50 border-gray-700/50":"bg-white/50 border-gray-200/50"} backdrop-blur-xl`,children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold "+("dark"===i?"text-white":"text-gray-900"),children:s.label}),r.jsx("p",{className:"text-sm "+("dark"===i?"text-gray-400":"text-gray-600"),children:s.desc})]}),r.jsx(k.button,{whileTap:{scale:.95},onClick:()=>se(e),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(a?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"),children:r.jsx(k.span,{animate:{x:a?20:2},transition:{type:"spring",stiffness:500,damping:30},className:"inline-block h-4 w-4 transform rounded-full bg-white shadow-lg"})})]},e)})})]});case"security":return r.jsxs(k.div,{variants:re,initial:"hidden",animate:"visible",exit:"exit",className:"space-y-8",children:[r.jsx("h3",{className:"text-2xl font-bold mb-6 "+("dark"===i?"text-white":"text-gray-900"),children:"Security & Privacy"}),r.jsx("div",{className:`p-6 rounded-2xl border ${"dark"===i?"bg-gray-800/50 border-gray-700/50":"bg-white/50 border-gray-200/50"} backdrop-blur-xl`,children:r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(b,{className:"w-6 h-6 text-green-500"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold "+("dark"===i?"text-white":"text-gray-900"),children:"Two-Factor Authentication"}),r.jsx("p",{className:"text-sm "+("dark"===i?"text-gray-400":"text-gray-600"),children:"Add an extra layer of security to your account"})]})]}),r.jsx(k.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 rounded-lg font-medium transition-colors "+(V.twoFactorEnabled?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"),children:V.twoFactorEnabled?"Disable":"Enable"})]})}),r.jsxs("div",{className:`p-6 rounded-2xl border ${"dark"===i?"bg-gray-800/50 border-gray-700/50":"bg-white/50 border-gray-200/50"} backdrop-blur-xl`,children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(u,{className:"w-6 h-6 text-blue-500"}),r.jsx("h4",{className:"text-lg font-semibold "+("dark"===i?"text-white":"text-gray-900"),children:"Change Password"})]}),r.jsxs("form",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 "+("dark"===i?"text-gray-300":"text-gray-700"),children:"Current Password"}),r.jsx("input",{type:"password",className:`w-full p-3 rounded-lg border transition-colors ${"dark"===i?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,placeholder:"Enter current password"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 "+("dark"===i?"text-gray-300":"text-gray-700"),children:"New Password"}),r.jsx("input",{type:"password",className:`w-full p-3 rounded-lg border transition-colors ${"dark"===i?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,placeholder:"Enter new password"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 "+("dark"===i?"text-gray-300":"text-gray-700"),children:"Confirm New Password"}),r.jsx("input",{type:"password",className:`w-full p-3 rounded-lg border transition-colors ${"dark"===i?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,placeholder:"Confirm new password"})]}),r.jsx(k.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Update Password"})]})]})]});default:return r.jsx(k.div,{variants:re,initial:"hidden",animate:"visible",exit:"exit",className:"text-center py-16 "+("dark"===i?"text-gray-400":"text-gray-600"),children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"w-24 h-24 mx-auto rounded-full flex items-center justify-center "+("dark"===i?"bg-gray-800":"bg-gray-100"),children:r.jsx(c,{className:"w-12 h-12"})}),r.jsx("h3",{className:"text-xl font-semibold",children:"Coming Soon"}),r.jsx("p",{children:"This feature is under development and will be available soon."})]})})}})()})}),r.jsx(k.div,{variants:te,className:"mt-8",children:r.jsxs("div",{className:`flex items-start space-x-4 p-6 rounded-2xl border ${"dark"===i?"bg-blue-900/20 border-blue-500/30 text-blue-200":"bg-blue-50 border-blue-200 text-blue-800"} backdrop-blur-xl`,children:[r.jsx(m,{className:"w-6 h-6 text-blue-500 flex-shrink-0 mt-0.5"}),r.jsx("div",{children:r.jsxs("p",{className:"text-sm leading-relaxed",children:[r.jsx("span",{className:"font-semibold",children:"Security Notice:"})," Your profile data is encrypted and stored securely. We follow industry-standard security practices to protect your personal and trading information."]})})]})})]})]})};export{$ as default};
