import{aa as e,a8 as s,r as a,j as t,at as r}from"./vendor-61R5RNdl.js";import{e as l,f as i,b as n,o as d}from"./index-DpMGw747.js";import{B as c,C as o}from"./Card-DOfmhbZR.js";import{b as x,a as g,H as m,ae as h,F as p,a3 as b}from"./ui-icons-BuGoXOaE.js";import"./charts-BVf48S-_.js";import"./firebase-Dm1Xd1Ru.js";import"./animations-9kslzpSP.js";const y="/screeners",j=async({symbol:e,expiry:s,minOiChangePct:a=5,minVolume:t=1e3})=>(await l.get(`${y}/scalp/${e}/${s}`,{params:{min_oi_change_pct:a,min_volume:t}})).data,u=async({symbol:e,expiry:s,minOiBuildup:a=1e5})=>(await l.get(`${y}/positional/${e}/${s}`,{params:{min_oi_buildup:a}})).data,f=async({symbol:e,expiry:s})=>(await l.get(`${y}/sr/${e}/${s}`)).data,N=a.memo(({signal:e})=>{const s="BUY"===e.signal;return t.jsxs(o,{variant:"glass",className:"p-4 hover:shadow-lg transition-shadow",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold "+("CE"===e.option_type?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:e.option_type}),t.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:e.strike})]}),t.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-bold "+(s?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.signal})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.reason}),t.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[t.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-2",children:[t.jsx("div",{className:"text-gray-500",children:"Entry"}),t.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:["₹",e.entry_price.toFixed(2)]})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-2",children:[t.jsx("div",{className:"text-green-600",children:"Target"}),t.jsxs("div",{className:"font-semibold text-green-700 dark:text-green-400",children:["₹",e.target_price.toFixed(2)]})]}),t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-2",children:[t.jsx("div",{className:"text-red-600",children:"SL"}),t.jsxs("div",{className:"font-semibold text-red-700 dark:text-red-400",children:["₹",e.stop_loss.toFixed(2)]})]})]}),t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[t.jsx("span",{className:"text-gray-500",children:"Signal Strength"}),t.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[e.strength.toFixed(0),"%"]})]}),t.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full transition-all "+(e.strength>70?"bg-green-500":e.strength>40?"bg-yellow-500":"bg-red-500"),style:{width:`${e.strength}%`}})})]})]})});N.displayName="SignalCard";const v=[{id:"scalp",label:"Scalp",icon:x,description:"Short-term trades (5-15 min)",color:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900/30"},{id:"positional",label:"Positional",icon:g,description:"Multi-day positions",color:"text-purple-500",bgColor:"bg-purple-100 dark:bg-purple-900/30"},{id:"sr",label:"S/R OC",icon:m,description:"Support/Resistance levels",color:"text-orange-500",bgColor:"bg-orange-100 dark:bg-orange-900/30"}],k=()=>{const l=e(i),x=s(),g=e(n),m=e(d),[y,k]=a.useState("scalp"),[w,S]=a.useState([]),[$,C]=a.useState(!1),[_,F]=a.useState(null),[E,B]=a.useState(null),L=a.useCallback(async e=>{if(m){C(!0),F(null);try{let s;switch(e){case"scalp":s=await j({symbol:g,expiry:m});break;case"positional":s=await u({symbol:g,expiry:m});break;case"sr":s=await f({symbol:g,expiry:m});break;default:s={signals:[]}}S(s.signals||[]),B(new Date)}catch(s){F(s.message||"Failed to load screener data")}finally{C(!1)}}},[g,m]);if(a.useEffect(()=>{m&&L(y)},[y,m,L]),a.useEffect(()=>{if(!m)return;const e=setInterval(()=>{L(y)},6e4);return()=>clearInterval(e)},[y,m,L]),!l)return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-4",children:[t.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:"Authentication Required"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please log in to use Screeners."}),t.jsx(c,{onClick:()=>x("/login"),children:"Login Now"})]});const P=v.find(e=>e.id===y),O=w.filter(e=>"BUY"===e.signal).length,R=w.filter(e=>"SELL"===e.signal).length;return t.jsxs(t.Fragment,{children:[t.jsxs(r,{children:[t.jsx("title",{children:"Screeners | Stockify"}),t.jsx("meta",{name:"description",content:"Option chain screeners for Scalp, Positional, and S/R trading"})]}),t.jsxs("div",{className:"w-full px-4 py-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Screeners"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Find trading opportunities based on option chain analysis"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[E&&t.jsxs("span",{className:"text-xs text-gray-400",children:["Updated ",E.toLocaleTimeString()]}),t.jsx("button",{onClick:()=>L(y),disabled:$,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:t.jsx(h,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 "+($?"animate-spin":"")})})]})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg font-medium",children:g}),t.jsxs("span",{className:"text-gray-500",children:["Expiry: ",m||"Not selected"]})]}),t.jsx("div",{className:"flex gap-2",children:v.map(e=>{const s=e.icon,a=y===e.id;return t.jsxs("button",{onClick:()=>k(e.id),className:"flex-1 flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all "+(a?`${e.bgColor} border-current ${e.color}`:"border-transparent bg-gray-100 dark:bg-gray-800 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"),children:[t.jsx(s,{className:"w-6 h-6"}),t.jsx("span",{className:"font-semibold",children:e.label}),t.jsx("span",{className:"text-xs opacity-75",children:e.description})]},e.id)})}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs(o,{variant:"glass",className:"p-4 text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:w.length}),t.jsx("div",{className:"text-sm text-gray-500",children:"Total Signals"})]}),t.jsxs(o,{variant:"glass",className:"p-4 text-center bg-green-50 dark:bg-green-900/10",children:[t.jsxs("div",{className:"text-3xl font-bold text-green-600 flex items-center justify-center gap-2",children:[t.jsx(p,{className:"w-6 h-6"}),O]}),t.jsx("div",{className:"text-sm text-green-600",children:"Buy Signals"})]}),t.jsxs(o,{variant:"glass",className:"p-4 text-center bg-red-50 dark:bg-red-900/10",children:[t.jsxs("div",{className:"text-3xl font-bold text-red-600 flex items-center justify-center gap-2",children:[t.jsx(b,{className:"w-6 h-6"}),R]}),t.jsx("div",{className:"text-sm text-red-600",children:"Sell Signals"})]})]}),_&&t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 text-red-700 dark:text-red-400",children:_}),$&&t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx(h,{className:"w-8 h-8 animate-spin text-blue-500"}),t.jsx("span",{className:"ml-2 text-gray-500",children:"Scanning for signals..."})]}),!$&&w.length>0&&t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map((e,s)=>t.jsx(N,{signal:e},`${e.strike}-${e.option_type}-${s}`))}),!$&&0===w.length&&!_&&t.jsxs(o,{variant:"glass",className:"p-12 text-center",children:[t.jsx(P.icon,{className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No Signals Found"}),t.jsxs("p",{className:"text-gray-500",children:["No ",P?.label," trading signals detected at this time.",t.jsx("br",{}),"Signals refresh automatically every minute."]})]}),t.jsxs("div",{className:"text-xs text-gray-400 text-center mt-8 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[t.jsx("strong",{children:"Disclaimer:"})," These signals are for educational purposes only. Always do your own analysis before trading. Past performance is not indicative of future results."]})]})]})};export{k as default};
