import{r as i,j as e}from"./animations-CCQynVHD.js";import{e as b,f as R,u as _,b as A,o as B,H as L}from"./index-DUqnRfh4.js";import{u as h}from"./redux-CHwIDTp6.js";import{B as T,C as g}from"./Card-wJW6FCvb.js";import{b as I,a as P,H as U,a5 as N,F as H,W as D}from"./icons-1ld_-Ybk.js";import"./network-htDwveLI.js";import"./firebase-UuSzqDeJ.js";const u="/screeners",O=async({symbol:t,expiry:n,minOiChangePct:l=5,minVolume:a=1e3})=>(await b.get(`${u}/scalp/${t}/${n}`,{params:{min_oi_change_pct:l,min_volume:a}})).data,Y=async({symbol:t,expiry:n,minOiBuildup:l=1e5})=>(await b.get(`${u}/positional/${t}/${n}`,{params:{min_oi_buildup:l}})).data,q=async({symbol:t,expiry:n})=>(await b.get(`${u}/sr/${t}/${n}`)).data,S=i.memo(({signal:t})=>{const n=t.signal==="BUY";return e.jsxs(g,{variant:"glass",className:"p-4 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${t.option_type==="CE"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:t.option_type}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t.strike})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-bold ${n?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:t.signal})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:t.reason}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-2",children:[e.jsx("div",{className:"text-gray-500",children:"Entry"}),e.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:["₹",t.entry_price.toFixed(2)]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-2",children:[e.jsx("div",{className:"text-green-600",children:"Target"}),e.jsxs("div",{className:"font-semibold text-green-700 dark:text-green-400",children:["₹",t.target_price.toFixed(2)]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-2",children:[e.jsx("div",{className:"text-red-600",children:"SL"}),e.jsxs("div",{className:"font-semibold text-red-700 dark:text-red-400",children:["₹",t.stop_loss.toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-500",children:"Signal Strength"}),e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[t.strength.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${t.strength>70?"bg-green-500":t.strength>40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${t.strength}%`}})})]})]})});S.displayName="SignalCard";const v=[{id:"scalp",label:"Scalp",icon:I,description:"Short-term trades (5-15 min)",color:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900/30"},{id:"positional",label:"Positional",icon:P,description:"Multi-day positions",color:"text-purple-500",bgColor:"bg-purple-100 dark:bg-purple-900/30"},{id:"sr",label:"S/R OC",icon:U,description:"Support/Resistance levels",color:"text-orange-500",bgColor:"bg-orange-100 dark:bg-orange-900/30"}],V=()=>{const t=h(R),n=_(),l=h(A),a=h(B),[d,k]=i.useState("scalp"),[c,w]=i.useState([]),[o,y]=i.useState(!1),[p,j]=i.useState(null),[f,$]=i.useState(null),x=i.useCallback(async s=>{if(a){y(!0),j(null);try{let r;switch(s){case"scalp":r=await O({symbol:l,expiry:a});break;case"positional":r=await Y({symbol:l,expiry:a});break;case"sr":r=await q({symbol:l,expiry:a});break;default:r={signals:[]}}w(r.signals||[]),$(new Date)}catch(r){console.error("Failed to fetch signals:",r),j(r.message||"Failed to load screener data")}finally{y(!1)}}},[l,a]);if(i.useEffect(()=>{a&&x(d)},[d,a,x]),i.useEffect(()=>{if(!a)return;const s=setInterval(()=>{x(d)},6e4);return()=>clearInterval(s)},[d,a,x]),!t)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please log in to use Screeners."}),e.jsx(T,{onClick:()=>n("/login"),children:"Login Now"})]});const m=v.find(s=>s.id===d),E=c.filter(s=>s.signal==="BUY").length,C=c.filter(s=>s.signal==="SELL").length;return e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsx("title",{children:"Screeners | Stockify"}),e.jsx("meta",{name:"description",content:"Option chain screeners for Scalp, Positional, and S/R trading"})]}),e.jsxs("div",{className:"w-full px-4 py-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Screeners"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Find trading opportunities based on option chain analysis"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[f&&e.jsxs("span",{className:"text-xs text-gray-400",children:["Updated ",f.toLocaleTimeString()]}),e.jsx("button",{onClick:()=>x(d),disabled:o,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:e.jsx(N,{className:`w-5 h-5 text-gray-600 dark:text-gray-400 ${o?"animate-spin":""}`})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg font-medium",children:l}),e.jsxs("span",{className:"text-gray-500",children:["Expiry: ",a||"Not selected"]})]}),e.jsx("div",{className:"flex gap-2",children:v.map(s=>{const r=s.icon,F=d===s.id;return e.jsxs("button",{onClick:()=>k(s.id),className:`flex-1 flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all ${F?`${s.bgColor} border-current ${s.color}`:"border-transparent bg-gray-100 dark:bg-gray-800 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(r,{className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold",children:s.label}),e.jsx("span",{className:"text-xs opacity-75",children:s.description})]},s.id)})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(g,{variant:"glass",className:"p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:c.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Signals"})]}),e.jsxs(g,{variant:"glass",className:"p-4 text-center bg-green-50 dark:bg-green-900/10",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600 flex items-center justify-center gap-2",children:[e.jsx(H,{className:"w-6 h-6"}),E]}),e.jsx("div",{className:"text-sm text-green-600",children:"Buy Signals"})]}),e.jsxs(g,{variant:"glass",className:"p-4 text-center bg-red-50 dark:bg-red-900/10",children:[e.jsxs("div",{className:"text-3xl font-bold text-red-600 flex items-center justify-center gap-2",children:[e.jsx(D,{className:"w-6 h-6"}),C]}),e.jsx("div",{className:"text-sm text-red-600",children:"Sell Signals"})]})]}),p&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 text-red-700 dark:text-red-400",children:p}),o&&e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(N,{className:"w-8 h-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2 text-gray-500",children:"Scanning for signals..."})]}),!o&&c.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map((s,r)=>e.jsx(S,{signal:s},`${s.strike}-${s.option_type}-${r}`))}),!o&&c.length===0&&!p&&e.jsxs(g,{variant:"glass",className:"p-12 text-center",children:[e.jsx(m.icon,{className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No Signals Found"}),e.jsxs("p",{className:"text-gray-500",children:["No ",m==null?void 0:m.label," trading signals detected at this time.",e.jsx("br",{}),"Signals refresh automatically every minute."]})]}),e.jsxs("div",{className:"text-xs text-gray-400 text-center mt-8 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx("strong",{children:"Disclaimer:"})," These signals are for educational purposes only. Always do your own analysis before trading. Past performance is not indicative of future results."]})]})]})};export{V as default};
//# sourceMappingURL=Screeners-DSwu1Ism.js.map
