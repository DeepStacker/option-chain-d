# Development Dockerfile with Hot Reload
# Uses Vite dev server with file watching for instant updates

FROM node:20-alpine

WORKDIR /app

# Install dependencies first (cached layer)
COPY package*.json ./
RUN npm install

# Source files will be mounted as volume for hot reload
# Don't copy source - it will be volume-mounted

EXPOSE 5173

# Vite dev server with host binding and polling for Docker
# --host 0.0.0.0 allows external connections
# CHOKIDAR_USEPOLLING enables file watching in Docker
ENV CHOKIDAR_USEPOLLING=true
ENV WATCHPACK_POLLING=true

CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0"]
